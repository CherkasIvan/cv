"use strict";(self.webpackChunkcv=self.webpackChunkcv||[]).push([[792],{463:(Cn,nt,x)=>{x.d(nt,{$1:()=>ui,$w:()=>eu,AU:()=>kl,C3:()=>Wu,CA:()=>Sd,D8:()=>Kd,Di:()=>ji,EO:()=>Se,EZ:()=>pa,FD:()=>E,GV:()=>Hu,HM:()=>qt,JK:()=>ec,Jt:()=>qc,KR:()=>Fa,Kd:()=>oa,M4:()=>Nh,Mq:()=>Ru,O5:()=>Qd,P:()=>Ec,SF:()=>Pe,TF:()=>Nl,TS:()=>fh,U0:()=>wu,V0:()=>qd,VC:()=>Za,VJ:()=>zu,VR:()=>Su,X1:()=>Ad,YL:()=>wa,Zy:()=>dd,_O:()=>xh,c4:()=>Ku,eO:()=>cf,hZ:()=>Zl,iz:()=>tu,j2:()=>Io,jf:()=>Kc,kT:()=>Ls,og:()=>Gd,pk:()=>Dr,rf:()=>B,t2:()=>Xs,wu:()=>dh,yo:()=>Gc,zm:()=>Jl});var b=x(4523),$=x(8742),q=x(1362),H=x(1076),Ee=x(8041);const Fe="@firebase/database";let Ne="";function Pe(y){Ne=y}class K{constructor(h){this.domStorage_=h,this.prefix_="firebase:"}set(h,f){null==f?this.domStorage_.removeItem(this.prefixedName_(h)):this.domStorage_.setItem(this.prefixedName_(h),(0,H.As)(f))}get(h){const f=this.domStorage_.getItem(this.prefixedName_(h));return null==f?null:(0,H.$L)(f)}remove(h){this.domStorage_.removeItem(this.prefixedName_(h))}prefixedName_(h){return this.prefix_+h}toString(){return this.domStorage_.toString()}}class Ae{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(h,f){null==f?delete this.cache_[h]:this.cache_[h]=f}get(h){return(0,H.gR)(this.cache_,h)?this.cache_[h]:null}remove(h){delete this.cache_[h]}}const He=function(y){try{if(typeof window<"u"&&typeof window[y]<"u"){const h=window[y];return h.setItem("firebase:sentinel","cache"),h.removeItem("firebase:sentinel"),new K(h)}}catch{}return new Ae},ot=He("localStorage"),tt=He("sessionStorage"),Rt=new Ee.Vy("@firebase/database"),Ft=function(){let y=1;return function(){return y++}}(),Gt=function(y){const h=(0,H.kj)(y),f=new H.gz;f.update(h);const T=f.digest();return H.K3.encodeByteArray(T)},Pt=function(...y){let h="";for(let f=0;f<y.length;f++){const T=y[f];Array.isArray(T)||T&&"object"==typeof T&&"number"==typeof T.length?h+=Pt.apply(null,T):h+="object"==typeof T?(0,H.As)(T):T,h+=" "}return h};let hn=null,Et=!0;const kt=function(y,h){(0,H.vA)(!h||!0===y||!1===y,"Can't turn on custom loggers persistently."),!0===y?(Rt.logLevel=Ee.$b.VERBOSE,hn=Rt.log.bind(Rt),h&&tt.set("logging_enabled",!0)):"function"==typeof y?hn=y:(hn=null,tt.remove("logging_enabled"))},Ke=function(...y){if(!0===Et&&(Et=!1,null===hn&&!0===tt.get("logging_enabled")&&kt(!0)),hn){const h=Pt.apply(null,y);hn(h)}},Qe=function(y){return function(...h){Ke(y,...h)}},ct=function(...y){const h="FIREBASE INTERNAL ERROR: "+Pt(...y);Rt.error(h)},Ze=function(...y){const h=`FIREBASE FATAL ERROR: ${Pt(...y)}`;throw Rt.error(h),new Error(h)},Ge=function(...y){const h="FIREBASE WARNING: "+Pt(...y);Rt.warn(h)},ve=function(y){return"number"==typeof y&&(y!=y||y===Number.POSITIVE_INFINITY||y===Number.NEGATIVE_INFINITY)},Jt="[MIN_NAME]",Nt="[MAX_NAME]",Yt=function(y,h){if(y===h)return 0;if(y===Jt||h===Nt)return-1;if(h===Jt||y===Nt)return 1;{const f=hr(y),T=hr(h);return null!==f?null!==T?f-T==0?y.length-h.length:f-T:-1:null!==T?1:y<h?-1:1}},an=function(y,h){return y===h?0:y<h?-1:1},$t=function(y,h){if(h&&y in h)return h[y];throw new Error("Missing required key ("+y+") in object: "+(0,H.As)(h))},ye=function(y){if("object"!=typeof y||null===y)return(0,H.As)(y);const h=[];for(const T in y)h.push(T);h.sort();let f="{";for(let T=0;T<h.length;T++)0!==T&&(f+=","),f+=(0,H.As)(h[T]),f+=":",f+=ye(y[h[T]]);return f+="}",f},Ye=function(y,h){const f=y.length;if(f<=h)return[y];const T=[];for(let V=0;V<f;V+=h)T.push(y.substring(V,V+h>f?f:V+h));return T};function Ht(y,h){for(const f in y)y.hasOwnProperty(f)&&h(f,y[f])}const et=function(y){(0,H.vA)(!ve(y),"Invalid JSON number");const T=1023;let V,Z,se,Me,Je;0===y?(Z=0,se=0,V=1/y==-1/0?1:0):(V=y<0,(y=Math.abs(y))>=Math.pow(2,1-T)?(Me=Math.min(Math.floor(Math.log(y)/Math.LN2),T),Z=Me+T,se=Math.round(y*Math.pow(2,52-Me)-Math.pow(2,52))):(Z=0,se=Math.round(y/Math.pow(2,-1074))));const pt=[];for(Je=52;Je;Je-=1)pt.push(se%2?1:0),se=Math.floor(se/2);for(Je=11;Je;Je-=1)pt.push(Z%2?1:0),Z=Math.floor(Z/2);pt.push(V?1:0),pt.reverse();const _n=pt.join("");let Tn="";for(Je=0;Je<64;Je+=8){let Ln=parseInt(_n.substr(Je,8),2).toString(16);1===Ln.length&&(Ln="0"+Ln),Tn+=Ln}return Tn.toLowerCase()},Ct=new RegExp("^-?(0*)\\d{1,10}$"),hr=function(y){if(Ct.test(y)){const h=Number(y);if(h>=-2147483648&&h<=2147483647)return h}return null},Cr=function(y){try{y()}catch(h){setTimeout(()=>{throw Ge("Exception was thrown by user callback.",h.stack||""),h},Math.floor(0))}},fr=function(y,h){const f=setTimeout(y,h);return"number"==typeof f&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(f):"object"==typeof f&&f.unref&&f.unref(),f};class Jn{constructor(h,f){this.appName_=h,this.appCheckProvider=f,this.appCheck=f?.getImmediate({optional:!0}),this.appCheck||f?.get().then(T=>this.appCheck=T)}getToken(h){return this.appCheck?this.appCheck.getToken(h):new Promise((f,T)=>{setTimeout(()=>{this.appCheck?this.getToken(h).then(f,T):f(null)},0)})}addTokenChangeListener(h){var f;null===(f=this.appCheckProvider)||void 0===f||f.get().then(T=>T.addTokenListener(h))}notifyForInvalidToken(){Ge(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class Rr{constructor(h,f,T){this.appName_=h,this.firebaseOptions_=f,this.authProvider_=T,this.auth_=null,this.auth_=T.getImmediate({optional:!0}),this.auth_||T.onInit(V=>this.auth_=V)}getToken(h){return this.auth_?this.auth_.getToken(h).catch(f=>f&&"auth/token-not-initialized"===f.code?(Ke("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(f)):new Promise((f,T)=>{setTimeout(()=>{this.auth_?this.getToken(h).then(f,T):f(null)},0)})}addTokenChangeListener(h){this.auth_?this.auth_.addAuthTokenListener(h):this.authProvider_.get().then(f=>f.addAuthTokenListener(h))}removeTokenChangeListener(h){this.authProvider_.get().then(f=>f.removeAuthTokenListener(h))}notifyForInvalidToken(){let h='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';h+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Ge(h)}}let vr=(()=>{class y{constructor(f){this.accessToken=f}getToken(f){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(f){f(this.accessToken)}removeTokenChangeListener(f){}notifyForInvalidToken(){}}return y.OWNER="owner",y})();const Xe=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,mn="websocket",Ut="long_polling";class wt{constructor(h,f,T,V,Z=!1,se="",Me=!1,Je=!1){this.secure=f,this.namespace=T,this.webSocketOnly=V,this.nodeAdmin=Z,this.persistenceKey=se,this.includeNamespaceInQueryParams=Me,this.isUsingEmulator=Je,this._host=h.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=ot.get("host:"+h)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(h){h!==this.internalHost&&(this.internalHost=h,this.isCacheableHost()&&ot.set("host:"+this._host,this.internalHost))}toString(){let h=this.toURLString();return this.persistenceKey&&(h+="<"+this.persistenceKey+">"),h}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function _t(y,h,f){let T;if((0,H.vA)("string"==typeof h,"typeof type must == string"),(0,H.vA)("object"==typeof f,"typeof params must == object"),h===mn)T=(y.secure?"wss://":"ws://")+y.internalHost+"/.ws?";else{if(h!==Ut)throw new Error("Unknown connection type: "+h);T=(y.secure?"https://":"http://")+y.internalHost+"/.lp?"}(function $e(y){return y.host!==y.internalHost||y.isCustomHost()||y.includeNamespaceInQueryParams})(y)&&(f.ns=y.namespace);const V=[];return Ht(f,(Z,se)=>{V.push(Z+"="+se)}),T+V.join("&")}class gn{constructor(){this.counters_={}}incrementCounter(h,f=1){(0,H.gR)(this.counters_,h)||(this.counters_[h]=0),this.counters_[h]+=f}get(){return(0,H.A4)(this.counters_)}}const An={},ir={};function yr(y){const h=y.toString();return An[h]||(An[h]=new gn),An[h]}class mr{constructor(h){this.onMessage_=h,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(h,f){this.closeAfterResponse=h,this.onClose=f,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(h,f){for(this.pendingResponses[h]=f;this.pendingResponses[this.currentResponseNum];){const T=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let V=0;V<T.length;++V)T[V]&&Cr(()=>{this.onMessage_(T[V])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class lt{constructor(h,f,T,V,Z,se,Me){this.connId=h,this.repoInfo=f,this.applicationId=T,this.appCheckToken=V,this.authToken=Z,this.transportSessionId=se,this.lastSessionId=Me,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Qe(h),this.stats_=yr(f),this.urlFn=Je=>(this.appCheckToken&&(Je.ac=this.appCheckToken),_t(f,Ut,Je))}open(h,f){this.curSegmentNum=0,this.onDisconnect_=f,this.myPacketOrderer=new mr(h),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(y){if((0,H.$g)()||"complete"===document.readyState)y();else{let h=!1;const f=function(){document.body?h||(h=!0,y()):setTimeout(f,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",f,!1),window.addEventListener("load",f,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&f()}),window.attachEvent("onload",f))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new On((...Z)=>{const[se,Me,Je,pt,_n]=Z;if(this.incrementIncomingBytes_(Z),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===se)this.id=Me,this.password=Je;else{if("close"!==se)throw new Error("Unrecognized command received: "+se);Me?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(Me,()=>{this.onClosed_()})):this.onClosed_()}},(...Z)=>{const[se,Me]=Z;this.incrementIncomingBytes_(Z),this.myPacketOrderer.handleResponse(se,Me)},()=>{this.onClosed_()},this.urlFn);const T={start:"t"};T.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(T.cb=this.scriptTagHolder.uniqueCallbackIdentifier),T.v="5",this.transportSessionId&&(T.s=this.transportSessionId),this.lastSessionId&&(T.ls=this.lastSessionId),this.applicationId&&(T.p=this.applicationId),this.appCheckToken&&(T.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&Xe.test(location.hostname)&&(T.r="f");const V=this.urlFn(T);this.log_("Connecting via long-poll to "+V),this.scriptTagHolder.addTag(V,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){lt.forceAllow_=!0}static forceDisallow(){lt.forceDisallow_=!0}static isAvailable(){return!((0,H.$g)()||!lt.forceAllow_&&(lt.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(h){const f=(0,H.As)(h);this.bytesSent+=f.length,this.stats_.incrementCounter("bytes_sent",f.length);const T=(0,H.KA)(f),V=Ye(T,1840);for(let Z=0;Z<V.length;Z++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,V.length,V[Z]),this.curSegmentNum++}addDisconnectPingFrame(h,f){if((0,H.$g)())return;this.myDisconnFrame=document.createElement("iframe");const T={dframe:"t"};T.id=h,T.pw=f,this.myDisconnFrame.src=this.urlFn(T),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(h){const f=(0,H.As)(h).length;this.bytesReceived+=f,this.stats_.incrementCounter("bytes_received",f)}}class On{constructor(h,f,T,V){if(this.onDisconnect=T,this.urlFn=V,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,H.$g)())this.commandCB=h,this.onMessageCB=f;else{this.uniqueCallbackIdentifier=Ft(),window["pLPCommand"+this.uniqueCallbackIdentifier]=h,window["pRTLPCB"+this.uniqueCallbackIdentifier]=f,this.myIFrame=On.createIFrame_();let Z="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(Z='<script>document.domain="'+document.domain+'";<\/script>');const se="<html><body>"+Z+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(se),this.myIFrame.doc.close()}catch(Me){Ke("frame writing exception"),Me.stack&&Ke(Me.stack),Ke(Me)}}}static createIFrame_(){const h=document.createElement("iframe");if(h.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(h);try{h.contentWindow.document||Ke("No IE domain setting required")}catch{const T=document.domain;h.src="javascript:void((function(){document.open();document.domain='"+T+"';document.close();})())"}return h.contentDocument?h.doc=h.contentDocument:h.contentWindow?h.doc=h.contentWindow.document:h.document&&(h.doc=h.document),h}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const h=this.onDisconnect;h&&(this.onDisconnect=null,h())}startLongPoll(h,f){for(this.myID=h,this.myPW=f,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const h={};h.id=this.myID,h.pw=this.myPW,h.ser=this.currentSerial;let f=this.urlFn(h),T="",V=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+T.length<=1870;){const se=this.pendingSegs.shift();T=T+"&seg"+V+"="+se.seg+"&ts"+V+"="+se.ts+"&d"+V+"="+se.d,V++}return f+=T,this.addLongPollTag_(f,this.currentSerial),!0}return!1}enqueueSegment(h,f,T){this.pendingSegs.push({seg:h,ts:f,d:T}),this.alive&&this.newRequest_()}addLongPollTag_(h,f){this.outstandingRequests.add(f);const T=()=>{this.outstandingRequests.delete(f),this.newRequest_()},V=setTimeout(T,Math.floor(25e3));this.addTag(h,()=>{clearTimeout(V),T()})}addTag(h,f){(0,H.$g)()?this.doNodeLongPoll(h,f):setTimeout(()=>{try{if(!this.sendNewPolls)return;const T=this.myIFrame.doc.createElement("script");T.type="text/javascript",T.async=!0,T.src=h,T.onload=T.onreadystatechange=function(){const V=T.readyState;(!V||"loaded"===V||"complete"===V)&&(T.onload=T.onreadystatechange=null,T.parentNode&&T.parentNode.removeChild(T),f())},T.onerror=()=>{Ke("Long-poll script failed to load: "+h),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(T)}catch{}},Math.floor(1))}}let bi=null;typeof MozWebSocket<"u"?bi=MozWebSocket:typeof WebSocket<"u"&&(bi=WebSocket);let Lr=(()=>{class y{constructor(f,T,V,Z,se,Me,Je){this.connId=f,this.applicationId=V,this.appCheckToken=Z,this.authToken=se,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Qe(this.connId),this.stats_=yr(T),this.connURL=y.connectionURL_(T,Me,Je,Z,V),this.nodeAdmin=T.nodeAdmin}static connectionURL_(f,T,V,Z,se){const Me={v:"5"};return!(0,H.$g)()&&typeof location<"u"&&location.hostname&&Xe.test(location.hostname)&&(Me.r="f"),T&&(Me.s=T),V&&(Me.ls=V),Z&&(Me.ac=Z),se&&(Me.p=se),_t(f,mn,Me)}open(f,T){this.onDisconnect=T,this.onMessage=f,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,ot.set("previous_websocket_failure",!0);try{let V;if((0,H.$g)()){V={headers:{"User-Agent":`Firebase/5/${Ne}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(V.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(V.headers["X-Firebase-AppCheck"]=this.appCheckToken);const se=process.env,Me=0===this.connURL.indexOf("wss://")?se.HTTPS_PROXY||se.https_proxy:se.HTTP_PROXY||se.http_proxy;Me&&(V.proxy={origin:Me})}this.mySock=new bi(this.connURL,[],V)}catch(V){this.log_("Error instantiating WebSocket.");const Z=V.message||V.data;return Z&&this.log_(Z),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=V=>{this.handleIncomingFrame(V)},this.mySock.onerror=V=>{this.log_("WebSocket error.  Closing connection.");const Z=V.message||V.data;Z&&this.log_(Z),this.onClosed_()}}start(){}static forceDisallow(){y.forceDisallow_=!0}static isAvailable(){let f=!1;if(typeof navigator<"u"&&navigator.userAgent){const V=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);V&&V.length>1&&parseFloat(V[1])<4.4&&(f=!0)}return!f&&null!==bi&&!y.forceDisallow_}static previouslyFailed(){return ot.isInMemoryStorage||!0===ot.get("previous_websocket_failure")}markConnectionHealthy(){ot.remove("previous_websocket_failure")}appendFrame_(f){if(this.frames.push(f),this.frames.length===this.totalFrames){const T=this.frames.join("");this.frames=null;const V=(0,H.$L)(T);this.onMessage(V)}}handleNewFrameCount_(f){this.totalFrames=f,this.frames=[]}extractFrameCount_(f){if((0,H.vA)(null===this.frames,"We already have a frame buffer"),f.length<=6){const T=Number(f);if(!isNaN(T))return this.handleNewFrameCount_(T),null}return this.handleNewFrameCount_(1),f}handleIncomingFrame(f){if(null===this.mySock)return;const T=f.data;if(this.bytesReceived+=T.length,this.stats_.incrementCounter("bytes_received",T.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(T);else{const V=this.extractFrameCount_(T);null!==V&&this.appendFrame_(V)}}send(f){this.resetKeepAlive();const T=(0,H.As)(f);this.bytesSent+=T.length,this.stats_.incrementCounter("bytes_sent",T.length);const V=Ye(T,16384);V.length>1&&this.sendString_(String(V.length));for(let Z=0;Z<V.length;Z++)this.sendString_(V[Z])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(f){try{this.mySock.send(f)}catch(T){this.log_("Exception thrown from WebSocket.send():",T.message||T.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return y.responsesRequiredToBeHealthy=2,y.healthyTimeout=3e4,y})(),hi=(()=>{class y{constructor(f){this.initTransports_(f)}static get ALL_TRANSPORTS(){return[lt,Lr]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(f){const T=Lr&&Lr.isAvailable();let V=T&&!Lr.previouslyFailed();if(f.webSocketOnly&&(T||Ge("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),V=!0),V)this.transports_=[Lr];else{const Z=this.transports_=[];for(const se of y.ALL_TRANSPORTS)se&&se.isAvailable()&&Z.push(se);y.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return y.globalTransportInitialized_=!1,y})();class Ue{constructor(h,f,T,V,Z,se,Me,Je,pt,_n){this.id=h,this.repoInfo_=f,this.applicationId_=T,this.appCheckToken_=V,this.authToken_=Z,this.onMessage_=se,this.onReady_=Me,this.onDisconnect_=Je,this.onKill_=pt,this.lastSessionId=_n,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Qe("c:"+this.id+":"),this.transportManager_=new hi(f),this.log_("Connection created"),this.start_()}start_(){const h=this.transportManager_.initialTransport();this.conn_=new h(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=h.responsesRequiredToBeHealthy||0;const f=this.connReceiver_(this.conn_),T=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(f,T)},Math.floor(0));const V=h.healthyTimeout||0;V>0&&(this.healthyTimeout_=fr(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(V)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(h){return f=>{h===this.conn_?this.onConnectionLost_(f):h===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(h){return f=>{2!==this.state_&&(h===this.rx_?this.onPrimaryMessageReceived_(f):h===this.secondaryConn_?this.onSecondaryMessageReceived_(f):this.log_("message on old connection"))}}sendRequest(h){this.sendData_({t:"d",d:h})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(h){if("t"in h){const f=h.t;"a"===f?this.upgradeIfSecondaryHealthy_():"r"===f?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===f&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(h){const f=$t("t",h),T=$t("d",h);if("c"===f)this.onSecondaryControl_(T);else{if("d"!==f)throw new Error("Unknown protocol layer: "+f);this.pendingDataMessages.push(T)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(h){const f=$t("t",h),T=$t("d",h);"c"===f?this.onControl_(T):"d"===f&&this.onDataMessage_(T)}onDataMessage_(h){this.onPrimaryResponse_(),this.onMessage_(h)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(h){const f=$t("t",h);if("d"in h){const T=h.d;if("h"===f){const V=Object.assign({},T);this.repoInfo_.isUsingEmulator&&(V.h=this.repoInfo_.host),this.onHandshake_(V)}else if("n"===f){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let V=0;V<this.pendingDataMessages.length;++V)this.onDataMessage_(this.pendingDataMessages[V]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===f?this.onConnectionShutdown_(T):"r"===f?this.onReset_(T):"e"===f?ct("Server Error: "+T):"o"===f?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):ct("Unknown control packet command: "+f)}}onHandshake_(h){const f=h.ts,T=h.v,V=h.h;this.sessionId=h.s,this.repoInfo_.host=V,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,f),"5"!==T&&Ge("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const h=this.transportManager_.upgradeTransport();h&&this.startUpgrade_(h)}startUpgrade_(h){this.secondaryConn_=new h(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=h.responsesRequiredToBeHealthy||0;const f=this.connReceiver_(this.secondaryConn_),T=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(f,T),fr(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(h){this.log_("Reset packet received.  New host: "+h),this.repoInfo_.host=h,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(h,f){this.log_("Realtime connection established."),this.conn_=h,this.state_=1,this.onReady_&&(this.onReady_(f,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):fr(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const h=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===h||this.rx_===h)&&this.close()}onConnectionLost_(h){this.conn_=null,h||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(ot.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(h){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(h),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(h){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(h)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class it{put(h,f,T,V){}merge(h,f,T,V){}refreshAuthToken(h){}refreshAppCheckToken(h){}onDisconnectPut(h,f,T){}onDisconnectMerge(h,f,T){}onDisconnectCancel(h,f){}reportStats(h){}}class ut{constructor(h){this.allowedEvents_=h,this.listeners_={},(0,H.vA)(Array.isArray(h)&&h.length>0,"Requires a non-empty array")}trigger(h,...f){if(Array.isArray(this.listeners_[h])){const T=[...this.listeners_[h]];for(let V=0;V<T.length;V++)T[V].callback.apply(T[V].context,f)}}on(h,f,T){this.validateEventType_(h),this.listeners_[h]=this.listeners_[h]||[],this.listeners_[h].push({callback:f,context:T});const V=this.getInitialEvent(h);V&&f.apply(T,V)}off(h,f,T){this.validateEventType_(h);const V=this.listeners_[h]||[];for(let Z=0;Z<V.length;Z++)if(V[Z].callback===f&&(!T||T===V[Z].context))return void V.splice(Z,1)}validateEventType_(h){(0,H.vA)(this.allowedEvents_.find(f=>f===h),"Unknown event: "+h)}}class un extends ut{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,H.jZ)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new un}getInitialEvent(h){return(0,H.vA)("online"===h,"Unknown event type: "+h),[this.online_]}currentlyOnline(){return this.online_}}class jt{constructor(h,f){if(void 0===f){this.pieces_=h.split("/");let T=0;for(let V=0;V<this.pieces_.length;V++)this.pieces_[V].length>0&&(this.pieces_[T]=this.pieces_[V],T++);this.pieces_.length=T,this.pieceNum_=0}else this.pieces_=h,this.pieceNum_=f}toString(){let h="";for(let f=this.pieceNum_;f<this.pieces_.length;f++)""!==this.pieces_[f]&&(h+="/"+this.pieces_[f]);return h||"/"}}function Xn(){return new jt("")}function Bn(y){return y.pieceNum_>=y.pieces_.length?null:y.pieces_[y.pieceNum_]}function ti(y){return y.pieces_.length-y.pieceNum_}function wr(y){let h=y.pieceNum_;return h<y.pieces_.length&&h++,new jt(y.pieces_,h)}function yn(y){return y.pieceNum_<y.pieces_.length?y.pieces_[y.pieces_.length-1]:null}function or(y,h=0){return y.pieces_.slice(y.pieceNum_+h)}function gr(y){if(y.pieceNum_>=y.pieces_.length)return null;const h=[];for(let f=y.pieceNum_;f<y.pieces_.length-1;f++)h.push(y.pieces_[f]);return new jt(h,0)}function _r(y,h){const f=[];for(let T=y.pieceNum_;T<y.pieces_.length;T++)f.push(y.pieces_[T]);if(h instanceof jt)for(let T=h.pieceNum_;T<h.pieces_.length;T++)f.push(h.pieces_[T]);else{const T=h.split("/");for(let V=0;V<T.length;V++)T[V].length>0&&f.push(T[V])}return new jt(f,0)}function xn(y){return y.pieceNum_>=y.pieces_.length}function Zr(y,h){const f=Bn(y),T=Bn(h);if(null===f)return h;if(f===T)return Zr(wr(y),wr(h));throw new Error("INTERNAL ERROR: innerPath ("+h+") is not within outerPath ("+y+")")}function Ri(y,h){const f=or(y,0),T=or(h,0);for(let V=0;V<f.length&&V<T.length;V++){const Z=Yt(f[V],T[V]);if(0!==Z)return Z}return f.length===T.length?0:f.length<T.length?-1:1}function kr(y,h){if(ti(y)!==ti(h))return!1;for(let f=y.pieceNum_,T=h.pieceNum_;f<=y.pieces_.length;f++,T++)if(y.pieces_[f]!==h.pieces_[T])return!1;return!0}function oi(y,h){let f=y.pieceNum_,T=h.pieceNum_;if(ti(y)>ti(h))return!1;for(;f<y.pieces_.length;){if(y.pieces_[f]!==h.pieces_[T])return!1;++f,++T}return!0}class As{constructor(h,f){this.errorPrefix_=f,this.parts_=or(h,0),this.byteLength_=Math.max(1,this.parts_.length);for(let T=0;T<this.parts_.length;T++)this.byteLength_+=(0,H.OE)(this.parts_[T]);Zt(this)}}function Zt(y){if(y.byteLength_>768)throw new Error(y.errorPrefix_+"has a key path longer than 768 bytes ("+y.byteLength_+").");if(y.parts_.length>32)throw new Error(y.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+bt(y))}function bt(y){return 0===y.parts_.length?"":"in property '"+y.parts_.join(".")+"'"}class Kt extends ut{constructor(){let h,f;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(f="visibilitychange",h="hidden"):typeof document.mozHidden<"u"?(f="mozvisibilitychange",h="mozHidden"):typeof document.msHidden<"u"?(f="msvisibilitychange",h="msHidden"):typeof document.webkitHidden<"u"&&(f="webkitvisibilitychange",h="webkitHidden")),this.visible_=!0,f&&document.addEventListener(f,()=>{const T=!document[h];T!==this.visible_&&(this.visible_=T,this.trigger("visible",T))},!1)}static getInstance(){return new Kt}getInitialEvent(h){return(0,H.vA)("visible"===h,"Unknown event type: "+h),[this.visible_]}}const Kn=1e3;let Li,In=(()=>{class y extends it{constructor(f,T,V,Z,se,Me,Je,pt){if(super(),this.repoInfo_=f,this.applicationId_=T,this.onDataUpdate_=V,this.onConnectStatus_=Z,this.onServerInfoUpdate_=se,this.authTokenProvider_=Me,this.appCheckTokenProvider_=Je,this.authOverride_=pt,this.id=y.nextPersistentConnectionId_++,this.log_=Qe("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Kn,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,pt&&!(0,H.$g)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Kt.getInstance().on("visible",this.onVisible_,this),-1===f.host.indexOf("fblocal")&&un.getInstance().on("online",this.onOnline_,this)}sendRequest(f,T,V){const Z=++this.requestNumber_,se={r:Z,a:f,b:T};this.log_((0,H.As)(se)),(0,H.vA)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(se),V&&(this.requestCBHash_[Z]=V)}get(f){this.initConnection_();const T=new H.cY,Z={action:"g",request:{p:f._path.toString(),q:f._queryObject},onComplete:Me=>{const Je=Me.d;"ok"===Me.s?T.resolve(Je):T.reject(Je)}};return this.outstandingGets_.push(Z),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),T.promise}listen(f,T,V,Z){this.initConnection_();const se=f._queryIdentifier,Me=f._path.toString();this.log_("Listen called for "+Me+" "+se),this.listens.has(Me)||this.listens.set(Me,new Map),(0,H.vA)(f._queryParams.isDefault()||!f._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,H.vA)(!this.listens.get(Me).has(se),"listen() called twice for same path/queryId.");const Je={onComplete:Z,hashFn:T,query:f,tag:V};this.listens.get(Me).set(se,Je),this.connected_&&this.sendListen_(Je)}sendGet_(f){const T=this.outstandingGets_[f];this.sendRequest("g",T.request,V=>{delete this.outstandingGets_[f],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),T.onComplete&&T.onComplete(V)})}sendListen_(f){const T=f.query,V=T._path.toString(),Z=T._queryIdentifier;this.log_("Listen on "+V+" for "+Z);const se={p:V};f.tag&&(se.q=T._queryObject,se.t=f.tag),se.h=f.hashFn(),this.sendRequest("q",se,Je=>{const pt=Je.d,_n=Je.s;y.warnOnListenWarnings_(pt,T),(this.listens.get(V)&&this.listens.get(V).get(Z))===f&&(this.log_("listen response",Je),"ok"!==_n&&this.removeListen_(V,Z),f.onComplete&&f.onComplete(_n,pt))})}static warnOnListenWarnings_(f,T){if(f&&"object"==typeof f&&(0,H.gR)(f,"w")){const V=(0,H.yw)(f,"w");if(Array.isArray(V)&&~V.indexOf("no_index")){const Z='".indexOn": "'+T._queryParams.getIndex().toString()+'"',se=T._path.toString();Ge(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${Z} at ${se} to your security rules for better performance.`)}}}refreshAuthToken(f){this.authToken_=f,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(f)}reduceReconnectDelayIfAdminCredential_(f){(f&&40===f.length||(0,H.qc)(f))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(f){this.appCheckToken_=f,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const f=this.authToken_,T=(0,H.Cv)(f)?"auth":"gauth",V={cred:f};null===this.authOverride_?V.noauth=!0:"object"==typeof this.authOverride_&&(V.authvar=this.authOverride_),this.sendRequest(T,V,Z=>{const se=Z.s,Me=Z.d||"error";this.authToken_===f&&("ok"===se?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(se,Me))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},f=>{const T=f.s,V=f.d||"error";"ok"===T?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(T,V)})}unlisten(f,T){const V=f._path.toString(),Z=f._queryIdentifier;this.log_("Unlisten called for "+V+" "+Z),(0,H.vA)(f._queryParams.isDefault()||!f._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(V,Z)&&this.connected_&&this.sendUnlisten_(V,Z,f._queryObject,T)}sendUnlisten_(f,T,V,Z){this.log_("Unlisten on "+f+" for "+T);const se={p:f};Z&&(se.q=V,se.t=Z),this.sendRequest("n",se)}onDisconnectPut(f,T,V){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",f,T,V):this.onDisconnectRequestQueue_.push({pathString:f,action:"o",data:T,onComplete:V})}onDisconnectMerge(f,T,V){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",f,T,V):this.onDisconnectRequestQueue_.push({pathString:f,action:"om",data:T,onComplete:V})}onDisconnectCancel(f,T){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",f,null,T):this.onDisconnectRequestQueue_.push({pathString:f,action:"oc",data:null,onComplete:T})}sendOnDisconnect_(f,T,V,Z){const se={p:T,d:V};this.log_("onDisconnect "+f,se),this.sendRequest(f,se,Me=>{Z&&setTimeout(()=>{Z(Me.s,Me.d)},Math.floor(0))})}put(f,T,V,Z){this.putInternal("p",f,T,V,Z)}merge(f,T,V,Z){this.putInternal("m",f,T,V,Z)}putInternal(f,T,V,Z,se){this.initConnection_();const Me={p:T,d:V};void 0!==se&&(Me.h=se),this.outstandingPuts_.push({action:f,request:Me,onComplete:Z}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+T)}sendPut_(f){const T=this.outstandingPuts_[f].action,V=this.outstandingPuts_[f].request,Z=this.outstandingPuts_[f].onComplete;this.outstandingPuts_[f].queued=this.connected_,this.sendRequest(T,V,se=>{this.log_(T+" response",se),delete this.outstandingPuts_[f],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),Z&&Z(se.s,se.d)})}reportStats(f){if(this.connected_){const T={c:f};this.log_("reportStats",T),this.sendRequest("s",T,V=>{"ok"!==V.s&&this.log_("reportStats","Error sending stats: "+V.d)})}}onDataMessage_(f){if("r"in f){this.log_("from server: "+(0,H.As)(f));const T=f.r,V=this.requestCBHash_[T];V&&(delete this.requestCBHash_[T],V(f.b))}else{if("error"in f)throw"A server-side error has occurred: "+f.error;"a"in f&&this.onDataPush_(f.a,f.b)}}onDataPush_(f,T){this.log_("handleServerMessage",f,T),"d"===f?this.onDataUpdate_(T.p,T.d,!1,T.t):"m"===f?this.onDataUpdate_(T.p,T.d,!0,T.t):"c"===f?this.onListenRevoked_(T.p,T.q):"ac"===f?this.onAuthRevoked_(T.s,T.d):"apc"===f?this.onAppCheckRevoked_(T.s,T.d):"sd"===f?this.onSecurityDebugPacket_(T):ct("Unrecognized action received from server: "+(0,H.As)(f)+"\nAre you using the latest client?")}onReady_(f,T){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(f),this.lastSessionId=T,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(f){(0,H.vA)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(f))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(f){f&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Kn,this.realtime_||this.scheduleConnect_(0)),this.visible_=f}onOnline_(f){f?(this.log_("Browser went online."),this.reconnectDelay_=Kn,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Kn),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const f=(new Date).getTime()-this.lastConnectionAttemptTime_;let T=Math.max(0,this.reconnectDelay_-f);T=Math.random()*T,this.log_("Trying to reconnect in "+T+"ms"),this.scheduleConnect_(T),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var f=this;return(0,b.A)(function*(){if(f.shouldReconnect_()){f.log_("Making a connection attempt"),f.lastConnectionAttemptTime_=(new Date).getTime(),f.lastConnectionEstablishedTime_=null;const T=f.onDataMessage_.bind(f),V=f.onReady_.bind(f),Z=f.onRealtimeDisconnect_.bind(f),se=f.id+":"+y.nextConnectionId_++,Me=f.lastSessionId;let Je=!1,pt=null;const _n=function(){pt?pt.close():(Je=!0,Z())};f.realtime_={close:_n,sendRequest:function(Ir){(0,H.vA)(pt,"sendRequest call when we're not connected not allowed."),pt.sendRequest(Ir)}};const Ln=f.forceTokenRefresh_;f.forceTokenRefresh_=!1;try{const[Ir,Hr]=yield Promise.all([f.authTokenProvider_.getToken(Ln),f.appCheckTokenProvider_.getToken(Ln)]);Je?Ke("getToken() completed but was canceled"):(Ke("getToken() completed. Creating connection."),f.authToken_=Ir&&Ir.accessToken,f.appCheckToken_=Hr&&Hr.token,pt=new Ue(se,f.repoInfo_,f.applicationId_,f.appCheckToken_,f.authToken_,T,V,Z,di=>{Ge(di+" ("+f.repoInfo_.toString()+")"),f.interrupt("server_kill")},Me))}catch(Ir){f.log_("Failed to get token: "+Ir),Je||(f.repoInfo_.nodeAdmin&&Ge(Ir),_n())}}})()}interrupt(f){Ke("Interrupting connection for reason: "+f),this.interruptReasons_[f]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(f){Ke("Resuming connection for reason: "+f),delete this.interruptReasons_[f],(0,H.Im)(this.interruptReasons_)&&(this.reconnectDelay_=Kn,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(f){const T=f-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:T})}cancelSentTransactions_(){for(let f=0;f<this.outstandingPuts_.length;f++){const T=this.outstandingPuts_[f];T&&"h"in T.request&&T.queued&&(T.onComplete&&T.onComplete("disconnect"),delete this.outstandingPuts_[f],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(f,T){let V;V=T?T.map(se=>ye(se)).join("$"):"default";const Z=this.removeListen_(f,V);Z&&Z.onComplete&&Z.onComplete("permission_denied")}removeListen_(f,T){const V=new jt(f).toString();let Z;if(this.listens.has(V)){const se=this.listens.get(V);Z=se.get(T),se.delete(T),0===se.size&&this.listens.delete(V)}else Z=void 0;return Z}onAuthRevoked_(f,T){Ke("Auth token revoked: "+f+"/"+T),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===f||"permission_denied"===f)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(f,T){Ke("App check token revoked: "+f+"/"+T),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===f||"permission_denied"===f)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(f){this.securityDebugCallback_?this.securityDebugCallback_(f):"msg"in f&&console.log("FIREBASE: "+f.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const f of this.listens.values())for(const T of f.values())this.sendListen_(T);for(let f=0;f<this.outstandingPuts_.length;f++)this.outstandingPuts_[f]&&this.sendPut_(f);for(;this.onDisconnectRequestQueue_.length;){const f=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(f.action,f.pathString,f.data,f.onComplete)}for(let f=0;f<this.outstandingGets_.length;f++)this.outstandingGets_[f]&&this.sendGet_(f)}sendConnectStats_(){const f={};let T="js";(0,H.$g)()&&(T=this.repoInfo_.nodeAdmin?"admin_node":"node"),f["sdk."+T+"."+Ne.replace(/\./g,"-")]=1,(0,H.jZ)()?f["framework.cordova"]=1:(0,H.lV)()&&(f["framework.reactnative"]=1),this.reportStats(f)}shouldReconnect_(){const f=un.getInstance().currentlyOnline();return(0,H.Im)(this.interruptReasons_)&&f}}return y.nextPersistentConnectionId_=0,y.nextConnectionId_=0,y})();class jn{constructor(h,f){this.name=h,this.node=f}static Wrap(h,f){return new jn(h,f)}}class Jr{getCompare(){return this.compare.bind(this)}indexedValueChanged(h,f){const T=new jn(Jt,h),V=new jn(Jt,f);return 0!==this.compare(T,V)}minPost(){return jn.MIN}}class es extends Jr{static get __EMPTY_NODE(){return Li}static set __EMPTY_NODE(h){Li=h}compare(h,f){return Yt(h.name,f.name)}isDefinedOn(h){throw(0,H.Hk)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(h,f){return!1}minPost(){return jn.MIN}maxPost(){return new jn(Nt,Li)}makePost(h,f){return(0,H.vA)("string"==typeof h,"KeyIndex indexValue must always be a string."),new jn(h,Li)}toString(){return".key"}}const ds=new es;class is{constructor(h,f,T,V,Z=null){this.isReverse_=V,this.resultGenerator_=Z,this.nodeStack_=[];let se=1;for(;!h.isEmpty();)if(se=f?T(h.key,f):1,V&&(se*=-1),se<0)h=this.isReverse_?h.left:h.right;else{if(0===se){this.nodeStack_.push(h);break}this.nodeStack_.push(h),h=this.isReverse_?h.right:h.left}}getNext(){if(0===this.nodeStack_.length)return null;let f,h=this.nodeStack_.pop();if(f=this.resultGenerator_?this.resultGenerator_(h.key,h.value):{key:h.key,value:h.value},this.isReverse_)for(h=h.left;!h.isEmpty();)this.nodeStack_.push(h),h=h.right;else for(h=h.right;!h.isEmpty();)this.nodeStack_.push(h),h=h.left;return f}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const h=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(h.key,h.value):{key:h.key,value:h.value}}}let po,xs=(()=>{class y{constructor(f,T,V,Z,se){this.key=f,this.value=T,this.color=V??y.RED,this.left=Z??ys.EMPTY_NODE,this.right=se??ys.EMPTY_NODE}copy(f,T,V,Z,se){return new y(f??this.key,T??this.value,V??this.color,Z??this.left,se??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(f){return this.left.inorderTraversal(f)||!!f(this.key,this.value)||this.right.inorderTraversal(f)}reverseTraversal(f){return this.right.reverseTraversal(f)||f(this.key,this.value)||this.left.reverseTraversal(f)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(f,T,V){let Z=this;const se=V(f,Z.key);return Z=se<0?Z.copy(null,null,null,Z.left.insert(f,T,V),null):0===se?Z.copy(null,T,null,null,null):Z.copy(null,null,null,null,Z.right.insert(f,T,V)),Z.fixUp_()}removeMin_(){if(this.left.isEmpty())return ys.EMPTY_NODE;let f=this;return!f.left.isRed_()&&!f.left.left.isRed_()&&(f=f.moveRedLeft_()),f=f.copy(null,null,null,f.left.removeMin_(),null),f.fixUp_()}remove(f,T){let V,Z;if(V=this,T(f,V.key)<0)!V.left.isEmpty()&&!V.left.isRed_()&&!V.left.left.isRed_()&&(V=V.moveRedLeft_()),V=V.copy(null,null,null,V.left.remove(f,T),null);else{if(V.left.isRed_()&&(V=V.rotateRight_()),!V.right.isEmpty()&&!V.right.isRed_()&&!V.right.left.isRed_()&&(V=V.moveRedRight_()),0===T(f,V.key)){if(V.right.isEmpty())return ys.EMPTY_NODE;Z=V.right.min_(),V=V.copy(Z.key,Z.value,null,null,V.right.removeMin_())}V=V.copy(null,null,null,null,V.right.remove(f,T))}return V.fixUp_()}isRed_(){return this.color}fixUp_(){let f=this;return f.right.isRed_()&&!f.left.isRed_()&&(f=f.rotateLeft_()),f.left.isRed_()&&f.left.left.isRed_()&&(f=f.rotateRight_()),f.left.isRed_()&&f.right.isRed_()&&(f=f.colorFlip_()),f}moveRedLeft_(){let f=this.colorFlip_();return f.right.left.isRed_()&&(f=f.copy(null,null,null,null,f.right.rotateRight_()),f=f.rotateLeft_(),f=f.colorFlip_()),f}moveRedRight_(){let f=this.colorFlip_();return f.left.left.isRed_()&&(f=f.rotateRight_(),f=f.colorFlip_()),f}rotateLeft_(){const f=this.copy(null,null,y.RED,null,this.right.left);return this.right.copy(null,null,this.color,f,null)}rotateRight_(){const f=this.copy(null,null,y.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,f)}colorFlip_(){const f=this.left.copy(null,null,!this.left.color,null,null),T=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,f,T)}checkMaxDepth_(){const f=this.check_();return Math.pow(2,f)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const f=this.left.check_();if(f!==this.right.check_())throw new Error("Black depths differ");return f+(this.isRed_()?0:1)}}return y.RED=!0,y.BLACK=!1,y})();class ys{constructor(h,f=ys.EMPTY_NODE){this.comparator_=h,this.root_=f}insert(h,f){return new ys(this.comparator_,this.root_.insert(h,f,this.comparator_).copy(null,null,xs.BLACK,null,null))}remove(h){return new ys(this.comparator_,this.root_.remove(h,this.comparator_).copy(null,null,xs.BLACK,null,null))}get(h){let f,T=this.root_;for(;!T.isEmpty();){if(f=this.comparator_(h,T.key),0===f)return T.value;f<0?T=T.left:f>0&&(T=T.right)}return null}getPredecessorKey(h){let f,T=this.root_,V=null;for(;!T.isEmpty();){if(f=this.comparator_(h,T.key),0===f){if(T.left.isEmpty())return V?V.key:null;for(T=T.left;!T.right.isEmpty();)T=T.right;return T.key}f<0?T=T.left:f>0&&(V=T,T=T.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(h){return this.root_.inorderTraversal(h)}reverseTraversal(h){return this.root_.reverseTraversal(h)}getIterator(h){return new is(this.root_,null,this.comparator_,!1,h)}getIteratorFrom(h,f){return new is(this.root_,h,this.comparator_,!1,f)}getReverseIteratorFrom(h,f){return new is(this.root_,h,this.comparator_,!0,f)}getReverseIterator(h){return new is(this.root_,null,this.comparator_,!0,h)}}function da(y,h){return Yt(y.name,h.name)}function Zs(y,h){return Yt(y,h)}ys.EMPTY_NODE=new class ua{copy(h,f,T,V,Z){return this}insert(h,f,T){return new xs(h,f,null)}remove(h,f){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(h){return!1}reverseTraversal(h){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const So=function(y){return"number"==typeof y?"number:"+et(y):"string:"+y},Wi=function(y){if(y.isLeafNode()){const h=y.val();(0,H.vA)("string"==typeof h||"number"==typeof h||"object"==typeof h&&(0,H.gR)(h,".sv"),"Priority must be a string or number.")}else(0,H.vA)(y===po||y.isEmpty(),"priority of unexpected type.");(0,H.vA)(y===po||y.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let eo,Go,Ca,Ur=(()=>{class y{constructor(f,T=y.__childrenNodeConstructor.EMPTY_NODE){this.value_=f,this.priorityNode_=T,this.lazyHash_=null,(0,H.vA)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),Wi(this.priorityNode_)}static set __childrenNodeConstructor(f){eo=f}static get __childrenNodeConstructor(){return eo}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(f){return new y(this.value_,f)}getImmediateChild(f){return".priority"===f?this.priorityNode_:y.__childrenNodeConstructor.EMPTY_NODE}getChild(f){return xn(f)?this:".priority"===Bn(f)?this.priorityNode_:y.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(f,T){return null}updateImmediateChild(f,T){return".priority"===f?this.updatePriority(T):T.isEmpty()&&".priority"!==f?this:y.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(f,T).updatePriority(this.priorityNode_)}updateChild(f,T){const V=Bn(f);return null===V?T:T.isEmpty()&&".priority"!==V?this:((0,H.vA)(".priority"!==V||1===ti(f),".priority must be the last token in a path"),this.updateImmediateChild(V,y.__childrenNodeConstructor.EMPTY_NODE.updateChild(wr(f),T)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(f,T){return!1}val(f){return f&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let f="";this.priorityNode_.isEmpty()||(f+="priority:"+So(this.priorityNode_.val())+":");const T=typeof this.value_;f+=T+":",f+="number"===T?et(this.value_):this.value_,this.lazyHash_=Gt(f)}return this.lazyHash_}getValue(){return this.value_}compareTo(f){return f===y.__childrenNodeConstructor.EMPTY_NODE?1:f instanceof y.__childrenNodeConstructor?-1:((0,H.vA)(f.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(f))}compareToLeafNode_(f){const T=typeof f.value_,V=typeof this.value_,Z=y.VALUE_TYPE_ORDER.indexOf(T),se=y.VALUE_TYPE_ORDER.indexOf(V);return(0,H.vA)(Z>=0,"Unknown leaf type: "+T),(0,H.vA)(se>=0,"Unknown leaf type: "+V),Z===se?"object"===V?0:this.value_<f.value_?-1:this.value_===f.value_?0:1:se-Z}withIndex(){return this}isIndexed(){return!0}equals(f){return f===this||!!f.isLeafNode()&&(this.value_===f.value_&&this.priorityNode_.equals(f.priorityNode_))}}return y.VALUE_TYPE_ORDER=["object","boolean","number","string"],y})();const Ii=new class Vo extends Jr{compare(h,f){const T=h.node.getPriority(),V=f.node.getPriority(),Z=T.compareTo(V);return 0===Z?Yt(h.name,f.name):Z}isDefinedOn(h){return!h.getPriority().isEmpty()}indexedValueChanged(h,f){return!h.getPriority().equals(f.getPriority())}minPost(){return jn.MIN}maxPost(){return new jn(Nt,new Ur("[PRIORITY-POST]",Ca))}makePost(h,f){const T=Go(h);return new jn(f,new Ur("[PRIORITY-POST]",T))}toString(){return".priority"}},Cc=Math.log(2);class qo{constructor(h){this.count=parseInt(Math.log(h+1)/Cc,10),this.current_=this.count-1;const V=(Z=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=h+1&V}nextBitIsOne(){const h=!(this.bits_&1<<this.current_);return this.current_--,h}}const ts=function(y,h,f,T){y.sort(h);const V=function(Je,pt){const _n=pt-Je;let Tn,Ln;if(0===_n)return null;if(1===_n)return Tn=y[Je],Ln=f?f(Tn):Tn,new xs(Ln,Tn.node,xs.BLACK,null,null);{const Ir=parseInt(_n/2,10)+Je,Hr=V(Je,Ir),di=V(Ir+1,pt);return Tn=y[Ir],Ln=f?f(Tn):Tn,new xs(Ln,Tn.node,xs.BLACK,Hr,di)}},Me=function(Je){let pt=null,_n=null,Tn=y.length;const Ln=function(Hr,di){const To=Tn-Hr,aa=Tn;Tn-=Hr;const Qc=V(To+1,aa),ho=y[To],Ll=f?f(ho):ho;Ir(new xs(Ll,ho.node,di,null,Qc))},Ir=function(Hr){pt?(pt.left=Hr,pt=Hr):(_n=Hr,pt=Hr)};for(let Hr=0;Hr<Je.count;++Hr){const di=Je.nextBitIsOne(),To=Math.pow(2,Je.count-(Hr+1));di?Ln(To,xs.BLACK):(Ln(To,xs.BLACK),Ln(To,xs.RED))}return _n}(new qo(y.length));return new ys(T||h,Me)};let ha;const Fi={};class ls{constructor(h,f){this.indexes_=h,this.indexSet_=f}static get Default(){return(0,H.vA)(Fi&&Ii,"ChildrenNode.ts has not been loaded"),ha=ha||new ls({".priority":Fi},{".priority":Ii}),ha}get(h){const f=(0,H.yw)(this.indexes_,h);if(!f)throw new Error("No index defined for "+h);return f instanceof ys?f:null}hasIndex(h){return(0,H.gR)(this.indexSet_,h.toString())}addIndex(h,f){(0,H.vA)(h!==ds,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const T=[];let V=!1;const Z=f.getIterator(jn.Wrap);let Me,se=Z.getNext();for(;se;)V=V||h.isDefinedOn(se.node),T.push(se),se=Z.getNext();Me=V?ts(T,h.getCompare()):Fi;const Je=h.toString(),pt=Object.assign({},this.indexSet_);pt[Je]=h;const _n=Object.assign({},this.indexes_);return _n[Je]=Me,new ls(_n,pt)}addToIndexes(h,f){const T=(0,H.kH)(this.indexes_,(V,Z)=>{const se=(0,H.yw)(this.indexSet_,Z);if((0,H.vA)(se,"Missing index implementation for "+Z),V===Fi){if(se.isDefinedOn(h.node)){const Me=[],Je=f.getIterator(jn.Wrap);let pt=Je.getNext();for(;pt;)pt.name!==h.name&&Me.push(pt),pt=Je.getNext();return Me.push(h),ts(Me,se.getCompare())}return Fi}{const Me=f.get(h.name);let Je=V;return Me&&(Je=Je.remove(new jn(h.name,Me))),Je.insert(h,h.node)}});return new ls(T,this.indexSet_)}removeFromIndexes(h,f){const T=(0,H.kH)(this.indexes_,V=>{if(V===Fi)return V;{const Z=f.get(h.name);return Z?V.remove(new jn(h.name,Z)):V}});return new ls(T,this.indexSet_)}}let Sc,Br=(()=>{class y{constructor(f,T,V){this.children_=f,this.priorityNode_=T,this.indexMap_=V,this.lazyHash_=null,this.priorityNode_&&Wi(this.priorityNode_),this.children_.isEmpty()&&(0,H.vA)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Sc||(Sc=new y(new ys(Zs),null,ls.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Sc}updatePriority(f){return this.children_.isEmpty()?this:new y(this.children_,f,this.indexMap_)}getImmediateChild(f){if(".priority"===f)return this.getPriority();{const T=this.children_.get(f);return null===T?Sc:T}}getChild(f){const T=Bn(f);return null===T?this:this.getImmediateChild(T).getChild(wr(f))}hasChild(f){return null!==this.children_.get(f)}updateImmediateChild(f,T){if((0,H.vA)(T,"We should always be passing snapshot nodes"),".priority"===f)return this.updatePriority(T);{const V=new jn(f,T);let Z,se;T.isEmpty()?(Z=this.children_.remove(f),se=this.indexMap_.removeFromIndexes(V,this.children_)):(Z=this.children_.insert(f,T),se=this.indexMap_.addToIndexes(V,this.children_));const Me=Z.isEmpty()?Sc:this.priorityNode_;return new y(Z,Me,se)}}updateChild(f,T){const V=Bn(f);if(null===V)return T;{(0,H.vA)(".priority"!==Bn(f)||1===ti(f),".priority must be the last token in a path");const Z=this.getImmediateChild(V).updateChild(wr(f),T);return this.updateImmediateChild(V,Z)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(f){if(this.isEmpty())return null;const T={};let V=0,Z=0,se=!0;if(this.forEachChild(Ii,(Me,Je)=>{T[Me]=Je.val(f),V++,se&&y.INTEGER_REGEXP_.test(Me)?Z=Math.max(Z,Number(Me)):se=!1}),!f&&se&&Z<2*V){const Me=[];for(const Je in T)Me[Je]=T[Je];return Me}return f&&!this.getPriority().isEmpty()&&(T[".priority"]=this.getPriority().val()),T}hash(){if(null===this.lazyHash_){let f="";this.getPriority().isEmpty()||(f+="priority:"+So(this.getPriority().val())+":"),this.forEachChild(Ii,(T,V)=>{const Z=V.hash();""!==Z&&(f+=":"+T+":"+Z)}),this.lazyHash_=""===f?"":Gt(f)}return this.lazyHash_}getPredecessorChildName(f,T,V){const Z=this.resolveIndex_(V);if(Z){const se=Z.getPredecessorKey(new jn(f,T));return se?se.name:null}return this.children_.getPredecessorKey(f)}getFirstChildName(f){const T=this.resolveIndex_(f);if(T){const V=T.minKey();return V&&V.name}return this.children_.minKey()}getFirstChild(f){const T=this.getFirstChildName(f);return T?new jn(T,this.children_.get(T)):null}getLastChildName(f){const T=this.resolveIndex_(f);if(T){const V=T.maxKey();return V&&V.name}return this.children_.maxKey()}getLastChild(f){const T=this.getLastChildName(f);return T?new jn(T,this.children_.get(T)):null}forEachChild(f,T){const V=this.resolveIndex_(f);return V?V.inorderTraversal(Z=>T(Z.name,Z.node)):this.children_.inorderTraversal(T)}getIterator(f){return this.getIteratorFrom(f.minPost(),f)}getIteratorFrom(f,T){const V=this.resolveIndex_(T);if(V)return V.getIteratorFrom(f,Z=>Z);{const Z=this.children_.getIteratorFrom(f.name,jn.Wrap);let se=Z.peek();for(;null!=se&&T.compare(se,f)<0;)Z.getNext(),se=Z.peek();return Z}}getReverseIterator(f){return this.getReverseIteratorFrom(f.maxPost(),f)}getReverseIteratorFrom(f,T){const V=this.resolveIndex_(T);if(V)return V.getReverseIteratorFrom(f,Z=>Z);{const Z=this.children_.getReverseIteratorFrom(f.name,jn.Wrap);let se=Z.peek();for(;null!=se&&T.compare(se,f)>0;)Z.getNext(),se=Z.peek();return Z}}compareTo(f){return this.isEmpty()?f.isEmpty()?0:-1:f.isLeafNode()||f.isEmpty()?1:f===Dc?-1:0}withIndex(f){if(f===ds||this.indexMap_.hasIndex(f))return this;{const T=this.indexMap_.addIndex(f,this.children_);return new y(this.children_,this.priorityNode_,T)}}isIndexed(f){return f===ds||this.indexMap_.hasIndex(f)}equals(f){if(f===this)return!0;if(f.isLeafNode())return!1;{const T=f;if(this.getPriority().equals(T.getPriority())){if(this.children_.count()===T.children_.count()){const V=this.getIterator(Ii),Z=T.getIterator(Ii);let se=V.getNext(),Me=Z.getNext();for(;se&&Me;){if(se.name!==Me.name||!se.node.equals(Me.node))return!1;se=V.getNext(),Me=Z.getNext()}return null===se&&null===Me}return!1}return!1}}resolveIndex_(f){return f===ds?null:this.indexMap_.get(f.toString())}}return y.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,y})();const Dc=new class fa extends Br{constructor(){super(new ys(Zs),Br.EMPTY_NODE,ls.Default)}compareTo(h){return h===this?0:1}equals(h){return h===this}getPriority(){return this}getImmediateChild(h){return Br.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(jn,{MIN:{value:new jn(Jt,Br.EMPTY_NODE)},MAX:{value:new jn(Nt,Dc)}}),es.__EMPTY_NODE=Br.EMPTY_NODE,Ur.__childrenNodeConstructor=Br,function Js(y){po=y}(Dc),function rc(y){Ca=y}(Dc);const Qo=!0;function Pr(y,h=null){if(null===y)return Br.EMPTY_NODE;if("object"==typeof y&&".priority"in y&&(h=y[".priority"]),(0,H.vA)(null===h||"string"==typeof h||"number"==typeof h||"object"==typeof h&&".sv"in h,"Invalid priority type found: "+typeof h),"object"==typeof y&&".value"in y&&null!==y[".value"]&&(y=y[".value"]),"object"!=typeof y||".sv"in y)return new Ur(y,Pr(h));if(y instanceof Array||!Qo){let f=Br.EMPTY_NODE;return Ht(y,(T,V)=>{if((0,H.gR)(y,T)&&"."!==T.substring(0,1)){const Z=Pr(V);(Z.isLeafNode()||!Z.isEmpty())&&(f=f.updateImmediateChild(T,Z))}}),f.updatePriority(Pr(h))}{const f=[];let T=!1;if(Ht(y,(se,Me)=>{if("."!==se.substring(0,1)){const Je=Pr(Me);Je.isEmpty()||(T=T||!Je.getPriority().isEmpty(),f.push(new jn(se,Je)))}}),0===f.length)return Br.EMPTY_NODE;const Z=ts(f,da,se=>se.name,Zs);if(T){const se=ts(f,Ii.getCompare());return new Br(Z,Pr(h),new ls({".priority":se},{".priority":Ii}))}return new Br(Z,Pr(h),ls.Default)}}!function Fo(y){Go=y}(Pr);class fi extends Jr{constructor(h){super(),this.indexPath_=h,(0,H.vA)(!xn(h)&&".priority"!==Bn(h),"Can't create PathIndex with empty path or .priority key")}extractChild(h){return h.getChild(this.indexPath_)}isDefinedOn(h){return!h.getChild(this.indexPath_).isEmpty()}compare(h,f){const T=this.extractChild(h.node),V=this.extractChild(f.node),Z=T.compareTo(V);return 0===Z?Yt(h.name,f.name):Z}makePost(h,f){const T=Pr(h),V=Br.EMPTY_NODE.updateChild(this.indexPath_,T);return new jn(f,V)}maxPost(){const h=Br.EMPTY_NODE.updateChild(this.indexPath_,Dc);return new jn(Nt,h)}toString(){return or(this.indexPath_,0).join("/")}}const Do=new class $l extends Jr{compare(h,f){const T=h.node.compareTo(f.node);return 0===T?Yt(h.name,f.name):T}isDefinedOn(h){return!0}indexedValueChanged(h,f){return!h.equals(f)}minPost(){return jn.MIN}maxPost(){return jn.MAX}makePost(h,f){const T=Pr(h);return new jn(f,T)}toString(){return".value"}};function mo(y){return{type:"value",snapshotNode:y}}function Ns(y,h){return{type:"child_added",snapshotNode:h,childName:y}}function ss(y,h){return{type:"child_removed",snapshotNode:h,childName:y}}function ns(y,h,f){return{type:"child_changed",snapshotNode:h,childName:y,oldSnap:f}}class Sa{constructor(h){this.index_=h}updateChild(h,f,T,V,Z,se){(0,H.vA)(h.isIndexed(this.index_),"A node must be indexed if only a child is updated");const Me=h.getImmediateChild(f);return Me.getChild(V).equals(T.getChild(V))&&Me.isEmpty()===T.isEmpty()||(null!=se&&(T.isEmpty()?h.hasChild(f)?se.trackChildChange(ss(f,Me)):(0,H.vA)(h.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):Me.isEmpty()?se.trackChildChange(Ns(f,T)):se.trackChildChange(ns(f,T,Me))),h.isLeafNode()&&T.isEmpty())?h:h.updateImmediateChild(f,T).withIndex(this.index_)}updateFullNode(h,f,T){return null!=T&&(h.isLeafNode()||h.forEachChild(Ii,(V,Z)=>{f.hasChild(V)||T.trackChildChange(ss(V,Z))}),f.isLeafNode()||f.forEachChild(Ii,(V,Z)=>{if(h.hasChild(V)){const se=h.getImmediateChild(V);se.equals(Z)||T.trackChildChange(ns(V,Z,se))}else T.trackChildChange(Ns(V,Z))})),f.withIndex(this.index_)}updatePriority(h,f){return h.isEmpty()?Br.EMPTY_NODE:h.updatePriority(f)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class qs{constructor(h){this.indexedFilter_=new Sa(h.getIndex()),this.index_=h.getIndex(),this.startPost_=qs.getStartPost_(h),this.endPost_=qs.getEndPost_(h),this.startIsInclusive_=!h.startAfterSet_,this.endIsInclusive_=!h.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(h){const f=this.startIsInclusive_?this.index_.compare(this.getStartPost(),h)<=0:this.index_.compare(this.getStartPost(),h)<0,T=this.endIsInclusive_?this.index_.compare(h,this.getEndPost())<=0:this.index_.compare(h,this.getEndPost())<0;return f&&T}updateChild(h,f,T,V,Z,se){return this.matches(new jn(f,T))||(T=Br.EMPTY_NODE),this.indexedFilter_.updateChild(h,f,T,V,Z,se)}updateFullNode(h,f,T){f.isLeafNode()&&(f=Br.EMPTY_NODE);let V=f.withIndex(this.index_);V=V.updatePriority(Br.EMPTY_NODE);const Z=this;return f.forEachChild(Ii,(se,Me)=>{Z.matches(new jn(se,Me))||(V=V.updateImmediateChild(se,Br.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(h,V,T)}updatePriority(h,f){return h}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(h){if(h.hasStart()){const f=h.getIndexStartName();return h.getIndex().makePost(h.getIndexStartValue(),f)}return h.getIndex().minPost()}static getEndPost_(h){if(h.hasEnd()){const f=h.getIndexEndName();return h.getIndex().makePost(h.getIndexEndValue(),f)}return h.getIndex().maxPost()}}class Mi{constructor(h){this.withinDirectionalStart=f=>this.reverse_?this.withinEndPost(f):this.withinStartPost(f),this.withinDirectionalEnd=f=>this.reverse_?this.withinStartPost(f):this.withinEndPost(f),this.withinStartPost=f=>{const T=this.index_.compare(this.rangedFilter_.getStartPost(),f);return this.startIsInclusive_?T<=0:T<0},this.withinEndPost=f=>{const T=this.index_.compare(f,this.rangedFilter_.getEndPost());return this.endIsInclusive_?T<=0:T<0},this.rangedFilter_=new qs(h),this.index_=h.getIndex(),this.limit_=h.getLimit(),this.reverse_=!h.isViewFromLeft(),this.startIsInclusive_=!h.startAfterSet_,this.endIsInclusive_=!h.endBeforeSet_}updateChild(h,f,T,V,Z,se){return this.rangedFilter_.matches(new jn(f,T))||(T=Br.EMPTY_NODE),h.getImmediateChild(f).equals(T)?h:h.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(h,f,T,V,Z,se):this.fullLimitUpdateChild_(h,f,T,Z,se)}updateFullNode(h,f,T){let V;if(f.isLeafNode()||f.isEmpty())V=Br.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<f.numChildren()&&f.isIndexed(this.index_)){let Z;V=Br.EMPTY_NODE.withIndex(this.index_),Z=this.reverse_?f.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):f.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let se=0;for(;Z.hasNext()&&se<this.limit_;){const Me=Z.getNext();if(this.withinDirectionalStart(Me)){if(!this.withinDirectionalEnd(Me))break;V=V.updateImmediateChild(Me.name,Me.node),se++}}}else{let Z;V=f.withIndex(this.index_),V=V.updatePriority(Br.EMPTY_NODE),Z=this.reverse_?V.getReverseIterator(this.index_):V.getIterator(this.index_);let se=0;for(;Z.hasNext();){const Me=Z.getNext();se<this.limit_&&this.withinDirectionalStart(Me)&&this.withinDirectionalEnd(Me)?se++:V=V.updateImmediateChild(Me.name,Br.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(h,V,T)}updatePriority(h,f){return h}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(h,f,T,V,Z){let se;if(this.reverse_){const Tn=this.index_.getCompare();se=(Ln,Ir)=>Tn(Ir,Ln)}else se=this.index_.getCompare();const Me=h;(0,H.vA)(Me.numChildren()===this.limit_,"");const Je=new jn(f,T),pt=this.reverse_?Me.getFirstChild(this.index_):Me.getLastChild(this.index_),_n=this.rangedFilter_.matches(Je);if(Me.hasChild(f)){const Tn=Me.getImmediateChild(f);let Ln=V.getChildAfterChild(this.index_,pt,this.reverse_);for(;null!=Ln&&(Ln.name===f||Me.hasChild(Ln.name));)Ln=V.getChildAfterChild(this.index_,Ln,this.reverse_);const Ir=null==Ln?1:se(Ln,Je);if(_n&&!T.isEmpty()&&Ir>=0)return Z?.trackChildChange(ns(f,T,Tn)),Me.updateImmediateChild(f,T);{Z?.trackChildChange(ss(f,Tn));const di=Me.updateImmediateChild(f,Br.EMPTY_NODE);return null!=Ln&&this.rangedFilter_.matches(Ln)?(Z?.trackChildChange(Ns(Ln.name,Ln.node)),di.updateImmediateChild(Ln.name,Ln.node)):di}}return T.isEmpty()?h:_n&&se(pt,Je)>=0?(null!=Z&&(Z.trackChildChange(ss(pt.name,pt.node)),Z.trackChildChange(Ns(f,T))),Me.updateImmediateChild(f,T).updateImmediateChild(pt.name,Br.EMPTY_NODE)):h}}class pa{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Ii}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,H.vA)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,H.vA)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Jt}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,H.vA)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,H.vA)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Nt}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,H.vA)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Ii}copy(){const h=new pa;return h.limitSet_=this.limitSet_,h.limit_=this.limit_,h.startSet_=this.startSet_,h.startAfterSet_=this.startAfterSet_,h.indexStartValue_=this.indexStartValue_,h.startNameSet_=this.startNameSet_,h.indexStartName_=this.indexStartName_,h.endSet_=this.endSet_,h.endBeforeSet_=this.endBeforeSet_,h.indexEndValue_=this.indexEndValue_,h.endNameSet_=this.endNameSet_,h.indexEndName_=this.indexEndName_,h.index_=this.index_,h.viewFrom_=this.viewFrom_,h}}function Rc(y,h,f){const T=y.copy();return T.startSet_=!0,void 0===h&&(h=null),T.indexStartValue_=h,null!=f?(T.startNameSet_=!0,T.indexStartName_=f):(T.startNameSet_=!1,T.indexStartName_=""),T}function to(y,h,f){const T=y.copy();return T.endSet_=!0,void 0===h&&(h=null),T.indexEndValue_=h,void 0!==f?(T.endNameSet_=!0,T.indexEndName_=f):(T.endNameSet_=!1,T.indexEndName_=""),T}function vs(y,h){const f=y.copy();return f.index_=h,f}function ic(y){const h={};if(y.isDefault())return h;let f;if(y.index_===Ii?f="$priority":y.index_===Do?f="$value":y.index_===ds?f="$key":((0,H.vA)(y.index_ instanceof fi,"Unrecognized index type!"),f=y.index_.toString()),h.orderBy=(0,H.As)(f),y.startSet_){const T=y.startAfterSet_?"startAfter":"startAt";h[T]=(0,H.As)(y.indexStartValue_),y.startNameSet_&&(h[T]+=","+(0,H.As)(y.indexStartName_))}if(y.endSet_){const T=y.endBeforeSet_?"endBefore":"endAt";h[T]=(0,H.As)(y.indexEndValue_),y.endNameSet_&&(h[T]+=","+(0,H.As)(y.indexEndName_))}return y.limitSet_&&(y.isViewFromLeft()?h.limitToFirst=y.limit_:h.limitToLast=y.limit_),h}function nl(y){const h={};if(y.startSet_&&(h.sp=y.indexStartValue_,y.startNameSet_&&(h.sn=y.indexStartName_),h.sin=!y.startAfterSet_),y.endSet_&&(h.ep=y.indexEndValue_,y.endNameSet_&&(h.en=y.indexEndName_),h.ein=!y.endBeforeSet_),y.limitSet_){h.l=y.limit_;let f=y.viewFrom_;""===f&&(f=y.isViewFromLeft()?"l":"r"),h.vf=f}return y.index_!==Ii&&(h.i=y.index_.toString()),h}class _o extends it{constructor(h,f,T,V){super(),this.repoInfo_=h,this.onDataUpdate_=f,this.authTokenProvider_=T,this.appCheckTokenProvider_=V,this.log_=Qe("p:rest:"),this.listens_={}}reportStats(h){throw new Error("Method not implemented.")}static getListenId_(h,f){return void 0!==f?"tag$"+f:((0,H.vA)(h._queryParams.isDefault(),"should have a tag if it's not a default query."),h._path.toString())}listen(h,f,T,V){const Z=h._path.toString();this.log_("Listen called for "+Z+" "+h._queryIdentifier);const se=_o.getListenId_(h,T),Me={};this.listens_[se]=Me;const Je=ic(h._queryParams);this.restRequest_(Z+".json",Je,(pt,_n)=>{let Tn=_n;if(404===pt&&(Tn=null,pt=null),null===pt&&this.onDataUpdate_(Z,Tn,!1,T),(0,H.yw)(this.listens_,se)===Me){let Ln;Ln=pt?401===pt?"permission_denied":"rest_error:"+pt:"ok",V(Ln,null)}})}unlisten(h,f){const T=_o.getListenId_(h,f);delete this.listens_[T]}get(h){const f=ic(h._queryParams),T=h._path.toString(),V=new H.cY;return this.restRequest_(T+".json",f,(Z,se)=>{let Me=se;404===Z&&(Me=null,Z=null),null===Z?(this.onDataUpdate_(T,Me,!1,null),V.resolve(Me)):V.reject(new Error(Me))}),V.promise}refreshAuthToken(h){}restRequest_(h,f={},T){return f.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([V,Z])=>{V&&V.accessToken&&(f.auth=V.accessToken),Z&&Z.token&&(f.ac=Z.token);const se=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+h+"?ns="+this.repoInfo_.namespace+(0,H.Am)(f);this.log_("Sending REST request for "+se);const Me=new XMLHttpRequest;Me.onreadystatechange=()=>{if(T&&4===Me.readyState){this.log_("REST Response for "+se+" received. status:",Me.status,"response:",Me.responseText);let Je=null;if(Me.status>=200&&Me.status<300){try{Je=(0,H.$L)(Me.responseText)}catch{Ge("Failed to parse JSON response for "+se+": "+Me.responseText)}T(null,Je)}else 401!==Me.status&&404!==Me.status&&Ge("Got unsuccessful REST response for "+se+" Status: "+Me.status),T(Me.status);T=null}},Me.open("GET",se,!0),Me.send()})}}class Wa{constructor(){this.rootNode_=Br.EMPTY_NODE}getNode(h){return this.rootNode_.getChild(h)}updateSnapshot(h,f){this.rootNode_=this.rootNode_.updateChild(h,f)}}function sc(){return{value:null,children:new Map}}function Uo(y,h,f){if(xn(h))y.value=f,y.children.clear();else if(null!==y.value)y.value=y.value.updateChild(h,f);else{const T=Bn(h);y.children.has(T)||y.children.set(T,sc()),Uo(y.children.get(T),h=wr(h),f)}}function za(y,h){if(xn(h))return y.value=null,y.children.clear(),!0;if(null!==y.value){if(y.value.isLeafNode())return!1;{const f=y.value;return y.value=null,f.forEachChild(Ii,(T,V)=>{Uo(y,new jt(T),V)}),za(y,h)}}if(y.children.size>0){const f=Bn(h);return h=wr(h),y.children.has(f)&&za(y.children.get(f),h)&&y.children.delete(f),0===y.children.size}return!0}function ao(y,h,f){null!==y.value?f(h,y.value):function Pc(y,h){y.children.forEach((f,T)=>{h(T,f)})}(y,(T,V)=>{ao(V,new jt(h.toString()+"/"+T),f)})}class no{constructor(h){this.collection_=h,this.last_=null}get(){const h=this.collection_.get(),f=Object.assign({},h);return this.last_&&Ht(this.last_,(T,V)=>{f[T]=f[T]-V}),this.last_=h,f}}class Vi{constructor(h,f){this.server_=f,this.statsToReport_={},this.statsListener_=new no(h);const T=1e4+2e4*Math.random();fr(this.reportStats_.bind(this),Math.floor(T))}reportStats_(){const h=this.statsListener_.get(),f={};let T=!1;Ht(h,(V,Z)=>{Z>0&&(0,H.gR)(this.statsToReport_,V)&&(f[V]=Z,T=!0)}),T&&this.server_.reportStats(f),fr(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Qi=function(y){return y[y.OVERWRITE=0]="OVERWRITE",y[y.MERGE=1]="MERGE",y[y.ACK_USER_WRITE=2]="ACK_USER_WRITE",y[y.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",y}(Qi||{});function Mc(y){return{fromUser:!1,fromServer:!0,queryId:y,tagged:!0}}class ma{constructor(h,f,T){this.path=h,this.affectedTree=f,this.revert=T,this.type=Qi.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(h){if(xn(this.path)){if(null!=this.affectedTree.value)return(0,H.vA)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const f=this.affectedTree.subtree(new jt(h));return new ma(Xn(),f,this.revert)}}return(0,H.vA)(Bn(this.path)===h,"operationForChild called for unrelated child."),new ma(wr(this.path),this.affectedTree,this.revert)}}class ga{constructor(h,f){this.source=h,this.path=f,this.type=Qi.LISTEN_COMPLETE}operationForChild(h){return xn(this.path)?new ga(this.source,Xn()):new ga(this.source,wr(this.path))}}class yo{constructor(h,f,T){this.source=h,this.path=f,this.snap=T,this.type=Qi.OVERWRITE}operationForChild(h){return xn(this.path)?new yo(this.source,Xn(),this.snap.getImmediateChild(h)):new yo(this.source,wr(this.path),this.snap)}}class vo{constructor(h,f,T){this.source=h,this.path=f,this.children=T,this.type=Qi.MERGE}operationForChild(h){if(xn(this.path)){const f=this.children.subtree(new jt(h));return f.isEmpty()?null:f.value?new yo(this.source,Xn(),f.value):new vo(this.source,Xn(),f)}return(0,H.vA)(Bn(this.path)===h,"Can't get a merge for a child not on the path of the operation"),new vo(this.source,wr(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class _a{constructor(h,f,T){this.node_=h,this.fullyInitialized_=f,this.filtered_=T}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(h){if(xn(h))return this.isFullyInitialized()&&!this.filtered_;const f=Bn(h);return this.isCompleteForChild(f)}isCompleteForChild(h){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(h)}getNode(){return this.node_}}class Zo{constructor(h){this.query_=h,this.index_=this.query_._queryParams.getIndex()}}function hs(y,h,f,T,V,Z){const se=T.filter(Me=>Me.type===f);se.sort((Me,Je)=>function ri(y,h,f){if(null==h.childName||null==f.childName)throw(0,H.Hk)("Should only compare child_ events.");const T=new jn(h.childName,h.snapshotNode),V=new jn(f.childName,f.snapshotNode);return y.index_.compare(T,V)}(y,Me,Je)),se.forEach(Me=>{const Je=function Ra(y,h,f){return"value"===h.type||"child_removed"===h.type||(h.prevName=f.getPredecessorChildName(h.childName,h.snapshotNode,y.index_)),h}(y,Me,Z);V.forEach(pt=>{pt.respondsTo(Me.type)&&h.push(pt.createEvent(Je,y.query_))})})}function Ui(y,h){return{eventCache:y,serverCache:h}}function Ci(y,h,f,T){return Ui(new _a(h,f,T),y.serverCache)}function Bo(y,h,f,T){return Ui(y.eventCache,new _a(h,f,T))}function Ss(y){return y.eventCache.isFullyInitialized()?y.eventCache.getNode():null}function Pa(y){return y.serverCache.isFullyInitialized()?y.serverCache.getNode():null}let rl;class zi{constructor(h,f=(()=>(rl||(rl=new ys(an)),rl))()){this.value=h,this.children=f}static fromObject(h){let f=new zi(null);return Ht(h,(T,V)=>{f=f.set(new jt(T),V)}),f}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(h,f){if(null!=this.value&&f(this.value))return{path:Xn(),value:this.value};if(xn(h))return null;{const T=Bn(h),V=this.children.get(T);if(null!==V){const Z=V.findRootMostMatchingPathAndValue(wr(h),f);return null!=Z?{path:_r(new jt(T),Z.path),value:Z.value}:null}return null}}findRootMostValueAndPath(h){return this.findRootMostMatchingPathAndValue(h,()=>!0)}subtree(h){if(xn(h))return this;{const f=Bn(h),T=this.children.get(f);return null!==T?T.subtree(wr(h)):new zi(null)}}set(h,f){if(xn(h))return new zi(f,this.children);{const T=Bn(h),Z=(this.children.get(T)||new zi(null)).set(wr(h),f),se=this.children.insert(T,Z);return new zi(this.value,se)}}remove(h){if(xn(h))return this.children.isEmpty()?new zi(null):new zi(null,this.children);{const f=Bn(h),T=this.children.get(f);if(T){const V=T.remove(wr(h));let Z;return Z=V.isEmpty()?this.children.remove(f):this.children.insert(f,V),null===this.value&&Z.isEmpty()?new zi(null):new zi(this.value,Z)}return this}}get(h){if(xn(h))return this.value;{const f=Bn(h),T=this.children.get(f);return T?T.get(wr(h)):null}}setTree(h,f){if(xn(h))return f;{const T=Bn(h),Z=(this.children.get(T)||new zi(null)).setTree(wr(h),f);let se;return se=Z.isEmpty()?this.children.remove(T):this.children.insert(T,Z),new zi(this.value,se)}}fold(h){return this.fold_(Xn(),h)}fold_(h,f){const T={};return this.children.inorderTraversal((V,Z)=>{T[V]=Z.fold_(_r(h,V),f)}),f(h,this.value,T)}findOnPath(h,f){return this.findOnPath_(h,Xn(),f)}findOnPath_(h,f,T){const V=!!this.value&&T(f,this.value);if(V)return V;if(xn(h))return null;{const Z=Bn(h),se=this.children.get(Z);return se?se.findOnPath_(wr(h),_r(f,Z),T):null}}foreachOnPath(h,f){return this.foreachOnPath_(h,Xn(),f)}foreachOnPath_(h,f,T){if(xn(h))return this;{this.value&&T(f,this.value);const V=Bn(h),Z=this.children.get(V);return Z?Z.foreachOnPath_(wr(h),_r(f,V),T):new zi(null)}}foreach(h){this.foreach_(Xn(),h)}foreach_(h,f){this.children.inorderTraversal((T,V)=>{V.foreach_(_r(h,T),f)}),this.value&&f(h,this.value)}foreachChild(h){this.children.inorderTraversal((f,T)=>{T.value&&h(f,T.value)})}}class Ro{constructor(h){this.writeTree_=h}static empty(){return new Ro(new zi(null))}}function Po(y,h,f){if(xn(h))return new Ro(new zi(f));{const T=y.writeTree_.findRootMostValueAndPath(h);if(null!=T){const V=T.path;let Z=T.value;const se=Zr(V,h);return Z=Z.updateChild(se,f),new Ro(y.writeTree_.set(V,Z))}{const V=new zi(f),Z=y.writeTree_.setTree(h,V);return new Ro(Z)}}}function Ha(y,h,f){let T=y;return Ht(f,(V,Z)=>{T=Po(T,_r(h,V),Z)}),T}function il(y,h){if(xn(h))return Ro.empty();{const f=y.writeTree_.setTree(h,new zi(null));return new Ro(f)}}function oc(y,h){return null!=ya(y,h)}function ya(y,h){const f=y.writeTree_.findRootMostValueAndPath(h);return null!=f?y.writeTree_.get(f.path).getChild(Zr(f.path,h)):null}function Ou(y){const h=[],f=y.writeTree_.value;return null!=f?f.isLeafNode()||f.forEachChild(Ii,(T,V)=>{h.push(new jn(T,V))}):y.writeTree_.children.inorderTraversal((T,V)=>{null!=V.value&&h.push(new jn(T,V.value))}),h}function jo(y,h){if(xn(h))return y;{const f=ya(y,h);return new Ro(null!=f?new zi(f):y.writeTree_.subtree(h))}}function Oc(y){return y.writeTree_.isEmpty()}function Mo(y,h){return ac(Xn(),y.writeTree_,h)}function ac(y,h,f){if(null!=h.value)return f.updateChild(y,h.value);{let T=null;return h.children.inorderTraversal((V,Z)=>{".priority"===V?((0,H.vA)(null!==Z.value,"Priority writes must always be leaf nodes"),T=Z.value):f=ac(_r(y,V),Z,f)}),!f.getChild(y).isEmpty()&&null!==T&&(f=f.updateChild(_r(y,".priority"),T)),f}}function va(y,h){return X(h,y)}function lc(y,h){if(y.snap)return oi(y.path,h);for(const f in y.children)if(y.children.hasOwnProperty(f)&&oi(_r(y.path,f),h))return!0;return!1}function uc(y){return y.visible}function Oi(y,h,f){let T=Ro.empty();for(let V=0;V<y.length;++V){const Z=y[V];if(h(Z)){const se=Z.path;let Me;if(Z.snap)oi(f,se)?(Me=Zr(f,se),T=Po(T,Me,Z.snap)):oi(se,f)&&(Me=Zr(se,f),T=Po(T,Xn(),Z.snap.getChild(Me)));else{if(!Z.children)throw(0,H.Hk)("WriteRecord should have .snap or .children");if(oi(f,se))Me=Zr(f,se),T=Ha(T,Me,Z.children);else if(oi(se,f))if(Me=Zr(se,f),xn(Me))T=Ha(T,Xn(),Z.children);else{const Je=(0,H.yw)(Z.children,Bn(Me));if(Je){const pt=Je.getChild(wr(Me));T=Po(T,Xn(),pt)}}}}}return T}function $o(y,h,f,T,V){if(T||V){const Z=jo(y.visibleWrites,h);return!V&&Oc(Z)?f:V||null!=f||oc(Z,Xn())?Mo(Oi(y.allWrites,function(pt){return(pt.visible||V)&&(!T||!~T.indexOf(pt.writeId))&&(oi(pt.path,h)||oi(h,pt.path))},h),f||Br.EMPTY_NODE):null}{const Z=ya(y.visibleWrites,h);if(null!=Z)return Z;{const se=jo(y.visibleWrites,h);return Oc(se)?f:null!=f||oc(se,Xn())?Mo(se,f||Br.EMPTY_NODE):null}}}function Ea(y,h,f,T){return $o(y.writeTree,y.treePath,h,f,T)}function Eo(y,h){return function Jo(y,h,f){let T=Br.EMPTY_NODE;const V=ya(y.visibleWrites,h);if(V)return V.isLeafNode()||V.forEachChild(Ii,(Z,se)=>{T=T.updateImmediateChild(Z,se)}),T;if(f){const Z=jo(y.visibleWrites,h);return f.forEachChild(Ii,(se,Me)=>{const Je=Mo(jo(Z,new jt(se)),Me);T=T.updateImmediateChild(se,Je)}),Ou(Z).forEach(se=>{T=T.updateImmediateChild(se.name,se.node)}),T}return Ou(jo(y.visibleWrites,h)).forEach(se=>{T=T.updateImmediateChild(se.name,se.node)}),T}(y.writeTree,y.treePath,h)}function ea(y,h,f,T){return function dc(y,h,f,T,V){(0,H.vA)(T||V,"Either existingEventSnap or existingServerSnap must exist");const Z=_r(h,f);if(oc(y.visibleWrites,Z))return null;{const se=jo(y.visibleWrites,Z);return Oc(se)?V.getChild(f):Mo(se,V.getChild(f))}}(y.writeTree,y.treePath,h,f,T)}function ta(y,h){return function xc(y,h){return ya(y.visibleWrites,h)}(y.writeTree,_r(y.treePath,h))}function L(y,h,f){return function su(y,h,f,T){const V=_r(h,f),Z=ya(y.visibleWrites,V);return null!=Z?Z:T.isCompleteForChild(f)?Mo(jo(y.visibleWrites,V),T.getNode().getImmediateChild(f)):null}(y.writeTree,y.treePath,h,f)}function _e(y,h){return X(_r(y.treePath,h),y.writeTree)}function X(y,h){return{treePath:y,writeTree:h}}class ue{constructor(){this.changeMap=new Map}trackChildChange(h){const f=h.type,T=h.childName;(0,H.vA)("child_added"===f||"child_changed"===f||"child_removed"===f,"Only child changes supported for tracking"),(0,H.vA)(".priority"!==T,"Only non-priority child changes can be tracked.");const V=this.changeMap.get(T);if(V){const Z=V.type;if("child_added"===f&&"child_removed"===Z)this.changeMap.set(T,ns(T,h.snapshotNode,V.snapshotNode));else if("child_removed"===f&&"child_added"===Z)this.changeMap.delete(T);else if("child_removed"===f&&"child_changed"===Z)this.changeMap.set(T,ss(T,V.oldSnap));else if("child_changed"===f&&"child_added"===Z)this.changeMap.set(T,Ns(T,h.snapshotNode));else{if("child_changed"!==f||"child_changed"!==Z)throw(0,H.Hk)("Illegal combination of changes: "+h+" occurred after "+V);this.changeMap.set(T,ns(T,h.snapshotNode,V.oldSnap))}}else this.changeMap.set(T,h)}getChanges(){return Array.from(this.changeMap.values())}}const cn=new class qe{getCompleteChild(h){return null}getChildAfterChild(h,f,T){return null}};class Nn{constructor(h,f,T=null){this.writes_=h,this.viewCache_=f,this.optCompleteServerCache_=T}getCompleteChild(h){const f=this.viewCache_.eventCache;if(f.isCompleteForChild(h))return f.getNode().getImmediateChild(h);{const T=null!=this.optCompleteServerCache_?new _a(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return L(this.writes_,h,T)}}getChildAfterChild(h,f,T){const V=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Pa(this.viewCache_),Z=function Nc(y,h,f,T,V,Z){return function Al(y,h,f,T,V,Z,se){let Me;const Je=jo(y.visibleWrites,h),pt=ya(Je,Xn());if(null!=pt)Me=pt;else{if(null==f)return[];Me=Mo(Je,f)}if(Me=Me.withIndex(se),Me.isEmpty()||Me.isLeafNode())return[];{const _n=[],Tn=se.getCompare(),Ln=Z?Me.getReverseIteratorFrom(T,se):Me.getIteratorFrom(T,se);let Ir=Ln.getNext();for(;Ir&&_n.length<V;)0!==Tn(Ir,T)&&_n.push(Ir),Ir=Ln.getNext();return _n}}(y.writeTree,y.treePath,h,f,T,V,Z)}(this.writes_,V,f,1,T,h);return 0===Z.length?null:Z[0]}}function _i(y,h,f,T,V,Z){const se=h.eventCache;if(null!=ta(T,f))return h;{let Me,Je;if(xn(f))if((0,H.vA)(h.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),h.serverCache.isFiltered()){const pt=Pa(h),Tn=Eo(T,pt instanceof Br?pt:Br.EMPTY_NODE);Me=y.filter.updateFullNode(h.eventCache.getNode(),Tn,Z)}else{const pt=Ea(T,Pa(h));Me=y.filter.updateFullNode(h.eventCache.getNode(),pt,Z)}else{const pt=Bn(f);if(".priority"===pt){(0,H.vA)(1===ti(f),"Can't have a priority with additional path components");const _n=se.getNode();Je=h.serverCache.getNode();const Tn=ea(T,f,_n,Je);Me=null!=Tn?y.filter.updatePriority(_n,Tn):se.getNode()}else{const _n=wr(f);let Tn;if(se.isCompleteForChild(pt)){Je=h.serverCache.getNode();const Ln=ea(T,f,se.getNode(),Je);Tn=null!=Ln?se.getNode().getImmediateChild(pt).updateChild(_n,Ln):se.getNode().getImmediateChild(pt)}else Tn=L(T,pt,h.serverCache);Me=null!=Tn?y.filter.updateChild(se.getNode(),pt,Tn,_n,V,Z):se.getNode()}}return Ci(h,Me,se.isFullyInitialized()||xn(f),y.filter.filtersNodes())}}function ws(y,h,f,T,V,Z,se,Me){const Je=h.serverCache;let pt;const _n=se?y.filter:y.filter.getIndexedFilter();if(xn(f))pt=_n.updateFullNode(Je.getNode(),T,null);else if(_n.filtersNodes()&&!Je.isFiltered()){const Ir=Je.getNode().updateChild(f,T);pt=_n.updateFullNode(Je.getNode(),Ir,null)}else{const Ir=Bn(f);if(!Je.isCompleteForPath(f)&&ti(f)>1)return h;const Hr=wr(f),To=Je.getNode().getImmediateChild(Ir).updateChild(Hr,T);pt=".priority"===Ir?_n.updatePriority(Je.getNode(),To):_n.updateChild(Je.getNode(),Ir,To,Hr,cn,null)}const Tn=Bo(h,pt,Je.isFullyInitialized()||xn(f),_n.filtersNodes());return _i(y,Tn,f,V,new Nn(V,Tn,Z),Me)}function Si(y,h,f,T,V,Z,se){const Me=h.eventCache;let Je,pt;const _n=new Nn(V,h,Z);if(xn(f))pt=y.filter.updateFullNode(h.eventCache.getNode(),T,se),Je=Ci(h,pt,!0,y.filter.filtersNodes());else{const Tn=Bn(f);if(".priority"===Tn)pt=y.filter.updatePriority(h.eventCache.getNode(),T),Je=Ci(h,pt,Me.isFullyInitialized(),Me.isFiltered());else{const Ln=wr(f),Ir=Me.getNode().getImmediateChild(Tn);let Hr;if(xn(Ln))Hr=T;else{const di=_n.getCompleteChild(Tn);Hr=null!=di?".priority"===yn(Ln)&&di.getChild(gr(Ln)).isEmpty()?di:di.updateChild(Ln,T):Br.EMPTY_NODE}Je=Ir.equals(Hr)?h:Ci(h,y.filter.updateChild(Me.getNode(),Tn,Hr,Ln,_n,se),Me.isFullyInitialized(),y.filter.filtersNodes())}}return Je}function Ws(y,h){return y.eventCache.isCompleteForChild(h)}function xi(y,h,f){return f.foreach((T,V)=>{h=h.updateChild(T,V)}),h}function Gn(y,h,f,T,V,Z,se,Me){if(h.serverCache.getNode().isEmpty()&&!h.serverCache.isFullyInitialized())return h;let pt,Je=h;pt=xn(f)?T:new zi(null).setTree(f,T);const _n=h.serverCache.getNode();return pt.children.inorderTraversal((Tn,Ln)=>{if(_n.hasChild(Tn)){const Hr=xi(0,h.serverCache.getNode().getImmediateChild(Tn),Ln);Je=ws(y,Je,new jt(Tn),Hr,V,Z,se,Me)}}),pt.children.inorderTraversal((Tn,Ln)=>{const Ir=!h.serverCache.isCompleteForChild(Tn)&&null===Ln.value;if(!_n.hasChild(Tn)&&!Ir){const di=xi(0,h.serverCache.getNode().getImmediateChild(Tn),Ln);Je=ws(y,Je,new jt(Tn),di,V,Z,se,Me)}}),Je}class Bs{constructor(h,f){this.query_=h,this.eventRegistrations_=[];const T=this.query_._queryParams,V=new Sa(T.getIndex()),Z=function oo(y){return y.loadsAllData()?new Sa(y.getIndex()):y.hasLimit()?new Mi(y):new qs(y)}(T);this.processor_=function cr(y){return{filter:y}}(Z);const se=f.serverCache,Me=f.eventCache,Je=V.updateFullNode(Br.EMPTY_NODE,se.getNode(),null),pt=Z.updateFullNode(Br.EMPTY_NODE,Me.getNode(),null),_n=new _a(Je,se.isFullyInitialized(),V.filtersNodes()),Tn=new _a(pt,Me.isFullyInitialized(),Z.filtersNodes());this.viewCache_=Ui(Tn,_n),this.eventGenerator_=new Zo(this.query_)}get query(){return this.query_}}function Es(y,h){const f=Pa(y.viewCache_);return f&&(y.query._queryParams.loadsAllData()||!xn(h)&&!f.getImmediateChild(Bn(h)).isEmpty())?f.getChild(h):null}function zs(y){return 0===y.eventRegistrations_.length}function jr(y,h,f){const T=[];if(f){(0,H.vA)(null==h,"A cancel should cancel all event registrations.");const V=y.query._path;y.eventRegistrations_.forEach(Z=>{const se=Z.createCancelEvent(f,V);se&&T.push(se)})}if(h){let V=[];for(let Z=0;Z<y.eventRegistrations_.length;++Z){const se=y.eventRegistrations_[Z];if(se.matches(h)){if(h.hasAnyCallback()){V=V.concat(y.eventRegistrations_.slice(Z+1));break}}else V.push(se)}y.eventRegistrations_=V}else y.eventRegistrations_=[];return T}function zl(y,h,f,T){h.type===Qi.MERGE&&null!==h.source.queryId&&((0,H.vA)(Pa(y.viewCache_),"We should always have a full cache before handling merges"),(0,H.vA)(Ss(y.viewCache_),"Missing event cache, even though we have a server cache"));const V=y.viewCache_,Z=function Bi(y,h,f,T,V){const Z=new ue;let se,Me;if(f.type===Qi.OVERWRITE){const pt=f;pt.source.fromUser?se=Si(y,h,pt.path,pt.snap,T,V,Z):((0,H.vA)(pt.source.fromServer,"Unknown source."),Me=pt.source.tagged||h.serverCache.isFiltered()&&!xn(pt.path),se=ws(y,h,pt.path,pt.snap,T,V,Me,Z))}else if(f.type===Qi.MERGE){const pt=f;pt.source.fromUser?se=function Ka(y,h,f,T,V,Z,se){let Me=h;return T.foreach((Je,pt)=>{const _n=_r(f,Je);Ws(h,Bn(_n))&&(Me=Si(y,Me,_n,pt,V,Z,se))}),T.foreach((Je,pt)=>{const _n=_r(f,Je);Ws(h,Bn(_n))||(Me=Si(y,Me,_n,pt,V,Z,se))}),Me}(y,h,pt.path,pt.children,T,V,Z):((0,H.vA)(pt.source.fromServer,"Unknown source."),Me=pt.source.tagged||h.serverCache.isFiltered(),se=Gn(y,h,pt.path,pt.children,T,V,Me,Z))}else if(f.type===Qi.ACK_USER_WRITE){const pt=f;se=pt.revert?function Us(y,h,f,T,V,Z){let se;if(null!=ta(T,f))return h;{const Me=new Nn(T,h,V),Je=h.eventCache.getNode();let pt;if(xn(f)||".priority"===Bn(f)){let _n;if(h.serverCache.isFullyInitialized())_n=Ea(T,Pa(h));else{const Tn=h.serverCache.getNode();(0,H.vA)(Tn instanceof Br,"serverChildren would be complete if leaf node"),_n=Eo(T,Tn)}pt=y.filter.updateFullNode(Je,_n,Z)}else{const _n=Bn(f);let Tn=L(T,_n,h.serverCache);null==Tn&&h.serverCache.isCompleteForChild(_n)&&(Tn=Je.getImmediateChild(_n)),pt=null!=Tn?y.filter.updateChild(Je,_n,Tn,wr(f),Me,Z):h.eventCache.getNode().hasChild(_n)?y.filter.updateChild(Je,_n,Br.EMPTY_NODE,wr(f),Me,Z):Je,pt.isEmpty()&&h.serverCache.isFullyInitialized()&&(se=Ea(T,Pa(h)),se.isLeafNode()&&(pt=y.filter.updateFullNode(pt,se,Z)))}return se=h.serverCache.isFullyInitialized()||null!=ta(T,Xn()),Ci(h,pt,se,y.filter.filtersNodes())}}(y,h,pt.path,T,V,Z):function Er(y,h,f,T,V,Z,se){if(null!=ta(V,f))return h;const Me=h.serverCache.isFiltered(),Je=h.serverCache;if(null!=T.value){if(xn(f)&&Je.isFullyInitialized()||Je.isCompleteForPath(f))return ws(y,h,f,Je.getNode().getChild(f),V,Z,Me,se);if(xn(f)){let pt=new zi(null);return Je.getNode().forEachChild(ds,(_n,Tn)=>{pt=pt.set(new jt(_n),Tn)}),Gn(y,h,f,pt,V,Z,Me,se)}return h}{let pt=new zi(null);return T.foreach((_n,Tn)=>{const Ln=_r(f,_n);Je.isCompleteForPath(Ln)&&(pt=pt.set(_n,Je.getNode().getChild(Ln)))}),Gn(y,h,f,pt,V,Z,Me,se)}}(y,h,pt.path,pt.affectedTree,T,V,Z)}else{if(f.type!==Qi.LISTEN_COMPLETE)throw(0,H.Hk)("Unknown operation type: "+f.type);se=function Ti(y,h,f,T,V){const Z=h.serverCache;return _i(y,Bo(h,Z.getNode(),Z.isFullyInitialized()||xn(f),Z.isFiltered()),f,T,cn,V)}(y,h,f.path,T,Z)}const Je=Z.getChanges();return function os(y,h,f){const T=h.eventCache;if(T.isFullyInitialized()){const V=T.getNode().isLeafNode()||T.getNode().isEmpty(),Z=Ss(y);(f.length>0||!y.eventCache.isFullyInitialized()||V&&!T.getNode().equals(Z)||!T.getNode().getPriority().equals(Z.getPriority()))&&f.push(mo(Ss(h)))}}(h,se,Je),{viewCache:se,changes:Je}}(y.processor_,V,h,f,T);return function Fr(y,h){(0,H.vA)(h.eventCache.getNode().isIndexed(y.filter.getIndex()),"Event snap not indexed"),(0,H.vA)(h.serverCache.getNode().isIndexed(y.filter.getIndex()),"Server snap not indexed")}(y.processor_,Z.viewCache),(0,H.vA)(Z.viewCache.serverCache.isFullyInitialized()||!V.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),y.viewCache_=Z.viewCache,kc(y,Z.changes,Z.viewCache.eventCache.getNode(),null)}function kc(y,h,f,T){return function Mu(y,h,f,T){const V=[],Z=[];return h.forEach(se=>{"child_changed"===se.type&&y.index_.indexedValueChanged(se.oldSnap,se.snapshotNode)&&Z.push(function ja(y,h){return{type:"child_moved",snapshotNode:h,childName:y}}(se.childName,se.snapshotNode))}),hs(y,V,"child_removed",h,T,f),hs(y,V,"child_added",h,T,f),hs(y,V,"child_moved",Z,T,f),hs(y,V,"child_changed",h,T,f),hs(y,V,"value",h,T,f),V}(y.eventGenerator_,h,f,T?[T]:y.eventRegistrations_)}let fs,ps;class Ga{constructor(){this.views=new Map}}function ou(y,h,f,T){const V=h.source.queryId;if(null!==V){const Z=y.views.get(V);return(0,H.vA)(null!=Z,"SyncTree gave us an op for an invalid query."),zl(Z,h,f,T)}{let Z=[];for(const se of y.views.values())Z=Z.concat(zl(se,h,f,T));return Z}}function Oo(y,h,f,T,V){const se=y.views.get(h._queryIdentifier);if(!se){let Me=Ea(f,V?T:null),Je=!1;Me?Je=!0:T instanceof Br?(Me=Eo(f,T),Je=!1):(Me=Br.EMPTY_NODE,Je=!1);const pt=Ui(new _a(Me,Je,!1),new _a(T,V,!1));return new Bs(h,pt)}return se}function zr(y){const h=[];for(const f of y.views.values())f.query._queryParams.loadsAllData()||h.push(f);return h}function us(y,h){let f=null;for(const T of y.views.values())f=f||Es(T,h);return f}function Ds(y,h){return h._queryParams.loadsAllData()?hc(y):y.views.get(h._queryIdentifier)}function ra(y,h){return null!=Ds(y,h)}function ba(y){return null!=hc(y)}function hc(y){for(const h of y.views.values())if(h.query._queryParams.loadsAllData())return h;return null}let Qs=1;class al{constructor(h){this.listenProvider_=h,this.syncPointTree_=new zi(null),this.pendingWriteTree_=function vd(){return{visibleWrites:Ro.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function xa(y,h,f,T,V){return function Ma(y,h,f,T,V){(0,H.vA)(T>y.lastWriteId,"Stacking an older write on top of newer ones"),void 0===V&&(V=!0),y.allWrites.push({path:h,snap:f,writeId:T,visible:V}),V&&(y.visibleWrites=Po(y.visibleWrites,h,f)),y.lastWriteId=T}(y.pendingWriteTree_,h,f,T,V),V?k(y,new yo({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},h,f)):[]}function ms(y,h,f=!1){const T=function sl(y,h){for(let f=0;f<y.allWrites.length;f++){const T=y.allWrites[f];if(T.writeId===h)return T}return null}(y.pendingWriteTree_,h);if(function ol(y,h){const f=y.allWrites.findIndex(Me=>Me.writeId===h);(0,H.vA)(f>=0,"removeWrite called with nonexistent writeId.");const T=y.allWrites[f];y.allWrites.splice(f,1);let V=T.visible,Z=!1,se=y.allWrites.length-1;for(;V&&se>=0;){const Me=y.allWrites[se];Me.visible&&(se>=f&&lc(Me,T.path)?V=!1:oi(T.path,Me.path)&&(Z=!0)),se--}return!!V&&(Z?(function Wl(y){y.visibleWrites=Oi(y.allWrites,uc,Xn()),y.lastWriteId=y.allWrites.length>0?y.allWrites[y.allWrites.length-1].writeId:-1}(y),!0):(T.snap?y.visibleWrites=il(y.visibleWrites,T.path):Ht(T.children,Je=>{y.visibleWrites=il(y.visibleWrites,_r(T.path,Je))}),!0))}(y.pendingWriteTree_,h)){let Z=new zi(null);return null!=T.snap?Z=Z.set(Xn(),!0):Ht(T.children,se=>{Z=Z.set(new jt(se),!0)}),k(y,new ma(T.path,Z,f))}return[]}function Na(y,h,f){return k(y,new yo({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},h,f))}function Kl(y,h,f,T,V=!1){const Z=h._path,se=y.syncPointTree_.get(Z);let Me=[];if(se&&("default"===h._queryIdentifier||ra(se,h))){const Je=function Oa(y,h,f,T){const V=h._queryIdentifier,Z=[];let se=[];const Me=ba(y);if("default"===V)for(const[Je,pt]of y.views.entries())se=se.concat(jr(pt,f,T)),zs(pt)&&(y.views.delete(Je),pt.query._queryParams.loadsAllData()||Z.push(pt.query));else{const Je=y.views.get(V);Je&&(se=se.concat(jr(Je,f,T)),zs(Je)&&(y.views.delete(V),Je.query._queryParams.loadsAllData()||Z.push(Je.query)))}return Me&&!ba(y)&&Z.push(new(function Lc(){return(0,H.vA)(fs,"Reference.ts has not been loaded"),fs}())(h._repo,h._path)),{removed:Z,events:se}}(se,h,f,T);(function bs(y){return 0===y.views.size})(se)&&(y.syncPointTree_=y.syncPointTree_.remove(Z));const pt=Je.removed;if(Me=Je.events,!V){const _n=-1!==pt.findIndex(Ln=>Ln._queryParams.loadsAllData()),Tn=y.syncPointTree_.findOnPath(Z,(Ln,Ir)=>ba(Ir));if(_n&&!Tn){const Ln=y.syncPointTree_.subtree(Z);if(!Ln.isEmpty()){const Ir=function pi(y){return y.fold((h,f,T)=>{if(f&&ba(f))return[hc(f)];{let V=[];return f&&(V=zr(f)),Ht(T,(Z,se)=>{V=V.concat(se)}),V}})}(Ln);for(let Hr=0;Hr<Ir.length;++Hr){const di=Ir[Hr],To=di.query,aa=Ce(y,di);y.listenProvider_.startListening(Yi(To),rt(y,To),aa.hashFn,aa.onComplete)}}}!Tn&&pt.length>0&&!T&&(_n?y.listenProvider_.stopListening(Yi(h),null):pt.forEach(Ln=>{const Ir=y.queryToTagMap.get(on(Ln));y.listenProvider_.stopListening(Yi(Ln),Ir)}))}!function Sl(y,h){for(let f=0;f<h.length;++f){const T=h[f];if(!T._queryParams.loadsAllData()){const V=on(T),Z=y.queryToTagMap.get(V);y.queryToTagMap.delete(V),y.tagToQueryMap.delete(Z)}}}(y,pt)}return Me}function nd(y,h,f,T){const V=Qt(y,T);if(null!=V){const Z=pr(V),se=Z.path,Me=Z.queryId,Je=Zr(se,h);return li(y,se,new yo(Mc(Me),Je,f))}return[]}function Vc(y,h,f,T=!1){const V=h._path;let Z=null,se=!1;y.syncPointTree_.foreachOnPath(V,(Ln,Ir)=>{const Hr=Zr(Ln,V);Z=Z||us(Ir,Hr),se=se||ba(Ir)});let Je,Me=y.syncPointTree_.get(V);Me?(se=se||ba(Me),Z=Z||us(Me,Xn())):(Me=new Ga,y.syncPointTree_=y.syncPointTree_.set(V,Me)),null!=Z?Je=!0:(Je=!1,Z=Br.EMPTY_NODE,y.syncPointTree_.subtree(V).foreachChild((Ir,Hr)=>{const di=us(Hr,Xn());di&&(Z=Z.updateImmediateChild(Ir,di))}));const pt=ra(Me,h);if(!pt&&!h._queryParams.loadsAllData()){const Ln=on(h);(0,H.vA)(!y.queryToTagMap.has(Ln),"View does not exist, but we have a tag");const Ir=function Gl(){return Qs++}();y.queryToTagMap.set(Ln,Ir),y.tagToQueryMap.set(Ir,Ln)}let Tn=function au(y,h,f,T,V,Z){const se=Oo(y,h,T,V,Z);return y.views.has(h._queryIdentifier)||y.views.set(h._queryIdentifier,se),function na(y,h){y.eventRegistrations_.push(h)}(se,f),function td(y,h){const f=y.viewCache_.eventCache,T=[];return f.getNode().isLeafNode()||f.getNode().forEachChild(Ii,(Z,se)=>{T.push(Ns(Z,se))}),f.isFullyInitialized()&&T.push(mo(f.getNode())),kc(y,T,f.getNode(),h)}(se,f)}(Me,h,f,va(y.pendingWriteTree_,V),Z,Je);if(!pt&&!se&&!T){const Ln=Ds(Me,h);Tn=Tn.concat(function ql(y,h,f){const T=h._path,V=rt(y,h),Z=Ce(y,f),se=y.listenProvider_.startListening(Yi(h),V,Z.hashFn,Z.onComplete),Me=y.syncPointTree_.subtree(T);if(V)(0,H.vA)(!ba(Me.value),"If we're adding a query, it shouldn't be shadowed");else{const Je=Me.fold((pt,_n,Tn)=>{if(!xn(pt)&&_n&&ba(_n))return[hc(_n).query];{let Ln=[];return _n&&(Ln=Ln.concat(zr(_n).map(Ir=>Ir.query))),Ht(Tn,(Ir,Hr)=>{Ln=Ln.concat(Hr)}),Ln}});for(let pt=0;pt<Je.length;++pt){const _n=Je[pt];y.listenProvider_.stopListening(Yi(_n),rt(y,_n))}}return se}(y,h,Ln))}return Tn}function O(y,h,f){const V=y.pendingWriteTree_,Z=y.syncPointTree_.findOnPath(h,(se,Me)=>{const pt=us(Me,Zr(se,h));if(pt)return pt});return $o(V,h,Z,f,!0)}function k(y,h){return W(h,y.syncPointTree_,null,va(y.pendingWriteTree_,Xn()))}function W(y,h,f,T){if(xn(y.path))return ae(y,h,f,T);{const V=h.get(Xn());null==f&&null!=V&&(f=us(V,Xn()));let Z=[];const se=Bn(y.path),Me=y.operationForChild(se),Je=h.children.get(se);if(Je&&Me){const pt=f?f.getImmediateChild(se):null,_n=_e(T,se);Z=Z.concat(W(Me,Je,pt,_n))}return V&&(Z=Z.concat(ou(V,y,T,f))),Z}}function ae(y,h,f,T){const V=h.get(Xn());null==f&&null!=V&&(f=us(V,Xn()));let Z=[];return h.children.inorderTraversal((se,Me)=>{const Je=f?f.getImmediateChild(se):null,pt=_e(T,se),_n=y.operationForChild(se);_n&&(Z=Z.concat(ae(_n,Me,Je,pt)))}),V&&(Z=Z.concat(ou(V,y,T,f))),Z}function Ce(y,h){const f=h.query,T=rt(y,f);return{hashFn:()=>(function bo(y){return y.viewCache_.serverCache.getNode()}(h)||Br.EMPTY_NODE).hash(),onComplete:V=>{if("ok"===V)return T?function Cl(y,h,f){const T=Qt(y,f);if(T){const V=pr(T),Z=V.path,se=V.queryId,Me=Zr(Z,h);return li(y,Z,new ga(Mc(se),Me))}return[]}(y,f._path,T):function bd(y,h){return k(y,new ga({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},h))}(y,f._path);{const Z=function ft(y,h){let f="Unknown Error";"too_big"===y?f="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===y?f="Client doesn't have permission to access the desired data.":"unavailable"===y&&(f="The service is unavailable");const T=new Error(y+" at "+h._path.toString()+": "+f);return T.code=y.toUpperCase(),T}(V,f);return Kl(y,f,null,Z)}}}}function rt(y,h){const f=on(h);return y.queryToTagMap.get(f)}function on(y){return y._path.toString()+"$"+y._queryIdentifier}function Qt(y,h){return y.tagToQueryMap.get(h)}function pr(y){const h=y.indexOf("$");return(0,H.vA)(-1!==h&&h<y.length-1,"Bad queryKey."),{queryId:y.substr(h+1),path:new jt(y.substr(0,h))}}function li(y,h,f){const T=y.syncPointTree_.get(h);return(0,H.vA)(T,"Missing sync point for query tag that we're tracking"),ou(T,f,va(y.pendingWriteTree_,h),null)}function Yi(y){return y._queryParams.loadsAllData()&&!y._queryParams.isDefault()?new(function xo(){return(0,H.vA)(ps,"Reference.ts has not been loaded"),ps}())(y._repo,y._path):y}class lu{constructor(h){this.node_=h}getImmediateChild(h){const f=this.node_.getImmediateChild(h);return new lu(f)}node(){return this.node_}}class qa{constructor(h,f){this.syncTree_=h,this.path_=f}getImmediateChild(h){const f=_r(this.path_,h);return new qa(this.syncTree_,f)}node(){return O(this.syncTree_,this.path_)}}const Wd=function(y){return(y=y||{}).timestamp=y.timestamp||(new Date).getTime(),y},Id=function(y,h,f){return y&&"object"==typeof y?((0,H.vA)(".sv"in y,"Unexpected leaf node or priority contents"),"string"==typeof y[".sv"]?zd(y[".sv"],h,f):"object"==typeof y[".sv"]?xu(y[".sv"],h):void(0,H.vA)(!1,"Unexpected server value: "+JSON.stringify(y,null,2))):y},zd=function(y,h,f){if("timestamp"===y)return f.timestamp;(0,H.vA)(!1,"Unexpected server value: "+y)},xu=function(y,h,f){y.hasOwnProperty("increment")||(0,H.vA)(!1,"Unexpected server value: "+JSON.stringify(y,null,2));const T=y.increment;"number"!=typeof T&&(0,H.vA)(!1,"Unexpected increment value: "+T);const V=h.node();if((0,H.vA)(null!==V&&typeof V<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!V.isLeafNode())return T;const se=V.getValue();return"number"!=typeof se?T:se+T},uu=function(y,h,f,T){return Uc(h,new qa(f,y),T)},Nu=function(y,h,f){return Uc(y,new lu(h),f)};function Uc(y,h,f){const T=y.getPriority().val(),V=Id(T,h.getImmediateChild(".priority"),f);let Z;if(y.isLeafNode()){const se=y,Me=Id(se.getValue(),h,f);return Me!==se.getValue()||V!==se.getPriority().val()?new Ur(Me,Pr(V)):y}{const se=y;return Z=se,V!==se.getPriority().val()&&(Z=Z.updatePriority(new Ur(V))),se.forEachChild(Ii,(Me,Je)=>{const pt=Uc(Je,h.getImmediateChild(Me),f);pt!==Je&&(Z=Z.updateImmediateChild(Me,pt))}),Z}}class rd{constructor(h="",f=null,T={children:{},childCount:0}){this.name=h,this.parent=f,this.node=T}}function Ql(y,h){let f=h instanceof jt?h:new jt(h),T=y,V=Bn(f);for(;null!==V;){const Z=(0,H.yw)(T.node.children,V)||{children:{},childCount:0};T=new rd(V,T,Z),f=wr(f),V=Bn(f)}return T}function Dl(y){return y.node.value}function ia(y,h){y.node.value=h,cl(y)}function du(y){return y.node.childCount>0}function Qa(y,h){Ht(y.node.children,(f,T)=>{h(new rd(f,y,T))})}function Wo(y,h,f,T){f&&!T&&h(y),Qa(y,V=>{Wo(V,h,!0,T)}),f&&T&&h(y)}function Ai(y){return new jt(null===y.parent?y.name:Ai(y.parent)+"/"+y.name)}function cl(y){null!==y.parent&&function fu(y,h,f){const T=function hu(y){return void 0===Dl(y)&&!du(y)}(f),V=(0,H.gR)(y.node.children,h);T&&V?(delete y.node.children[h],y.node.childCount--,cl(y)):!T&&!V&&(y.node.children[h]=f.node,y.node.childCount++,cl(y))}(y.parent,y.name,y)}const gs=/[\[\].#$\/\u0000-\u001F\u007F]/,ku=/[\[\].#$\u0000-\u001F\u007F]/,ll=10485760,Ya=function(y){return"string"==typeof y&&0!==y.length&&!gs.test(y)},Ia=function(y){return"string"==typeof y&&0!==y.length&&!ku.test(y)},pc=function(y){return null===y||"string"==typeof y||"number"==typeof y&&!ve(y)||y&&"object"==typeof y&&(0,H.gR)(y,".sv")},mc=function(y,h,f,T){T&&void 0===h||sa((0,H.dI)(y,"value"),h,f)},sa=function(y,h,f){const T=f instanceof jt?new As(f,y):f;if(void 0===h)throw new Error(y+"contains undefined "+bt(T));if("function"==typeof h)throw new Error(y+"contains a function "+bt(T)+" with contents = "+h.toString());if(ve(h))throw new Error(y+"contains "+h.toString()+" "+bt(T));if("string"==typeof h&&h.length>ll/3&&(0,H.OE)(h)>ll)throw new Error(y+"contains a string greater than "+ll+" utf8 bytes "+bt(T)+" ('"+h.substring(0,50)+"...')");if(h&&"object"==typeof h){let V=!1,Z=!1;if(Ht(h,(se,Me)=>{if(".value"===se)V=!0;else if(".priority"!==se&&".sv"!==se&&(Z=!0,!Ya(se)))throw new Error(y+" contains an invalid key ("+se+") "+bt(T)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function qi(y,h){y.parts_.length>0&&(y.byteLength_+=1),y.parts_.push(h),y.byteLength_+=(0,H.OE)(h),Zt(y)})(T,se),sa(y,Me,T),function Be(y){const h=y.parts_.pop();y.byteLength_-=(0,H.OE)(h),y.parts_.length>0&&(y.byteLength_-=1)}(T)}),V&&Z)throw new Error(y+' contains ".value" child '+bt(T)+" in addition to actual children.")}},mu=function(y,h,f,T){if(T&&void 0===h)return;const V=(0,H.dI)(y,"values");if(!h||"object"!=typeof h||Array.isArray(h))throw new Error(V+" must be an object containing the children to replace.");const Z=[];Ht(h,(se,Me)=>{const Je=new jt(se);if(sa(V,Me,_r(f,Je)),".priority"===yn(Je)&&!pc(Me))throw new Error(V+"contains an invalid value for '"+Je.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");Z.push(Je)}),function(y,h){let f,T;for(f=0;f<h.length;f++){T=h[f];const Z=or(T);for(let se=0;se<Z.length;se++)if((".priority"!==Z[se]||se!==Z.length-1)&&!Ya(Z[se]))throw new Error(y+"contains an invalid key ("+Z[se]+") in path "+T.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}h.sort(Ri);let V=null;for(f=0;f<h.length;f++){if(T=h[f],null!==V&&oi(V,T))throw new Error(y+"contains a path "+V.toString()+" that is ancestor of another path "+T.toString());V=T}}(V,Z)},Yl=function(y,h,f){if(!f||void 0!==h){if(ve(h))throw new Error((0,H.dI)(y,"priority")+"is "+h.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!pc(h))throw new Error((0,H.dI)(y,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Ta=function(y,h,f,T){if(!(T&&void 0===f||Ya(f)))throw new Error((0,H.dI)(y,h)+'was an invalid key = "'+f+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},oa=function(y,h,f,T){if(!(T&&void 0===f||Ia(f)))throw new Error((0,H.dI)(y,h)+'was an invalid path = "'+f+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},gc=function(y,h,f,T){f&&(f=f.replace(/^\/*\.info(\/|$)/,"/")),oa(y,h,f,T)},Io=function(y,h){if(".info"===Bn(h))throw new Error(y+" failed = Can't modify data under /.info/")},Rl=function(y,h){const f=h.path.toString();if("string"!=typeof h.repoInfo.host||0===h.repoInfo.host.length||!Ya(h.repoInfo.namespace)&&"localhost"!==h.repoInfo.host.split(":")[0]||0!==f.length&&!function(y){return y&&(y=y.replace(/^\/*\.info(\/|$)/,"/")),Ia(y)}(f))throw new Error((0,H.dI)(y,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class Rs{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function ei(y,h){let f=null;for(let T=0;T<h.length;T++){const V=h[T],Z=V.getPath();null!==f&&!kr(Z,f.path)&&(y.eventLists_.push(f),f=null),null===f&&(f={events:[],path:Z}),f.events.push(V)}f&&y.eventLists_.push(f)}function Lu(y,h,f){ei(y,f),Xl(y,T=>kr(T,h))}function lo(y,h,f){ei(y,f),Xl(y,T=>oi(T,h)||oi(h,T))}function Xl(y,h){y.recursionDepth_++;let f=!0;for(let T=0;T<y.eventLists_.length;T++){const V=y.eventLists_[T];V&&(h(V.path)?(Bc(y.eventLists_[T]),y.eventLists_[T]=null):f=!1)}f&&(y.eventLists_=[]),y.recursionDepth_--}function Bc(y){for(let h=0;h<y.events.length;h++){const f=y.events[h];if(null!==f){y.events[h]=null;const T=f.getEventRunner();hn&&Ke("event: "+f.toString()),Cr(T)}}}const dl="repo_interrupt",Fu=25;class Aa{constructor(h,f,T,V){this.repoInfo_=h,this.forceRestClient_=f,this.authTokenProvider_=T,this.appCheckProvider_=V,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Rs,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=sc(),this.transactionQueueTree_=new rd,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function jc(y){const f=y.infoData_.getNode(new jt(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+f}function hl(y){return Wd({timestamp:jc(y)})}function Ml(y,h,f,T,V){y.dataUpdateCount++;const Z=new jt(h);f=y.interceptServerDataCallback_?y.interceptServerDataCallback_(h,f):f;let se=[];if(V)if(T){const Je=(0,H.kH)(f,pt=>Pr(pt));se=function cu(y,h,f,T){const V=Qt(y,T);if(V){const Z=pr(V),se=Z.path,Me=Z.queryId,Je=Zr(se,h),pt=zi.fromObject(f);return li(y,se,new vo(Mc(Me),Je,pt))}return[]}(y.serverSyncTree_,Z,Je,V)}else{const Je=Pr(f);se=nd(y.serverSyncTree_,Z,Je,V)}else if(T){const Je=(0,H.kH)(f,pt=>Pr(pt));se=function $r(y,h,f){const T=zi.fromObject(f);return k(y,new vo({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},h,T))}(y.serverSyncTree_,Z,Je)}else{const Je=Pr(f);se=Na(y.serverSyncTree_,Z,Je)}let Me=Z;se.length>0&&(Me=ks(y,Z)),lo(y.eventQueue_,Me,se)}function id(y,h){ii(y,"connected",h),!1===h&&function Ol(y){yu(y,"onDisconnectEvents");const h=hl(y),f=sc();ao(y.onDisconnect_,Xn(),(V,Z)=>{const se=uu(V,Z,y.serverSyncTree_,h);Uo(f,V,se)});let T=[];ao(f,Xn(),(V,Z)=>{T=T.concat(Na(y.serverSyncTree_,V,Z));const se=Eu(y,V);ks(y,se)}),y.onDisconnect_=sc(),lo(y.eventQueue_,Xn(),T)}(y)}function ii(y,h,f){const T=new jt("/.info/"+h),V=Pr(f);y.infoData_.updateSnapshot(T,V);const Z=Na(y.infoSyncTree_,T,V);lo(y.eventQueue_,T,Z)}function ka(y){return y.nextWriteId_++}function Hi(y,h,f,T,V){yu(y,"set",{path:h.toString(),value:f,priority:T});const Z=hl(y),se=Pr(f,T),Me=O(y.serverSyncTree_,h),Je=Nu(se,Me,Z),pt=ka(y),_n=xa(y.serverSyncTree_,h,Je,pt,!0);ei(y.eventQueue_,_n),y.server_.put(h.toString(),se.val(!0),(Ln,Ir)=>{const Hr="ok"===Ln;Hr||Ge("set at "+h+" failed: "+Ln);const di=ms(y.serverSyncTree_,pt,!Hr);lo(y.eventQueue_,h,di),Ys(0,V,Ln,Ir)});const Tn=Eu(y,h);ks(y,Tn),lo(y.eventQueue_,Tn,[])}function La(y,h,f){y.server_.onDisconnectCancel(h.toString(),(T,V)=>{"ok"===T&&za(y.onDisconnect_,h),Ys(0,f,T,V)})}function gu(y,h,f,T){const V=Pr(f);y.server_.onDisconnectPut(h.toString(),V.val(!0),(Z,se)=>{"ok"===Z&&Uo(y.onDisconnect_,h,V),Ys(0,T,Z,se)})}function $c(y,h,f){let T;T=".info"===Bn(h._path)?Kl(y.infoSyncTree_,h,f):Kl(y.serverSyncTree_,h,f),Lu(y.eventQueue_,h._path,T)}function as(y){y.persistentConnection_&&y.persistentConnection_.interrupt(dl)}function yu(y,...h){let f="";y.persistentConnection_&&(f=y.persistentConnection_.id+":"),Ke(f,...h)}function Ys(y,h,f,T){h&&Cr(()=>{if("ok"===f)h(null);else{const V=(f||"error").toUpperCase();let Z=V;T&&(Z+=": "+T);const se=new Error(Z);se.code=V,h(se)}})}function uh(y,h,f){return O(y.serverSyncTree_,h,f)||Br.EMPTY_NODE}function sd(y,h=y.transactionQueueTree_){if(h||Uu(y,h),Dl(h)){const f=Td(y,h);(0,H.vA)(f.length>0,"Sending zero length transaction queue"),f.every(V=>0===V.status)&&function Hd(y,h,f){const T=f.map(pt=>pt.currentWriteId),V=uh(y,h,T);let Z=V;const se=V.hash();for(let pt=0;pt<f.length;pt++){const _n=f[pt];(0,H.vA)(0===_n.status,"tryToSendTransactionQueue_: items in queue should all be run."),_n.status=1,_n.retryCount++;const Tn=Zr(h,_n.path);Z=Z.updateChild(Tn,_n.currentOutputSnapshotRaw)}const Me=Z.val(!0),Je=h;y.server_.put(Je.toString(),Me,pt=>{yu(y,"transaction put response",{path:Je.toString(),status:pt});let _n=[];if("ok"===pt){const Tn=[];for(let Ln=0;Ln<f.length;Ln++)f[Ln].status=2,_n=_n.concat(ms(y.serverSyncTree_,f[Ln].currentWriteId)),f[Ln].onComplete&&Tn.push(()=>f[Ln].onComplete(null,!0,f[Ln].currentOutputSnapshotResolved)),f[Ln].unwatcher();Uu(y,Ql(y.transactionQueueTree_,h)),sd(y,y.transactionQueueTree_),lo(y.eventQueue_,h,_n);for(let Ln=0;Ln<Tn.length;Ln++)Cr(Tn[Ln])}else{if("datastale"===pt)for(let Tn=0;Tn<f.length;Tn++)f[Tn].status=3===f[Tn].status?4:0;else{Ge("transaction at "+Je.toString()+" failed: "+pt);for(let Tn=0;Tn<f.length;Tn++)f[Tn].status=4,f[Tn].abortReason=pt}ks(y,h)}},se)}(y,Ai(h),f)}else du(h)&&Qa(h,f=>{sd(y,f)})}function ks(y,h){const f=vu(y,h),T=Ai(f);return function od(y,h,f){if(0===h.length)return;const T=[];let V=[];const se=h.filter(Me=>0===Me.status).map(Me=>Me.currentWriteId);for(let Me=0;Me<h.length;Me++){const Je=h[Me],pt=Zr(f,Je.path);let Tn,_n=!1;if((0,H.vA)(null!==pt,"rerunTransactionsUnderNode_: relativePath should not be null."),4===Je.status)_n=!0,Tn=Je.abortReason,V=V.concat(ms(y.serverSyncTree_,Je.currentWriteId,!0));else if(0===Je.status)if(Je.retryCount>=Fu)_n=!0,Tn="maxretry",V=V.concat(ms(y.serverSyncTree_,Je.currentWriteId,!0));else{const Ln=uh(y,Je.path,se);Je.currentInputSnapshot=Ln;const Ir=h[Me].update(Ln.val());if(void 0!==Ir){sa("transaction failed: Data returned ",Ir,Je.path);let Hr=Pr(Ir);"object"==typeof Ir&&null!=Ir&&(0,H.gR)(Ir,".priority")||(Hr=Hr.updatePriority(Ln.getPriority()));const To=Je.currentWriteId,aa=hl(y),Qc=Nu(Hr,Ln,aa);Je.currentOutputSnapshotRaw=Hr,Je.currentOutputSnapshotResolved=Qc,Je.currentWriteId=ka(y),se.splice(se.indexOf(To),1),V=V.concat(xa(y.serverSyncTree_,Je.path,Qc,Je.currentWriteId,Je.applyLocally)),V=V.concat(ms(y.serverSyncTree_,To,!0))}else _n=!0,Tn="nodata",V=V.concat(ms(y.serverSyncTree_,Je.currentWriteId,!0))}lo(y.eventQueue_,f,V),V=[],_n&&(h[Me].status=2,setTimeout(h[Me].unwatcher,Math.floor(0)),h[Me].onComplete&&T.push("nodata"===Tn?()=>h[Me].onComplete(null,!1,h[Me].currentInputSnapshot):()=>h[Me].onComplete(new Error(Tn),!1,null)))}Uu(y,y.transactionQueueTree_);for(let Me=0;Me<T.length;Me++)Cr(T[Me]);sd(y,y.transactionQueueTree_)}(y,Td(y,f),T),T}function vu(y,h){let f,T=y.transactionQueueTree_;for(f=Bn(h);null!==f&&void 0===Dl(T);)T=Ql(T,f),f=Bn(h=wr(h));return T}function Td(y,h){const f=[];return ad(y,h,f),f.sort((T,V)=>T.order-V.order),f}function ad(y,h,f){const T=Dl(h);if(T)for(let V=0;V<T.length;V++)f.push(T[V]);Qa(h,V=>{ad(y,V,f)})}function Uu(y,h){const f=Dl(h);if(f){let T=0;for(let V=0;V<f.length;V++)2!==f[V].status&&(f[T]=f[V],T++);f.length=T,ia(h,f.length>0?f:void 0)}Qa(h,T=>{Uu(y,T)})}function Eu(y,h){const f=Ai(vu(y,h)),T=Ql(y.transactionQueueTree_,h);return function fc(y,h,f){let T=f?y:y.parent;for(;null!==T;){if(h(T))return!0;T=T.parent}}(T,V=>{Wc(y,V)}),Wc(y,T),Wo(T,V=>{Wc(y,V)}),f}function Wc(y,h){const f=Dl(h);if(f){const T=[];let V=[],Z=-1;for(let se=0;se<f.length;se++)3===f[se].status||(1===f[se].status?((0,H.vA)(Z===se-1,"All SENT items should be at beginning of queue."),Z=se,f[se].status=3,f[se].abortReason="set"):((0,H.vA)(0===f[se].status,"Unexpected transaction status in abort"),f[se].unwatcher(),V=V.concat(ms(y.serverSyncTree_,f[se].currentWriteId,!0)),f[se].onComplete&&T.push(f[se].onComplete.bind(null,new Error("set"),!1,null))));-1===Z?ia(h,void 0):f.length=Z+1,lo(y.eventQueue_,Ai(h),V);for(let se=0;se<T.length;se++)Cr(T[se])}}const bu=function(y,h){const f=ju(y),T=f.namespace;return"firebase.com"===f.domain&&Ze(f.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!T||"undefined"===T)&&"localhost"!==f.domain&&Ze("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),f.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Ge("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new wt(f.host,f.secure,T,"ws"===f.scheme||"wss"===f.scheme,h,"",T!==f.subdomain),path:new jt(f.pathString)}},ju=function(y){let h="",f="",T="",V="",Z="",se=!0,Me="https",Je=443;if("string"==typeof y){let pt=y.indexOf("//");pt>=0&&(Me=y.substring(0,pt-1),y=y.substring(pt+2));let _n=y.indexOf("/");-1===_n&&(_n=y.length);let Tn=y.indexOf("?");-1===Tn&&(Tn=y.length),h=y.substring(0,Math.min(_n,Tn)),_n<Tn&&(V=function Bu(y){let h="";const f=y.split("/");for(let T=0;T<f.length;T++)if(f[T].length>0){let V=f[T];try{V=decodeURIComponent(V.replace(/\+/g," "))}catch{}h+="/"+V}return h}(y.substring(_n,Tn)));const Ln=function cd(y){const h={};"?"===y.charAt(0)&&(y=y.substring(1));for(const f of y.split("&")){if(0===f.length)continue;const T=f.split("=");2===T.length?h[decodeURIComponent(T[0])]=decodeURIComponent(T[1]):Ge(`Invalid query segment '${f}' in query '${y}'`)}return h}(y.substring(Math.min(y.length,Tn)));pt=h.indexOf(":"),pt>=0?(se="https"===Me||"wss"===Me,Je=parseInt(h.substring(pt+1),10)):pt=h.length;const Ir=h.slice(0,pt);if("localhost"===Ir.toLowerCase())f="localhost";else if(Ir.split(".").length<=2)f=Ir;else{const Hr=h.indexOf(".");T=h.substring(0,Hr).toLowerCase(),f=h.substring(Hr+1),Z=T}"ns"in Ln&&(Z=Ln.ns)}return{host:h,port:Je,domain:f,subdomain:T,secure:se,scheme:Me,pathString:V,namespace:Z}},Iu="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",ld=function(){let y=0;const h=[];return function(f){const T=f===y;let V;y=f;const Z=new Array(8);for(V=7;V>=0;V--)Z[V]=Iu.charAt(f%64),f=Math.floor(f/64);(0,H.vA)(0===f,"Cannot push at time == 0");let se=Z.join("");if(T){for(V=11;V>=0&&63===h[V];V--)h[V]=0;h[V]++}else for(V=0;V<12;V++)h[V]=Math.floor(64*Math.random());for(V=0;V<12;V++)se+=Iu.charAt(h[V]);return(0,H.vA)(20===se.length,"nextPushId: Length should be 20."),se}}();class uo{constructor(h,f,T,V){this.eventType=h,this.eventRegistration=f,this.snapshot=T,this.prevName=V}getPath(){const h=this.snapshot.ref;return"value"===this.eventType?h._path:h.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,H.As)(this.snapshot.exportVal())}}class zc{constructor(h,f,T){this.eventRegistration=h,this.error=f,this.path=T}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class cs{constructor(h,f){this.snapshotCallback=h,this.cancelCallback=f}onValue(h,f){this.snapshotCallback.call(null,h,f)}onCancel(h){return(0,H.vA)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,h)}get hasCancelCallback(){return!!this.cancelCallback}matches(h){return this.snapshotCallback===h.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===h.snapshotCallback.userCallback&&this.snapshotCallback.context===h.snapshotCallback.context}}class dh{constructor(h,f){this._repo=h,this._path=f}cancel(){const h=new H.cY;return La(this._repo,this._path,h.wrapCallback(()=>{})),h.promise}remove(){Io("OnDisconnect.remove",this._path);const h=new H.cY;return gu(this._repo,this._path,null,h.wrapCallback(()=>{})),h.promise}set(h){Io("OnDisconnect.set",this._path),mc("OnDisconnect.set",h,this._path,!1);const f=new H.cY;return gu(this._repo,this._path,h,f.wrapCallback(()=>{})),f.promise}setWithPriority(h,f){Io("OnDisconnect.setWithPriority",this._path),mc("OnDisconnect.setWithPriority",h,this._path,!1),Yl("OnDisconnect.setWithPriority",f,!1);const T=new H.cY;return function _u(y,h,f,T,V){const Z=Pr(f,T);y.server_.onDisconnectPut(h.toString(),Z.val(!0),(se,Me)=>{"ok"===se&&Uo(y.onDisconnect_,h,Z),Ys(0,V,se,Me)})}(this._repo,this._path,h,f,T.wrapCallback(()=>{})),T.promise}update(h){Io("OnDisconnect.update",this._path),mu("OnDisconnect.update",h,this._path,!1);const f=new H.cY;return function lh(y,h,f,T){if((0,H.Im)(f))return Ke("onDisconnect().update() called with empty data.  Don't do anything."),void Ys(0,T,"ok",void 0);y.server_.onDisconnectMerge(h.toString(),f,(V,Z)=>{"ok"===V&&Ht(f,(se,Me)=>{const Je=Pr(Me);Uo(y.onDisconnect_,_r(h,se),Je)}),Ys(0,T,V,Z)})}(this._repo,this._path,h,f.wrapCallback(()=>{})),f.promise}}class wa{constructor(h,f,T,V){this._repo=h,this._path=f,this._queryParams=T,this._orderByCalled=V}get key(){return xn(this._path)?null:yn(this._path)}get ref(){return new Xs(this._repo,this._path)}get _queryIdentifier(){const h=nl(this._queryParams),f=ye(h);return"{}"===f?"default":f}get _queryObject(){return nl(this._queryParams)}isEqual(h){if(!((h=(0,H.Ku)(h))instanceof wa))return!1;const f=this._repo===h._repo,T=kr(this._path,h._path);return f&&T&&this._queryIdentifier===h._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function Dn(y){let h="";for(let f=y.pieceNum_;f<y.pieces_.length;f++)""!==y.pieces_[f]&&(h+="/"+encodeURIComponent(String(y.pieces_[f])));return h||"/"}(this._path)}}function ml(y,h){if(!0===y._orderByCalled)throw new Error(h+": You can't combine multiple orderBy calls.")}function Hc(y){let h=null,f=null;if(y.hasStart()&&(h=y.getIndexStartValue()),y.hasEnd()&&(f=y.getIndexEndValue()),y.getIndex()===ds){const T="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",V="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(y.hasStart()){if(y.getIndexStartName()!==Jt)throw new Error(T);if("string"!=typeof h)throw new Error(V)}if(y.hasEnd()){if(y.getIndexEndName()!==Nt)throw new Error(T);if("string"!=typeof f)throw new Error(V)}}else if(y.getIndex()===Ii){if(null!=h&&!pc(h)||null!=f&&!pc(f))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,H.vA)(y.getIndex()instanceof fi||y.getIndex()===Do,"unknown index type."),null!=h&&"object"==typeof h||null!=f&&"object"==typeof f)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function xl(y){if(y.hasStart()&&y.hasEnd()&&y.hasLimit()&&!y.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class Xs extends wa{constructor(h,f){super(h,f,new pa,!1)}get parent(){const h=gr(this._path);return null===h?null:new Xs(this._repo,h)}get root(){let h=this;for(;null!==h.parent;)h=h.parent;return h}}class Xa{constructor(h,f,T){this._node=h,this.ref=f,this._index=T}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(h){const f=new jt(h),T=Kc(this.ref,h);return new Xa(this._node.getChild(f),T,Ii)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(h){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(T,V)=>h(new Xa(V,Kc(this.ref,T),Ii)))}hasChild(h){const f=new jt(h);return!this._node.getChild(f).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Fa(y,h){return(y=(0,H.Ku)(y))._checkNotDeleted("ref"),void 0!==h?Kc(y._root,h):y._root}function Kd(y,h){(y=(0,H.Ku)(y))._checkNotDeleted("refFromURL");const f=bu(h,y._repo.repoInfo_.nodeAdmin);Rl("refFromURL",f);const T=f.repoInfo;return!y._repo.repoInfo_.isCustomHost()&&T.host!==y._repo.repoInfo_.host&&Ze("refFromURL: Host name does not match the current database: (found "+T.host+" but expected "+y._repo.repoInfo_.host+")"),Fa(y,f.path.toString())}function Kc(y,h){return null===Bn((y=(0,H.Ku)(y))._path)?gc("child","path",h,!1):oa("child","path",h,!1),new Xs(y._repo,_r(y._path,h))}function Za(y,h){y=(0,H.Ku)(y),Io("push",y._path),mc("push",h,y._path,!0);const f=jc(y._repo),T=ld(f),V=Kc(y,T),Z=Kc(y,T);let se;return se=null!=h?Zl(Z,h).then(()=>Z):Promise.resolve(Z),V.then=se.then.bind(se),V.catch=se.then.bind(se,void 0),V}function Nl(y){return Io("remove",y._path),Zl(y,null)}function Zl(y,h){y=(0,H.Ku)(y),Io("set",y._path),mc("set",h,y._path,!1);const f=new H.cY;return Hi(y._repo,y._path,h,null,f.wrapCallback(()=>{})),f.promise}function Jl(y,h){y=(0,H.Ku)(y),Io("setPriority",y._path),Yl("setPriority",h,!1);const f=new H.cY;return Hi(y._repo,_r(y._path,".priority"),h,null,f.wrapCallback(()=>{})),f.promise}function eu(y,h,f){if(Io("setWithPriority",y._path),mc("setWithPriority",h,y._path,!1),Yl("setWithPriority",f,!1),".length"===y.key||".keys"===y.key)throw"setWithPriority failed: "+y.key+" is a read-only object.";const T=new H.cY;return Hi(y._repo,y._path,h,f,T.wrapCallback(()=>{})),T.promise}function Gc(y,h){mu("update",h,y._path,!1);const f=new H.cY;return function fl(y,h,f,T){yu(y,"update",{path:h.toString(),value:f});let V=!0;const Z=hl(y),se={};if(Ht(f,(Me,Je)=>{V=!1,se[Me]=uu(_r(h,Me),Pr(Je),y.serverSyncTree_,Z)}),V)Ke("update() called with empty data.  Don't do anything."),Ys(0,T,"ok",void 0);else{const Me=ka(y),Je=function Fc(y,h,f,T){!function cc(y,h,f,T){(0,H.vA)(T>y.lastWriteId,"Stacking an older merge on top of newer ones"),y.allWrites.push({path:h,children:f,writeId:T,visible:!0}),y.visibleWrites=Ha(y.visibleWrites,h,f),y.lastWriteId=T}(y.pendingWriteTree_,h,f,T);const V=zi.fromObject(f);return k(y,new vo({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},h,V))}(y.serverSyncTree_,h,se,Me);ei(y.eventQueue_,Je),y.server_.merge(h.toString(),f,(pt,_n)=>{const Tn="ok"===pt;Tn||Ge("update at "+h+" failed: "+pt);const Ln=ms(y.serverSyncTree_,Me,!Tn),Ir=Ln.length>0?ks(y,h):h;lo(y.eventQueue_,Ir,Ln),Ys(0,T,pt,_n)}),Ht(f,pt=>{const _n=Eu(y,_r(h,pt));ks(y,_n)}),lo(y.eventQueue_,h,[])}}(y._repo,y._path,h,f.wrapCallback(()=>{})),f.promise}function qc(y){y=(0,H.Ku)(y);const h=new cs(()=>{}),f=new Tu(h);return function _c(y,h,f){const T=function z(y,h){const f=h._path;let T=null;y.syncPointTree_.foreachOnPath(f,(pt,_n)=>{const Tn=Zr(pt,f);T=T||us(_n,Tn)});let V=y.syncPointTree_.get(f);V?T=T||us(V,Xn()):(V=new Ga,y.syncPointTree_=y.syncPointTree_.set(f,V));const Z=null!=T,se=Z?new _a(T,!0,!1):null;return function wl(y){return Ss(y.viewCache_)}(Oo(V,h,va(y.pendingWriteTree_,h._path),Z?se.getNode():Br.EMPTY_NODE,Z))}(y.serverSyncTree_,h);return null!=T?Promise.resolve(T):y.server_.get(h).then(V=>{const Z=Pr(V).withIndex(h._queryParams.getIndex());let se;if(Vc(y.serverSyncTree_,h,f,!0),h._queryParams.loadsAllData())se=Na(y.serverSyncTree_,h._path,Z);else{const Me=rt(y.serverSyncTree_,h);se=nd(y.serverSyncTree_,h._path,Z,Me)}return lo(y.eventQueue_,h._path,se),Kl(y.serverSyncTree_,h,f,null,!0),Z},V=>(yu(y,"get for query "+(0,H.As)(h)+" failed: "+V),Promise.reject(new Error(V))))}(y._repo,y,f).then(T=>new Xa(T,new Xs(y._repo,y._path),y._queryParams.getIndex()))}class Tu{constructor(h){this.callbackContext=h}respondsTo(h){return"value"===h}createEvent(h,f){const T=f._queryParams.getIndex();return new uo("value",this,new Xa(h.snapshotNode,new Xs(f._repo,f._path),T))}getEventRunner(h){return"cancel"===h.getEventType()?()=>this.callbackContext.onCancel(h.error):()=>this.callbackContext.onValue(h.snapshot,null)}createCancelEvent(h,f){return this.callbackContext.hasCancelCallback?new zc(this,h,f):null}matches(h){return h instanceof Tu&&(!h.callbackContext||!this.callbackContext||h.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class gl{constructor(h,f){this.eventType=h,this.callbackContext=f}respondsTo(h){let f="children_added"===h?"child_added":h;return f="children_removed"===f?"child_removed":f,this.eventType===f}createCancelEvent(h,f){return this.callbackContext.hasCancelCallback?new zc(this,h,f):null}createEvent(h,f){(0,H.vA)(null!=h.childName,"Child events should have a childName.");const T=Kc(new Xs(f._repo,f._path),h.childName),V=f._queryParams.getIndex();return new uo(h.type,this,new Xa(h.snapshotNode,T,V),h.prevName)}getEventRunner(h){return"cancel"===h.getEventType()?()=>this.callbackContext.onCancel(h.error):()=>this.callbackContext.onValue(h.snapshot,h.prevName)}matches(h){return h instanceof gl&&this.eventType===h.eventType&&(!this.callbackContext||!h.callbackContext||this.callbackContext.matches(h.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function Au(y,h,f,T,V){let Z;if("object"==typeof T&&(Z=void 0,V=T),"function"==typeof T&&(Z=T),V&&V.onlyOnce){const Je=f,pt=(_n,Tn)=>{$c(y._repo,y,Me),Je(_n,Tn)};pt.userCallback=f.userCallback,pt.context=f.context,f=pt}const se=new cs(f,Z||void 0),Me="value"===h?new Tu(se):new gl(h,se);return function Vu(y,h,f){let T;T=".info"===Bn(h._path)?Vc(y.infoSyncTree_,h,f):Vc(y.serverSyncTree_,h,f),Lu(y.eventQueue_,h._path,T)}(y._repo,y,Me),()=>$c(y._repo,y,Me)}function dd(y,h,f,T){return Au(y,"value",h,f,T)}function xh(y,h,f,T){return Au(y,"child_added",h,f,T)}function Nh(y,h,f,T){return Au(y,"child_changed",h,f,T)}function Ad(y,h,f,T){return Au(y,"child_moved",h,f,T)}function wu(y,h,f,T){return Au(y,"child_removed",h,f,T)}function kl(y,h,f){let T=null;const V=f?new cs(f):null;"value"===h?T=new Tu(V):h&&(T=new gl(h,V)),$c(y._repo,y,T)}class Ja{}class N extends Ja{constructor(h,f){super(),this._value=h,this._key=f,this.type="endAt"}_apply(h){mc("endAt",this._value,h._path,!0);const f=to(h._queryParams,this._value,this._key);if(xl(f),Hc(f),h._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new wa(h._repo,h._path,f,h._orderByCalled)}}function E(y,h){return Ta("endAt","key",h,!0),new N(y,h)}class C extends Ja{constructor(h,f){super(),this._value=h,this._key=f,this.type="endBefore"}_apply(h){mc("endBefore",this._value,h._path,!1);const f=function Vs(y,h,f){let T;return T=to(y,h,y.index_===ds||f?f:Jt),T.endBeforeSet_=!0,T}(h._queryParams,this._value,this._key);if(xl(f),Hc(f),h._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new wa(h._repo,h._path,f,h._orderByCalled)}}function B(y,h){return Ta("endBefore","key",h,!0),new C(y,h)}class de extends Ja{constructor(h,f){super(),this._value=h,this._key=f,this.type="startAt"}_apply(h){mc("startAt",this._value,h._path,!0);const f=Rc(h._queryParams,this._value,this._key);if(xl(f),Hc(f),h._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new wa(h._repo,h._path,f,h._orderByCalled)}}function Se(y=null,h){return Ta("startAt","key",h,!0),new de(y,h)}class It extends Ja{constructor(h,f){super(),this._value=h,this._key=f,this.type="startAfter"}_apply(h){mc("startAfter",this._value,h._path,!1);const f=function $a(y,h,f){let T;return T=Rc(y,h,y.index_===ds||f?f:Nt),T.startAfterSet_=!0,T}(h._queryParams,this._value,this._key);if(xl(f),Hc(f),h._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new wa(h._repo,h._path,f,h._orderByCalled)}}function qt(y,h){return Ta("startAfter","key",h,!0),new It(y,h)}class Fn extends Ja{constructor(h){super(),this._limit=h,this.type="limitToFirst"}_apply(h){if(h._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new wa(h._repo,h._path,function go(y,h){const f=y.copy();return f.limitSet_=!0,f.limit_=h,f.viewFrom_="l",f}(h._queryParams,this._limit),h._orderByCalled)}}function Dr(y){if("number"!=typeof y||Math.floor(y)!==y||y<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new Fn(y)}class Vr extends Ja{constructor(h){super(),this._limit=h,this.type="limitToLast"}_apply(h){if(h._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new wa(h._repo,h._path,function Da(y,h){const f=y.copy();return f.limitSet_=!0,f.limit_=h,f.viewFrom_="r",f}(h._queryParams,this._limit),h._orderByCalled)}}function ui(y){if("number"!=typeof y||Math.floor(y)!==y||y<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new Vr(y)}class Xi extends Ja{constructor(h){super(),this._path=h,this.type="orderByChild"}_apply(h){ml(h,"orderByChild");const f=new jt(this._path);if(xn(f))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const T=new fi(f),V=vs(h._queryParams,T);return Hc(V),new wa(h._repo,h._path,V,!0)}}function Ls(y){if("$key"===y)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===y)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===y)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return oa("orderByChild","path",y,!1),new Xi(y)}class vc extends Ja{constructor(){super(...arguments),this.type="orderByKey"}_apply(h){ml(h,"orderByKey");const f=vs(h._queryParams,ds);return Hc(f),new wa(h._repo,h._path,f,!0)}}function ec(){return new vc}class Cu extends Ja{constructor(){super(...arguments),this.type="orderByPriority"}_apply(h){ml(h,"orderByPriority");const f=vs(h._queryParams,Ii);return Hc(f),new wa(h._repo,h._path,f,!0)}}function Gd(){return new Cu}class wd extends Ja{constructor(){super(...arguments),this.type="orderByValue"}_apply(h){ml(h,"orderByValue");const f=vs(h._queryParams,Do);return Hc(f),new wa(h._repo,h._path,f,!0)}}function Su(){return new wd}class hd extends Ja{constructor(h,f){super(),this._value=h,this._key=f,this.type="equalTo"}_apply(h){if(mc("equalTo",this._value,h._path,!1),h._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(h._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new N(this._value,this._key)._apply(new de(this._value,this._key)._apply(h))}}function tu(y,h){return Ta("equalTo","key",h,!0),new hd(y,h)}function Ec(y,...h){let f=(0,H.Ku)(y);for(const T of h)f=T._apply(f);return f}(function Hl(y){(0,H.vA)(!fs,"__referenceConstructor has already been defined"),fs=y})(Xs),function Ed(y){(0,H.vA)(!ps,"__referenceConstructor has already been defined"),ps=y}(Xs);const Du="FIREBASE_DATABASE_EMULATOR_HOST",_l={};let bc=!1;function ji(y,h,f,T,V){let Z=T||y.options.databaseURL;void 0===Z&&(y.options.projectId||Ze("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Ke("Using default host for project ",y.options.projectId),Z=`${y.options.projectId}-default-rtdb.firebaseio.com`);let Je,pt,se=bu(Z,V),Me=se.repoInfo;typeof process<"u"&&process.env&&(pt=process.env[Du]),pt?(Je=!0,Z=`http://${pt}?ns=${Me.namespace}`,se=bu(Z,V),Me=se.repoInfo):Je=!se.repoInfo.secure;const _n=V&&Je?new vr(vr.OWNER):new Rr(y.name,y.options,h);Rl("Invalid Firebase Database URL",se),xn(se.path)||Ze("Database URL must point to the root of a Firebase Database (not including a child path).");const Tn=function kh(y,h,f,T){let V=_l[h.name];V||(V={},_l[h.name]=V);let Z=V[y.toURLString()];return Z&&Ze("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),Z=new Aa(y,bc,f,T),V[y.toURLString()]=Z,Z}(Me,y,_n,new Jn(y.name,f));return new hh(Tn,y)}class hh{constructor(h,f){this._repoInternal=h,this.app=f,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function Pl(y,h,f){if(y.stats_=yr(y.repoInfo_),y.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)y.server_=new _o(y.repoInfo_,(T,V,Z,se)=>{Ml(y,T,V,Z,se)},y.authTokenProvider_,y.appCheckProvider_),setTimeout(()=>id(y,!0),0);else{if(typeof f<"u"&&null!==f){if("object"!=typeof f)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,H.As)(f)}catch(T){throw new Error("Invalid authOverride provided: "+T)}}y.persistentConnection_=new In(y.repoInfo_,h,(T,V,Z,se)=>{Ml(y,T,V,Z,se)},T=>{id(y,T)},T=>{!function En(y,h){Ht(h,(f,T)=>{ii(y,f,T)})}(y,T)},y.authTokenProvider_,y.appCheckProvider_,f),y.server_=y.persistentConnection_}y.authTokenProvider_.addTokenChangeListener(T=>{y.server_.refreshAuthToken(T)}),y.appCheckProvider_.addTokenChangeListener(T=>{y.server_.refreshAppCheckToken(T.token)}),y.statsReporter_=function ar(y,h){const f=y.toString();return ir[f]||(ir[f]=h()),ir[f]}(y.repoInfo_,()=>new Vi(y.stats_,y.server_)),y.infoData_=new Wa,y.infoSyncTree_=new al({startListening:(T,V,Z,se)=>{let Me=[];const Je=y.infoData_.getNode(T._path);return Je.isEmpty()||(Me=Na(y.infoSyncTree_,T._path,Je),setTimeout(()=>{se("ok")},0)),Me},stopListening:()=>{}}),ii(y,"connected",!1),y.serverSyncTree_=new al({startListening:(T,V,Z,se)=>(y.server_.listen(T,Z,V,(Me,Je)=>{const pt=se(Me,Je);lo(y.eventQueue_,T._path,pt)}),[]),stopListening:(T,V)=>{y.server_.unlisten(T,V)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Xs(this._repo,Xn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function $u(y,h){const f=_l[h];(!f||f[y.key]!==y)&&Ze(`Database ${h}(${y.repoInfo_}) has already been deleted.`),as(y),delete f[y.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(h){null===this._rootInternal&&Ze("Cannot call "+h+" on a deleted database.")}}function nu(){hi.IS_TRANSPORT_INITIALIZED&&Ge("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function Sd(){nu(),lt.forceDisallow()}function qd(){nu(),Lr.forceDisallow(),lt.forceAllow()}function Wu(y=(0,$.getApp)(),h){const f=(0,$._getProvider)(y,"database").getImmediate({identifier:h});if(!f._instanceStarted){const T=(0,H.yU)("database");T&&zu(f,...T)}return f}function zu(y,h,f,T={}){(y=(0,H.Ku)(y))._checkNotDeleted("useEmulator"),y._instanceStarted&&Ze("Cannot call useEmulator() after instance has already been initialized.");const V=y._repoInternal;let Z;if(V.repoInfo_.nodeAdmin)T.mockUserToken&&Ze('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),Z=new vr(vr.OWNER);else if(T.mockUserToken){const se="string"==typeof T.mockUserToken?T.mockUserToken:(0,H.Fy)(T.mockUserToken,y.app.options.projectId);Z=new vr(se)}!function tc(y,h,f,T){y.repoInfo_=new wt(`${h}:${f}`,!1,y.repoInfo_.namespace,y.repoInfo_.webSocketOnly,y.repoInfo_.nodeAdmin,y.repoInfo_.persistenceKey,y.repoInfo_.includeNamespaceInQueryParams,!0),T&&(y.authTokenProvider_=T)}(V,h,f,Z)}function Ru(y){(y=(0,H.Ku)(y))._checkNotDeleted("goOffline"),as(y._repo)}function cf(y){(y=(0,H.Ku)(y))._checkNotDeleted("goOnline"),function yc(y){y.persistentConnection_&&y.persistentConnection_.resume(dl)}(y._repo)}function fh(y,h){kt(y,h)}const uf={".sv":"timestamp"};function Qd(){return uf}function Hu(y){return{".sv":{increment:y}}}class Dd{constructor(h,f){this.committed=h,this.snapshot=f}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}function Ku(y,h,f){var T;if(y=(0,H.Ku)(y),Io("Reference.transaction",y._path),".length"===y.key||".keys"===y.key)throw"Reference.transaction failed: "+y.key+" is a read-only object.";const V=null===(T=f?.applyLocally)||void 0===T||T,Z=new H.cY,Me=dd(y,()=>{});return function pl(y,h,f,T,V,Z){yu(y,"transaction on "+h);const se={path:h,update:f,onComplete:T,status:null,order:Ft(),applyLocally:Z,retryCount:0,unwatcher:V,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},Me=uh(y,h,void 0);se.currentInputSnapshot=Me;const Je=se.update(Me.val());if(void 0===Je)se.unwatcher(),se.currentOutputSnapshotRaw=null,se.currentOutputSnapshotResolved=null,se.onComplete&&se.onComplete(null,!1,se.currentInputSnapshot);else{sa("transaction failed: Data returned ",Je,se.path),se.status=0;const pt=Ql(y.transactionQueueTree_,h),_n=Dl(pt)||[];let Tn;_n.push(se),ia(pt,_n),"object"==typeof Je&&null!==Je&&(0,H.gR)(Je,".priority")?(Tn=(0,H.yw)(Je,".priority"),(0,H.vA)(pc(Tn),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):Tn=(O(y.serverSyncTree_,h)||Br.EMPTY_NODE).getPriority().val();const Ln=hl(y),Ir=Pr(Je,Tn),Hr=Nu(Ir,Me,Ln);se.currentOutputSnapshotRaw=Ir,se.currentOutputSnapshotResolved=Hr,se.currentWriteId=ka(y);const di=xa(y.serverSyncTree_,h,Hr,se.currentWriteId,se.applyLocally);lo(y.eventQueue_,h,di),sd(y,y.transactionQueueTree_)}}(y._repo,y._path,h,(Je,pt,_n)=>{let Tn=null;Je?Z.reject(Je):(Tn=new Xa(_n,new Xs(y._repo,y._path),Ii),Z.resolve(new Dd(pt,Tn)))},Me,V),Z.promise}In.prototype.simpleListen=function(y,h){this.sendRequest("q",{p:y},h)},In.prototype.echo=function(y,h){this.sendRequest("echo",{d:y},h)},function lf(y){Pe($.SDK_VERSION),(0,$._registerComponent)(new q.uA("database",(h,{instanceIdentifier:f})=>ji(h.getProvider("app").getImmediate(),h.getProvider("auth-internal"),h.getProvider("app-check-internal"),f),"PUBLIC").setMultipleInstances(!0)),(0,$.registerVersion)(Fe,"1.0.8",y),(0,$.registerVersion)(Fe,"1.0.8","esm2017")}()},9583:(Cn,nt,x)=>{x.d(nt,{fS:()=>im,Ix:()=>Ih,H6:()=>cy,T1:()=>io,Wq:()=>Jd,uY:()=>Qu,W6:()=>Ye,Ci:()=>Af,YQ:()=>Yh,NJ:()=>Xh,Dc:()=>$n,GA:()=>fp,cm:()=>In,K$:()=>je,FA:()=>Xe,lo:()=>Ki,bI:()=>an,qG:()=>Zt,qi:()=>At,c8:()=>Vm,gS:()=>ng,C3:()=>l_,hq:()=>c_,me:()=>$p,rJ:()=>Ug,Cs:()=>Bp,vN:()=>xd,kd:()=>am,CL:()=>o_,LA:()=>vv,H9:()=>Bm,ol:()=>zm,Q5:()=>ly,Os:()=>jg,FD:()=>qg,rf:()=>Ld,Ws:()=>Hs,z6:()=>Dh,x7:()=>by,nY:()=>Iy,_e:()=>Jg,GG:()=>up,kU:()=>om,Rr:()=>Zh,aU:()=>If,GV:()=>Ni,AB:()=>yy,$1:()=>Jm,po:()=>Wp,St:()=>Km,aQ:()=>Sh,FC:()=>rg,My:()=>Gg,P:()=>Kg,B:()=>jm,yx:()=>Bg,c4:()=>um,O5:()=>a_,BN:()=>Ty,He:()=>Ge,lN:()=>Zg,HM:()=>cp,EO:()=>tm,mZ:()=>e_,iB:()=>rp,_M:()=>_y});var Ne,Pe,b=x(4523),$=x(8742),q=x(1362),H=x(8041),Ee=x(1076),Fe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Le={};(function(){var u;function o(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function d(Wt,dt,Dt){Dt||(Dt=0);var zt=Array(16);if("string"==typeof dt)for(var Xt=0;16>Xt;++Xt)zt[Xt]=dt.charCodeAt(Dt++)|dt.charCodeAt(Dt++)<<8|dt.charCodeAt(Dt++)<<16|dt.charCodeAt(Dt++)<<24;else for(Xt=0;16>Xt;++Xt)zt[Xt]=dt[Dt++]|dt[Dt++]<<8|dt[Dt++]<<16|dt[Dt++]<<24;var dn=Wt.g[3],St=(dt=Wt.g[0])+(dn^(Dt=Wt.g[1])&((Xt=Wt.g[2])^dn))+zt[0]+3614090360&4294967295;St=(Dt=(Xt=(dn=(dt=(Dt=(Xt=(dn=(dt=(Dt=(Xt=(dn=(dt=(Dt=(Xt=(dn=(dt=(Dt=(Xt=(dn=(dt=(Dt=(Xt=(dn=(dt=(Dt=(Xt=(dn=(dt=(Dt=(Xt=(dn=(dt=(Dt=(Xt=(dn=(dt=(Dt=(Xt=(dn=(dt=(Dt=(Xt=(dn=(dt=(Dt=(Xt=(dn=(dt=(Dt=(Xt=(dn=(dt=(Dt=(Xt=(dn=(dt=(Dt=(Xt=(dn=(dt=Dt+(St<<7&4294967295|St>>>25))+((St=dn+(Xt^dt&(Dt^Xt))+zt[1]+3905402710&4294967295)<<12&4294967295|St>>>20))+((St=Xt+(Dt^dn&(dt^Dt))+zt[2]+606105819&4294967295)<<17&4294967295|St>>>15))+((St=Dt+(dt^Xt&(dn^dt))+zt[3]+3250441966&4294967295)<<22&4294967295|St>>>10))+((St=dt+(dn^Dt&(Xt^dn))+zt[4]+4118548399&4294967295)<<7&4294967295|St>>>25))+((St=dn+(Xt^dt&(Dt^Xt))+zt[5]+1200080426&4294967295)<<12&4294967295|St>>>20))+((St=Xt+(Dt^dn&(dt^Dt))+zt[6]+2821735955&4294967295)<<17&4294967295|St>>>15))+((St=Dt+(dt^Xt&(dn^dt))+zt[7]+4249261313&4294967295)<<22&4294967295|St>>>10))+((St=dt+(dn^Dt&(Xt^dn))+zt[8]+1770035416&4294967295)<<7&4294967295|St>>>25))+((St=dn+(Xt^dt&(Dt^Xt))+zt[9]+2336552879&4294967295)<<12&4294967295|St>>>20))+((St=Xt+(Dt^dn&(dt^Dt))+zt[10]+4294925233&4294967295)<<17&4294967295|St>>>15))+((St=Dt+(dt^Xt&(dn^dt))+zt[11]+2304563134&4294967295)<<22&4294967295|St>>>10))+((St=dt+(dn^Dt&(Xt^dn))+zt[12]+1804603682&4294967295)<<7&4294967295|St>>>25))+((St=dn+(Xt^dt&(Dt^Xt))+zt[13]+4254626195&4294967295)<<12&4294967295|St>>>20))+((St=Xt+(Dt^dn&(dt^Dt))+zt[14]+2792965006&4294967295)<<17&4294967295|St>>>15))+((St=Dt+(dt^Xt&(dn^dt))+zt[15]+1236535329&4294967295)<<22&4294967295|St>>>10))+((St=dt+(Xt^dn&(Dt^Xt))+zt[1]+4129170786&4294967295)<<5&4294967295|St>>>27))+((St=dn+(Dt^Xt&(dt^Dt))+zt[6]+3225465664&4294967295)<<9&4294967295|St>>>23))+((St=Xt+(dt^Dt&(dn^dt))+zt[11]+643717713&4294967295)<<14&4294967295|St>>>18))+((St=Dt+(dn^dt&(Xt^dn))+zt[0]+3921069994&4294967295)<<20&4294967295|St>>>12))+((St=dt+(Xt^dn&(Dt^Xt))+zt[5]+3593408605&4294967295)<<5&4294967295|St>>>27))+((St=dn+(Dt^Xt&(dt^Dt))+zt[10]+38016083&4294967295)<<9&4294967295|St>>>23))+((St=Xt+(dt^Dt&(dn^dt))+zt[15]+3634488961&4294967295)<<14&4294967295|St>>>18))+((St=Dt+(dn^dt&(Xt^dn))+zt[4]+3889429448&4294967295)<<20&4294967295|St>>>12))+((St=dt+(Xt^dn&(Dt^Xt))+zt[9]+568446438&4294967295)<<5&4294967295|St>>>27))+((St=dn+(Dt^Xt&(dt^Dt))+zt[14]+3275163606&4294967295)<<9&4294967295|St>>>23))+((St=Xt+(dt^Dt&(dn^dt))+zt[3]+4107603335&4294967295)<<14&4294967295|St>>>18))+((St=Dt+(dn^dt&(Xt^dn))+zt[8]+1163531501&4294967295)<<20&4294967295|St>>>12))+((St=dt+(Xt^dn&(Dt^Xt))+zt[13]+2850285829&4294967295)<<5&4294967295|St>>>27))+((St=dn+(Dt^Xt&(dt^Dt))+zt[2]+4243563512&4294967295)<<9&4294967295|St>>>23))+((St=Xt+(dt^Dt&(dn^dt))+zt[7]+1735328473&4294967295)<<14&4294967295|St>>>18))+((St=Dt+(dn^dt&(Xt^dn))+zt[12]+2368359562&4294967295)<<20&4294967295|St>>>12))+((St=dt+(Dt^Xt^dn)+zt[5]+4294588738&4294967295)<<4&4294967295|St>>>28))+((St=dn+(dt^Dt^Xt)+zt[8]+2272392833&4294967295)<<11&4294967295|St>>>21))+((St=Xt+(dn^dt^Dt)+zt[11]+1839030562&4294967295)<<16&4294967295|St>>>16))+((St=Dt+(Xt^dn^dt)+zt[14]+4259657740&4294967295)<<23&4294967295|St>>>9))+((St=dt+(Dt^Xt^dn)+zt[1]+2763975236&4294967295)<<4&4294967295|St>>>28))+((St=dn+(dt^Dt^Xt)+zt[4]+1272893353&4294967295)<<11&4294967295|St>>>21))+((St=Xt+(dn^dt^Dt)+zt[7]+4139469664&4294967295)<<16&4294967295|St>>>16))+((St=Dt+(Xt^dn^dt)+zt[10]+3200236656&4294967295)<<23&4294967295|St>>>9))+((St=dt+(Dt^Xt^dn)+zt[13]+681279174&4294967295)<<4&4294967295|St>>>28))+((St=dn+(dt^Dt^Xt)+zt[0]+3936430074&4294967295)<<11&4294967295|St>>>21))+((St=Xt+(dn^dt^Dt)+zt[3]+3572445317&4294967295)<<16&4294967295|St>>>16))+((St=Dt+(Xt^dn^dt)+zt[6]+76029189&4294967295)<<23&4294967295|St>>>9))+((St=dt+(Dt^Xt^dn)+zt[9]+3654602809&4294967295)<<4&4294967295|St>>>28))+((St=dn+(dt^Dt^Xt)+zt[12]+3873151461&4294967295)<<11&4294967295|St>>>21))+((St=Xt+(dn^dt^Dt)+zt[15]+530742520&4294967295)<<16&4294967295|St>>>16))+((St=Dt+(Xt^dn^dt)+zt[2]+3299628645&4294967295)<<23&4294967295|St>>>9))+((St=dt+(Xt^(Dt|~dn))+zt[0]+4096336452&4294967295)<<6&4294967295|St>>>26))+((St=dn+(Dt^(dt|~Xt))+zt[7]+1126891415&4294967295)<<10&4294967295|St>>>22))+((St=Xt+(dt^(dn|~Dt))+zt[14]+2878612391&4294967295)<<15&4294967295|St>>>17))+((St=Dt+(dn^(Xt|~dt))+zt[5]+4237533241&4294967295)<<21&4294967295|St>>>11))+((St=dt+(Xt^(Dt|~dn))+zt[12]+1700485571&4294967295)<<6&4294967295|St>>>26))+((St=dn+(Dt^(dt|~Xt))+zt[3]+2399980690&4294967295)<<10&4294967295|St>>>22))+((St=Xt+(dt^(dn|~Dt))+zt[10]+4293915773&4294967295)<<15&4294967295|St>>>17))+((St=Dt+(dn^(Xt|~dt))+zt[1]+2240044497&4294967295)<<21&4294967295|St>>>11))+((St=dt+(Xt^(Dt|~dn))+zt[8]+1873313359&4294967295)<<6&4294967295|St>>>26))+((St=dn+(Dt^(dt|~Xt))+zt[15]+4264355552&4294967295)<<10&4294967295|St>>>22))+((St=Xt+(dt^(dn|~Dt))+zt[6]+2734768916&4294967295)<<15&4294967295|St>>>17))+((St=Dt+(dn^(Xt|~dt))+zt[13]+1309151649&4294967295)<<21&4294967295|St>>>11))+((dn=(dt=Dt+((St=dt+(Xt^(Dt|~dn))+zt[4]+4149444226&4294967295)<<6&4294967295|St>>>26))+((St=dn+(Dt^(dt|~Xt))+zt[11]+3174756917&4294967295)<<10&4294967295|St>>>22))^((Xt=dn+((St=Xt+(dt^(dn|~Dt))+zt[2]+718787259&4294967295)<<15&4294967295|St>>>17))|~dt))+zt[9]+3951481745&4294967295,Wt.g[0]=Wt.g[0]+dt&4294967295,Wt.g[1]=Wt.g[1]+(Xt+(St<<21&4294967295|St>>>11))&4294967295,Wt.g[2]=Wt.g[2]+Xt&4294967295,Wt.g[3]=Wt.g[3]+dn&4294967295}function S(Wt,dt){this.h=dt;for(var Dt=[],zt=!0,Xt=Wt.length-1;0<=Xt;Xt--){var dn=0|Wt[Xt];zt&&dn==dt||(Dt[Xt]=dn,zt=!1)}this.g=Dt}(function t(Wt,dt){function Dt(){}Dt.prototype=dt.prototype,Wt.D=dt.prototype,Wt.prototype=new Dt,Wt.prototype.constructor=Wt,Wt.C=function(zt,Xt,dn){for(var St=Array(arguments.length-2),Ac=2;Ac<arguments.length;Ac++)St[Ac-2]=arguments[Ac];return dt.prototype[Xt].apply(zt,St)}})(o,function i(){this.blockSize=-1}),o.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},o.prototype.u=function(Wt,dt){void 0===dt&&(dt=Wt.length);for(var Dt=dt-this.blockSize,zt=this.B,Xt=this.h,dn=0;dn<dt;){if(0==Xt)for(;dn<=Dt;)d(this,Wt,dn),dn+=this.blockSize;if("string"==typeof Wt){for(;dn<dt;)if(zt[Xt++]=Wt.charCodeAt(dn++),Xt==this.blockSize){d(this,zt),Xt=0;break}}else for(;dn<dt;)if(zt[Xt++]=Wt[dn++],Xt==this.blockSize){d(this,zt),Xt=0;break}}this.h=Xt,this.o+=dt},o.prototype.v=function(){var Wt=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);Wt[0]=128;for(var dt=1;dt<Wt.length-8;++dt)Wt[dt]=0;var Dt=8*this.o;for(dt=Wt.length-8;dt<Wt.length;++dt)Wt[dt]=255&Dt,Dt/=256;for(this.u(Wt),Wt=Array(16),dt=Dt=0;4>dt;++dt)for(var zt=0;32>zt;zt+=8)Wt[Dt++]=this.g[dt]>>>zt&255;return Wt};var U={};function G(Wt){return-128<=Wt&&128>Wt?function I(Wt,dt){var Dt=U;return Object.prototype.hasOwnProperty.call(Dt,Wt)?Dt[Wt]:Dt[Wt]=dt(Wt)}(Wt,function(dt){return new S([0|dt],0>dt?-1:0)}):new S([0|Wt],0>Wt?-1:0)}function ce(Wt){if(isNaN(Wt)||!isFinite(Wt))return ze;if(0>Wt)return Zn(ce(-Wt));for(var dt=[],Dt=1,zt=0;Wt>=Dt;zt++)dt[zt]=Wt/Dt|0,Dt*=4294967296;return new S(dt,0)}var ze=G(0),ht=G(1),nn=G(16777216);function Un(Wt){if(0!=Wt.h)return!1;for(var dt=0;dt<Wt.g.length;dt++)if(0!=Wt.g[dt])return!1;return!0}function lr(Wt){return-1==Wt.h}function Zn(Wt){for(var dt=Wt.g.length,Dt=[],zt=0;zt<dt;zt++)Dt[zt]=~Wt.g[zt];return new S(Dt,~Wt.h).add(ht)}function Kr(Wt,dt){return Wt.add(Zn(dt))}function si(Wt,dt){for(;(65535&Wt[dt])!=Wt[dt];)Wt[dt+1]+=Wt[dt]>>>16,Wt[dt]&=65535,dt++}function Qr(Wt,dt){this.g=Wt,this.h=dt}function ki(Wt,dt){if(Un(dt))throw Error("division by zero");if(Un(Wt))return new Qr(ze,ze);if(lr(Wt))return dt=ki(Zn(Wt),dt),new Qr(Zn(dt.g),Zn(dt.h));if(lr(dt))return dt=ki(Wt,Zn(dt)),new Qr(Zn(dt.g),dt.h);if(30<Wt.g.length){if(lr(Wt)||lr(dt))throw Error("slowDivide_ only works with positive integers.");for(var Dt=ht,zt=dt;0>=zt.l(Wt);)Dt=Is(Dt),zt=Is(zt);var Xt=$i(Dt,1),dn=$i(zt,1);for(zt=$i(zt,2),Dt=$i(Dt,2);!Un(zt);){var St=dn.add(zt);0>=St.l(Wt)&&(Xt=Xt.add(Dt),dn=St),zt=$i(zt,1),Dt=$i(Dt,1)}return dt=Kr(Wt,Xt.j(dt)),new Qr(Xt,dt)}for(Xt=ze;0<=Wt.l(dt);){for(Dt=Math.max(1,Math.floor(Wt.m()/dt.m())),zt=48>=(zt=Math.ceil(Math.log(Dt)/Math.LN2))?1:Math.pow(2,zt-48),St=(dn=ce(Dt)).j(dt);lr(St)||0<St.l(Wt);)St=(dn=ce(Dt-=zt)).j(dt);Un(dn)&&(dn=ht),Xt=Xt.add(dn),Wt=Kr(Wt,St)}return new Qr(Xt,Wt)}function Is(Wt){for(var dt=Wt.g.length+1,Dt=[],zt=0;zt<dt;zt++)Dt[zt]=Wt.i(zt)<<1|Wt.i(zt-1)>>>31;return new S(Dt,Wt.h)}function $i(Wt,dt){var Dt=dt>>5;dt%=32;for(var zt=Wt.g.length-Dt,Xt=[],dn=0;dn<zt;dn++)Xt[dn]=0<dt?Wt.i(dn+Dt)>>>dt|Wt.i(dn+Dt+1)<<32-dt:Wt.i(dn+Dt);return new S(Xt,Wt.h)}(u=S.prototype).m=function(){if(lr(this))return-Zn(this).m();for(var Wt=0,dt=1,Dt=0;Dt<this.g.length;Dt++){var zt=this.i(Dt);Wt+=(0<=zt?zt:4294967296+zt)*dt,dt*=4294967296}return Wt},u.toString=function(Wt){if(2>(Wt=Wt||10)||36<Wt)throw Error("radix out of range: "+Wt);if(Un(this))return"0";if(lr(this))return"-"+Zn(this).toString(Wt);for(var dt=ce(Math.pow(Wt,6)),Dt=this,zt="";;){var Xt=ki(Dt,dt).g,dn=((0<(Dt=Kr(Dt,Xt.j(dt))).g.length?Dt.g[0]:Dt.h)>>>0).toString(Wt);if(Un(Dt=Xt))return dn+zt;for(;6>dn.length;)dn="0"+dn;zt=dn+zt}},u.i=function(Wt){return 0>Wt?0:Wt<this.g.length?this.g[Wt]:this.h},u.l=function(Wt){return lr(Wt=Kr(this,Wt))?-1:Un(Wt)?0:1},u.abs=function(){return lr(this)?Zn(this):this},u.add=function(Wt){for(var dt=Math.max(this.g.length,Wt.g.length),Dt=[],zt=0,Xt=0;Xt<=dt;Xt++){var dn=zt+(65535&this.i(Xt))+(65535&Wt.i(Xt)),St=(dn>>>16)+(this.i(Xt)>>>16)+(Wt.i(Xt)>>>16);zt=St>>>16,Dt[Xt]=(St&=65535)<<16|(dn&=65535)}return new S(Dt,-2147483648&Dt[Dt.length-1]?-1:0)},u.j=function(Wt){if(Un(this)||Un(Wt))return ze;if(lr(this))return lr(Wt)?Zn(this).j(Zn(Wt)):Zn(Zn(this).j(Wt));if(lr(Wt))return Zn(this.j(Zn(Wt)));if(0>this.l(nn)&&0>Wt.l(nn))return ce(this.m()*Wt.m());for(var dt=this.g.length+Wt.g.length,Dt=[],zt=0;zt<2*dt;zt++)Dt[zt]=0;for(zt=0;zt<this.g.length;zt++)for(var Xt=0;Xt<Wt.g.length;Xt++){var dn=this.i(zt)>>>16,St=65535&this.i(zt),Ac=Wt.i(Xt)>>>16,ef=65535&Wt.i(Xt);Dt[2*zt+2*Xt]+=St*ef,si(Dt,2*zt+2*Xt),Dt[2*zt+2*Xt+1]+=dn*ef,si(Dt,2*zt+2*Xt+1),Dt[2*zt+2*Xt+1]+=St*Ac,si(Dt,2*zt+2*Xt+1),Dt[2*zt+2*Xt+2]+=dn*Ac,si(Dt,2*zt+2*Xt+2)}for(zt=0;zt<dt;zt++)Dt[zt]=Dt[2*zt+1]<<16|Dt[2*zt];for(zt=dt;zt<2*dt;zt++)Dt[zt]=0;return new S(Dt,0)},u.A=function(Wt){return ki(this,Wt).h},u.and=function(Wt){for(var dt=Math.max(this.g.length,Wt.g.length),Dt=[],zt=0;zt<dt;zt++)Dt[zt]=this.i(zt)&Wt.i(zt);return new S(Dt,this.h&Wt.h)},u.or=function(Wt){for(var dt=Math.max(this.g.length,Wt.g.length),Dt=[],zt=0;zt<dt;zt++)Dt[zt]=this.i(zt)|Wt.i(zt);return new S(Dt,this.h|Wt.h)},u.xor=function(Wt){for(var dt=Math.max(this.g.length,Wt.g.length),Dt=[],zt=0;zt<dt;zt++)Dt[zt]=this.i(zt)^Wt.i(zt);return new S(Dt,this.h^Wt.h)},o.prototype.digest=o.prototype.v,o.prototype.reset=o.prototype.s,o.prototype.update=o.prototype.u,Pe=Le.Md5=o,S.prototype.add=S.prototype.add,S.prototype.multiply=S.prototype.j,S.prototype.modulo=S.prototype.A,S.prototype.compare=S.prototype.l,S.prototype.toNumber=S.prototype.m,S.prototype.toString=S.prototype.toString,S.prototype.getBits=S.prototype.i,S.fromNumber=ce,S.fromString=function we(Wt,dt){if(0==Wt.length)throw Error("number format error: empty string");if(2>(dt=dt||10)||36<dt)throw Error("radix out of range: "+dt);if("-"==Wt.charAt(0))return Zn(we(Wt.substring(1),dt));if(0<=Wt.indexOf("-"))throw Error('number format error: interior "-" character');for(var Dt=ce(Math.pow(dt,8)),zt=ze,Xt=0;Xt<Wt.length;Xt+=8){var dn=Math.min(8,Wt.length-Xt),St=parseInt(Wt.substring(Xt,Xt+dn),dt);8>dn?(dn=ce(Math.pow(dt,dn)),zt=zt.j(dn).add(ce(St))):zt=(zt=zt.j(Dt)).add(ce(St))}return zt},Ne=Le.Integer=S}).apply(typeof Fe<"u"?Fe:typeof self<"u"?self:typeof window<"u"?window:{});var He,tt,Rt,Ft,Gt,Pt,hn,Et,K=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ae={};(function(){var u,t="function"==typeof Object.defineProperties?Object.defineProperty:function(w,Y,le){return w==Array.prototype||w==Object.prototype||(w[Y]=le.value),w},o=function i(w){w=["object"==typeof globalThis&&globalThis,w,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof K&&K];for(var Y=0;Y<w.length;++Y){var le=w[Y];if(le&&le.Math==Math)return le}throw Error("Cannot find global object")}(this);!function d(w,Y){if(Y)e:{var le=o;w=w.split(".");for(var Ve=0;Ve<w.length-1;Ve++){var en=w[Ve];if(!(en in le))break e;le=le[en]}(Y=Y(Ve=le[w=w[w.length-1]]))!=Ve&&null!=Y&&t(le,w,{configurable:!0,writable:!0,value:Y})}}("Array.prototype.values",function(w){return w||function(){return function I(w,Y){w instanceof String&&(w+="");var le=0,Ve=!1,en={next:function(){if(!Ve&&le<w.length){var bn=le++;return{value:Y(bn,w[bn]),done:!1}}return Ve=!0,{done:!0,value:void 0}}};return en[Symbol.iterator]=function(){return en},en}(this,function(Y,le){return le})}});var S=S||{},U=this||self;function G(w){var Y=typeof w;return"array"==(Y="object"!=Y?Y:w?Array.isArray(w)?"array":Y:"null")||"object"==Y&&"number"==typeof w.length}function ce(w){var Y=typeof w;return"object"==Y&&null!=w||"function"==Y}function we(w,Y,le){return w.call.apply(w.bind,arguments)}function ze(w,Y,le){if(!w)throw Error();if(2<arguments.length){var Ve=Array.prototype.slice.call(arguments,2);return function(){var en=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(en,Ve),w.apply(Y,en)}}return function(){return w.apply(Y,arguments)}}function ht(w,Y,le){return(ht=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?we:ze).apply(null,arguments)}function nn(w,Y){var le=Array.prototype.slice.call(arguments,1);return function(){var Ve=le.slice();return Ve.push.apply(Ve,arguments),w.apply(this,Ve)}}function Un(w,Y){function le(){}le.prototype=Y.prototype,w.aa=Y.prototype,w.prototype=new le,w.prototype.constructor=w,w.Qb=function(Ve,en,bn){for(var Sr=Array(arguments.length-2),wo=2;wo<arguments.length;wo++)Sr[wo-2]=arguments[wo];return Y.prototype[en].apply(Ve,Sr)}}function lr(w){const Y=w.length;if(0<Y){const le=Array(Y);for(let Ve=0;Ve<Y;Ve++)le[Ve]=w[Ve];return le}return[]}function Zn(w,Y){for(let le=1;le<arguments.length;le++){const Ve=arguments[le];if(G(Ve)){const en=w.length||0,bn=Ve.length||0;w.length=en+bn;for(let Sr=0;Sr<bn;Sr++)w[en+Sr]=Ve[Sr]}else w.push(Ve)}}function si(w){return/^[\s\xa0]*$/.test(w)}function Qr(){var w=U.navigator;return w&&(w=w.userAgent)?w:""}function ki(w){return ki[" "](w),w}ki[" "]=function(){};var Is=!(-1==Qr().indexOf("Gecko")||-1!=Qr().toLowerCase().indexOf("webkit")&&-1==Qr().indexOf("Edge")||-1!=Qr().indexOf("Trident")||-1!=Qr().indexOf("MSIE")||-1!=Qr().indexOf("Edge"));function $i(w,Y,le){for(const Ve in w)Y.call(le,w[Ve],Ve,w)}function dt(w){const Y={};for(const le in w)Y[le]=w[le];return Y}const Dt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function zt(w,Y){let le,Ve;for(let en=1;en<arguments.length;en++){for(le in Ve=arguments[en],Ve)w[le]=Ve[le];for(let bn=0;bn<Dt.length;bn++)le=Dt[bn],Object.prototype.hasOwnProperty.call(Ve,le)&&(w[le]=Ve[le])}}function Xt(w){var Y=1;w=w.split(":");const le=[];for(;0<Y&&w.length;)le.push(w.shift()),Y--;return w.length&&le.push(w.join(":")),le}function dn(w){U.setTimeout(()=>{throw w},0)}function St(){var w=fm;let Y=null;return w.g&&(Y=w.g,w.g=w.g.next,w.g||(w.h=null),Y.next=null),Y}var ef=new class Kr{constructor(Y,le){this.i=Y,this.j=le,this.h=0,this.g=null}get(){let Y;return 0<this.h?(this.h--,Y=this.g,this.g=Y.next,Y.next=null):Y=this.i(),Y}}(()=>new Sy,w=>w.reset());class Sy{constructor(){this.next=this.g=this.h=null}set(Y,le){this.h=Y,this.g=le,this.next=null}reset(){this.next=this.g=this.h=null}}let gp,Of=!1,fm=new class Ac{constructor(){this.h=this.g=null}add(Y,le){const Ve=ef.get();Ve.set(Y,le),this.h?this.h.next=Ve:this.g=Ve,this.h=Ve}},_p=()=>{const w=U.Promise.resolve(void 0);gp=()=>{w.then(ug)}};var ug=()=>{for(var w;w=St();){try{w.h.call(w.g)}catch(le){dn(le)}var Y=ef;Y.j(w),100>Y.h&&(Y.h++,w.next=Y.g,Y.g=w)}Of=!1};function tf(){this.s=this.s,this.C=this.C}function Xc(w,Y){this.type=w,this.g=this.target=Y,this.defaultPrevented=!1}tf.prototype.s=!1,tf.prototype.ma=function(){this.s||(this.s=!0,this.N())},tf.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},Xc.prototype.h=function(){this.defaultPrevented=!0};var h_=function(){if(!U.addEventListener||!Object.defineProperty)return!1;var w=!1,Y=Object.defineProperty({},"passive",{get:function(){w=!0}});try{const le=()=>{};U.addEventListener("test",le,Y),U.removeEventListener("test",le,Y)}catch{}return w}();function yp(w,Y){if(Xc.call(this,w?w.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,w){var le=this.type=w.type,Ve=w.changedTouches&&w.changedTouches.length?w.changedTouches[0]:null;if(this.target=w.target||w.srcElement,this.g=Y,Y=w.relatedTarget){if(Is){e:{try{ki(Y.nodeName);var en=!0;break e}catch{}en=!1}en||(Y=null)}}else"mouseover"==le?Y=w.fromElement:"mouseout"==le&&(Y=w.toElement);this.relatedTarget=Y,Ve?(this.clientX=void 0!==Ve.clientX?Ve.clientX:Ve.pageX,this.clientY=void 0!==Ve.clientY?Ve.clientY:Ve.pageY,this.screenX=Ve.screenX||0,this.screenY=Ve.screenY||0):(this.clientX=void 0!==w.clientX?w.clientX:w.pageX,this.clientY=void 0!==w.clientY?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0),this.button=w.button,this.key=w.key||"",this.ctrlKey=w.ctrlKey,this.altKey=w.altKey,this.shiftKey=w.shiftKey,this.metaKey=w.metaKey,this.pointerId=w.pointerId||0,this.pointerType="string"==typeof w.pointerType?w.pointerType:dg[w.pointerType]||"",this.state=w.state,this.i=w,w.defaultPrevented&&yp.aa.h.call(this)}}Un(yp,Xc);var dg={2:"touch",3:"pen",4:"mouse"};yp.prototype.h=function(){yp.aa.h.call(this);var w=this.i;w.preventDefault?w.preventDefault():w.returnValue=!1};var nf="closure_listenable_"+(1e6*Math.random()|0),th=0;function Dy(w,Y,le,Ve,en){this.listener=w,this.proxy=null,this.src=Y,this.type=le,this.capture=!!Ve,this.ha=en,this.key=++th,this.da=this.fa=!1}function _(w){w.da=!0,w.listener=null,w.proxy=null,w.src=null,w.ha=null}function c(w){this.src=w,this.g={},this.h=0}function a(w,Y){var le=Y.type;if(le in w.g){var bn,Ve=w.g[le],en=Array.prototype.indexOf.call(Ve,Y,void 0);(bn=0<=en)&&Array.prototype.splice.call(Ve,en,1),bn&&(_(Y),0==w.g[le].length&&(delete w.g[le],w.h--))}}function m(w,Y,le,Ve){for(var en=0;en<w.length;++en){var bn=w[en];if(!bn.da&&bn.listener==Y&&bn.capture==!!le&&bn.ha==Ve)return en}return-1}c.prototype.add=function(w,Y,le,Ve,en){var bn=w.toString();(w=this.g[bn])||(w=this.g[bn]=[],this.h++);var Sr=m(w,Y,Ve,en);return-1<Sr?(Y=w[Sr],le||(Y.fa=!1)):((Y=new Dy(Y,this.src,bn,!!Ve,en)).fa=le,w.push(Y)),Y};var R="closure_lm_"+(1e6*Math.random()|0),j={};function ie(w,Y,le,Ve,en){if(Ve&&Ve.once)return Re(w,Y,le,Ve,en);if(Array.isArray(Y)){for(var bn=0;bn<Y.length;bn++)ie(w,Y[bn],le,Ve,en);return null}return le=zn(le),w&&w[nf]?w.K(Y,le,ce(Ve)?!!Ve.capture:!!Ve,en):fe(w,Y,le,!1,Ve,en)}function fe(w,Y,le,Ve,en,bn){if(!Y)throw Error("Invalid event type");var Sr=ce(en)?!!en.capture:!!en,wo=Pn(w);if(wo||(w[R]=wo=new c(w)),(le=wo.add(Y,le,Ve,Sr,bn)).proxy)return le;if(Ve=function ke(){const Y=kn;return function w(le){return Y.call(w.src,w.listener,le)}}(),le.proxy=Ve,Ve.src=w,Ve.listener=le,w.addEventListener)h_||(en=Sr),void 0===en&&(en=!1),w.addEventListener(Y.toString(),Ve,en);else if(w.attachEvent)w.attachEvent(wn(Y.toString()),Ve);else{if(!w.addListener||!w.removeListener)throw Error("addEventListener and attachEvent are unavailable.");w.addListener(Ve)}return le}function Re(w,Y,le,Ve,en){if(Array.isArray(Y)){for(var bn=0;bn<Y.length;bn++)Re(w,Y[bn],le,Ve,en);return null}return le=zn(le),w&&w[nf]?w.L(Y,le,ce(Ve)?!!Ve.capture:!!Ve,en):fe(w,Y,le,!0,Ve,en)}function Ot(w,Y,le,Ve,en){if(Array.isArray(Y))for(var bn=0;bn<Y.length;bn++)Ot(w,Y[bn],le,Ve,en);else Ve=ce(Ve)?!!Ve.capture:!!Ve,le=zn(le),w&&w[nf]?(w=w.i,(Y=String(Y).toString())in w.g&&-1<(le=m(bn=w.g[Y],le,Ve,en))&&(_(bn[le]),Array.prototype.splice.call(bn,le,1),0==bn.length&&(delete w.g[Y],w.h--))):w&&(w=Pn(w))&&(Y=w.g[Y.toString()],w=-1,Y&&(w=m(Y,le,Ve,en)),(le=-1<w?Y[w]:null)&&Lt(le))}function Lt(w){if("number"!=typeof w&&w&&!w.da){var Y=w.src;if(Y&&Y[nf])a(Y.i,w);else{var le=w.type,Ve=w.proxy;Y.removeEventListener?Y.removeEventListener(le,Ve,w.capture):Y.detachEvent?Y.detachEvent(wn(le),Ve):Y.addListener&&Y.removeListener&&Y.removeListener(Ve),(le=Pn(Y))?(a(le,w),0==le.h&&(le.src=null,Y[R]=null)):_(w)}}}function wn(w){return w in j?j[w]:j[w]="on"+w}function kn(w,Y){if(w.da)w=!0;else{Y=new yp(Y,this);var le=w.listener,Ve=w.ha||w.src;w.fa&&Lt(w),w=le.call(Ve,Y)}return w}function Pn(w){return(w=w[R])instanceof c?w:null}var rr="__closure_events_fn_"+(1e9*Math.random()>>>0);function zn(w){return"function"==typeof w?w:(w[rr]||(w[rr]=function(Y){return w.handleEvent(Y)}),w[rr])}function Vn(){tf.call(this),this.i=new c(this),this.M=this,this.F=null}function Hn(w,Y){var le,Ve=w.F;if(Ve)for(le=[];Ve;Ve=Ve.F)le.push(Ve);if(w=w.M,Ve=Y.type||Y,"string"==typeof Y)Y=new Xc(Y,w);else if(Y instanceof Xc)Y.target=Y.target||w;else{var en=Y;zt(Y=new Xc(Ve,w),en)}if(en=!0,le)for(var bn=le.length-1;0<=bn;bn--){var Sr=Y.g=le[bn];en=tr(Sr,Ve,!0,Y)&&en}if(en=tr(Sr=Y.g=w,Ve,!0,Y)&&en,en=tr(Sr,Ve,!1,Y)&&en,le)for(bn=0;bn<le.length;bn++)en=tr(Sr=Y.g=le[bn],Ve,!1,Y)&&en}function tr(w,Y,le,Ve){if(!(Y=w.i.g[String(Y)]))return!0;Y=Y.concat();for(var en=!0,bn=0;bn<Y.length;++bn){var Sr=Y[bn];if(Sr&&!Sr.da&&Sr.capture==le){var wo=Sr.listener,Zc=Sr.ha||Sr.src;Sr.fa&&a(w.i,Sr),en=!1!==wo.call(Zc,Ve)&&en}}return en&&!Ve.defaultPrevented}function ur(w,Y,le){if("function"==typeof w)le&&(w=ht(w,le));else{if(!w||"function"!=typeof w.handleEvent)throw Error("Invalid listener argument");w=ht(w.handleEvent,w)}return 2147483647<Number(Y)?-1:U.setTimeout(w,Y||0)}function Or(w){w.g=ur(()=>{w.g=null,w.i&&(w.i=!1,Or(w))},w.l);const Y=w.h;w.h=null,w.m.apply(null,Y)}Un(Vn,tf),Vn.prototype[nf]=!0,Vn.prototype.removeEventListener=function(w,Y,le,Ve){Ot(this,w,Y,le,Ve)},Vn.prototype.N=function(){if(Vn.aa.N.call(this),this.i){var Y,w=this.i;for(Y in w.g){for(var le=w.g[Y],Ve=0;Ve<le.length;Ve++)_(le[Ve]);delete w.g[Y],w.h--}}this.F=null},Vn.prototype.K=function(w,Y,le,Ve){return this.i.add(String(w),Y,!1,le,Ve)},Vn.prototype.L=function(w,Y,le,Ve){return this.i.add(String(w),Y,!0,le,Ve)};class Gr extends tf{constructor(Y,le){super(),this.m=Y,this.l=le,this.h=null,this.i=!1,this.g=null}j(Y){this.h=arguments,this.g?this.i=!0:Or(this)}N(){super.N(),this.g&&(U.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Di(w){tf.call(this),this.h=w,this.g={}}Un(Di,tf);var Gi=[];function ca(w){$i(w.g,function(Y,le){this.g.hasOwnProperty(le)&&Lt(Y)},w),w.g={}}Di.prototype.N=function(){Di.aa.N.call(this),ca(this)},Di.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var md=U.JSON.stringify,xf=U.JSON.parse,gd=class{stringify(w){return U.JSON.stringify(w,void 0)}parse(w){return U.JSON.parse(w,void 0)}};function nh(){}function fg(){}nh.prototype.h=null;var Wr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ni(){Xc.call(this,"d")}function mi(){Xc.call(this,"c")}Un(ni,Xc),Un(mi,Xc);var Ji={},wc=null;function Yu(){return wc=wc||new Vn}function iu(w){Xc.call(this,Ji.La,w)}function Xu(w){const Y=Yu();Hn(Y,new iu(Y))}function Ho(w,Y){Xc.call(this,Ji.STAT_EVENT,w),this.stat=Y}function El(w){const Y=Yu();Hn(Y,new Ho(Y,w))}function Ry(w,Y){Xc.call(this,Ji.Ma,w),this.size=Y}function Ua(w,Y){if("function"!=typeof w)throw Error("Fn must not be null and must be a function");return U.setTimeout(function(){w()},Y)}function _d(){this.g=!0}function Ju(w,Y,le,Ve){w.info(function(){return"XMLHTTP TEXT ("+Y+"): "+function f_(w,Y){if(!w.g)return Y;if(!Y)return null;try{var le=JSON.parse(Y);if(le)for(w=0;w<le.length;w++)if(Array.isArray(le[w])){var Ve=le[w];if(!(2>Ve.length)){var en=Ve[1];if(Array.isArray(en)&&!(1>en.length)){var bn=en[0];if("noop"!=bn&&"stop"!=bn&&"close"!=bn)for(var Sr=1;Sr<en.length;Sr++)en[Sr]=""}}}return md(le)}catch{return Y}}(w,le)+(Ve?" "+Ve:"")})}Ji.La="serverreachability",Un(iu,Xc),Ji.STAT_EVENT="statevent",Un(Ho,Xc),Ji.Ma="timingevent",Un(Ry,Xc),_d.prototype.xa=function(){this.g=!1},_d.prototype.info=function(){};var p_,pg={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},pm={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function m_(){}function Vd(w,Y,le,Ve){this.j=w,this.i=Y,this.l=le,this.R=Ve||1,this.U=new Di(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new My}function My(){this.i=null,this.g="",this.h=!1}Un(m_,nh),m_.prototype.g=function(){return new XMLHttpRequest},m_.prototype.i=function(){return{}},p_=new m_;var Av={},g_={};function Oy(w,Y,le){w.L=1,w.v=Vy(Bd(Y)),w.m=le,w.P=!0,mg(w,null)}function mg(w,Y){w.F=Date.now(),__(w),w.A=Bd(w.v);var le=w.A,Ve=w.R;Array.isArray(Ve)||(Ve=[String(Ve)]),OE(le.i,"t",Ve),w.C=0,le=w.j.J,w.h=new My,w.g=Cg(w.j,le?Y:null,!w.m),0<w.O&&(w.M=new Gr(ht(w.Y,w,w.g),w.O)),Y=w.U,le=w.g,Ve=w.ca;var en="readystatechange";Array.isArray(en)||(en&&(Gi[0]=en.toString()),en=Gi);for(var bn=0;bn<en.length;bn++){var Sr=ie(le,en[bn],Ve||Y.handleEvent,!1,Y.h||Y);if(!Sr)break;Y.g[Sr.key]=Sr}Y=w.H?dt(w.H):{},w.m?(w.u||(w.u="POST"),Y["Content-Type"]="application/x-www-form-urlencoded",w.g.ea(w.A,w.u,w.m,Y)):(w.u="GET",w.g.ea(w.A,w.u,null,Y)),Xu(),function Zu(w,Y,le,Ve,en,bn){w.info(function(){if(w.g)if(bn)for(var Sr="",wo=bn.split("&"),Zc=0;Zc<wo.length;Zc++){var Ps=wo[Zc].split("=");if(1<Ps.length){var Vl=Ps[0];Ps=Ps[1];var Il=Vl.split("_");Sr=2<=Il.length&&"type"==Il[1]?Sr+(Vl+"=")+Ps+"&":Sr+(Vl+"=redacted&")}}else Sr=null;else Sr=bn;return"XMLHTTP REQ ("+Ve+") [attempt "+en+"]: "+Y+"\n"+le+"\n"+Sr})}(w.i,w.u,w.A,w.l,w.R,w.m)}function wv(w){return!!w.g&&"GET"==w.u&&2!=w.L&&w.j.Ca}function AE(w,Y){var le=w.C,Ve=Y.indexOf("\n",le);return-1==Ve?g_:(le=Number(Y.substring(le,Ve)),isNaN(le)?Av:(Ve+=1)+le>Y.length?g_:(Y=Y.slice(Ve,Ve+le),w.C=Ve+le,Y))}function __(w){w.S=Date.now()+w.I,Cv(w,w.I)}function Cv(w,Y){if(null!=w.B)throw Error("WatchDog timer not null");w.B=Ua(ht(w.ba,w),Y)}function xy(w){w.B&&(U.clearTimeout(w.B),w.B=null)}function vp(w){0==w.j.G||w.J||Bv(w.j,w)}function rh(w){xy(w);var Y=w.M;Y&&"function"==typeof Y.ma&&Y.ma(),w.M=null,ca(w.U),w.g&&(Y=w.g,w.g=null,Y.abort(),Y.ma())}function Ny(w,Y){try{var le=w.j;if(0!=le.G&&(le.g==w||ky(le.h,w)))if(!w.K&&ky(le.h,w)&&3==le.G){try{var Ve=le.Da.g.parse(Y)}catch{Ve=null}if(Array.isArray(Ve)&&3==Ve.length){var en=Ve;if(0==en[0]){e:if(!le.u){if(le.g){if(!(le.g.F+3e3<w.F))break e;A_(le),oh(le)}Ep(le),El(18)}}else le.za=en[1],0<le.za-le.T&&37500>en[2]&&le.F&&0==le.v&&!le.C&&(le.C=Ua(ht(le.Za,le),6e3));if(1>=Sv(le.h)&&le.ca){try{le.ca()}catch{}le.ca=void 0}}else bp(le,11)}else if((w.K||le.g==w)&&A_(le),!si(Y))for(en=le.Da.g.parse(Y),Y=0;Y<en.length;Y++){let Ps=en[Y];if(le.T=Ps[0],Ps=Ps[1],2==le.G)if("c"==Ps[0]){le.K=Ps[1],le.ia=Ps[2];const Vl=Ps[3];null!=Vl&&(le.la=Vl,le.j.info("VER="+le.la));const Il=Ps[4];null!=Il&&(le.Aa=Il,le.j.info("SVER="+le.Aa));const Lf=Ps[5];null!=Lf&&"number"==typeof Lf&&0<Lf&&(le.L=Ve=1.5*Lf,le.j.info("backChannelRequestTimeoutMs_="+Ve)),Ve=le;const ah=w.g;if(ah){const S_=ah.g?ah.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(S_){var bn=Ve.h;bn.g||-1==S_.indexOf("spdy")&&-1==S_.indexOf("quic")&&-1==S_.indexOf("h2")||(bn.j=bn.l,bn.g=new Set,bn.h&&(_g(bn,bn.h),bn.h=null))}if(Ve.D){const Qy=ah.g?ah.g.getResponseHeader("X-HTTP-Session-Id"):null;Qy&&(Ve.ya=Qy,ko(Ve.I,Ve.D,Qy))}}le.G=3,le.l&&le.l.ua(),le.ba&&(le.R=Date.now()-w.F,le.j.info("Handshake RTT: "+le.R+"ms"));var Sr=w;if((Ve=le).qa=Wv(Ve,Ve.J?Ve.ia:null,Ve.W),Sr.K){Dv(Ve.h,Sr);var wo=Sr,Zc=Ve.L;Zc&&(wo.I=Zc),wo.B&&(xy(wo),__(wo)),Ve.g=Sr}else wg(Ve);0<le.i.length&&Hy(le)}else"stop"!=Ps[0]&&"close"!=Ps[0]||bp(le,7);else 3==le.G&&("stop"==Ps[0]||"close"==Ps[0]?"stop"==Ps[0]?bp(le,7):I_(le):"noop"!=Ps[0]&&le.l&&le.l.ta(Ps),le.v=0)}Xu()}catch{}}Vd.prototype.ca=function(w){w=w.target;const Y=this.M;Y&&3==Mh(w)?Y.j():this.Y(w)},Vd.prototype.Y=function(w){try{if(w==this.g)e:{const Il=Mh(this.g);var Y=this.g.Ba();if(this.g.Z(),!(3>Il)&&(3!=Il||this.g&&(this.h.h||this.g.oa()||ym(this.g)))){this.J||4!=Il||7==Y||Xu(),xy(this);var le=this.g.Z();this.X=le;t:if(wv(this)){var Ve=ym(this.g);w="";var en=Ve.length,bn=4==Mh(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){rh(this),vp(this);var Sr="";break t}this.h.i=new U.TextDecoder}for(Y=0;Y<en;Y++)this.h.h=!0,w+=this.h.i.decode(Ve[Y],{stream:!(bn&&Y==en-1)});Ve.length=0,this.h.g+=w,this.C=0,Sr=this.h.g}else Sr=this.g.oa();if(this.o=200==le,function Nf(w,Y,le,Ve,en,bn,Sr){w.info(function(){return"XMLHTTP RESP ("+Ve+") [ attempt "+en+"]: "+Y+"\n"+le+"\n"+bn+" "+Sr})}(this.i,this.u,this.A,this.l,this.R,Il,le),this.o){if(this.T&&!this.K){t:{if(this.g){var wo,Zc=this.g;if((wo=Zc.g?Zc.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!si(wo)){var Ps=wo;break t}}Ps=null}if(!(le=Ps)){this.o=!1,this.s=3,El(12),rh(this),vp(this);break e}Ju(this.i,this.l,le,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ny(this,le)}if(this.P){let ah;for(le=!0;!this.J&&this.C<Sr.length;){if(ah=AE(this,Sr),ah==g_){4==Il&&(this.s=4,El(14),le=!1),Ju(this.i,this.l,null,"[Incomplete Response]");break}if(ah==Av){this.s=4,El(15),Ju(this.i,this.l,Sr,"[Invalid Chunk]"),le=!1;break}Ju(this.i,this.l,ah,null),Ny(this,ah)}if(wv(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=Il||0!=Sr.length||this.h.h||(this.s=1,El(16),le=!1),this.o=this.o&&le,le){if(0<Sr.length&&!this.W){this.W=!0;var Vl=this.j;Vl.g==this&&Vl.ba&&!Vl.M&&(Vl.j.info("Great, no buffering proxy detected. Bytes received: "+Sr.length),Gy(Vl),Vl.M=!0,El(11))}}else Ju(this.i,this.l,Sr,"[Invalid Chunked Response]"),rh(this),vp(this)}else Ju(this.i,this.l,Sr,null),Ny(this,Sr);4==Il&&rh(this),this.o&&!this.J&&(4==Il?Bv(this.j,this):(this.o=!1,__(this)))}else(function kE(w){const Y={};w=(w.g&&2<=Mh(w)&&w.g.getAllResponseHeaders()||"").split("\r\n");for(let Ve=0;Ve<w.length;Ve++){if(si(w[Ve]))continue;var le=Xt(w[Ve]);const en=le[0];if("string"!=typeof(le=le[1]))continue;le=le.trim();const bn=Y[en]||[];Y[en]=bn,bn.push(le)}!function Wt(w,Y){for(const le in w)Y.call(void 0,w[le],le,w)}(Y,function(Ve){return Ve.join(", ")})})(this.g),400==le&&0<Sr.indexOf("Unknown SID")?(this.s=3,El(12)):(this.s=0,El(13)),rh(this),vp(this)}}}catch{}},Vd.prototype.cancel=function(){this.J=!0,rh(this)},Vd.prototype.ba=function(){this.B=null;const w=Date.now();0<=w-this.S?(function Py(w,Y){w.info(function(){return"TIMEOUT: "+Y})}(this.i,this.A),2!=this.L&&(Xu(),El(17)),rh(this),this.s=2,vp(this)):Cv(this,this.S-w)};var y_=class{constructor(w,Y){this.g=w,this.map=Y}};function gg(w){this.l=w||10,w=U.PerformanceNavigationTiming?0<(w=U.performance.getEntriesByType("navigation")).length&&("hq"==w[0].nextHopProtocol||"h2"==w[0].nextHopProtocol):!!(U.chrome&&U.chrome.loadTimes&&U.chrome.loadTimes()&&U.chrome.loadTimes().wasFetchedViaSpdy),this.j=w?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function wE(w){return!!w.h||!!w.g&&w.g.size>=w.j}function Sv(w){return w.h?1:w.g?w.g.size:0}function ky(w,Y){return w.h?w.h==Y:!!w.g&&w.g.has(Y)}function _g(w,Y){w.g?w.g.add(Y):w.h=Y}function Dv(w,Y){w.h&&w.h==Y?w.h=null:w.g&&w.g.has(Y)&&w.g.delete(Y)}function Ly(w){if(null!=w.h)return w.i.concat(w.h.D);if(null!=w.g&&0!==w.g.size){let Y=w.i;for(const le of w.g.values())Y=Y.concat(le.D);return Y}return lr(w.i)}function Fy(w,Y){if(w.forEach&&"function"==typeof w.forEach)w.forEach(Y,void 0);else if(G(w)||"string"==typeof w)Array.prototype.forEach.call(w,Y,void 0);else for(var le=function SE(w){if(w.na&&"function"==typeof w.na)return w.na();if(!w.V||"function"!=typeof w.V){if(typeof Map<"u"&&w instanceof Map)return Array.from(w.keys());if(!(typeof Set<"u"&&w instanceof Set)){if(G(w)||"string"==typeof w){var Y=[];w=w.length;for(var le=0;le<w;le++)Y.push(le);return Y}Y=[],le=0;for(const Ve in w)Y[le++]=Ve;return Y}}}(w),Ve=function CE(w){if(w.V&&"function"==typeof w.V)return w.V();if(typeof Map<"u"&&w instanceof Map||typeof Set<"u"&&w instanceof Set)return Array.from(w.values());if("string"==typeof w)return w.split("");if(G(w)){for(var Y=[],le=w.length,Ve=0;Ve<le;Ve++)Y.push(w[Ve]);return Y}for(Ve in Y=[],le=0,w)Y[le++]=w[Ve];return Y}(w),en=Ve.length,bn=0;bn<en;bn++)Y.call(void 0,Ve[bn],le&&le[bn],w)}gg.prototype.cancel=function(){if(this.i=Ly(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const w of this.g.values())w.cancel();this.g.clear()}};var Rv=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ud(w){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,w instanceof Ud){this.h=w.h,v_(this,w.j),this.o=w.o,this.g=w.g,yg(this,w.s),this.l=w.l;var Y=w.i,le=new mm;le.i=Y.i,Y.g&&(le.g=new Map(Y.g),le.h=Y.h),Pv(this,le),this.m=w.m}else w&&(Y=String(w).match(Rv))?(this.h=!1,v_(this,Y[1]||"",!0),this.o=vg(Y[2]||""),this.g=vg(Y[3]||"",!0),yg(this,Y[4]),this.l=vg(Y[5]||"",!0),Pv(this,Y[6]||"",!0),this.m=vg(Y[7]||"")):(this.h=!1,this.i=new mm(null,this.h))}function Bd(w){return new Ud(w)}function v_(w,Y,le){w.j=le?vg(Y,!0):Y,w.j&&(w.j=w.j.replace(/:$/,""))}function yg(w,Y){if(Y){if(Y=Number(Y),isNaN(Y)||0>Y)throw Error("Bad port number "+Y);w.s=Y}else w.s=null}function Pv(w,Y,le){Y instanceof mm?(w.i=Y,function xE(w,Y){Y&&!w.j&&(bl(w),w.i=null,w.g.forEach(function(le,Ve){var en=Ve.toLowerCase();Ve!=en&&(By(this,Ve),OE(this,en,le))},w)),w.j=Y}(w.i,w.h)):(le||(Y=rf(Y,Uy)),w.i=new mm(Y,w.h))}function ko(w,Y,le){w.i.set(Y,le)}function Vy(w){return ko(w,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),w}function vg(w,Y){return w?Y?decodeURI(w.replace(/%25/g,"%2525")):decodeURIComponent(w):""}function rf(w,Y,le){return"string"==typeof w?(w=encodeURI(w).replace(Y,Mv),le&&(w=w.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),w):null}function Mv(w){return"%"+((w=w.charCodeAt(0))>>4&15).toString(16)+(15&w).toString(16)}Ud.prototype.toString=function(){var w=[],Y=this.j;Y&&w.push(rf(Y,Ov,!0),":");var le=this.g;return(le||"file"==Y)&&(w.push("//"),(Y=this.o)&&w.push(rf(Y,Ov,!0),"@"),w.push(encodeURIComponent(String(le)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(le=this.s)&&w.push(":",String(le))),(le=this.l)&&(this.g&&"/"!=le.charAt(0)&&w.push("/"),w.push(rf(le,"/"==le.charAt(0)?PE:RE,!0))),(le=this.i.toString())&&w.push("?",le),(le=this.m)&&w.push("#",rf(le,ME)),w.join("")};var Ov=/[#\/\?@]/g,RE=/[#\?:]/g,PE=/[#\?]/g,Uy=/[#\?@]/g,ME=/#/g;function mm(w,Y){this.h=this.g=null,this.i=w||null,this.j=!!Y}function bl(w){w.g||(w.g=new Map,w.h=0,w.i&&function DE(w,Y){if(w){w=w.split("&");for(var le=0;le<w.length;le++){var Ve=w[le].indexOf("="),en=null;if(0<=Ve){var bn=w[le].substring(0,Ve);en=w[le].substring(Ve+1)}else bn=w[le];Y(bn,en?decodeURIComponent(en.replace(/\+/g," ")):"")}}}(w.i,function(Y,le){w.add(decodeURIComponent(Y.replace(/\+/g," ")),le)}))}function By(w,Y){bl(w),Y=Ko(w,Y),w.g.has(Y)&&(w.i=null,w.h-=w.g.get(Y).length,w.g.delete(Y))}function xv(w,Y){return bl(w),Y=Ko(w,Y),w.g.has(Y)}function OE(w,Y,le){By(w,Y),0<le.length&&(w.i=null,w.g.set(Ko(w,Y),lr(le)),w.h+=le.length)}function Ko(w,Y){return Y=String(Y),w.j&&(Y=Y.toLowerCase()),Y}function kf(w,Y,le,Ve,en){try{en&&(en.onload=null,en.onerror=null,en.onabort=null,en.ontimeout=null),Ve(le)}catch{}}function $y(){this.g=new gd}function Nv(w,Y,le){const Ve=le||"";try{Fy(w,function(en,bn){let Sr=en;ce(en)&&(Sr=md(en)),Y.push(Ve+bn+"="+encodeURIComponent(Sr))})}catch(en){throw Y.push(Ve+"type="+encodeURIComponent("_badmap")),en}}function gm(w){this.l=w.Ub||null,this.j=w.eb||!1}function Eg(w,Y){Vn.call(this),this.D=w,this.o=Y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function kv(w){w.j.read().then(w.Pa.bind(w)).catch(w.ga.bind(w))}function bg(w){w.readyState=4,w.l=null,w.j=null,w.v=null,ih(w)}function ih(w){w.onreadystatechange&&w.onreadystatechange.call(w)}function Wy(w){let Y="";return $i(w,function(le,Ve){Y+=Ve,Y+=":",Y+=le,Y+="\r\n"}),Y}function Ig(w,Y,le){e:{for(Ve in le){var Ve=!1;break e}Ve=!0}Ve||(le=Wy(le),"string"==typeof w?null!=le&&encodeURIComponent(String(le)):ko(w,Y,le))}function Ba(w){Vn.call(this),this.headers=new Map,this.o=w||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(u=mm.prototype).add=function(w,Y){bl(this),this.i=null,w=Ko(this,w);var le=this.g.get(w);return le||this.g.set(w,le=[]),le.push(Y),this.h+=1,this},u.forEach=function(w,Y){bl(this),this.g.forEach(function(le,Ve){le.forEach(function(en){w.call(Y,en,Ve,this)},this)},this)},u.na=function(){bl(this);const w=Array.from(this.g.values()),Y=Array.from(this.g.keys()),le=[];for(let Ve=0;Ve<Y.length;Ve++){const en=w[Ve];for(let bn=0;bn<en.length;bn++)le.push(Y[Ve])}return le},u.V=function(w){bl(this);let Y=[];if("string"==typeof w)xv(this,w)&&(Y=Y.concat(this.g.get(Ko(this,w))));else{w=Array.from(this.g.values());for(let le=0;le<w.length;le++)Y=Y.concat(w[le])}return Y},u.set=function(w,Y){return bl(this),this.i=null,xv(this,w=Ko(this,w))&&(this.h-=this.g.get(w).length),this.g.set(w,[Y]),this.h+=1,this},u.get=function(w,Y){return w&&0<(w=this.V(w)).length?String(w[0]):Y},u.toString=function(){if(this.i)return this.i;if(!this.g)return"";const w=[],Y=Array.from(this.g.keys());for(var le=0;le<Y.length;le++){var Ve=Y[le];const bn=encodeURIComponent(String(Ve)),Sr=this.V(Ve);for(Ve=0;Ve<Sr.length;Ve++){var en=bn;""!==Sr[Ve]&&(en+="="+encodeURIComponent(String(Sr[Ve]))),w.push(en)}}return this.i=w.join("&")},Un(gm,nh),gm.prototype.g=function(){return new Eg(this.l,this.j)},gm.prototype.i=function(w){return function(){return w}}({}),Un(Eg,Vn),(u=Eg.prototype).open=function(w,Y){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=w,this.A=Y,this.readyState=1,ih(this)},u.send=function(w){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const Y={headers:this.u,method:this.B,credentials:this.m,cache:void 0};w&&(Y.body=w),(this.D||U).fetch(new Request(this.A,Y)).then(this.Sa.bind(this),this.ga.bind(this))},u.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,bg(this)),this.readyState=0},u.Sa=function(w){if(this.g&&(this.l=w,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=w.headers,this.readyState=2,ih(this)),this.g&&(this.readyState=3,ih(this),this.g)))if("arraybuffer"===this.responseType)w.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof U.ReadableStream<"u"&&"body"in w){if(this.j=w.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;kv(this)}else w.text().then(this.Ra.bind(this),this.ga.bind(this))},u.Pa=function(w){if(this.g){if(this.o&&w.value)this.response.push(w.value);else if(!this.o){var Y=w.value?w.value:new Uint8Array(0);(Y=this.v.decode(Y,{stream:!w.done}))&&(this.response=this.responseText+=Y)}w.done?bg(this):ih(this),3==this.readyState&&kv(this)}},u.Ra=function(w){this.g&&(this.response=this.responseText=w,bg(this))},u.Qa=function(w){this.g&&(this.response=w,bg(this))},u.ga=function(){this.g&&bg(this)},u.setRequestHeader=function(w,Y){this.u.append(w,Y)},u.getResponseHeader=function(w){return this.h&&this.h.get(w.toLowerCase())||""},u.getAllResponseHeaders=function(){if(!this.h)return"";const w=[],Y=this.h.entries();for(var le=Y.next();!le.done;)w.push((le=le.value)[0]+": "+le[1]),le=Y.next();return w.join("\r\n")},Object.defineProperty(Eg.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(w){this.m=w?"include":"same-origin"}}),Un(Ba,Vn);var Lv=/^https?$/i,Fv=["POST","PUT"];function zy(w,Y){w.h=!1,w.g&&(w.j=!0,w.g.abort(),w.j=!1),w.l=Y,w.m=5,_m(w),sh(w)}function _m(w){w.A||(w.A=!0,Hn(w,"complete"),Hn(w,"error"))}function E_(w){if(w.h&&typeof S<"u"&&(!w.v[1]||4!=Mh(w)||2!=w.Z()))if(w.u&&4==Mh(w))ur(w.Ea,0,w);else if(Hn(w,"readystatechange"),4==Mh(w)){w.h=!1;try{const Sr=w.Z();e:switch(Sr){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var Y=!0;break e;default:Y=!1}var le;if(!(le=Y)){var Ve;if(Ve=0===Sr){var en=String(w.D).match(Rv)[1]||null;!en&&U.self&&U.self.location&&(en=U.self.location.protocol.slice(0,-1)),Ve=!Lv.test(en?en.toLowerCase():"")}le=Ve}if(le)Hn(w,"complete"),Hn(w,"success");else{w.m=6;try{var bn=2<Mh(w)?w.g.statusText:""}catch{bn=""}w.l=bn+" ["+w.Z()+"]",_m(w)}}finally{sh(w)}}}function sh(w,Y){if(w.g){Tg(w);const le=w.g,Ve=w.v[0]?()=>{}:null;w.g=null,w.v=null,Y||Hn(w,"ready");try{le.onreadystatechange=Ve}catch{}}}function Tg(w){w.I&&(U.clearTimeout(w.I),w.I=null)}function Mh(w){return w.g?w.g.readyState:0}function ym(w){try{if(!w.g)return null;if("response"in w.g)return w.g.response;switch(w.H){case"":case"text":return w.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in w.g)return w.g.mozResponseArrayBuffer}return null}catch{return null}}function Ag(w,Y,le){return le&&le.internalChannelParams&&le.internalChannelParams[w]||Y}function b_(w){this.Aa=0,this.i=[],this.j=new _d,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ag("failFast",!1,w),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ag("baseRetryDelayMs",5e3,w),this.cb=Ag("retryDelaySeedMs",1e4,w),this.Wa=Ag("forwardChannelMaxRetries",2,w),this.wa=Ag("forwardChannelRequestTimeoutMs",2e4,w),this.pa=w&&w.xmlHttpFactory||void 0,this.Xa=w&&w.Tb||void 0,this.Ca=w&&w.useFetchStreams||!1,this.L=void 0,this.J=w&&w.supportsCrossDomainXhr||!1,this.K="",this.h=new gg(w&&w.concurrentRequestLimit),this.Da=new $y,this.P=w&&w.fastHandshake||!1,this.O=w&&w.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=w&&w.Rb||!1,w&&w.xa&&this.j.xa(),w&&w.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&w&&w.detectBufferingProxy||!1,this.ja=void 0,w&&w.longPollingTimeout&&0<w.longPollingTimeout&&(this.ja=w.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function I_(w){if(vm(w),3==w.G){var Y=w.U++,le=Bd(w.I);if(ko(le,"SID",w.K),ko(le,"RID",Y),ko(le,"TYPE","terminate"),Em(w,le),(Y=new Vd(w,w.j,Y)).L=2,Y.v=Vy(Bd(le)),le=!1,U.navigator&&U.navigator.sendBeacon)try{le=U.navigator.sendBeacon(Y.v.toString(),"")}catch{}!le&&U.Image&&((new Image).src=Y.v,le=!0),le||(Y.g=Cg(Y.j,null),Y.g.ea(Y.v)),Y.F=Date.now(),__(Y)}$v(w)}function oh(w){w.g&&(Gy(w),w.g.cancel(),w.g=null)}function vm(w){oh(w),w.u&&(U.clearTimeout(w.u),w.u=null),A_(w),w.h.cancel(),w.s&&("number"==typeof w.s&&U.clearTimeout(w.s),w.s=null)}function Hy(w){if(!wE(w.h)&&!w.s){w.s=!0;var Y=w.Ga;gp||_p(),Of||(gp(),Of=!0),fm.add(Y,w),w.B=0}}function Ky(w,Y){var le;le=Y?Y.l:w.U++;const Ve=Bd(w.I);ko(Ve,"SID",w.K),ko(Ve,"RID",le),ko(Ve,"AID",w.T),Em(w,Ve),w.m&&w.o&&Ig(Ve,w.m,w.o),le=new Vd(w,w.j,le,w.B+1),null===w.m&&(le.H=w.o),Y&&(w.i=Y.D.concat(w.i)),Y=Vv(w,le,1e3),le.I=Math.round(.5*w.wa)+Math.round(.5*w.wa*Math.random()),_g(w.h,le),Oy(le,Ve,Y)}function Em(w,Y){w.H&&$i(w.H,function(le,Ve){ko(Y,Ve,le)}),w.l&&Fy({},function(le,Ve){ko(Y,Ve,le)})}function Vv(w,Y,le){le=Math.min(w.i.length,le);var Ve=w.l?ht(w.l.Na,w.l,w):null;e:{var en=w.i;let bn=-1;for(;;){const Sr=["count="+le];-1==bn?0<le?(bn=en[0].g,Sr.push("ofs="+bn)):bn=0:Sr.push("ofs="+bn);let wo=!0;for(let Zc=0;Zc<le;Zc++){let Ps=en[Zc].g;const Vl=en[Zc].map;if(Ps-=bn,0>Ps)bn=Math.max(0,en[Zc].g-100),wo=!1;else try{Nv(Vl,Sr,"req"+Ps+"_")}catch{Ve&&Ve(Vl)}}if(wo){Ve=Sr.join("&");break e}}}return w=w.i.splice(0,le),Y.D=w,Ve}function wg(w){if(!w.g&&!w.u){w.Y=1;var Y=w.Fa;gp||_p(),Of||(gp(),Of=!0),fm.add(Y,w),w.v=0}}function Ep(w){return!(w.g||w.u||3<=w.v||(w.Y++,w.u=Ua(ht(w.Fa,w),jv(w,w.v)),w.v++,0))}function Gy(w){null!=w.A&&(U.clearTimeout(w.A),w.A=null)}function Uv(w){w.g=new Vd(w,w.j,"rpc",w.Y),null===w.m&&(w.g.H=w.o),w.g.O=0;var Y=Bd(w.qa);ko(Y,"RID","rpc"),ko(Y,"SID",w.K),ko(Y,"AID",w.T),ko(Y,"CI",w.F?"0":"1"),!w.F&&w.ja&&ko(Y,"TO",w.ja),ko(Y,"TYPE","xmlhttp"),Em(w,Y),w.m&&w.o&&Ig(Y,w.m,w.o),w.L&&(w.g.I=w.L);var le=w.g;w=w.ia,le.L=1,le.v=Vy(Bd(Y)),le.m=null,le.P=!0,mg(le,w)}function A_(w){null!=w.C&&(U.clearTimeout(w.C),w.C=null)}function Bv(w,Y){var le=null;if(w.g==Y){A_(w),Gy(w),w.g=null;var Ve=2}else{if(!ky(w.h,Y))return;le=Y.D,Dv(w.h,Y),Ve=1}if(0!=w.G)if(Y.o)if(1==Ve){le=Y.m?Y.m.length:0,Y=Date.now()-Y.F;var en=w.B;Hn(Ve=Yu(),new Ry(Ve,le)),Hy(w)}else wg(w);else if(3==(en=Y.s)||0==en&&0<Y.X||!(1==Ve&&function T_(w,Y){return!(Sv(w.h)>=w.h.j-(w.s?1:0)||(w.s?(w.i=Y.D.concat(w.i),0):1==w.G||2==w.G||w.B>=(w.Va?0:w.Wa)||(w.s=Ua(ht(w.Ga,w,Y),jv(w,w.B)),w.B++,0)))}(w,Y)||2==Ve&&Ep(w)))switch(le&&0<le.length&&(Y=w.h,Y.i=Y.i.concat(le)),en){case 1:bp(w,5);break;case 4:bp(w,10);break;case 3:bp(w,6);break;default:bp(w,2)}}function jv(w,Y){let le=w.Ta+Math.floor(Math.random()*w.cb);return w.isActive()||(le*=2),le*Y}function bp(w,Y){if(w.j.info("Error code "+Y),2==Y){var le=ht(w.fb,w),Ve=w.Xa;const en=!Ve;Ve=new Ud(Ve||"//www.google.com/images/cleardot.gif"),U.location&&"http"==U.location.protocol||v_(Ve,"https"),Vy(Ve),en?function jy(w,Y){const le=new _d;if(U.Image){const Ve=new Image;Ve.onload=nn(kf,le,"TestLoadImage: loaded",!0,Y,Ve),Ve.onerror=nn(kf,le,"TestLoadImage: error",!1,Y,Ve),Ve.onabort=nn(kf,le,"TestLoadImage: abort",!1,Y,Ve),Ve.ontimeout=nn(kf,le,"TestLoadImage: timeout",!1,Y,Ve),U.setTimeout(function(){Ve.ontimeout&&Ve.ontimeout()},1e4),Ve.src=w}else Y(!1)}(Ve.toString(),le):function NE(w,Y){new _d;const Ve=new AbortController,en=setTimeout(()=>{Ve.abort(),kf(0,0,!1,Y)},1e4);fetch(w,{signal:Ve.signal}).then(bn=>{clearTimeout(en),kf(0,0,!!bn.ok,Y)}).catch(()=>{clearTimeout(en),kf(0,0,!1,Y)})}(Ve.toString(),le)}else El(2);w.G=0,w.l&&w.l.sa(Y),$v(w),vm(w)}function $v(w){if(w.G=0,w.ka=[],w.l){const Y=Ly(w.h);(0!=Y.length||0!=w.i.length)&&(Zn(w.ka,Y),Zn(w.ka,w.i),w.h.i.length=0,lr(w.i),w.i.length=0),w.l.ra()}}function Wv(w,Y,le){var Ve=le instanceof Ud?Bd(le):new Ud(le);if(""!=Ve.g)Y&&(Ve.g=Y+"."+Ve.g),yg(Ve,Ve.s);else{var en=U.location;Ve=en.protocol,Y=Y?Y+"."+en.hostname:en.hostname,en=+en.port;var bn=new Ud(null);Ve&&v_(bn,Ve),Y&&(bn.g=Y),en&&yg(bn,en),le&&(bn.l=le),Ve=bn}return Y=w.ya,(le=w.D)&&Y&&ko(Ve,le,Y),ko(Ve,"VER",w.la),Em(w,Ve),Ve}function Cg(w,Y,le){if(Y&&!w.J)throw Error("Can't create secondary domain capable XhrIo object.");return(Y=new Ba(w.Ca&&!w.pa?new gm({eb:le}):w.pa)).Ha(w.J),Y}function zv(){}function w_(){}function ed(w,Y){Vn.call(this),this.g=new b_(Y),this.l=w,this.h=Y&&Y.messageUrlParams||null,w=Y&&Y.messageHeaders||null,Y&&Y.clientProtocolHeaderRequired&&(w?w["X-Client-Protocol"]="webchannel":w={"X-Client-Protocol":"webchannel"}),this.g.o=w,w=Y&&Y.initMessageHeaders||null,Y&&Y.messageContentType&&(w?w["X-WebChannel-Content-Type"]=Y.messageContentType:w={"X-WebChannel-Content-Type":Y.messageContentType}),Y&&Y.va&&(w?w["X-WebChannel-Client-Profile"]=Y.va:w={"X-WebChannel-Client-Profile":Y.va}),this.g.S=w,(w=Y&&Y.Sb)&&!si(w)&&(this.g.m=w),this.v=Y&&Y.supportsCrossDomainXhr||!1,this.u=Y&&Y.sendRawJson||!1,(Y=Y&&Y.httpSessionIdParam)&&!si(Y)&&(this.g.D=Y,null!==(w=this.h)&&Y in w&&Y in(w=this.h)&&delete w[Y]),this.j=new Ip(this)}function qy(w){ni.call(this),w.__headers__&&(this.headers=w.__headers__,this.statusCode=w.__status__,delete w.__headers__,delete w.__status__);var Y=w.__sm__;if(Y){e:{for(const le in Y){w=le;break e}w=void 0}(this.i=w)&&(w=this.i,Y=null!==Y&&w in Y?Y[w]:void 0),this.data=Y}else this.data=w}function C_(){mi.call(this),this.status=1}function Ip(w){this.g=w}(u=Ba.prototype).Ha=function(w){this.J=w},u.ea=function(w,Y,le,Ve){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+w);Y=Y?Y.toUpperCase():"GET",this.D=w,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():p_.g(),this.v=function hg(w){return w.h||(w.h=w.i())}(this.o?this.o:p_),this.g.onreadystatechange=ht(this.Ea,this);try{this.B=!0,this.g.open(Y,String(w),!0),this.B=!1}catch(bn){return void zy(this,bn)}if(w=le||"",le=new Map(this.headers),Ve)if(Object.getPrototypeOf(Ve)===Object.prototype)for(var en in Ve)le.set(en,Ve[en]);else{if("function"!=typeof Ve.keys||"function"!=typeof Ve.get)throw Error("Unknown input type for opt_headers: "+String(Ve));for(const bn of Ve.keys())le.set(bn,Ve.get(bn))}Ve=Array.from(le.keys()).find(bn=>"content-type"==bn.toLowerCase()),en=U.FormData&&w instanceof U.FormData,!(0<=Array.prototype.indexOf.call(Fv,Y,void 0))||Ve||en||le.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[bn,Sr]of le)this.g.setRequestHeader(bn,Sr);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Tg(this),this.u=!0,this.g.send(w),this.u=!1}catch(bn){zy(this,bn)}},u.abort=function(w){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=w||7,Hn(this,"complete"),Hn(this,"abort"),sh(this))},u.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),sh(this,!0)),Ba.aa.N.call(this)},u.Ea=function(){this.s||(this.B||this.u||this.j?E_(this):this.bb())},u.bb=function(){E_(this)},u.isActive=function(){return!!this.g},u.Z=function(){try{return 2<Mh(this)?this.g.status:-1}catch{return-1}},u.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},u.Oa=function(w){if(this.g){var Y=this.g.responseText;return w&&0==Y.indexOf(w)&&(Y=Y.substring(w.length)),xf(Y)}},u.Ba=function(){return this.m},u.Ka=function(){return"string"==typeof this.l?this.l:String(this.l)},(u=b_.prototype).la=8,u.G=1,u.connect=function(w,Y,le,Ve){El(0),this.W=w,this.H=Y||{},le&&void 0!==Ve&&(this.H.OSID=le,this.H.OAID=Ve),this.F=this.X,this.I=Wv(this,null,this.W),Hy(this)},u.Ga=function(w){if(this.s)if(this.s=null,1==this.G){if(!w){this.U=Math.floor(1e5*Math.random()),w=this.U++;const en=new Vd(this,this.j,w);let bn=this.o;if(this.S&&(bn?(bn=dt(bn),zt(bn,this.S)):bn=this.S),null!==this.m||this.O||(en.H=bn,bn=null),this.P)e:{for(var Y=0,le=0;le<this.i.length;le++){var Ve=this.i[le];if(void 0===(Ve="__data__"in Ve.map&&"string"==typeof(Ve=Ve.map.__data__)?Ve.length:void 0))break;if(4096<(Y+=Ve)){Y=le;break e}if(4096===Y||le===this.i.length-1){Y=le+1;break e}}Y=1e3}else Y=1e3;Y=Vv(this,en,Y),ko(le=Bd(this.I),"RID",w),ko(le,"CVER",22),this.D&&ko(le,"X-HTTP-Session-Id",this.D),Em(this,le),bn&&(this.O?Y="headers="+encodeURIComponent(String(Wy(bn)))+"&"+Y:this.m&&Ig(le,this.m,bn)),_g(this.h,en),this.Ua&&ko(le,"TYPE","init"),this.P?(ko(le,"$req",Y),ko(le,"SID","null"),en.T=!0,Oy(en,le,null)):Oy(en,le,Y),this.G=2}}else 3==this.G&&(w?Ky(this,w):0==this.i.length||wE(this.h)||Ky(this))},u.Fa=function(){if(this.u=null,Uv(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var w=2*this.R;this.j.info("BP detection timer enabled: "+w),this.A=Ua(ht(this.ab,this),w)}},u.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,El(10),oh(this),Uv(this))},u.Za=function(){null!=this.C&&(this.C=null,oh(this),Ep(this),El(19))},u.fb=function(w){w?(this.j.info("Successfully pinged google.com"),El(2)):(this.j.info("Failed to ping google.com"),El(1))},u.isActive=function(){return!!this.l&&this.l.isActive(this)},(u=zv.prototype).ua=function(){},u.ta=function(){},u.sa=function(){},u.ra=function(){},u.isActive=function(){return!0},u.Na=function(){},w_.prototype.g=function(w,Y){return new ed(w,Y)},Un(ed,Vn),ed.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},ed.prototype.close=function(){I_(this.g)},ed.prototype.o=function(w){var Y=this.g;if("string"==typeof w){var le={};le.__data__=w,w=le}else this.u&&((le={}).__data__=md(w),w=le);Y.i.push(new y_(Y.Ya++,w)),3==Y.G&&Hy(Y)},ed.prototype.N=function(){this.g.l=null,delete this.j,I_(this.g),delete this.g,ed.aa.N.call(this)},Un(qy,ni),Un(C_,mi),Un(Ip,zv),Ip.prototype.ua=function(){Hn(this.g,"a")},Ip.prototype.ta=function(w){Hn(this.g,new qy(w))},Ip.prototype.sa=function(w){Hn(this.g,new C_)},Ip.prototype.ra=function(){Hn(this.g,"b")},w_.prototype.createWebChannel=w_.prototype.g,ed.prototype.send=ed.prototype.o,ed.prototype.open=ed.prototype.m,ed.prototype.close=ed.prototype.close,Et=Ae.createWebChannelTransport=function(){return new w_},hn=Ae.getStatEventTarget=function(){return Yu()},Pt=Ae.Event=Ji,Gt=Ae.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},pg.NO_ERROR=0,pg.TIMEOUT=8,pg.HTTP_ERROR=6,Ft=Ae.ErrorCode=pg,pm.COMPLETE="complete",Rt=Ae.EventType=pm,fg.EventType=Wr,Wr.OPEN="a",Wr.CLOSE="b",Wr.ERROR="c",Wr.MESSAGE="d",Vn.prototype.listen=Vn.prototype.K,tt=Ae.WebChannel=fg,Ae.FetchXmlHttpFactory=gm,Ba.prototype.listenOnce=Ba.prototype.L,Ba.prototype.getLastError=Ba.prototype.Ka,Ba.prototype.getLastErrorCode=Ba.prototype.Ba,Ba.prototype.getStatus=Ba.prototype.Z,Ba.prototype.getResponseJson=Ba.prototype.Oa,Ba.prototype.getResponseText=Ba.prototype.oa,Ba.prototype.send=Ba.prototype.ea,Ba.prototype.setWithCredentials=Ba.prototype.Ha,He=Ae.XhrIo=Ba}).apply(typeof K<"u"?K:typeof self<"u"?self:typeof window<"u"?window:{});const kt="@firebase/firestore";class Ke{constructor(t){this.uid=t}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Ke.UNAUTHENTICATED=new Ke(null),Ke.GOOGLE_CREDENTIALS=new Ke("google-credentials-uid"),Ke.FIRST_PARTY=new Ke("first-party-uid"),Ke.MOCK_USER=new Ke("mock-user");let Qe="10.14.0";const ct=new H.Vy("@firebase/firestore");function Ze(){return ct.logLevel}function Ge(u){ct.setLogLevel(u)}function me(u,...t){if(ct.logLevel<=H.$b.DEBUG){const i=t.map(Jt);ct.debug(`Firestore (${Qe}): ${u}`,...i)}}function ve(u,...t){if(ct.logLevel<=H.$b.ERROR){const i=t.map(Jt);ct.error(`Firestore (${Qe}): ${u}`,...i)}}function At(u,...t){if(ct.logLevel<=H.$b.WARN){const i=t.map(Jt);ct.warn(`Firestore (${Qe}): ${u}`,...i)}}function Jt(u){if("string"==typeof u)return u;try{return JSON.stringify(u)}catch{return u}}function Nt(u="Unexpected state"){const t=`FIRESTORE (${Qe}) INTERNAL ASSERTION FAILED: `+u;throw ve(t),new Error(t)}function Yt(u,t){u||Nt()}function an(u,t){u||Nt()}function $t(u,t){return u}const ye={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ye extends Ee.g{constructor(t,i){super(t,i),this.code=t,this.message=i,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Ht{constructor(){this.promise=new Promise((t,i)=>{this.resolve=t,this.reject=i})}}class et{constructor(t,i){this.user=i,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class gt{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,i){t.enqueueRetryable(()=>i(Ke.UNAUTHENTICATED))}shutdown(){}}class Mt{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,i){this.changeListener=i,t.enqueueRetryable(()=>i(this.token.user))}shutdown(){this.changeListener=null}}class ft{constructor(t){this.t=t,this.currentUser=Ke.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,i){var o=this;Yt(void 0===this.o);let d=this.i;const I=ce=>this.i!==d?(d=this.i,i(ce)):Promise.resolve();let S=new Ht;this.o=()=>{this.i++,this.currentUser=this.u(),S.resolve(),S=new Ht,t.enqueueRetryable(()=>I(this.currentUser))};const U=()=>{const ce=S;t.enqueueRetryable((0,b.A)(function*(){yield ce.promise,yield I(o.currentUser)}))},G=ce=>{me("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=ce,this.o&&(this.auth.addAuthTokenListener(this.o),U())};this.t.onInit(ce=>G(ce)),setTimeout(()=>{if(!this.auth){const ce=this.t.getImmediate({optional:!0});ce?G(ce):(me("FirebaseAuthCredentialsProvider","Auth not yet detected"),S.resolve(),S=new Ht)}},0),U()}getToken(){const t=this.i,i=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(i).then(o=>this.i!==t?(me("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):o?(Yt("string"==typeof o.accessToken),new et(o.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return Yt(null===t||"string"==typeof t),new Ke(t)}}class Ct{constructor(t,i,o){this.l=t,this.h=i,this.P=o,this.type="FirstParty",this.user=Ke.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const t=this.T();return t&&this.I.set("Authorization",t),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class ln{constructor(t,i,o){this.l=t,this.h=i,this.P=o}getToken(){return Promise.resolve(new Ct(this.l,this.h,this.P))}start(t,i){t.enqueueRetryable(()=>i(Ke.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class nr{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class hr{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,i){Yt(void 0===this.o);const o=I=>{null!=I.error&&me("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${I.error.message}`);const S=I.token!==this.R;return this.R=I.token,me("FirebaseAppCheckTokenProvider",`Received ${S?"new":"existing"} token.`),S?i(I.token):Promise.resolve()};this.o=I=>{t.enqueueRetryable(()=>o(I))};const d=I=>{me("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=I,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(I=>d(I)),setTimeout(()=>{if(!this.appCheck){const I=this.A.getImmediate({optional:!0});I?d(I):me("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(i=>i?(Yt("string"==typeof i.token),this.R=i.token,new nr(i.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function sr(u){const t=typeof self<"u"&&(self.crypto||self.msCrypto),i=new Uint8Array(u);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(i);else for(let o=0;o<u;o++)i[o]=Math.floor(256*Math.random());return i}class fr{static newId(){const i=62*Math.floor(256/62);let o="";for(;o.length<20;){const d=sr(40);for(let I=0;I<d.length;++I)o.length<20&&d[I]<i&&(o+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(d[I]%62))}return o}}function Jn(u,t){return u<t?-1:u>t?1:0}function Rr(u,t,i){return u.length===t.length&&u.every((o,d)=>i(o,t[d]))}function vr(u){return u+"\0"}class $n{constructor(t,i){if(this.seconds=t,this.nanoseconds=i,i<0)throw new Ye(ye.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+i);if(i>=1e9)throw new Ye(ye.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+i);if(t<-62135596800)throw new Ye(ye.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Ye(ye.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return $n.fromMillis(Date.now())}static fromDate(t){return $n.fromMillis(t.getTime())}static fromMillis(t){const i=Math.floor(t/1e3),o=Math.floor(1e6*(t-1e3*i));return new $n(i,o)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?Jn(this.nanoseconds,t.nanoseconds):Jn(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class qn{constructor(t){this.timestamp=t}static fromTimestamp(t){return new qn(t)}static min(){return new qn(new $n(0,0))}static max(){return new qn(new $n(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class gi{constructor(t,i,o){void 0===i?i=0:i>t.length&&Nt(),void 0===o?o=t.length-i:o>t.length-i&&Nt(),this.segments=t,this.offset=i,this.len=o}get length(){return this.len}isEqual(t){return 0===gi.comparator(this,t)}child(t){const i=this.segments.slice(this.offset,this.limit());return t instanceof gi?t.forEach(o=>{i.push(o)}):i.push(t),this.construct(i)}limit(){return this.offset+this.length}popFirst(t){return this.construct(this.segments,this.offset+(t=void 0===t?1:t),this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return 0===this.length}isPrefixOf(t){if(t.length<this.length)return!1;for(let i=0;i<this.length;i++)if(this.get(i)!==t.get(i))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let i=0;i<this.length;i++)if(this.get(i)!==t.get(i))return!1;return!0}forEach(t){for(let i=this.offset,o=this.limit();i<o;i++)t(this.segments[i])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,i){const o=Math.min(t.length,i.length);for(let d=0;d<o;d++){const I=t.get(d),S=i.get(d);if(I<S)return-1;if(I>S)return 1}return t.length<i.length?-1:t.length>i.length?1:0}}class st extends gi{construct(t,i,o){return new st(t,i,o)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const i=[];for(const o of t){if(o.indexOf("//")>=0)throw new Ye(ye.INVALID_ARGUMENT,`Invalid segment (${o}). Paths must not contain // in them.`);i.push(...o.split("/").filter(d=>d.length>0))}return new st(i)}static emptyPath(){return new st([])}}const De=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Xe extends gi{construct(t,i,o){return new Xe(t,i,o)}static isValidIdentifier(t){return De.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Xe.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Xe(["__name__"])}static fromServerFormat(t){const i=[];let o="",d=0;const I=()=>{if(0===o.length)throw new Ye(ye.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);i.push(o),o=""};let S=!1;for(;d<t.length;){const U=t[d];if("\\"===U){if(d+1===t.length)throw new Ye(ye.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const G=t[d+1];if("\\"!==G&&"."!==G&&"`"!==G)throw new Ye(ye.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);o+=G,d+=2}else"`"===U?(S=!S,d++):"."!==U||S?(o+=U,d++):(I(),d++)}if(I(),S)throw new Ye(ye.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Xe(i)}static emptyPath(){return new Xe([])}}class je{constructor(t){this.path=t}static fromPath(t){return new je(st.fromString(t))}static fromName(t){return new je(st.fromString(t).popFirst(5))}static empty(){return new je(st.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return null!==t&&0===st.comparator(this.path,t.path)}toString(){return this.path.toString()}static comparator(t,i){return st.comparator(t.path,i.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new je(new st(t.slice()))}}class rn{constructor(t,i,o,d){this.indexId=t,this.collectionGroup=i,this.fields=o,this.indexState=d}}function fn(u){return u.fields.find(t=>2===t.kind)}function mn(u){return u.fields.filter(t=>2!==t.kind)}rn.UNKNOWN_ID=-1;class wt{constructor(t,i){this.fieldPath=t,this.kind=i}}class _t{constructor(t,i){this.sequenceNumber=t,this.offset=i}static empty(){return new _t(0,ir.min())}}function gn(u,t){const i=u.toTimestamp().seconds,o=u.toTimestamp().nanoseconds+1,d=qn.fromTimestamp(1e9===o?new $n(i+1,0):new $n(i,o));return new ir(d,je.empty(),t)}function An(u){return new ir(u.readTime,u.key,-1)}class ir{constructor(t,i,o){this.readTime=t,this.documentKey=i,this.largestBatchId=o}static min(){return new ir(qn.min(),je.empty(),-1)}static max(){return new ir(qn.max(),je.empty(),-1)}}function yr(u,t){let i=u.readTime.compareTo(t.readTime);return 0!==i?i:(i=je.comparator(u.documentKey,t.documentKey),0!==i?i:Jn(u.largestBatchId,t.largestBatchId))}const ar="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class mr{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}function Yr(u){return Nr.apply(this,arguments)}function Nr(){return(Nr=(0,b.A)(function*(u){if(u.code!==ye.FAILED_PRECONDITION||u.message!==ar)throw u;me("LocalStore","Unexpectedly lost primary lease")})).apply(this,arguments)}class xt{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(i=>{this.isDone=!0,this.result=i,this.nextCallback&&this.nextCallback(i)},i=>{this.isDone=!0,this.error=i,this.catchCallback&&this.catchCallback(i)})}catch(t){return this.next(void 0,t)}next(t,i){return this.callbackAttached&&Nt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(i,this.error):this.wrapSuccess(t,this.result):new xt((o,d)=>{this.nextCallback=I=>{this.wrapSuccess(t,I).next(o,d)},this.catchCallback=I=>{this.wrapFailure(i,I).next(o,d)}})}toPromise(){return new Promise((t,i)=>{this.next(t,i)})}wrapUserFunction(t){try{const i=t();return i instanceof xt?i:xt.resolve(i)}catch(i){return xt.reject(i)}}wrapSuccess(t,i){return t?this.wrapUserFunction(()=>t(i)):xt.resolve(i)}wrapFailure(t,i){return t?this.wrapUserFunction(()=>t(i)):xt.reject(i)}static resolve(t){return new xt((i,o)=>{i(t)})}static reject(t){return new xt((i,o)=>{o(t)})}static waitFor(t){return new xt((i,o)=>{let d=0,I=0,S=!1;t.forEach(U=>{++d,U.next(()=>{++I,S&&I===d&&i()},G=>o(G))}),S=!0,I===d&&i()})}static or(t){let i=xt.resolve(!1);for(const o of t)i=i.next(d=>d?xt.resolve(d):o());return i}static forEach(t,i){const o=[];return t.forEach((d,I)=>{o.push(i.call(this,d,I))}),this.waitFor(o)}static mapArray(t,i){return new xt((o,d)=>{const I=t.length,S=new Array(I);let U=0;for(let G=0;G<I;G++){const ce=G;i(t[ce]).next(we=>{S[ce]=we,++U,U===I&&o(S)},we=>d(we))}})}static doWhile(t,i){return new xt((o,d)=>{const I=()=>{!0===t()?i().next(()=>{I()},d):o()};I()})}}class qr{constructor(t,i){this.action=t,this.transaction=i,this.aborted=!1,this.V=new Ht,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{i.error?this.V.reject(new pn(t,i.error)):this.V.resolve()},this.transaction.onerror=o=>{const d=oe(o.target.error);this.V.reject(new pn(t,d))}}static open(t,i,o,d){try{return new qr(i,t.transaction(d,o))}catch(I){throw new pn(i,I)}}get m(){return this.V.promise}abort(t){t&&this.V.reject(t),this.aborted||(me("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const t=this.transaction;this.aborted||"function"!=typeof t.commit||t.commit()}store(t){const i=this.transaction.objectStore(t);return new ne(i)}}class ai{constructor(t,i,o){this.name=t,this.version=i,this.p=o,12.2===ai.S((0,Ee.ZQ)())&&ve("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(t){return me("SimpleDb","Removing database:",t),J(window.indexedDB.deleteDatabase(t)).toPromise()}static D(){if(!(0,Ee.zW)())return!1;if(ai.v())return!0;const t=(0,Ee.ZQ)(),i=ai.S(t),o=0<i&&i<10,d=yi(t),I=0<d&&d<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||o||I)}static v(){var t;return typeof process<"u"&&"YES"===(null===(t=process.__PRIVATE_env)||void 0===t?void 0:t.C)}static F(t,i){return t.store(i)}static S(t){const i=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),o=i?i[1].split("_").slice(0,2).join("."):"-1";return Number(o)}M(t){var i=this;return(0,b.A)(function*(){return i.db||(me("SimpleDb","Opening database:",i.name),i.db=yield new Promise((o,d)=>{const I=indexedDB.open(i.name,i.version);I.onsuccess=S=>{o(S.target.result)},I.onblocked=()=>{d(new pn(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},I.onerror=S=>{const U=S.target.error;d("VersionError"===U.name?new Ye(ye.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===U.name?new Ye(ye.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+U):new pn(t,U))},I.onupgradeneeded=S=>{me("SimpleDb",'Database "'+i.name+'" requires upgrade from version:',S.oldVersion),i.p.O(S.target.result,I.transaction,S.oldVersion,i.version).next(()=>{me("SimpleDb","Database upgrade to version "+i.version+" complete")})}})),i.N&&(i.db.onversionchange=o=>i.N(o)),i.db})()}L(t){this.N=t,this.db&&(this.db.onversionchange=i=>t(i))}runTransaction(t,i,o,d){var I=this;return(0,b.A)(function*(){const S="readonly"===i;let U=0;for(;;){++U;try{I.db=yield I.M(t);const G=qr.open(I.db,t,S?"readonly":"readwrite",o),ce=d(G).next(we=>(G.g(),we)).catch(we=>(G.abort(we),xt.reject(we))).toPromise();return ce.catch(()=>{}),yield G.m,ce}catch(G){const ce=G,we="FirebaseError"!==ce.name&&U<3;if(me("SimpleDb","Transaction failed with error:",ce.message,"Retrying:",we),I.close(),!we)return Promise.reject(ce)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}function yi(u){const t=u.match(/Android ([\d.]+)/i),i=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(i)}class Xr{constructor(t){this.B=t,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(t){this.B=t}done(){this.k=!0}$(t){this.q=t}delete(){return J(this.B.delete())}}class pn extends Ye{constructor(t,i){super(ye.UNAVAILABLE,`IndexedDB transaction '${t}' failed: ${i}`),this.name="IndexedDbTransactionError"}}function Te(u){return"IndexedDbTransactionError"===u.name}class ne{constructor(t){this.store=t}put(t,i){let o;return void 0!==i?(me("SimpleDb","PUT",this.store.name,t,i),o=this.store.put(i,t)):(me("SimpleDb","PUT",this.store.name,"<auto-key>",t),o=this.store.put(t)),J(o)}add(t){return me("SimpleDb","ADD",this.store.name,t,t),J(this.store.add(t))}get(t){return J(this.store.get(t)).next(i=>(void 0===i&&(i=null),me("SimpleDb","GET",this.store.name,t,i),i))}delete(t){return me("SimpleDb","DELETE",this.store.name,t),J(this.store.delete(t))}count(){return me("SimpleDb","COUNT",this.store.name),J(this.store.count())}U(t,i){const o=this.options(t,i),d=o.index?this.store.index(o.index):this.store;if("function"==typeof d.getAll){const I=d.getAll(o.range);return new xt((S,U)=>{I.onerror=G=>{U(G.target.error)},I.onsuccess=G=>{S(G.target.result)}})}{const I=this.cursor(o),S=[];return this.W(I,(U,G)=>{S.push(G)}).next(()=>S)}}G(t,i){const o=this.store.getAll(t,null===i?void 0:i);return new xt((d,I)=>{o.onerror=S=>{I(S.target.error)},o.onsuccess=S=>{d(S.target.result)}})}j(t,i){me("SimpleDb","DELETE ALL",this.store.name);const o=this.options(t,i);o.H=!1;const d=this.cursor(o);return this.W(d,(I,S,U)=>U.delete())}J(t,i){let o;i?o=t:(o={},i=t);const d=this.cursor(o);return this.W(d,i)}Y(t){const i=this.cursor({});return new xt((o,d)=>{i.onerror=I=>{const S=oe(I.target.error);d(S)},i.onsuccess=I=>{const S=I.target.result;S?t(S.primaryKey,S.value).next(U=>{U?S.continue():o()}):o()}})}W(t,i){const o=[];return new xt((d,I)=>{t.onerror=S=>{I(S.target.error)},t.onsuccess=S=>{const U=S.target.result;if(!U)return void d();const G=new Xr(U),ce=i(U.primaryKey,U.value,G);if(ce instanceof xt){const we=ce.catch(ze=>(G.done(),xt.reject(ze)));o.push(we)}G.isDone?d():null===G.K?U.continue():U.continue(G.K)}}).next(()=>xt.waitFor(o))}options(t,i){let o;return void 0!==t&&("string"==typeof t?o=t:i=t),{index:o,range:i}}cursor(t){let i="next";if(t.reverse&&(i="prev"),t.index){const o=this.store.index(t.index);return t.H?o.openKeyCursor(t.range,i):o.openCursor(t.range,i)}return this.store.openCursor(t.range,i)}}function J(u){return new xt((t,i)=>{u.onsuccess=o=>{t(o.target.result)},u.onerror=o=>{const d=oe(o.target.error);i(d)}})}let Q=!1;function oe(u){const t=ai.S((0,Ee.ZQ)());if(t>=12.2&&t<13){const i="An internal error was encountered in the Indexed Database server";if(u.message.indexOf(i)>=0){const o=new Ye("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${i}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Q||(Q=!0,setTimeout(()=>{throw o},0)),o}}return u}class ee{constructor(t,i){this.asyncQueue=t,this.Z=i,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}X(t){var i=this;me("IndexBackfiller",`Scheduled in ${t}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",t,(0,b.A)(function*(){i.task=null;try{me("IndexBackfiller",`Documents written: ${yield i.Z.ee()}`)}catch(o){Te(o)?me("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",o):yield Yr(o)}yield i.X(6e4)}))}}class pe{constructor(t,i){this.localStore=t,this.persistence=i}ee(){var t=this;return(0,b.A)(function*(i=50){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",o=>t.te(o,i))}).apply(this,arguments)}te(t,i){const o=new Set;let d=i,I=!0;return xt.doWhile(()=>!0===I&&d>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(t).next(S=>{if(null!==S&&!o.has(S))return me("IndexBackfiller",`Processing collection: ${S}`),this.ne(t,S,d).next(U=>{d-=U,o.add(S)});I=!1})).next(()=>i-d)}ne(t,i,o){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(t,i).next(d=>this.localStore.localDocuments.getNextDocuments(t,i,d,o).next(I=>{const S=I.changes;return this.localStore.indexManager.updateIndexEntries(t,S).next(()=>this.re(d,I)).next(U=>(me("IndexBackfiller",`Updating offset: ${U}`),this.localStore.indexManager.updateCollectionGroup(t,i,U))).next(()=>S.size)}))}re(t,i){let o=t;return i.changes.forEach((d,I)=>{const S=An(I);yr(S,o)>0&&(o=S)}),new ir(o.readTime,o.documentKey,Math.max(i.batchId,t.largestBatchId))}}let Oe=(()=>{class u{constructor(i,o){this.previousValue=i,o&&(o.sequenceNumberHandler=d=>this.ie(d),this.se=d=>o.writeSequenceNumber(d))}ie(i){return this.previousValue=Math.max(i,this.previousValue),this.previousValue}next(){const i=++this.previousValue;return this.se&&this.se(i),i}}return u.oe=-1,u})();function Tt(u){return null==u}function lt(u){return 0===u&&1/u==-1/0}function On(u){return"number"==typeof u&&Number.isInteger(u)&&!lt(u)&&u<=Number.MAX_SAFE_INTEGER&&u>=Number.MIN_SAFE_INTEGER}function Yn(u){let t="";for(let i=0;i<u.length;i++)t.length>0&&(t=bi(t)),t=wi(u.get(i),t);return bi(t)}function wi(u,t){let i=t;const o=u.length;for(let d=0;d<o;d++){const I=u.charAt(d);switch(I){case"\0":i+="\x01\x10";break;case"\x01":i+="\x01\x11";break;default:i+=I}}return i}function bi(u){return u+"\x01\x01"}function Lr(u){const t=u.length;if(Yt(t>=2),2===t)return Yt("\x01"===u.charAt(0)&&"\x01"===u.charAt(1)),st.emptyPath();const i=t-2,o=[];let d="";for(let I=0;I<t;){const S=u.indexOf("\x01",I);switch((S<0||S>i)&&Nt(),u.charAt(S+1)){case"\x01":const U=u.substring(I,S);let G;0===d.length?G=U:(d+=U,G=d,d=""),o.push(G);break;case"\x10":d+=u.substring(I,S),d+="\0";break;case"\x11":d+=u.substring(I,S+1);break;default:Nt()}I=S+2}return new st(o)}const hi=["userId","batchId"];function er(u,t){return[u,Yn(t)]}function rs(u,t,i){return[u,Yn(t),i]}const Ms={},Ks=["prefixPath","collectionGroup","readTime","documentId"],Co=["prefixPath","collectionGroup","documentId"],Os=["collectionGroup","readTime","prefixPath","documentId"],vi=["canonicalId","targetId"],la=["targetId","path"],$s=["path","targetId"],so=["collectionId","parent"],fo=["indexId","uid"],Gs=["uid","sequenceNumber"],_s=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Ts=["indexId","uid","orderedDocumentKey"],Ue=["userId","collectionPath","documentId"],it=["userId","collectionPath","largestBatchId"],ut=["userId","collectionGroup","largestBatchId"],un=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],sn=[...un,"documentOverlays"],Sn=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],jt=Sn,Xn=[...jt,"indexConfiguration","indexState","indexEntries"],Bn=Xn,ti=[...Xn,"globals"];class wr extends mr{constructor(t,i){super(),this._e=t,this.currentSequenceNumber=i}}function yn(u,t){const i=$t(u);return ai.F(i._e,t)}function Dn(u){let t=0;for(const i in u)Object.prototype.hasOwnProperty.call(u,i)&&t++;return t}function or(u,t){for(const i in u)Object.prototype.hasOwnProperty.call(u,i)&&t(i,u[i])}function _r(u){for(const t in u)if(Object.prototype.hasOwnProperty.call(u,t))return!1;return!0}class xn{constructor(t,i){this.comparator=t,this.root=i||Ri.EMPTY}insert(t,i){return new xn(this.comparator,this.root.insert(t,i,this.comparator).copy(null,null,Ri.BLACK,null,null))}remove(t){return new xn(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Ri.BLACK,null,null))}get(t){let i=this.root;for(;!i.isEmpty();){const o=this.comparator(t,i.key);if(0===o)return i.value;o<0?i=i.left:o>0&&(i=i.right)}return null}indexOf(t){let i=0,o=this.root;for(;!o.isEmpty();){const d=this.comparator(t,o.key);if(0===d)return i+o.left.size;d<0?o=o.left:(i+=o.left.size+1,o=o.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((i,o)=>(t(i,o),!1))}toString(){const t=[];return this.inorderTraversal((i,o)=>(t.push(`${i}:${o}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Zr(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Zr(this.root,t,this.comparator,!1)}getReverseIterator(){return new Zr(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Zr(this.root,t,this.comparator,!0)}}class Zr{constructor(t,i,o,d){this.isReverse=d,this.nodeStack=[];let I=1;for(;!t.isEmpty();)if(I=i?o(t.key,i):1,i&&d&&(I*=-1),I<0)t=this.isReverse?t.left:t.right;else{if(0===I){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const i={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return i}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Ri{constructor(t,i,o,d,I){this.key=t,this.value=i,this.color=o??Ri.RED,this.left=d??Ri.EMPTY,this.right=I??Ri.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,i,o,d,I){return new Ri(t??this.key,i??this.value,o??this.color,d??this.left,I??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,i,o){let d=this;const I=o(t,d.key);return d=I<0?d.copy(null,null,null,d.left.insert(t,i,o),null):0===I?d.copy(null,i,null,null,null):d.copy(null,null,null,null,d.right.insert(t,i,o)),d.fixUp()}removeMin(){if(this.left.isEmpty())return Ri.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,i){let o,d=this;if(i(t,d.key)<0)d.left.isEmpty()||d.left.isRed()||d.left.left.isRed()||(d=d.moveRedLeft()),d=d.copy(null,null,null,d.left.remove(t,i),null);else{if(d.left.isRed()&&(d=d.rotateRight()),d.right.isEmpty()||d.right.isRed()||d.right.left.isRed()||(d=d.moveRedRight()),0===i(t,d.key)){if(d.right.isEmpty())return Ri.EMPTY;o=d.right.min(),d=d.copy(o.key,o.value,null,null,d.right.removeMin())}d=d.copy(null,null,null,null,d.right.remove(t,i))}return d.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Ri.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Ri.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,i)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Nt();const t=this.left.check();if(t!==this.right.check())throw Nt();return t+(this.isRed()?0:1)}}Ri.EMPTY=null,Ri.RED=!0,Ri.BLACK=!1,Ri.EMPTY=new class{constructor(){this.size=0}get key(){throw Nt()}get value(){throw Nt()}get color(){throw Nt()}get left(){throw Nt()}get right(){throw Nt()}copy(t,i,o,d,I){return this}insert(t,i,o){return new Ri(t,i)}remove(t,i){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class kr{constructor(t){this.comparator=t,this.data=new xn(this.comparator)}has(t){return null!==this.data.get(t)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((i,o)=>(t(i),!1))}forEachInRange(t,i){const o=this.data.getIteratorFrom(t[0]);for(;o.hasNext();){const d=o.getNext();if(this.comparator(d.key,t[1])>=0)return;i(d.key)}}forEachWhile(t,i){let o;for(o=void 0!==i?this.data.getIteratorFrom(i):this.data.getIterator();o.hasNext();)if(!t(o.getNext().key))return}firstAfterOrEqual(t){const i=this.data.getIteratorFrom(t);return i.hasNext()?i.getNext().key:null}getIterator(){return new oi(this.data.getIterator())}getIteratorFrom(t){return new oi(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let i=this;return i.size<t.size&&(i=t,t=this),t.forEach(o=>{i=i.add(o)}),i}isEqual(t){if(!(t instanceof kr)||this.size!==t.size)return!1;const i=this.data.getIterator(),o=t.data.getIterator();for(;i.hasNext();){const d=i.getNext().key,I=o.getNext().key;if(0!==this.comparator(d,I))return!1}return!0}toArray(){const t=[];return this.forEach(i=>{t.push(i)}),t}toString(){const t=[];return this.forEach(i=>t.push(i)),"SortedSet("+t.toString()+")"}copy(t){const i=new kr(this.comparator);return i.data=t,i}}class oi{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function As(u){return u.hasNext()?u.getNext():void 0}class qi{constructor(t){this.fields=t,t.sort(Xe.comparator)}static empty(){return new qi([])}unionWith(t){let i=new kr(Xe.comparator);for(const o of this.fields)i=i.add(o);for(const o of t)i=i.add(o);return new qi(i.toArray())}covers(t){for(const i of this.fields)if(i.isPrefixOf(t))return!0;return!1}isEqual(t){return Rr(this.fields,t.fields,(i,o)=>i.isEqual(o))}}class Be extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}function Zt(){return typeof atob<"u"}class bt{constructor(t){this.binaryString=t}static fromBase64String(t){const i=function(d){try{return atob(d)}catch(I){throw typeof DOMException<"u"&&I instanceof DOMException?new Be("Invalid base64 string: "+I):I}}(t);return new bt(i)}static fromUint8Array(t){const i=function(d){let I="";for(let S=0;S<d.length;++S)I+=String.fromCharCode(d[S]);return I}(t);return new bt(i)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(i){const o=new Uint8Array(i.length);for(let d=0;d<i.length;d++)o[d]=i.charCodeAt(d);return o}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Jn(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}bt.EMPTY_BYTE_STRING=new bt("");const Kt=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Kn(u){if(Yt(!!u),"string"==typeof u){let t=0;const i=Kt.exec(u);if(Yt(!!i),i[1]){let d=i[1];d=(d+"000000000").substr(0,9),t=Number(d)}const o=new Date(u);return{seconds:Math.floor(o.getTime()/1e3),nanos:t}}return{seconds:Rn(u.seconds),nanos:Rn(u.nanos)}}function Rn(u){return"number"==typeof u?u:"string"==typeof u?Number(u):0}function mt(u){return"string"==typeof u?bt.fromBase64String(u):bt.fromUint8Array(u)}function Ie(u){var t,i;return"server_timestamp"===(null===(i=((null===(t=u?.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===i?void 0:i.stringValue)}function he(u){const t=u.mapValue.fields.__previous_value__;return Ie(t)?he(t):t}function We(u){const t=Kn(u.mapValue.fields.__local_write_time__.timestampValue);return new $n(t.seconds,t.nanos)}class yt{constructor(t,i,o,d,I,S,U,G,ce){this.databaseId=t,this.appId=i,this.persistenceKey=o,this.host=d,this.ssl=I,this.forceLongPolling=S,this.autoDetectLongPolling=U,this.longPollingOptions=G,this.useFetchStreams=ce}}class In{constructor(t,i){this.projectId=t,this.database=i||"(default)"}static empty(){return new In("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(t){return t instanceof In&&t.projectId===this.projectId&&t.database===this.database}}const jn={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Jr={nullValue:"NULL_VALUE"};function Li(u){return"nullValue"in u?0:"booleanValue"in u?1:"integerValue"in u||"doubleValue"in u?2:"timestampValue"in u?3:"stringValue"in u?5:"bytesValue"in u?6:"referenceValue"in u?7:"geoPointValue"in u?8:"arrayValue"in u?9:"mapValue"in u?Ie(u)?4:Fo(u)?9007199254740991:Go(u)?10:11:Nt()}function es(u,t){if(u===t)return!0;const i=Li(u);if(i!==Li(t))return!1;switch(i){case 0:case 9007199254740991:return!0;case 1:return u.booleanValue===t.booleanValue;case 4:return We(u).isEqual(We(t));case 3:return function(d,I){if("string"==typeof d.timestampValue&&"string"==typeof I.timestampValue&&d.timestampValue.length===I.timestampValue.length)return d.timestampValue===I.timestampValue;const S=Kn(d.timestampValue),U=Kn(I.timestampValue);return S.seconds===U.seconds&&S.nanos===U.nanos}(u,t);case 5:return u.stringValue===t.stringValue;case 6:return I=t,mt(u.bytesValue).isEqual(mt(I.bytesValue));case 7:return u.referenceValue===t.referenceValue;case 8:return function(d,I){return Rn(d.geoPointValue.latitude)===Rn(I.geoPointValue.latitude)&&Rn(d.geoPointValue.longitude)===Rn(I.geoPointValue.longitude)}(u,t);case 2:return function(d,I){if("integerValue"in d&&"integerValue"in I)return Rn(d.integerValue)===Rn(I.integerValue);if("doubleValue"in d&&"doubleValue"in I){const S=Rn(d.doubleValue),U=Rn(I.doubleValue);return S===U?lt(S)===lt(U):isNaN(S)&&isNaN(U)}return!1}(u,t);case 9:return Rr(u.arrayValue.values||[],t.arrayValue.values||[],es);case 10:case 11:return function(d,I){const S=d.mapValue.fields||{},U=I.mapValue.fields||{};if(Dn(S)!==Dn(U))return!1;for(const G in S)if(S.hasOwnProperty(G)&&(void 0===U[G]||!es(S[G],U[G])))return!1;return!0}(u,t);default:return Nt()}var I}function ds(u,t){return void 0!==(u.values||[]).find(i=>es(i,t))}function is(u,t){if(u===t)return 0;const i=Li(u),o=Li(t);if(i!==o)return Jn(i,o);switch(i){case 0:case 9007199254740991:return 0;case 1:return Jn(u.booleanValue,t.booleanValue);case 2:return function(I,S){const U=Rn(I.integerValue||I.doubleValue),G=Rn(S.integerValue||S.doubleValue);return U<G?-1:U>G?1:U===G?0:isNaN(U)?isNaN(G)?0:-1:1}(u,t);case 3:return xs(u.timestampValue,t.timestampValue);case 4:return xs(We(u),We(t));case 5:return Jn(u.stringValue,t.stringValue);case 6:return function(I,S){const U=mt(I),G=mt(S);return U.compareTo(G)}(u.bytesValue,t.bytesValue);case 7:return function(I,S){const U=I.split("/"),G=S.split("/");for(let ce=0;ce<U.length&&ce<G.length;ce++){const we=Jn(U[ce],G[ce]);if(0!==we)return we}return Jn(U.length,G.length)}(u.referenceValue,t.referenceValue);case 8:return function(I,S){const U=Jn(Rn(I.latitude),Rn(S.latitude));return 0!==U?U:Jn(Rn(I.longitude),Rn(S.longitude))}(u.geoPointValue,t.geoPointValue);case 9:return ua(u.arrayValue,t.arrayValue);case 10:return function(I,S){var U,G,ce,we;const nn=null===(U=(I.fields||{}).value)||void 0===U?void 0:U.arrayValue,Un=null===(G=(S.fields||{}).value)||void 0===G?void 0:G.arrayValue,lr=Jn((null===(ce=nn?.values)||void 0===ce?void 0:ce.length)||0,(null===(we=Un?.values)||void 0===we?void 0:we.length)||0);return 0!==lr?lr:ua(nn,Un)}(u.mapValue,t.mapValue);case 11:return function(I,S){if(I===jn.mapValue&&S===jn.mapValue)return 0;if(I===jn.mapValue)return 1;if(S===jn.mapValue)return-1;const U=I.fields||{},G=Object.keys(U),ce=S.fields||{},we=Object.keys(ce);G.sort(),we.sort();for(let ze=0;ze<G.length&&ze<we.length;++ze){const ht=Jn(G[ze],we[ze]);if(0!==ht)return ht;const nn=is(U[G[ze]],ce[we[ze]]);if(0!==nn)return nn}return Jn(G.length,we.length)}(u.mapValue,t.mapValue);default:throw Nt()}}function xs(u,t){if("string"==typeof u&&"string"==typeof t&&u.length===t.length)return Jn(u,t);const i=Kn(u),o=Kn(t),d=Jn(i.seconds,o.seconds);return 0!==d?d:Jn(i.nanos,o.nanos)}function ua(u,t){const i=u.values||[],o=t.values||[];for(let d=0;d<i.length&&d<o.length;++d){const I=is(i[d],o[d]);if(I)return I}return Jn(i.length,o.length)}function ys(u){return da(u)}function da(u){return"nullValue"in u?"null":"booleanValue"in u?""+u.booleanValue:"integerValue"in u?""+u.integerValue:"doubleValue"in u?""+u.doubleValue:"timestampValue"in u?function(i){const o=Kn(i);return`time(${o.seconds},${o.nanos})`}(u.timestampValue):"stringValue"in u?u.stringValue:"bytesValue"in u?mt(u.bytesValue).toBase64():"referenceValue"in u?je.fromName(u.referenceValue).toString():"geoPointValue"in u?function(i){return`geo(${i.latitude},${i.longitude})`}(u.geoPointValue):"arrayValue"in u?function(i){let o="[",d=!0;for(const I of i.values||[])d?d=!1:o+=",",o+=da(I);return o+"]"}(u.arrayValue):"mapValue"in u?function(i){const o=Object.keys(i.fields||{}).sort();let d="{",I=!0;for(const S of o)I?I=!1:d+=",",d+=`${S}:${da(i.fields[S])}`;return d+"}"}(u.mapValue):Nt()}function po(u,t){return{referenceValue:`projects/${u.projectId}/databases/${u.database}/documents/${t.path.canonicalString()}`}}function Js(u){return!!u&&"integerValue"in u}function So(u){return!!u&&"arrayValue"in u}function Wi(u){return!!u&&"nullValue"in u}function eo(u){return!!u&&"doubleValue"in u&&isNaN(Number(u.doubleValue))}function Ur(u){return!!u&&"mapValue"in u}function Go(u){var t,i;return"__vector__"===(null===(i=((null===(t=u?.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===i?void 0:i.stringValue)}function Ca(u){if(u.geoPointValue)return{geoPointValue:Object.assign({},u.geoPointValue)};if(u.timestampValue&&"object"==typeof u.timestampValue)return{timestampValue:Object.assign({},u.timestampValue)};if(u.mapValue){const t={mapValue:{fields:{}}};return or(u.mapValue.fields,(i,o)=>t.mapValue.fields[i]=Ca(o)),t}if(u.arrayValue){const t={arrayValue:{values:[]}};for(let i=0;i<(u.arrayValue.values||[]).length;++i)t.arrayValue.values[i]=Ca(u.arrayValue.values[i]);return t}return Object.assign({},u)}function Fo(u){return"__max__"===(((u.mapValue||{}).fields||{}).__type__||{}).stringValue}const rc={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function Vo(u){return"nullValue"in u?Jr:"booleanValue"in u?{booleanValue:!1}:"integerValue"in u||"doubleValue"in u?{doubleValue:NaN}:"timestampValue"in u?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in u?{stringValue:""}:"bytesValue"in u?{bytesValue:""}:"referenceValue"in u?po(In.empty(),je.empty()):"geoPointValue"in u?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in u?{arrayValue:{}}:"mapValue"in u?Go(u)?rc:{mapValue:{}}:Nt()}function Ii(u){return"nullValue"in u?{booleanValue:!1}:"booleanValue"in u?{doubleValue:NaN}:"integerValue"in u||"doubleValue"in u?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in u?{stringValue:""}:"stringValue"in u?{bytesValue:""}:"bytesValue"in u?po(In.empty(),je.empty()):"referenceValue"in u?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in u?{arrayValue:{}}:"arrayValue"in u?rc:"mapValue"in u?Go(u)?{mapValue:{}}:jn:Nt()}function Cc(u,t){const i=is(u.value,t.value);return 0!==i?i:u.inclusive&&!t.inclusive?-1:!u.inclusive&&t.inclusive?1:0}function qo(u,t){const i=is(u.value,t.value);return 0!==i?i:u.inclusive&&!t.inclusive?1:!u.inclusive&&t.inclusive?-1:0}class ts{constructor(t){this.value=t}static empty(){return new ts({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let i=this.value;for(let o=0;o<t.length-1;++o)if(i=(i.mapValue.fields||{})[t.get(o)],!Ur(i))return null;return i=(i.mapValue.fields||{})[t.lastSegment()],i||null}}set(t,i){this.getFieldsMap(t.popLast())[t.lastSegment()]=Ca(i)}setAll(t){let i=Xe.emptyPath(),o={},d=[];t.forEach((S,U)=>{if(!i.isImmediateParentOf(U)){const G=this.getFieldsMap(i);this.applyChanges(G,o,d),o={},d=[],i=U.popLast()}S?o[U.lastSegment()]=Ca(S):d.push(U.lastSegment())});const I=this.getFieldsMap(i);this.applyChanges(I,o,d)}delete(t){const i=this.field(t.popLast());Ur(i)&&i.mapValue.fields&&delete i.mapValue.fields[t.lastSegment()]}isEqual(t){return es(this.value,t.value)}getFieldsMap(t){let i=this.value;i.mapValue.fields||(i.mapValue={fields:{}});for(let o=0;o<t.length;++o){let d=i.mapValue.fields[t.get(o)];Ur(d)&&d.mapValue.fields||(d={mapValue:{fields:{}}},i.mapValue.fields[t.get(o)]=d),i=d}return i.mapValue.fields}applyChanges(t,i,o){or(i,(d,I)=>t[d]=I);for(const d of o)delete t[d]}clone(){return new ts(Ca(this.value))}}function ha(u){const t=[];return or(u.fields,(i,o)=>{const d=new Xe([i]);if(Ur(o)){const I=ha(o.mapValue).fields;if(0===I.length)t.push(d);else for(const S of I)t.push(d.child(S))}else t.push(d)}),new qi(t)}class Fi{constructor(t,i,o,d,I,S,U){this.key=t,this.documentType=i,this.version=o,this.readTime=d,this.createTime=I,this.data=S,this.documentState=U}static newInvalidDocument(t){return new Fi(t,0,qn.min(),qn.min(),qn.min(),ts.empty(),0)}static newFoundDocument(t,i,o,d){return new Fi(t,1,i,qn.min(),o,d,0)}static newNoDocument(t,i){return new Fi(t,2,i,qn.min(),qn.min(),ts.empty(),0)}static newUnknownDocument(t,i){return new Fi(t,3,i,qn.min(),qn.min(),ts.empty(),2)}convertToFoundDocument(t,i){return!this.createTime.isEqual(qn.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=t),this.version=t,this.documentType=1,this.data=i,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=ts.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=ts.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=qn.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(t){return t instanceof Fi&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new Fi(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class ls{constructor(t,i){this.position=t,this.inclusive=i}}function Sc(u,t,i){let o=0;for(let d=0;d<u.position.length;d++){const I=t[d],S=u.position[d];if(o=I.field.isKeyField()?je.comparator(je.fromName(S.referenceValue),i.key):is(S,i.data.field(I.field)),"desc"===I.dir&&(o*=-1),0!==o)break}return o}function Br(u,t){if(null===u)return null===t;if(null===t||u.inclusive!==t.inclusive||u.position.length!==t.position.length)return!1;for(let i=0;i<u.position.length;i++)if(!es(u.position[i],t.position[i]))return!1;return!0}class fa{constructor(t,i="asc"){this.field=t,this.dir=i}}function Dc(u,t){return u.dir===t.dir&&u.field.isEqual(t.field)}class Qo{}class Pr extends Qo{constructor(t,i,o){super(),this.field=t,this.op=i,this.value=o}static create(t,i,o){return t.isKeyField()?"in"===i||"not-in"===i?this.createKeyFieldInFilter(t,i,o):new qs(t,i,o):"array-contains"===i?new go(t,o):"in"===i?new Da(t,o):"not-in"===i?new Rc(t,o):"array-contains-any"===i?new $a(t,o):new Pr(t,i,o)}static createKeyFieldInFilter(t,i,o){return"in"===i?new Mi(t,o):new pa(t,o)}matches(t){const i=t.data.field(this.field);return"!="===this.op?null!==i&&this.matchesComparison(is(i,this.value)):null!==i&&Li(this.value)===Li(i)&&this.matchesComparison(is(i,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return Nt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class fi extends Qo{constructor(t,i){super(),this.filters=t,this.op=i,this.ae=null}static create(t,i){return new fi(t,i)}matches(t){return $l(this)?void 0===this.filters.find(i=>!i.matches(t)):void 0!==this.filters.find(i=>i.matches(t))}getFlattenedFilters(){return null!==this.ae||(this.ae=this.filters.reduce((t,i)=>t.concat(i.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function $l(u){return"and"===u.op}function Do(u){return"or"===u.op}function mo(u){return Ns(u)&&$l(u)}function Ns(u){for(const t of u.filters)if(t instanceof fi)return!1;return!0}function ss(u){if(u instanceof Pr)return u.field.canonicalString()+u.op.toString()+ys(u.value);if(mo(u))return u.filters.map(t=>ss(t)).join(",");{const t=u.filters.map(i=>ss(i)).join(",");return`${u.op}(${t})`}}function ns(u,t){return u instanceof Pr?(o=u,(d=t)instanceof Pr&&o.op===d.op&&o.field.isEqual(d.field)&&es(o.value,d.value)):u instanceof fi?function(o,d){return d instanceof fi&&o.op===d.op&&o.filters.length===d.filters.length&&o.filters.reduce((I,S,U)=>I&&ns(S,d.filters[U]),!0)}(u,t):void Nt();var o,d}function ja(u,t){const i=u.filters.concat(t);return fi.create(i,u.op)}function Sa(u){return u instanceof Pr?`${(i=u).field.canonicalString()} ${i.op} ${ys(i.value)}`:u instanceof fi?function(i){return i.op.toString()+" {"+i.getFilters().map(Sa).join(" ,")+"}"}(u):"Filter";var i}class qs extends Pr{constructor(t,i,o){super(t,i,o),this.key=je.fromName(o.referenceValue)}matches(t){const i=je.comparator(t.key,this.key);return this.matchesComparison(i)}}class Mi extends Pr{constructor(t,i){super(t,"in",i),this.keys=oo(0,i)}matches(t){return this.keys.some(i=>i.isEqual(t.key))}}class pa extends Pr{constructor(t,i){super(t,"not-in",i),this.keys=oo(0,i)}matches(t){return!this.keys.some(i=>i.isEqual(t.key))}}function oo(u,t){var i;return((null===(i=t.arrayValue)||void 0===i?void 0:i.values)||[]).map(o=>je.fromName(o.referenceValue))}class go extends Pr{constructor(t,i){super(t,"array-contains",i)}matches(t){const i=t.data.field(this.field);return So(i)&&ds(i.arrayValue,this.value)}}class Da extends Pr{constructor(t,i){super(t,"in",i)}matches(t){const i=t.data.field(this.field);return null!==i&&ds(this.value.arrayValue,i)}}class Rc extends Pr{constructor(t,i){super(t,"not-in",i)}matches(t){if(ds(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const i=t.data.field(this.field);return null!==i&&!ds(this.value.arrayValue,i)}}class $a extends Pr{constructor(t,i){super(t,"array-contains-any",i)}matches(t){const i=t.data.field(this.field);return!(!So(i)||!i.arrayValue.values)&&i.arrayValue.values.some(o=>ds(this.value.arrayValue,o))}}class to{constructor(t,i=null,o=[],d=[],I=null,S=null,U=null){this.path=t,this.collectionGroup=i,this.orderBy=o,this.filters=d,this.limit=I,this.startAt=S,this.endAt=U,this.ue=null}}function Vs(u,t=null,i=[],o=[],d=null,I=null,S=null){return new to(u,t,i,o,d,I,S)}function vs(u){const t=$t(u);if(null===t.ue){let i=t.path.canonicalString();null!==t.collectionGroup&&(i+="|cg:"+t.collectionGroup),i+="|f:",i+=t.filters.map(o=>ss(o)).join(","),i+="|ob:",i+=t.orderBy.map(o=>{return(I=o).field.canonicalString()+I.dir;var I}).join(","),Tt(t.limit)||(i+="|l:",i+=t.limit),t.startAt&&(i+="|lb:",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map(o=>ys(o)).join(",")),t.endAt&&(i+="|ub:",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map(o=>ys(o)).join(",")),t.ue=i}return t.ue}function ic(u,t){if(u.limit!==t.limit||u.orderBy.length!==t.orderBy.length)return!1;for(let i=0;i<u.orderBy.length;i++)if(!Dc(u.orderBy[i],t.orderBy[i]))return!1;if(u.filters.length!==t.filters.length)return!1;for(let i=0;i<u.filters.length;i++)if(!ns(u.filters[i],t.filters[i]))return!1;return u.collectionGroup===t.collectionGroup&&!!u.path.isEqual(t.path)&&!!Br(u.startAt,t.startAt)&&Br(u.endAt,t.endAt)}function nl(u){return je.isDocumentKey(u.path)&&null===u.collectionGroup&&0===u.filters.length}function _o(u,t){return u.filters.filter(i=>i instanceof Pr&&i.field.isEqual(t))}function Wa(u,t,i){let o=Jr,d=!0;for(const I of _o(u,t)){let S=Jr,U=!0;switch(I.op){case"<":case"<=":S=Vo(I.value);break;case"==":case"in":case">=":S=I.value;break;case">":S=I.value,U=!1;break;case"!=":case"not-in":S=Jr}Cc({value:o,inclusive:d},{value:S,inclusive:U})<0&&(o=S,d=U)}if(null!==i)for(let I=0;I<u.orderBy.length;++I)if(u.orderBy[I].field.isEqual(t)){const S=i.position[I];Cc({value:o,inclusive:d},{value:S,inclusive:i.inclusive})<0&&(o=S,d=i.inclusive);break}return{value:o,inclusive:d}}function sc(u,t,i){let o=jn,d=!0;for(const I of _o(u,t)){let S=jn,U=!0;switch(I.op){case">=":case">":S=Ii(I.value),U=!1;break;case"==":case"in":case"<=":S=I.value;break;case"<":S=I.value,U=!1;break;case"!=":case"not-in":S=jn}qo({value:o,inclusive:d},{value:S,inclusive:U})>0&&(o=S,d=U)}if(null!==i)for(let I=0;I<u.orderBy.length;++I)if(u.orderBy[I].field.isEqual(t)){const S=i.position[I];qo({value:o,inclusive:d},{value:S,inclusive:i.inclusive})>0&&(o=S,d=i.inclusive);break}return{value:o,inclusive:d}}class Uo{constructor(t,i=null,o=[],d=[],I=null,S="F",U=null,G=null){this.path=t,this.collectionGroup=i,this.explicitOrderBy=o,this.filters=d,this.limit=I,this.limitType=S,this.startAt=U,this.endAt=G,this.ce=null,this.le=null,this.he=null}}function za(u,t,i,o,d,I,S,U){return new Uo(u,t,i,o,d,I,S,U)}function ao(u){return new Uo(u)}function Pc(u){return 0===u.filters.length&&null===u.limit&&null==u.startAt&&null==u.endAt&&(0===u.explicitOrderBy.length||1===u.explicitOrderBy.length&&u.explicitOrderBy[0].field.isKeyField())}function no(u){return null!==u.collectionGroup}function Yo(u){const t=$t(u);if(null===t.ce){t.ce=[];const i=new Set;for(const I of t.explicitOrderBy)t.ce.push(I),i.add(I.field.canonicalString());const o=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(S){let U=new kr(Xe.comparator);return S.filters.forEach(G=>{G.getFlattenedFilters().forEach(ce=>{ce.isInequality()&&(U=U.add(ce.field))})}),U})(t).forEach(I=>{i.has(I.canonicalString())||I.isKeyField()||t.ce.push(new fa(I,o))}),i.has(Xe.keyField().canonicalString())||t.ce.push(new fa(Xe.keyField(),o))}return t.ce}function Cs(u){const t=$t(u);return t.le||(t.le=function Vi(u,t){if("F"===u.limitType)return Vs(u.path,u.collectionGroup,t,u.filters,u.limit,u.startAt,u.endAt);{t=t.map(d=>new fa(d.field,"desc"===d.dir?"asc":"desc"));const i=u.endAt?new ls(u.endAt.position,u.endAt.inclusive):null,o=u.startAt?new ls(u.startAt.position,u.startAt.inclusive):null;return Vs(u.path,u.collectionGroup,t,u.filters,u.limit,i,o)}}(t,Yo(u))),t.le}function Qi(u,t){const i=u.filters.concat([t]);return new Uo(u.path,u.collectionGroup,u.explicitOrderBy.slice(),i,u.limit,u.limitType,u.startAt,u.endAt)}function Xo(u,t,i){return new Uo(u.path,u.collectionGroup,u.explicitOrderBy.slice(),u.filters.slice(),t,i,u.startAt,u.endAt)}function co(u,t){return ic(Cs(u),Cs(t))&&u.limitType===t.limitType}function Mc(u){return`${vs(Cs(u))}|lt:${u.limitType}`}function ma(u){return`Query(target=${function(i){let o=i.path.canonicalString();return null!==i.collectionGroup&&(o+=" collectionGroup="+i.collectionGroup),i.filters.length>0&&(o+=`, filters: [${i.filters.map(d=>Sa(d)).join(", ")}]`),Tt(i.limit)||(o+=", limit: "+i.limit),i.orderBy.length>0&&(o+=`, orderBy: [${i.orderBy.map(d=>{return`${(S=d).field.canonicalString()} (${S.dir})`;var S}).join(", ")}]`),i.startAt&&(o+=", startAt: ",o+=i.startAt.inclusive?"b:":"a:",o+=i.startAt.position.map(d=>ys(d)).join(",")),i.endAt&&(o+=", endAt: ",o+=i.endAt.inclusive?"a:":"b:",o+=i.endAt.position.map(d=>ys(d)).join(",")),`Target(${o})`}(Cs(u))}; limitType=${u.limitType})`}function ga(u,t){return t.isFoundDocument()&&function(o,d){const I=d.key.path;return null!==o.collectionGroup?d.key.hasCollectionId(o.collectionGroup)&&o.path.isPrefixOf(I):je.isDocumentKey(o.path)?o.path.isEqual(I):o.path.isImmediateParentOf(I)}(u,t)&&function(o,d){for(const I of Yo(o))if(!I.field.isKeyField()&&null===d.data.field(I.field))return!1;return!0}(u,t)&&function(o,d){for(const I of o.filters)if(!I.matches(d))return!1;return!0}(u,t)&&(d=t,!((o=u).startAt&&!function(S,U,G){const ce=Sc(S,U,G);return S.inclusive?ce<=0:ce<0}(o.startAt,Yo(o),d)||o.endAt&&!function(S,U,G){const ce=Sc(S,U,G);return S.inclusive?ce>=0:ce>0}(o.endAt,Yo(o),d)));var o,d}function yo(u){return u.collectionGroup||(u.path.length%2==1?u.path.lastSegment():u.path.get(u.path.length-2))}function vo(u){return(t,i)=>{let o=!1;for(const d of Yo(u)){const I=_a(d,t,i);if(0!==I)return I;o=o||d.field.isKeyField()}return 0}}function _a(u,t,i){const o=u.field.isKeyField()?je.comparator(t.key,i.key):function(I,S,U){const G=S.data.field(I),ce=U.data.field(I);return null!==G&&null!==ce?is(G,ce):Nt()}(u.field,t,i);switch(u.dir){case"asc":return o;case"desc":return-1*o;default:return Nt()}}class Zo{constructor(t,i){this.mapKeyFn=t,this.equalsFn=i,this.inner={},this.innerSize=0}get(t){const i=this.mapKeyFn(t),o=this.inner[i];if(void 0!==o)for(const[d,I]of o)if(this.equalsFn(d,t))return I}has(t){return void 0!==this.get(t)}set(t,i){const o=this.mapKeyFn(t),d=this.inner[o];if(void 0===d)return this.inner[o]=[[t,i]],void this.innerSize++;for(let I=0;I<d.length;I++)if(this.equalsFn(d[I][0],t))return void(d[I]=[t,i]);d.push([t,i]),this.innerSize++}delete(t){const i=this.mapKeyFn(t),o=this.inner[i];if(void 0===o)return!1;for(let d=0;d<o.length;d++)if(this.equalsFn(o[d][0],t))return 1===o.length?delete this.inner[i]:o.splice(d,1),this.innerSize--,!0;return!1}forEach(t){or(this.inner,(i,o)=>{for(const[d,I]of o)t(d,I)})}isEmpty(){return _r(this.inner)}size(){return this.innerSize}}const Mu=new xn(je.comparator);function hs(){return Mu}const Ra=new xn(je.comparator);function ri(...u){let t=Ra;for(const i of u)t=t.insert(i.key,i);return t}function Ui(u){let t=Ra;return u.forEach((i,o)=>t=t.insert(i,o.overlayedDocument)),t}function Ci(){return Ss()}function Bo(){return Ss()}function Ss(){return new Zo(u=>u.toString(),(u,t)=>u.isEqual(t))}const Pa=new xn(je.comparator),rl=new kr(je.comparator);function ci(...u){let t=rl;for(const i of u)t=t.add(i);return t}const zi=new kr(Jn);function Ro(){return zi}function Po(u,t){if(u.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:lt(t)?"-0":t}}function Ha(u){return{integerValue:""+u}}function il(u,t){return On(t)?Ha(t):Po(u,t)}class oc{constructor(){this._=void 0}}function ya(u,t,i){return u instanceof Oc?function(d,I){const S={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:d.seconds,nanos:d.nanoseconds}}}};return I&&Ie(I)&&(I=he(I)),I&&(S.fields.__previous_value__=I),{mapValue:S}}(i,t):u instanceof Mo?ac(u,t):u instanceof va?Ma(u,t):function(d,I){const S=jo(d,I),U=sl(S)+sl(d.Pe);return Js(S)&&Js(d.Pe)?Ha(U):Po(d.serializer,U)}(u,t)}function Ou(u,t,i){return u instanceof Mo?ac(u,t):u instanceof va?Ma(u,t):i}function jo(u,t){return u instanceof cc?Js(o=t)||(I=o)&&"doubleValue"in I?t:{integerValue:0}:null;var o,I}class Oc extends oc{}class Mo extends oc{constructor(t){super(),this.elements=t}}function ac(u,t){const i=ol(t);for(const o of u.elements)i.some(d=>es(d,o))||i.push(o);return{arrayValue:{values:i}}}class va extends oc{constructor(t){super(),this.elements=t}}function Ma(u,t){let i=ol(t);for(const o of u.elements)i=i.filter(d=>!es(d,o));return{arrayValue:{values:i}}}class cc extends oc{constructor(t,i){super(),this.serializer=t,this.Pe=i}}function sl(u){return Rn(u.integerValue||u.doubleValue)}function ol(u){return So(u)&&u.arrayValue.values?u.arrayValue.values.slice():[]}class lc{constructor(t,i){this.field=t,this.transform=i}}class uc{constructor(t,i){this.version=t,this.transformResults=i}}class Oi{constructor(t,i){this.updateTime=t,this.exists=i}static none(){return new Oi}static exists(t){return new Oi(void 0,t)}static updateTime(t){return new Oi(t)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function $o(u,t){return void 0!==u.updateTime?t.isFoundDocument()&&t.version.isEqual(u.updateTime):void 0===u.exists||u.exists===t.isFoundDocument()}class Jo{}function dc(u,t){if(!u.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return u.isNoDocument()?new L(u.key,Oi.none()):new Ea(u.key,u.data,Oi.none());{const i=u.data,o=ts.empty();let d=new kr(Xe.comparator);for(let I of t.fields)if(!d.has(I)){let S=i.field(I);null===S&&I.length>1&&(I=I.popLast(),S=i.field(I)),null===S?o.delete(I):o.set(I,S),d=d.add(I)}return new Eo(u.key,o,new qi(d.toArray()),Oi.none())}}function su(u,t,i){u instanceof Ea?function(d,I,S){const U=d.value.clone(),G=ta(d.fieldTransforms,I,S.transformResults);U.setAll(G),I.convertToFoundDocument(S.version,U).setHasCommittedMutations()}(u,t,i):u instanceof Eo?function(d,I,S){if(!$o(d.precondition,I))return void I.convertToUnknownDocument(S.version);const U=ta(d.fieldTransforms,I,S.transformResults),G=I.data;G.setAll(ea(d)),G.setAll(U),I.convertToFoundDocument(S.version,G).setHasCommittedMutations()}(u,t,i):t.convertToNoDocument(i.version).setHasCommittedMutations()}function xc(u,t,i,o){return u instanceof Ea?function(I,S,U,G){if(!$o(I.precondition,S))return U;const ce=I.value.clone(),we=Nc(I.fieldTransforms,G,S);return ce.setAll(we),S.convertToFoundDocument(S.version,ce).setHasLocalMutations(),null}(u,t,i,o):u instanceof Eo?function(I,S,U,G){if(!$o(I.precondition,S))return U;const ce=Nc(I.fieldTransforms,G,S),we=S.data;return we.setAll(ea(I)),we.setAll(ce),S.convertToFoundDocument(S.version,we).setHasLocalMutations(),null===U?null:U.unionWith(I.fieldMask.fields).unionWith(I.fieldTransforms.map(ze=>ze.field))}(u,t,i,o):(U=i,$o(u.precondition,S=t)?(S.convertToNoDocument(S.version).setHasLocalMutations(),null):U);var S,U}function Al(u,t){let i=null;for(const o of u.fieldTransforms){const d=t.data.field(o.field),I=jo(o.transform,d||null);null!=I&&(null===i&&(i=ts.empty()),i.set(o.field,I))}return i||null}function vd(u,t){return u.type===t.type&&!!u.key.isEqual(t.key)&&!!u.precondition.isEqual(t.precondition)&&(d=t.fieldTransforms,!!(void 0===(o=u.fieldTransforms)&&void 0===d||o&&d&&Rr(o,d,(I,S)=>function Wl(u,t){return u.field.isEqual(t.field)&&(d=t.transform,(o=u.transform)instanceof Mo&&d instanceof Mo||o instanceof va&&d instanceof va?Rr(o.elements,d.elements,es):o instanceof cc&&d instanceof cc?es(o.Pe,d.Pe):o instanceof Oc&&d instanceof Oc);var o,d}(I,S))))&&(0===u.type?u.value.isEqual(t.value):1!==u.type||u.data.isEqual(t.data)&&u.fieldMask.isEqual(t.fieldMask));var o,d}class Ea extends Jo{constructor(t,i,o,d=[]){super(),this.key=t,this.value=i,this.precondition=o,this.fieldTransforms=d,this.type=0}getFieldMask(){return null}}class Eo extends Jo{constructor(t,i,o,d,I=[]){super(),this.key=t,this.data=i,this.fieldMask=o,this.precondition=d,this.fieldTransforms=I,this.type=1}getFieldMask(){return this.fieldMask}}function ea(u){const t=new Map;return u.fieldMask.fields.forEach(i=>{if(!i.isEmpty()){const o=u.data.field(i);t.set(i,o)}}),t}function ta(u,t,i){const o=new Map;Yt(u.length===i.length);for(let d=0;d<i.length;d++){const I=u[d],S=I.transform,U=t.data.field(I.field);o.set(I.field,Ou(S,U,i[d]))}return o}function Nc(u,t,i){const o=new Map;for(const d of u){const I=d.transform,S=i.data.field(d.field);o.set(d.field,ya(I,S,t))}return o}class L extends Jo{constructor(t,i){super(),this.key=t,this.precondition=i,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class _e extends Jo{constructor(t,i){super(),this.key=t,this.precondition=i,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class X{constructor(t,i,o,d){this.batchId=t,this.localWriteTime=i,this.baseMutations=o,this.mutations=d}applyToRemoteDocument(t,i){const o=i.mutationResults;for(let d=0;d<this.mutations.length;d++){const I=this.mutations[d];I.key.isEqual(t.key)&&su(I,t,o[d])}}applyToLocalView(t,i){for(const o of this.baseMutations)o.key.isEqual(t.key)&&(i=xc(o,t,i,this.localWriteTime));for(const o of this.mutations)o.key.isEqual(t.key)&&(i=xc(o,t,i,this.localWriteTime));return i}applyToLocalDocumentSet(t,i){const o=Bo();return this.mutations.forEach(d=>{const I=t.get(d.key),S=I.overlayedDocument;let U=this.applyToLocalView(S,I.mutatedFields);U=i.has(d.key)?null:U;const G=dc(S,U);null!==G&&o.set(d.key,G),S.isValidDocument()||S.convertToNoDocument(qn.min())}),o}keys(){return this.mutations.reduce((t,i)=>t.add(i.key),ci())}isEqual(t){return this.batchId===t.batchId&&Rr(this.mutations,t.mutations,(i,o)=>vd(i,o))&&Rr(this.baseMutations,t.baseMutations,(i,o)=>vd(i,o))}}class ue{constructor(t,i,o,d){this.batch=t,this.commitVersion=i,this.mutationResults=o,this.docVersions=d}static from(t,i,o){Yt(t.mutations.length===o.length);let d=function(){return Pa}();const I=t.mutations;for(let S=0;S<I.length;S++)d=d.insert(I[S].key,o[S].version);return new ue(t,i,o,d)}}class qe{constructor(t,i){this.largestBatchId=t,this.mutation=i}getKey(){return this.mutation.key}isEqual(t){return null!==t&&this.mutation===t.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Nn{constructor(t,i){this.count=t,this.unchangedNames=i}}var cr,Fr;function Bi(u){switch(u){default:return Nt();case ye.CANCELLED:case ye.UNKNOWN:case ye.DEADLINE_EXCEEDED:case ye.RESOURCE_EXHAUSTED:case ye.INTERNAL:case ye.UNAVAILABLE:case ye.UNAUTHENTICATED:return!1;case ye.INVALID_ARGUMENT:case ye.NOT_FOUND:case ye.ALREADY_EXISTS:case ye.PERMISSION_DENIED:case ye.FAILED_PRECONDITION:case ye.ABORTED:case ye.OUT_OF_RANGE:case ye.UNIMPLEMENTED:case ye.DATA_LOSS:return!0}}function os(u){if(void 0===u)return ve("GRPC error has no .code"),ye.UNKNOWN;switch(u){case cr.OK:return ye.OK;case cr.CANCELLED:return ye.CANCELLED;case cr.UNKNOWN:return ye.UNKNOWN;case cr.DEADLINE_EXCEEDED:return ye.DEADLINE_EXCEEDED;case cr.RESOURCE_EXHAUSTED:return ye.RESOURCE_EXHAUSTED;case cr.INTERNAL:return ye.INTERNAL;case cr.UNAVAILABLE:return ye.UNAVAILABLE;case cr.UNAUTHENTICATED:return ye.UNAUTHENTICATED;case cr.INVALID_ARGUMENT:return ye.INVALID_ARGUMENT;case cr.NOT_FOUND:return ye.NOT_FOUND;case cr.ALREADY_EXISTS:return ye.ALREADY_EXISTS;case cr.PERMISSION_DENIED:return ye.PERMISSION_DENIED;case cr.FAILED_PRECONDITION:return ye.FAILED_PRECONDITION;case cr.ABORTED:return ye.ABORTED;case cr.OUT_OF_RANGE:return ye.OUT_OF_RANGE;case cr.UNIMPLEMENTED:return ye.UNIMPLEMENTED;case cr.DATA_LOSS:return ye.DATA_LOSS;default:return Nt()}}(Fr=cr||(cr={}))[Fr.OK=0]="OK",Fr[Fr.CANCELLED=1]="CANCELLED",Fr[Fr.UNKNOWN=2]="UNKNOWN",Fr[Fr.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Fr[Fr.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Fr[Fr.NOT_FOUND=5]="NOT_FOUND",Fr[Fr.ALREADY_EXISTS=6]="ALREADY_EXISTS",Fr[Fr.PERMISSION_DENIED=7]="PERMISSION_DENIED",Fr[Fr.UNAUTHENTICATED=16]="UNAUTHENTICATED",Fr[Fr.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Fr[Fr.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Fr[Fr.ABORTED=10]="ABORTED",Fr[Fr.OUT_OF_RANGE=11]="OUT_OF_RANGE",Fr[Fr.UNIMPLEMENTED=12]="UNIMPLEMENTED",Fr[Fr.INTERNAL=13]="INTERNAL",Fr[Fr.UNAVAILABLE=14]="UNAVAILABLE",Fr[Fr.DATA_LOSS=15]="DATA_LOSS";function ws(){return new TextEncoder}const Si=new Ne([4294967295,4294967295],0);function Ws(u){const t=ws().encode(u),i=new Pe;return i.update(t),new Uint8Array(i.digest())}function Ka(u){const t=new DataView(u.buffer),i=t.getUint32(0,!0),o=t.getUint32(4,!0),d=t.getUint32(8,!0),I=t.getUint32(12,!0);return[new Ne([i,o],0),new Ne([d,I],0)]}class xi{constructor(t,i,o){if(this.bitmap=t,this.padding=i,this.hashCount=o,i<0||i>=8)throw new Gn(`Invalid padding: ${i}`);if(o<0)throw new Gn(`Invalid hash count: ${o}`);if(t.length>0&&0===this.hashCount)throw new Gn(`Invalid hash count: ${o}`);if(0===t.length&&0!==i)throw new Gn(`Invalid padding when bitmap length is 0: ${i}`);this.Ie=8*t.length-i,this.Te=Ne.fromNumber(this.Ie)}Ee(t,i,o){let d=t.add(i.multiply(Ne.fromNumber(o)));return 1===d.compare(Si)&&(d=new Ne([d.getBits(0),d.getBits(1)],0)),d.modulo(this.Te).toNumber()}de(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(0===this.Ie)return!1;const i=Ws(t),[o,d]=Ka(i);for(let I=0;I<this.hashCount;I++){const S=this.Ee(o,d,I);if(!this.de(S))return!1}return!0}static create(t,i,o){const d=t%8==0?0:8-t%8,I=new Uint8Array(Math.ceil(t/8)),S=new xi(I,d,i);return o.forEach(U=>S.insert(U)),S}insert(t){if(0===this.Ie)return;const i=Ws(t),[o,d]=Ka(i);for(let I=0;I<this.hashCount;I++){const S=this.Ee(o,d,I);this.Ae(S)}}Ae(t){const i=Math.floor(t/8);this.bitmap[i]|=1<<t%8}}class Gn extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Er{constructor(t,i,o,d,I){this.snapshotVersion=t,this.targetChanges=i,this.targetMismatches=o,this.documentUpdates=d,this.resolvedLimboDocuments=I}static createSynthesizedRemoteEventForCurrentChange(t,i,o){const d=new Map;return d.set(t,Ti.createSynthesizedTargetChangeForCurrentChange(t,i,o)),new Er(qn.min(),d,new xn(Jn),hs(),ci())}}class Ti{constructor(t,i,o,d,I){this.resumeToken=t,this.current=i,this.addedDocuments=o,this.modifiedDocuments=d,this.removedDocuments=I}static createSynthesizedTargetChangeForCurrentChange(t,i,o){return new Ti(o,i,ci(),ci(),ci())}}class Us{constructor(t,i,o,d){this.Re=t,this.removedTargetIds=i,this.key=o,this.Ve=d}}class Bs{constructor(t,i){this.targetId=t,this.me=i}}class bo{constructor(t,i,o=bt.EMPTY_BYTE_STRING,d=null){this.state=t,this.targetIds=i,this.resumeToken=o,this.cause=d}}class wl{constructor(){this.fe=0,this.ge=na(),this.pe=bt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return 0!==this.fe}get be(){return this.we}De(t){t.approximateByteSize()>0&&(this.we=!0,this.pe=t)}ve(){let t=ci(),i=ci(),o=ci();return this.ge.forEach((d,I)=>{switch(I){case 0:t=t.add(d);break;case 2:i=i.add(d);break;case 1:o=o.add(d);break;default:Nt()}}),new Ti(this.pe,this.ye,t,i,o)}Ce(){this.we=!1,this.ge=na()}Fe(t,i){this.we=!0,this.ge=this.ge.insert(t,i)}Me(t){this.we=!0,this.ge=this.ge.remove(t)}xe(){this.fe+=1}Oe(){this.fe-=1,Yt(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class Es{constructor(t){this.Le=t,this.Be=new Map,this.ke=hs(),this.qe=zs(),this.Qe=new xn(Jn)}Ke(t){for(const i of t.Re)t.Ve&&t.Ve.isFoundDocument()?this.$e(i,t.Ve):this.Ue(i,t.key,t.Ve);for(const i of t.removedTargetIds)this.Ue(i,t.key,t.Ve)}We(t){this.forEachTarget(t,i=>{const o=this.Ge(i);switch(t.state){case 0:this.ze(i)&&o.De(t.resumeToken);break;case 1:o.Oe(),o.Se||o.Ce(),o.De(t.resumeToken);break;case 2:o.Oe(),o.Se||this.removeTarget(i);break;case 3:this.ze(i)&&(o.Ne(),o.De(t.resumeToken));break;case 4:this.ze(i)&&(this.je(i),o.De(t.resumeToken));break;default:Nt()}})}forEachTarget(t,i){t.targetIds.length>0?t.targetIds.forEach(i):this.Be.forEach((o,d)=>{this.ze(d)&&i(d)})}He(t){const i=t.targetId,o=t.me.count,d=this.Je(i);if(d){const I=d.target;if(nl(I))if(0===o){const S=new je(I.path);this.Ue(i,S,Fi.newNoDocument(S,qn.min()))}else Yt(1===o);else{const S=this.Ye(i);if(S!==o){const U=this.Ze(t),G=U?this.Xe(U,t,S):1;0!==G&&(this.je(i),this.Qe=this.Qe.insert(i,2===G?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch"))}}}}Ze(t){const i=t.me.unchangedNames;if(!i||!i.bits)return null;const{bits:{bitmap:o="",padding:d=0},hashCount:I=0}=i;let S,U;try{S=mt(o).toUint8Array()}catch(G){if(G instanceof Be)return At("Decoding the base64 bloom filter in existence filter failed ("+G.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw G}try{U=new xi(S,d,I)}catch(G){return At(G instanceof Gn?"BloomFilter error: ":"Applying bloom filter failed: ",G),null}return 0===U.Ie?null:U}Xe(t,i,o){return i.me.count===o-this.nt(t,i.targetId)?0:2}nt(t,i){const o=this.Le.getRemoteKeysForTarget(i);let d=0;return o.forEach(I=>{const S=this.Le.tt(),U=`projects/${S.projectId}/databases/${S.database}/documents/${I.path.canonicalString()}`;t.mightContain(U)||(this.Ue(i,I,null),d++)}),d}rt(t){const i=new Map;this.Be.forEach((I,S)=>{const U=this.Je(S);if(U){if(I.current&&nl(U.target)){const G=new je(U.target.path);null!==this.ke.get(G)||this.it(S,G)||this.Ue(S,G,Fi.newNoDocument(G,t))}I.be&&(i.set(S,I.ve()),I.Ce())}});let o=ci();this.qe.forEach((I,S)=>{let U=!0;S.forEachWhile(G=>{const ce=this.Je(G);return!ce||"TargetPurposeLimboResolution"===ce.purpose||(U=!1,!1)}),U&&(o=o.add(I))}),this.ke.forEach((I,S)=>S.setReadTime(t));const d=new Er(t,i,this.Qe,this.ke,o);return this.ke=hs(),this.qe=zs(),this.Qe=new xn(Jn),d}$e(t,i){if(!this.ze(t))return;const o=this.it(t,i.key)?2:0;this.Ge(t).Fe(i.key,o),this.ke=this.ke.insert(i.key,i),this.qe=this.qe.insert(i.key,this.st(i.key).add(t))}Ue(t,i,o){if(!this.ze(t))return;const d=this.Ge(t);this.it(t,i)?d.Fe(i,1):d.Me(i),this.qe=this.qe.insert(i,this.st(i).delete(t)),o&&(this.ke=this.ke.insert(i,o))}removeTarget(t){this.Be.delete(t)}Ye(t){const i=this.Ge(t).ve();return this.Le.getRemoteKeysForTarget(t).size+i.addedDocuments.size-i.removedDocuments.size}xe(t){this.Ge(t).xe()}Ge(t){let i=this.Be.get(t);return i||(i=new wl,this.Be.set(t,i)),i}st(t){let i=this.qe.get(t);return i||(i=new kr(Jn),this.qe=this.qe.insert(t,i)),i}ze(t){const i=null!==this.Je(t);return i||me("WatchChangeAggregator","Detected inactive target",t),i}Je(t){const i=this.Be.get(t);return i&&i.Se?null:this.Le.ot(t)}je(t){this.Be.set(t,new wl),this.Le.getRemoteKeysForTarget(t).forEach(i=>{this.Ue(t,i,null)})}it(t,i){return this.Le.getRemoteKeysForTarget(t).has(i)}}function zs(){return new xn(je.comparator)}function na(){return new xn(je.comparator)}const jr={asc:"ASCENDING",desc:"DESCENDING"},zl={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},td={and:"AND",or:"OR"};class kc{constructor(t,i){this.databaseId=t,this.useProto3Json=i}}function fs(u,t){return u.useProto3Json||Tt(t)?t:{value:t}}function Ga(u,t){return u.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function Hl(u,t){return u.useProto3Json?t.toBase64():t.toUint8Array()}function Lc(u,t){return Ga(u,t.toTimestamp())}function bs(u){return Yt(!!u),qn.fromTimestamp(function(i){const o=Kn(i);return new $n(o.seconds,o.nanos)}(u))}function ou(u,t){return Oo(u,t).canonicalString()}function Oo(u,t){const i=(d=u,new st(["projects",d.projectId,"databases",d.database])).child("documents");var d;return void 0===t?i:i.child(t)}function au(u){const t=st.fromString(u);return Yt(W(t)),t}function Oa(u,t){return ou(u.databaseId,t.path)}function zr(u,t){const i=au(t);if(i.get(1)!==u.databaseId.projectId)throw new Ye(ye.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+i.get(1)+" vs "+u.databaseId.projectId);if(i.get(3)!==u.databaseId.database)throw new Ye(ye.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+i.get(3)+" vs "+u.databaseId.database);return new je(ba(i))}function us(u,t){return ou(u.databaseId,t)}function Ds(u){const t=au(u);return 4===t.length?st.emptyPath():ba(t)}function ra(u){return new st(["projects",u.databaseId.projectId,"databases",u.databaseId.database]).canonicalString()}function ba(u){return Yt(u.length>4&&"documents"===u.get(4)),u.popFirst(5)}function hc(u,t,i){return{name:Oa(u,t),fields:i.value.mapValue.fields}}function ps(u,t,i){const o=zr(u,t.name),d=bs(t.updateTime),I=t.createTime?bs(t.createTime):qn.min(),S=new ts({mapValue:{fields:t.fields}}),U=Fi.newFoundDocument(o,d,I,S);return i&&U.setHasCommittedMutations(),i?U.setHasCommittedMutations():U}function Qs(u,t){let i;if(t instanceof Ea)i={update:hc(u,t.key,t.value)};else if(t instanceof L)i={delete:Oa(u,t.key)};else if(t instanceof Eo)i={update:hc(u,t.key,t.data),updateMask:k(t.fieldMask)};else{if(!(t instanceof _e))return Nt();i={verify:Oa(u,t.key)}}return t.fieldTransforms.length>0&&(i.updateTransforms=t.fieldTransforms.map(o=>function(I,S){const U=S.transform;if(U instanceof Oc)return{fieldPath:S.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(U instanceof Mo)return{fieldPath:S.field.canonicalString(),appendMissingElements:{values:U.elements}};if(U instanceof va)return{fieldPath:S.field.canonicalString(),removeAllFromArray:{values:U.elements}};if(U instanceof cc)return{fieldPath:S.field.canonicalString(),increment:U.Pe};throw Nt()}(0,o))),t.precondition.isNone||(i.currentDocument=void 0!==(I=t.precondition).updateTime?{updateTime:Lc(u,I.updateTime)}:void 0!==I.exists?{exists:I.exists}:Nt()),i;var I}function al(u,t){const i=t.currentDocument?void 0!==(I=t.currentDocument).updateTime?Oi.updateTime(bs(I.updateTime)):void 0!==I.exists?Oi.exists(I.exists):Oi.none():Oi.none(),o=t.updateTransforms?t.updateTransforms.map(d=>function(S,U){let G=null;"setToServerValue"in U?(Yt("REQUEST_TIME"===U.setToServerValue),G=new Oc):"appendMissingElements"in U?G=new Mo(U.appendMissingElements.values||[]):"removeAllFromArray"in U?G=new va(U.removeAllFromArray.values||[]):"increment"in U?G=new cc(S,U.increment):Nt();const ce=Xe.fromServerFormat(U.fieldPath);return new lc(ce,G)}(u,d)):[];var I;if(t.update){const d=zr(u,t.update.name),I=new ts({mapValue:{fields:t.update.fields}});if(t.updateMask){const S=new qi((t.updateMask.fieldPaths||[]).map(we=>Xe.fromServerFormat(we)));return new Eo(d,I,S,i,o)}return new Ea(d,I,i,o)}if(t.delete){const d=zr(u,t.delete);return new L(d,i)}if(t.verify){const d=zr(u,t.verify);return new _e(d,i)}return Nt()}function Fc(u,t){return{documents:[us(u,t.path)]}}function ms(u,t){const i={structuredQuery:{}},o=t.path;let d;null!==t.collectionGroup?(d=o,i.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(d=o.popLast(),i.structuredQuery.from=[{collectionId:o.lastSegment()}]),i.parent=us(u,d);const I=function(ce){if(0!==ce.length)return z(fi.create(ce,"and"))}(t.filters);I&&(i.structuredQuery.where=I);const S=function(ce){if(0!==ce.length)return ce.map(we=>{return{field:Vc((ht=we).field),direction:Kl(ht.dir)};var ht})}(t.orderBy);S&&(i.structuredQuery.orderBy=S);const U=fs(u,t.limit);return null!==U&&(i.structuredQuery.limit=U),t.startAt&&(i.structuredQuery.startAt={before:(ce=t.startAt).inclusive,values:ce.position}),t.endAt&&(i.structuredQuery.endAt=function(ce){return{before:!ce.inclusive,values:ce.position}}(t.endAt)),{_t:i,parent:d};var ce}function $r(u){let t=Ds(u.parent);const i=u.structuredQuery,o=i.from?i.from.length:0;let d=null;if(o>0){Yt(1===o);const we=i.from[0];we.allDescendants?d=we.collectionId:t=t.child(we.collectionId)}let I=[];i.where&&(I=function(ze){const ht=Cl(ze);return ht instanceof fi&&mo(ht)?ht.getFilters():[ht]}(i.where));let S=[];i.orderBy&&(S=i.orderBy.map(ht=>{return new fa(O((Un=ht).field),function(Zn){switch(Zn){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(Un.direction));var Un}));let U=null;i.limit&&(U=function(ze){let ht;return ht="object"==typeof ze?ze.value:ze,Tt(ht)?null:ht}(i.limit));let G=null;var ze;i.startAt&&(G=new ls((ze=i.startAt).values||[],!!ze.before));let ce=null;return i.endAt&&(ce=function(ze){return new ls(ze.values||[],!ze.before)}(i.endAt)),za(t,d,S,I,U,"F",G,ce)}function Cl(u){return void 0!==u.unaryFilter?function(i){switch(i.unaryFilter.op){case"IS_NAN":const o=O(i.unaryFilter.field);return Pr.create(o,"==",{doubleValue:NaN});case"IS_NULL":const d=O(i.unaryFilter.field);return Pr.create(d,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const I=O(i.unaryFilter.field);return Pr.create(I,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const S=O(i.unaryFilter.field);return Pr.create(S,"!=",{nullValue:"NULL_VALUE"});default:return Nt()}}(u):void 0!==u.fieldFilter?Pr.create(O((i=u).fieldFilter.field),function(d){switch(d){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Nt()}}(i.fieldFilter.op),i.fieldFilter.value):void 0!==u.compositeFilter?function(i){return fi.create(i.compositeFilter.filters.map(o=>Cl(o)),function(d){switch(d){case"AND":return"and";case"OR":return"or";default:return Nt()}}(i.compositeFilter.op))}(u):Nt();var i}function Kl(u){return jr[u]}function nd(u){return zl[u]}function cu(u){return td[u]}function Vc(u){return{fieldPath:u.canonicalString()}}function O(u){return Xe.fromServerFormat(u.fieldPath)}function z(u){return u instanceof Pr?function(i){if("=="===i.op){if(eo(i.value))return{unaryFilter:{field:Vc(i.field),op:"IS_NAN"}};if(Wi(i.value))return{unaryFilter:{field:Vc(i.field),op:"IS_NULL"}}}else if("!="===i.op){if(eo(i.value))return{unaryFilter:{field:Vc(i.field),op:"IS_NOT_NAN"}};if(Wi(i.value))return{unaryFilter:{field:Vc(i.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Vc(i.field),op:nd(i.op),value:i.value}}}(u):u instanceof fi?function(i){const o=i.getFilters().map(d=>z(d));return 1===o.length?o[0]:{compositeFilter:{op:cu(i.op),filters:o}}}(u):Nt()}function k(u){const t=[];return u.fields.forEach(i=>t.push(i.canonicalString())),{fieldPaths:t}}function W(u){return u.length>=4&&"projects"===u.get(0)&&"databases"===u.get(2)}class ae{constructor(t,i,o,d,I=qn.min(),S=qn.min(),U=bt.EMPTY_BYTE_STRING,G=null){this.target=t,this.targetId=i,this.purpose=o,this.sequenceNumber=d,this.snapshotVersion=I,this.lastLimboFreeSnapshotVersion=S,this.resumeToken=U,this.expectedCount=G}withSequenceNumber(t){return new ae(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,i){return new ae(this.target,this.targetId,this.purpose,this.sequenceNumber,i,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new ae(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new ae(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}class Ce{constructor(t){this.ct=t}}function on(u,t){const i=t.key,o={prefixPath:i.getCollectionPath().popLast().toArray(),collectionGroup:i.collectionGroup,documentId:i.path.lastSegment(),readTime:Qt(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())o.document={name:Oa(I=u.ct,(S=t).key),fields:S.data.value.mapValue.fields,updateTime:Ga(I,S.version.toTimestamp()),createTime:Ga(I,S.createTime.toTimestamp())};else if(t.isNoDocument())o.noDocument={path:i.path.toArray(),readTime:pr(t.version)};else{if(!t.isUnknownDocument())return Nt();o.unknownDocument={path:i.path.toArray(),version:pr(t.version)}}var I,S;return o}function Qt(u){const t=u.toTimestamp();return[t.seconds,t.nanoseconds]}function pr(u){const t=u.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function li(u){const t=new $n(u.seconds,u.nanoseconds);return qn.fromTimestamp(t)}function pi(u,t){const i=(t.baseMutations||[]).map(I=>al(u.ct,I));for(let I=0;I<t.mutations.length-1;++I)I+1<t.mutations.length&&void 0!==t.mutations[I+1].transform&&(t.mutations[I].updateTransforms=t.mutations[I+1].transform.fieldTransforms,t.mutations.splice(I+1,1),++I);const o=t.mutations.map(I=>al(u.ct,I)),d=$n.fromMillis(t.localWriteTimeMs);return new X(t.batchId,d,i,o)}function Yi(u){const t=li(u.readTime),i=void 0!==u.lastLimboFreeSnapshotVersion?li(u.lastLimboFreeSnapshotVersion):qn.min();let o;return o=void 0!==u.query.documents?(Yt(1===(I=u.query).documents.length),Cs(ao(Ds(I.documents[0])))):function(I){return Cs($r(I))}(u.query),new ae(o,u.targetId,"TargetPurposeListen",u.lastListenSequenceNumber,t,i,bt.fromBase64String(u.resumeToken));var I}function Sl(u,t){const i=pr(t.snapshotVersion),o=pr(t.lastLimboFreeSnapshotVersion);let d;d=nl(t.target)?Fc(u.ct,t.target):ms(u.ct,t.target)._t;const I=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:vs(t.target),readTime:i,resumeToken:I,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:o,query:d}}function Gl(u){const t=$r({parent:u.parent,structuredQuery:u.structuredQuery});return"LAST"===u.limitType?Xo(t,t.limit,"L"):t}function ql(u,t){return new qe(t.largestBatchId,al(u.ct,t.overlayMutation))}function lu(u,t){const i=t.path.lastSegment();return[u,Yn(t.path.popLast()),i]}function qa(u,t,i,o){return{indexId:u,uid:t,sequenceNumber:i,readTime:pr(o.readTime),documentKey:Yn(o.documentKey.path),largestBatchId:o.largestBatchId}}class Wd{getBundleMetadata(t,i){return Id(t).get(i).next(o=>{if(o)return{id:(I=o).bundleId,createTime:li(I.createTime),version:I.version};var I})}saveBundleMetadata(t,i){return Id(t).put({bundleId:(d=i).id,createTime:pr(bs(d.createTime)),version:d.version});var d}getNamedQuery(t,i){return zd(t).get(i).next(o=>{if(o)return{name:(I=o).name,query:Gl(I.bundledQuery),readTime:li(I.readTime)};var I})}saveNamedQuery(t,i){return zd(t).put({name:(d=i).name,readTime:pr(bs(d.readTime)),bundledQuery:d.bundledQuery});var d}}function Id(u){return yn(u,"bundles")}function zd(u){return yn(u,"namedQueries")}class xu{constructor(t,i){this.serializer=t,this.userId=i}static lt(t,i){return new xu(t,i.uid||"")}getOverlay(t,i){return uu(t).get(lu(this.userId,i)).next(o=>o?ql(this.serializer,o):null)}getOverlays(t,i){const o=Ci();return xt.forEach(i,d=>this.getOverlay(t,d).next(I=>{null!==I&&o.set(d,I)})).next(()=>o)}saveOverlays(t,i,o){const d=[];return o.forEach((I,S)=>{const U=new qe(i,S);d.push(this.ht(t,U))}),xt.waitFor(d)}removeOverlaysForBatchId(t,i,o){const d=new Set;i.forEach(S=>d.add(Yn(S.getCollectionPath())));const I=[];return d.forEach(S=>{const U=IDBKeyRange.bound([this.userId,S,o],[this.userId,S,o+1],!1,!0);I.push(uu(t).j("collectionPathOverlayIndex",U))}),xt.waitFor(I)}getOverlaysForCollection(t,i,o){const d=Ci(),I=Yn(i),S=IDBKeyRange.bound([this.userId,I,o],[this.userId,I,Number.POSITIVE_INFINITY],!0);return uu(t).U("collectionPathOverlayIndex",S).next(U=>{for(const G of U){const ce=ql(this.serializer,G);d.set(ce.getKey(),ce)}return d})}getOverlaysForCollectionGroup(t,i,o,d){const I=Ci();let S;const U=IDBKeyRange.bound([this.userId,i,o],[this.userId,i,Number.POSITIVE_INFINITY],!0);return uu(t).J({index:"collectionGroupOverlayIndex",range:U},(G,ce,we)=>{const ze=ql(this.serializer,ce);I.size()<d||ze.largestBatchId===S?(I.set(ze.getKey(),ze),S=ze.largestBatchId):we.done()}).next(()=>I)}ht(t,i){return uu(t).put(function(d,I,S){const[U,G,ce]=lu(I,S.mutation.key);return{userId:I,collectionPath:G,documentId:ce,collectionGroup:S.mutation.key.getCollectionGroup(),largestBatchId:S.largestBatchId,overlayMutation:Qs(d.ct,S.mutation)}}(this.serializer,this.userId,i))}}function uu(u){return yn(u,"documentOverlays")}class Nu{Pt(t){return yn(t,"globals")}getSessionToken(t){return this.Pt(t).get("sessionToken").next(i=>{const o=i?.value;return o?bt.fromUint8Array(o):bt.EMPTY_BYTE_STRING})}setSessionToken(t,i){return this.Pt(t).put({name:"sessionToken",value:i.toUint8Array()})}}class Uc{constructor(){}It(t,i){this.Tt(t,i),i.Et()}Tt(t,i){if("nullValue"in t)this.dt(i,5);else if("booleanValue"in t)this.dt(i,10),i.At(t.booleanValue?1:0);else if("integerValue"in t)this.dt(i,15),i.At(Rn(t.integerValue));else if("doubleValue"in t){const o=Rn(t.doubleValue);isNaN(o)?this.dt(i,13):(this.dt(i,15),lt(o)?i.At(0):i.At(o))}else if("timestampValue"in t){let o=t.timestampValue;this.dt(i,20),"string"==typeof o&&(o=Kn(o)),i.Rt(`${o.seconds||""}`),i.At(o.nanos||0)}else if("stringValue"in t)this.Vt(t.stringValue,i),this.ft(i);else if("bytesValue"in t)this.dt(i,30),i.gt(mt(t.bytesValue)),this.ft(i);else if("referenceValue"in t)this.yt(t.referenceValue,i);else if("geoPointValue"in t){const o=t.geoPointValue;this.dt(i,45),i.At(o.latitude||0),i.At(o.longitude||0)}else"mapValue"in t?Fo(t)?this.dt(i,Number.MAX_SAFE_INTEGER):Go(t)?this.wt(t.mapValue,i):(this.St(t.mapValue,i),this.ft(i)):"arrayValue"in t?(this.bt(t.arrayValue,i),this.ft(i)):Nt()}Vt(t,i){this.dt(i,25),this.Dt(t,i)}Dt(t,i){i.Rt(t)}St(t,i){const o=t.fields||{};this.dt(i,55);for(const d of Object.keys(o))this.Vt(d,i),this.Tt(o[d],i)}wt(t,i){var o,d;const I=t.fields||{};this.dt(i,53);const S="value",U=(null===(d=null===(o=I[S].arrayValue)||void 0===o?void 0:o.values)||void 0===d?void 0:d.length)||0;this.dt(i,15),i.At(Rn(U)),this.Vt(S,i),this.Tt(I[S],i)}bt(t,i){const o=t.values||[];this.dt(i,50);for(const d of o)this.Tt(d,i)}yt(t,i){this.dt(i,37),je.fromName(t).path.forEach(o=>{this.dt(i,60),this.Dt(o,i)})}dt(t,i){t.At(i)}ft(t){t.At(2)}}function rd(u){if(0===u)return 8;let t=0;return!(u>>4)&&(t+=4,u<<=4),!(u>>6)&&(t+=2,u<<=2),!(u>>7)&&(t+=1),t}function Ql(u){const t=64-function(o){let d=0;for(let I=0;I<8;++I){const S=rd(255&o[I]);if(d+=S,8!==S)break}return d}(u);return Math.ceil(t/8)}Uc.vt=new Uc;class Dl{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(t){const i=t[Symbol.iterator]();let o=i.next();for(;!o.done;)this.Ft(o.value),o=i.next();this.Mt()}xt(t){const i=t[Symbol.iterator]();let o=i.next();for(;!o.done;)this.Ot(o.value),o=i.next();this.Nt()}Lt(t){for(const i of t){const o=i.charCodeAt(0);if(o<128)this.Ft(o);else if(o<2048)this.Ft(960|o>>>6),this.Ft(128|63&o);else if(i<"\ud800"||"\udbff"<i)this.Ft(480|o>>>12),this.Ft(128|63&o>>>6),this.Ft(128|63&o);else{const d=i.codePointAt(0);this.Ft(240|d>>>18),this.Ft(128|63&d>>>12),this.Ft(128|63&d>>>6),this.Ft(128|63&d)}}this.Mt()}Bt(t){for(const i of t){const o=i.charCodeAt(0);if(o<128)this.Ot(o);else if(o<2048)this.Ot(960|o>>>6),this.Ot(128|63&o);else if(i<"\ud800"||"\udbff"<i)this.Ot(480|o>>>12),this.Ot(128|63&o>>>6),this.Ot(128|63&o);else{const d=i.codePointAt(0);this.Ot(240|d>>>18),this.Ot(128|63&d>>>12),this.Ot(128|63&d>>>6),this.Ot(128|63&d)}}this.Nt()}kt(t){const i=this.qt(t),o=Ql(i);this.Qt(1+o),this.buffer[this.position++]=255&o;for(let d=i.length-o;d<i.length;++d)this.buffer[this.position++]=255&i[d]}Kt(t){const i=this.qt(t),o=Ql(i);this.Qt(1+o),this.buffer[this.position++]=~(255&o);for(let d=i.length-o;d<i.length;++d)this.buffer[this.position++]=~(255&i[d])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(t){this.Qt(t.length),this.buffer.set(t,this.position),this.position+=t.length}zt(){return this.buffer.slice(0,this.position)}qt(t){const i=function(I){const S=new DataView(new ArrayBuffer(8));return S.setFloat64(0,I,!1),new Uint8Array(S.buffer)}(t),o=!!(128&i[0]);i[0]^=o?255:128;for(let d=1;d<i.length;++d)i[d]^=o?255:0;return i}Ft(t){const i=255&t;0===i?(this.Ut(0),this.Ut(255)):255===i?(this.Ut(255),this.Ut(0)):this.Ut(i)}Ot(t){const i=255&t;0===i?(this.Gt(0),this.Gt(255)):255===i?(this.Gt(255),this.Gt(0)):this.Gt(t)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(t){this.Qt(1),this.buffer[this.position++]=t}Gt(t){this.Qt(1),this.buffer[this.position++]=~t}Qt(t){const i=t+this.position;if(i<=this.buffer.length)return;let o=2*this.buffer.length;o<i&&(o=i);const d=new Uint8Array(o);d.set(this.buffer),this.buffer=d}}class ia{constructor(t){this.jt=t}gt(t){this.jt.Ct(t)}Rt(t){this.jt.Lt(t)}At(t){this.jt.kt(t)}Et(){this.jt.$t()}}class du{constructor(t){this.jt=t}gt(t){this.jt.xt(t)}Rt(t){this.jt.Bt(t)}At(t){this.jt.Kt(t)}Et(){this.jt.Wt()}}class hu{constructor(){this.jt=new Dl,this.Ht=new ia(this.jt),this.Jt=new du(this.jt)}seed(t){this.jt.seed(t)}Yt(t){return 0===t?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}}class Qa{constructor(t,i,o,d){this.indexId=t,this.documentKey=i,this.arrayValue=o,this.directionalValue=d}Zt(){const t=this.directionalValue.length,i=0===t||255===this.directionalValue[t-1]?t+1:t,o=new Uint8Array(i);return o.set(this.directionalValue,0),i!==t?o.set([0],this.directionalValue.length):++o[o.length-1],new Qa(this.indexId,this.documentKey,this.arrayValue,o)}}function Wo(u,t){let i=u.indexId-t.indexId;return 0!==i?i:(i=fc(u.arrayValue,t.arrayValue),0!==i?i:(i=fc(u.directionalValue,t.directionalValue),0!==i?i:je.comparator(u.documentKey,t.documentKey)))}function fc(u,t){for(let i=0;i<u.length&&i<t.length;++i){const o=u[i]-t[i];if(0!==o)return o}return u.length-t.length}class Ai{constructor(t){this.Xt=new kr((i,o)=>Xe.comparator(i.field,o.field)),this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.en=t.orderBy,this.tn=[];for(const i of t.filters){const o=i;o.isInequality()?this.Xt=this.Xt.add(o):this.tn.push(o)}}get nn(){return this.Xt.size>1}rn(t){if(Yt(t.collectionGroup===this.collectionId),this.nn)return!1;const i=fn(t);if(void 0!==i&&!this.sn(i))return!1;const o=mn(t);let d=new Set,I=0,S=0;for(;I<o.length&&this.sn(o[I]);++I)d=d.add(o[I].fieldPath.canonicalString());if(I===o.length)return!0;if(this.Xt.size>0){const U=this.Xt.getIterator().getNext();if(!d.has(U.field.canonicalString())){const G=o[I];if(!this.on(U,G)||!this._n(this.en[S++],G))return!1}++I}for(;I<o.length;++I)if(S>=this.en.length||!this._n(this.en[S++],o[I]))return!1;return!0}an(){if(this.nn)return null;let t=new kr(Xe.comparator);const i=[];for(const o of this.tn)if(!o.field.isKeyField())if("array-contains"===o.op||"array-contains-any"===o.op)i.push(new wt(o.field,2));else{if(t.has(o.field))continue;t=t.add(o.field),i.push(new wt(o.field,0))}for(const o of this.en)o.field.isKeyField()||t.has(o.field)||(t=t.add(o.field),i.push(new wt(o.field,"asc"===o.dir?0:1)));return new rn(rn.UNKNOWN_ID,this.collectionId,i,_t.empty())}sn(t){for(const i of this.tn)if(this.on(i,t))return!0;return!1}on(t,i){return!(void 0===t||!t.field.isEqual(i.fieldPath))&&2===i.kind==("array-contains"===t.op||"array-contains-any"===t.op)}_n(t,i){return!!t.field.isEqual(i.fieldPath)&&(0===i.kind&&"asc"===t.dir||1===i.kind&&"desc"===t.dir)}}function cl(u){var t,i;if(Yt(u instanceof Pr||u instanceof fi),u instanceof Pr){if(u instanceof Da){const d=(null===(i=null===(t=u.value.arrayValue)||void 0===t?void 0:t.values)||void 0===i?void 0:i.map(I=>Pr.create(u.field,"==",I)))||[];return fi.create(d,"or")}return u}const o=u.filters.map(d=>cl(d));return fi.create(o,u.op)}function fu(u){if(0===u.getFilters().length)return[];const t=Ya(cl(u));return Yt(ll(t)),gs(t)||ku(t)?[t]:t.getFilters()}function gs(u){return u instanceof Pr}function ku(u){return u instanceof fi&&mo(u)}function ll(u){return gs(u)||ku(u)||function(i){if(i instanceof fi&&Do(i)){for(const o of i.getFilters())if(!gs(o)&&!ku(o))return!1;return!0}return!1}(u)}function Ya(u){if(Yt(u instanceof Pr||u instanceof fi),u instanceof Pr)return u;if(1===u.filters.length)return Ya(u.filters[0]);const t=u.filters.map(o=>Ya(o));let i=fi.create(t,u.op);return i=pc(i),ll(i)?i:(Yt(i instanceof fi),Yt($l(i)),Yt(i.filters.length>1),i.filters.reduce((o,d)=>Ia(o,d)))}function Ia(u,t){let i;return Yt(u instanceof Pr||u instanceof fi),Yt(t instanceof Pr||t instanceof fi),i=u instanceof Pr?t instanceof Pr?fi.create([u,t],"and"):ul(u,t):t instanceof Pr?ul(t,u):function(d,I){if(Yt(d.filters.length>0&&I.filters.length>0),$l(d)&&$l(I))return ja(d,I.getFilters());const S=Do(d)?d:I,U=Do(d)?I:d,G=S.filters.map(ce=>Ia(ce,U));return fi.create(G,"or")}(u,t),pc(i)}function ul(u,t){if($l(t))return ja(t,u.getFilters());{const i=t.filters.map(o=>Ia(u,o));return fi.create(i,"or")}}function pc(u){if(Yt(u instanceof Pr||u instanceof fi),u instanceof Pr)return u;const t=u.getFilters();if(1===t.length)return pc(t[0]);if(Ns(u))return u;const i=t.map(d=>pc(d)),o=[];return i.forEach(d=>{d instanceof Pr?o.push(d):d instanceof fi&&(d.op===u.op?o.push(...d.filters):o.push(d))}),1===o.length?o[0]:fi.create(o,u.op)}class mc{constructor(){this.un=new sa}addToCollectionParentIndex(t,i){return this.un.add(i),xt.resolve()}getCollectionParents(t,i){return xt.resolve(this.un.getEntries(i))}addFieldIndex(t,i){return xt.resolve()}deleteFieldIndex(t,i){return xt.resolve()}deleteAllFieldIndexes(t){return xt.resolve()}createTargetIndexes(t,i){return xt.resolve()}getDocumentsMatchingTarget(t,i){return xt.resolve(null)}getIndexType(t,i){return xt.resolve(0)}getFieldIndexes(t,i){return xt.resolve([])}getNextCollectionGroupToUpdate(t){return xt.resolve(null)}getMinOffset(t,i){return xt.resolve(ir.min())}getMinOffsetFromCollectionGroup(t,i){return xt.resolve(ir.min())}updateCollectionGroup(t,i,o){return xt.resolve()}updateIndexEntries(t,i){return xt.resolve()}}class sa{constructor(){this.index={}}add(t){const i=t.lastSegment(),o=t.popLast(),d=this.index[i]||new kr(st.comparator),I=!d.has(o);return this.index[i]=d.add(o),I}has(t){const i=t.lastSegment(),o=t.popLast(),d=this.index[i];return d&&d.has(o)}getEntries(t){return(this.index[t]||new kr(st.comparator)).toArray()}}const pu=new Uint8Array(0);class mu{constructor(t,i){this.databaseId=i,this.cn=new sa,this.ln=new Zo(o=>vs(o),(o,d)=>ic(o,d)),this.uid=t.uid||""}addToCollectionParentIndex(t,i){if(!this.cn.has(i)){const o=i.lastSegment(),d=i.popLast();t.addOnCommittedListener(()=>{this.cn.add(i)});const I={collectionId:o,parent:Yn(d)};return Yl(t).put(I)}return xt.resolve()}getCollectionParents(t,i){const o=[],d=IDBKeyRange.bound([i,""],[vr(i),""],!1,!0);return Yl(t).U(d).next(I=>{for(const S of I){if(S.collectionId!==i)break;o.push(Lr(S.parent))}return o})}addFieldIndex(t,i){const o=oa(t),d={indexId:(U=i).indexId,collectionGroup:U.collectionGroup,fields:U.fields.map(G=>[G.fieldPath.canonicalString(),G.kind])};var U;delete d.indexId;const I=o.add(d);if(i.indexState){const S=gc(t);return I.next(U=>{S.put(qa(U,this.uid,i.indexState.sequenceNumber,i.indexState.offset))})}return I.next()}deleteFieldIndex(t,i){const o=oa(t),d=gc(t),I=Ta(t);return o.delete(i.indexId).next(()=>d.delete(IDBKeyRange.bound([i.indexId],[i.indexId+1],!1,!0))).next(()=>I.delete(IDBKeyRange.bound([i.indexId],[i.indexId+1],!1,!0)))}deleteAllFieldIndexes(t){const i=oa(t),o=Ta(t),d=gc(t);return i.j().next(()=>o.j()).next(()=>d.j())}createTargetIndexes(t,i){return xt.forEach(this.hn(i),o=>this.getIndexType(t,o).next(d=>{if(0===d||1===d){const I=new Ai(o).an();if(null!=I)return this.addFieldIndex(t,I)}}))}getDocumentsMatchingTarget(t,i){const o=Ta(t);let d=!0;const I=new Map;return xt.forEach(this.hn(i),S=>this.Pn(t,S).next(U=>{d&&(d=!!U),I.set(S,U)})).next(()=>{if(d){let S=ci();const U=[];return xt.forEach(I,(G,ce)=>{var Qr;me("IndexedDbIndexManager",`Using index ${Qr=G,`id=${Qr.indexId}|cg=${Qr.collectionGroup}|f=${Qr.fields.map(ki=>`${ki.fieldPath}:${ki.kind}`).join(",")}`} to execute ${vs(i)}`);const we=function(Qr,ki){const Is=fn(ki);if(void 0===Is)return null;for(const $i of _o(Qr,Is.fieldPath))switch($i.op){case"array-contains-any":return $i.value.arrayValue.values||[];case"array-contains":return[$i.value]}return null}(ce,G),ze=function(Qr,ki){const Is=new Map;for(const $i of mn(ki))for(const Wt of _o(Qr,$i.fieldPath))switch(Wt.op){case"==":case"in":Is.set($i.fieldPath.canonicalString(),Wt.value);break;case"not-in":case"!=":return Is.set($i.fieldPath.canonicalString(),Wt.value),Array.from(Is.values())}return null}(ce,G),ht=function(Qr,ki){const Is=[];let $i=!0;for(const Wt of mn(ki)){const dt=0===Wt.kind?Wa(Qr,Wt.fieldPath,Qr.startAt):sc(Qr,Wt.fieldPath,Qr.startAt);Is.push(dt.value),$i&&($i=dt.inclusive)}return new ls(Is,$i)}(ce,G),nn=function(Qr,ki){const Is=[];let $i=!0;for(const Wt of mn(ki)){const dt=0===Wt.kind?sc(Qr,Wt.fieldPath,Qr.endAt):Wa(Qr,Wt.fieldPath,Qr.endAt);Is.push(dt.value),$i&&($i=dt.inclusive)}return new ls(Is,$i)}(ce,G),Un=this.In(G,ce,ht),lr=this.In(G,ce,nn),Zn=this.Tn(G,ce,ze),Kr=this.En(G.indexId,we,Un,ht.inclusive,lr,nn.inclusive,Zn);return xt.forEach(Kr,si=>o.G(si,i.limit).next(Qr=>{Qr.forEach(ki=>{const Is=je.fromSegments(ki.documentKey);S.has(Is)||(S=S.add(Is),U.push(Is))})}))}).next(()=>U)}return xt.resolve(null)})}hn(t){let i=this.ln.get(t);return i||(i=0===t.filters.length?[t]:fu(fi.create(t.filters,"and")).map(o=>Vs(t.path,t.collectionGroup,t.orderBy,o.getFilters(),t.limit,t.startAt,t.endAt)),this.ln.set(t,i),i)}En(t,i,o,d,I,S,U){const G=(null!=i?i.length:1)*Math.max(o.length,I.length),ce=G/(null!=i?i.length:1),we=[];for(let ze=0;ze<G;++ze){const ht=i?this.dn(i[ze/ce]):pu,nn=this.An(t,ht,o[ze%ce],d),Un=this.Rn(t,ht,I[ze%ce],S),lr=U.map(Zn=>this.An(t,ht,Zn,!0));we.push(...this.createRange(nn,Un,lr))}return we}An(t,i,o,d){const I=new Qa(t,je.empty(),i,o);return d?I:I.Zt()}Rn(t,i,o,d){const I=new Qa(t,je.empty(),i,o);return d?I.Zt():I}Pn(t,i){const o=new Ai(i),d=null!=i.collectionGroup?i.collectionGroup:i.path.lastSegment();return this.getFieldIndexes(t,d).next(I=>{let S=null;for(const U of I)o.rn(U)&&(!S||U.fields.length>S.fields.length)&&(S=U);return S})}getIndexType(t,i){let o=2;const d=this.hn(i);return xt.forEach(d,I=>this.Pn(t,I).next(S=>{S?0!==o&&S.fields.length<function(G){let ce=new kr(Xe.comparator),we=!1;for(const ze of G.filters)for(const ht of ze.getFlattenedFilters())ht.field.isKeyField()||("array-contains"===ht.op||"array-contains-any"===ht.op?we=!0:ce=ce.add(ht.field));for(const ze of G.orderBy)ze.field.isKeyField()||(ce=ce.add(ze.field));return ce.size+(we?1:0)}(I)&&(o=1):o=0})).next(()=>null!==i.limit&&d.length>1&&2===o?1:o)}Vn(t,i){const o=new hu;for(const d of mn(t)){const I=i.data.field(d.fieldPath);if(null==I)return null;const S=o.Yt(d.kind);Uc.vt.It(I,S)}return o.zt()}dn(t){const i=new hu;return Uc.vt.It(t,i.Yt(0)),i.zt()}mn(t,i){const o=new hu;return Uc.vt.It(po(this.databaseId,i),o.Yt(function(I){const S=mn(I);return 0===S.length?0:S[S.length-1].kind}(t))),o.zt()}Tn(t,i,o){if(null===o)return[];let d=[];d.push(new hu);let I=0;for(const S of mn(t)){const U=o[I++];for(const G of d)if(this.fn(i,S.fieldPath)&&So(U))d=this.gn(d,S,U);else{const ce=G.Yt(S.kind);Uc.vt.It(U,ce)}}return this.pn(d)}In(t,i,o){return this.Tn(t,i,o.position)}pn(t){const i=[];for(let o=0;o<t.length;++o)i[o]=t[o].zt();return i}gn(t,i,o){const d=[...t],I=[];for(const S of o.arrayValue.values||[])for(const U of d){const G=new hu;G.seed(U.zt()),Uc.vt.It(S,G.Yt(i.kind)),I.push(G)}return I}fn(t,i){return!!t.filters.find(o=>o instanceof Pr&&o.field.isEqual(i)&&("in"===o.op||"not-in"===o.op))}getFieldIndexes(t,i){const o=oa(t),d=gc(t);return(i?o.U("collectionGroupIndex",IDBKeyRange.bound(i,i)):o.U()).next(I=>{const S=[];return xt.forEach(I,U=>d.get([U.indexId,this.uid]).next(G=>{S.push(function(we,ze){const ht=ze?new _t(ze.sequenceNumber,new ir(li(ze.readTime),new je(Lr(ze.documentKey)),ze.largestBatchId)):_t.empty(),nn=we.fields.map(([Un,lr])=>new wt(Xe.fromServerFormat(Un),lr));return new rn(we.indexId,we.collectionGroup,nn,ht)}(U,G))})).next(()=>S)})}getNextCollectionGroupToUpdate(t){return this.getFieldIndexes(t).next(i=>0===i.length?null:(i.sort((o,d)=>{const I=o.indexState.sequenceNumber-d.indexState.sequenceNumber;return 0!==I?I:Jn(o.collectionGroup,d.collectionGroup)}),i[0].collectionGroup))}updateCollectionGroup(t,i,o){const d=oa(t),I=gc(t);return this.yn(t).next(S=>d.U("collectionGroupIndex",IDBKeyRange.bound(i,i)).next(U=>xt.forEach(U,G=>I.put(qa(G.indexId,this.uid,S,o)))))}updateIndexEntries(t,i){const o=new Map;return xt.forEach(i,(d,I)=>{const S=o.get(d.collectionGroup);return(S?xt.resolve(S):this.getFieldIndexes(t,d.collectionGroup)).next(U=>(o.set(d.collectionGroup,U),xt.forEach(U,G=>this.wn(t,d,G).next(ce=>{const we=this.Sn(I,G);return ce.isEqual(we)?xt.resolve():this.bn(t,I,G,ce,we)}))))})}Dn(t,i,o,d){return Ta(t).put({indexId:d.indexId,uid:this.uid,arrayValue:d.arrayValue,directionalValue:d.directionalValue,orderedDocumentKey:this.mn(o,i.key),documentKey:i.key.path.toArray()})}vn(t,i,o,d){return Ta(t).delete([d.indexId,this.uid,d.arrayValue,d.directionalValue,this.mn(o,i.key),i.key.path.toArray()])}wn(t,i,o){const d=Ta(t);let I=new kr(Wo);return d.J({index:"documentKeyIndex",range:IDBKeyRange.only([o.indexId,this.uid,this.mn(o,i)])},(S,U)=>{I=I.add(new Qa(o.indexId,i,U.arrayValue,U.directionalValue))}).next(()=>I)}Sn(t,i){let o=new kr(Wo);const d=this.Vn(i,t);if(null==d)return o;const I=fn(i);if(null!=I){const S=t.data.field(I.fieldPath);if(So(S))for(const U of S.arrayValue.values||[])o=o.add(new Qa(i.indexId,t.key,this.dn(U),d))}else o=o.add(new Qa(i.indexId,t.key,pu,d));return o}bn(t,i,o,d,I){me("IndexedDbIndexManager","Updating index entries for document '%s'",i.key);const S=[];return function(G,ce,we,ze,ht){const nn=G.getIterator(),Un=ce.getIterator();let lr=As(nn),Zn=As(Un);for(;lr||Zn;){let Kr=!1,si=!1;if(lr&&Zn){const Qr=we(lr,Zn);Qr<0?si=!0:Qr>0&&(Kr=!0)}else null!=lr?si=!0:Kr=!0;Kr?(ze(Zn),Zn=As(Un)):si?(ht(lr),lr=As(nn)):(lr=As(nn),Zn=As(Un))}}(d,I,Wo,U=>{S.push(this.Dn(t,i,o,U))},U=>{S.push(this.vn(t,i,o,U))}),xt.waitFor(S)}yn(t){let i=1;return gc(t).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(o,d,I)=>{I.done(),i=d.sequenceNumber+1}).next(()=>i)}createRange(t,i,o){o=o.sort((S,U)=>Wo(S,U)).filter((S,U,G)=>!U||0!==Wo(S,G[U-1]));const d=[];d.push(t);for(const S of o){const U=Wo(S,t),G=Wo(S,i);if(0===U)d[0]=t.Zt();else if(U>0&&G<0)d.push(S),d.push(S.Zt());else if(G>0)break}d.push(i);const I=[];for(let S=0;S<d.length;S+=2){if(this.Cn(d[S],d[S+1]))return[];I.push(IDBKeyRange.bound([d[S].indexId,this.uid,d[S].arrayValue,d[S].directionalValue,pu,[]],[d[S+1].indexId,this.uid,d[S+1].arrayValue,d[S+1].directionalValue,pu,[]]))}return I}Cn(t,i){return Wo(t,i)>0}getMinOffsetFromCollectionGroup(t,i){return this.getFieldIndexes(t,i).next(Io)}getMinOffset(t,i){return xt.mapArray(this.hn(i),o=>this.Pn(t,o).next(d=>d||Nt())).next(Io)}}function Yl(u){return yn(u,"collectionParents")}function Ta(u){return yn(u,"indexEntries")}function oa(u){return yn(u,"indexConfiguration")}function gc(u){return yn(u,"indexState")}function Io(u){Yt(0!==u.length);let t=u[0].indexState.offset,i=t.largestBatchId;for(let o=1;o<u.length;o++){const d=u[o].indexState.offset;yr(d,t)<0&&(t=d),i<d.largestBatchId&&(i=d.largestBatchId)}return new ir(t.readTime,t.documentKey,i)}const Rl={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Rs{constructor(t,i,o){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=i,this.maximumSequenceNumbersToCollect=o}static withCacheSize(t){return new Rs(t,Rs.DEFAULT_COLLECTION_PERCENTILE,Rs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function ei(u,t,i){const o=u.store("mutations"),d=u.store("documentMutations"),I=[],S=IDBKeyRange.only(i.batchId);let U=0;const G=o.J({range:S},(we,ze,ht)=>(U++,ht.delete()));I.push(G.next(()=>{Yt(1===U)}));const ce=[];for(const we of i.mutations){const ze=rs(t,we.key.path,i.batchId);I.push(d.delete(ze)),ce.push(we.key)}return xt.waitFor(I).next(()=>ce)}function Lu(u){if(!u)return 0;let t;if(u.document)t=u.document;else if(u.unknownDocument)t=u.unknownDocument;else{if(!u.noDocument)throw Nt();t=u.noDocument}return JSON.stringify(t).length}Rs.DEFAULT_COLLECTION_PERCENTILE=10,Rs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Rs.DEFAULT=new Rs(41943040,Rs.DEFAULT_COLLECTION_PERCENTILE,Rs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Rs.DISABLED=new Rs(-1,0,0);class lo{constructor(t,i,o,d){this.userId=t,this.serializer=i,this.indexManager=o,this.referenceDelegate=d,this.Fn={}}static lt(t,i,o,d){Yt(""!==t.uid);const I=t.isAuthenticated()?t.uid:"";return new lo(I,i,o,d)}checkEmpty(t){let i=!0;const o=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Bc(t).J({index:"userMutationsIndex",range:o},(d,I,S)=>{i=!1,S.done()}).next(()=>i)}addMutationBatch(t,i,o,d){const I=dl(t),S=Bc(t);return S.add({}).next(U=>{Yt("number"==typeof U);const G=new X(U,i,o,d),ce=function(nn,Un,lr){const Zn=lr.baseMutations.map(si=>Qs(nn.ct,si)),Kr=lr.mutations.map(si=>Qs(nn.ct,si));return{userId:Un,batchId:lr.batchId,localWriteTimeMs:lr.localWriteTime.toMillis(),baseMutations:Zn,mutations:Kr}}(this.serializer,this.userId,G),we=[];let ze=new kr((ht,nn)=>Jn(ht.canonicalString(),nn.canonicalString()));for(const ht of d){const nn=rs(this.userId,ht.key.path,U);ze=ze.add(ht.key.path.popLast()),we.push(S.put(ce)),we.push(I.put(nn,Ms))}return ze.forEach(ht=>{we.push(this.indexManager.addToCollectionParentIndex(t,ht))}),t.addOnCommittedListener(()=>{this.Fn[U]=G.keys()}),xt.waitFor(we).next(()=>G)})}lookupMutationBatch(t,i){return Bc(t).get(i).next(o=>o?(Yt(o.userId===this.userId),pi(this.serializer,o)):null)}Mn(t,i){return this.Fn[i]?xt.resolve(this.Fn[i]):this.lookupMutationBatch(t,i).next(o=>{if(o){const d=o.keys();return this.Fn[i]=d,d}return null})}getNextMutationBatchAfterBatchId(t,i){const o=i+1,d=IDBKeyRange.lowerBound([this.userId,o]);let I=null;return Bc(t).J({index:"userMutationsIndex",range:d},(S,U,G)=>{U.userId===this.userId&&(Yt(U.batchId>=o),I=pi(this.serializer,U)),G.done()}).next(()=>I)}getHighestUnacknowledgedBatchId(t){const i=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let o=-1;return Bc(t).J({index:"userMutationsIndex",range:i,reverse:!0},(d,I,S)=>{o=I.batchId,S.done()}).next(()=>o)}getAllMutationBatches(t){const i=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Bc(t).U("userMutationsIndex",i).next(o=>o.map(d=>pi(this.serializer,d)))}getAllMutationBatchesAffectingDocumentKey(t,i){const o=er(this.userId,i.path),d=IDBKeyRange.lowerBound(o),I=[];return dl(t).J({range:d},(S,U,G)=>{const[ce,we,ze]=S,ht=Lr(we);if(ce===this.userId&&i.path.isEqual(ht))return Bc(t).get(ze).next(nn=>{if(!nn)throw Nt();Yt(nn.userId===this.userId),I.push(pi(this.serializer,nn))});G.done()}).next(()=>I)}getAllMutationBatchesAffectingDocumentKeys(t,i){let o=new kr(Jn);const d=[];return i.forEach(I=>{const S=er(this.userId,I.path),U=IDBKeyRange.lowerBound(S),G=dl(t).J({range:U},(ce,we,ze)=>{const[ht,nn,Un]=ce,lr=Lr(nn);ht===this.userId&&I.path.isEqual(lr)?o=o.add(Un):ze.done()});d.push(G)}),xt.waitFor(d).next(()=>this.xn(t,o))}getAllMutationBatchesAffectingQuery(t,i){const o=i.path,d=o.length+1,I=er(this.userId,o),S=IDBKeyRange.lowerBound(I);let U=new kr(Jn);return dl(t).J({range:S},(G,ce,we)=>{const[ze,ht,nn]=G,Un=Lr(ht);ze===this.userId&&o.isPrefixOf(Un)?Un.length===d&&(U=U.add(nn)):we.done()}).next(()=>this.xn(t,U))}xn(t,i){const o=[],d=[];return i.forEach(I=>{d.push(Bc(t).get(I).next(S=>{if(null===S)throw Nt();Yt(S.userId===this.userId),o.push(pi(this.serializer,S))}))}),xt.waitFor(d).next(()=>o)}removeMutationBatch(t,i){return ei(t._e,this.userId,i).next(o=>(t.addOnCommittedListener(()=>{this.On(i.batchId)}),xt.forEach(o,d=>this.referenceDelegate.markPotentiallyOrphaned(t,d))))}On(t){delete this.Fn[t]}performConsistencyCheck(t){return this.checkEmpty(t).next(i=>{if(!i)return xt.resolve();const o=IDBKeyRange.lowerBound(function(S){return[S]}(this.userId)),d=[];return dl(t).J({range:o},(I,S,U)=>{if(I[0]===this.userId){const G=Lr(I[1]);d.push(G)}else U.done()}).next(()=>{Yt(0===d.length)})})}containsKey(t,i){return Xl(t,this.userId,i)}Nn(t){return Fu(t).get(this.userId).next(i=>i||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Xl(u,t,i){const o=er(t,i.path),d=o[1],I=IDBKeyRange.lowerBound(o);let S=!1;return dl(u).J({range:I,H:!0},(U,G,ce)=>{const[we,ze,ht]=U;we===t&&ze===d&&(S=!0),ce.done()}).next(()=>S)}function Bc(u){return yn(u,"mutations")}function dl(u){return yn(u,"documentMutations")}function Fu(u){return yn(u,"mutationQueues")}class Aa{constructor(t){this.Ln=t}next(){return this.Ln+=2,this.Ln}static Bn(){return new Aa(0)}static kn(){return new Aa(-1)}}class Pl{constructor(t,i){this.referenceDelegate=t,this.serializer=i}allocateTargetId(t){return this.qn(t).next(i=>{const o=new Aa(i.highestTargetId);return i.highestTargetId=o.next(),this.Qn(t,i).next(()=>i.highestTargetId)})}getLastRemoteSnapshotVersion(t){return this.qn(t).next(i=>qn.fromTimestamp(new $n(i.lastRemoteSnapshotVersion.seconds,i.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(t){return this.qn(t).next(i=>i.highestListenSequenceNumber)}setTargetsMetadata(t,i,o){return this.qn(t).next(d=>(d.highestListenSequenceNumber=i,o&&(d.lastRemoteSnapshotVersion=o.toTimestamp()),i>d.highestListenSequenceNumber&&(d.highestListenSequenceNumber=i),this.Qn(t,d)))}addTargetData(t,i){return this.Kn(t,i).next(()=>this.qn(t).next(o=>(o.targetCount+=1,this.$n(i,o),this.Qn(t,o))))}updateTargetData(t,i){return this.Kn(t,i)}removeTargetData(t,i){return this.removeMatchingKeysForTargetId(t,i.targetId).next(()=>jc(t).delete(i.targetId)).next(()=>this.qn(t)).next(o=>(Yt(o.targetCount>0),o.targetCount-=1,this.Qn(t,o)))}removeTargets(t,i,o){let d=0;const I=[];return jc(t).J((S,U)=>{const G=Yi(U);G.sequenceNumber<=i&&null===o.get(G.targetId)&&(d++,I.push(this.removeTargetData(t,G)))}).next(()=>xt.waitFor(I)).next(()=>d)}forEachTarget(t,i){return jc(t).J((o,d)=>{const I=Yi(d);i(I)})}qn(t){return hl(t).get("targetGlobalKey").next(i=>(Yt(null!==i),i))}Qn(t,i){return hl(t).put("targetGlobalKey",i)}Kn(t,i){return jc(t).put(Sl(this.serializer,i))}$n(t,i){let o=!1;return t.targetId>i.highestTargetId&&(i.highestTargetId=t.targetId,o=!0),t.sequenceNumber>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t.sequenceNumber,o=!0),o}getTargetCount(t){return this.qn(t).next(i=>i.targetCount)}getTargetData(t,i){const o=vs(i),d=IDBKeyRange.bound([o,Number.NEGATIVE_INFINITY],[o,Number.POSITIVE_INFINITY]);let I=null;return jc(t).J({range:d,index:"queryTargetsIndex"},(S,U,G)=>{const ce=Yi(U);ic(i,ce.target)&&(I=ce,G.done())}).next(()=>I)}addMatchingKeys(t,i,o){const d=[],I=Ml(t);return i.forEach(S=>{const U=Yn(S.path);d.push(I.put({targetId:o,path:U})),d.push(this.referenceDelegate.addReference(t,o,S))}),xt.waitFor(d)}removeMatchingKeys(t,i,o){const d=Ml(t);return xt.forEach(i,I=>{const S=Yn(I.path);return xt.waitFor([d.delete([o,S]),this.referenceDelegate.removeReference(t,o,I)])})}removeMatchingKeysForTargetId(t,i){const o=Ml(t),d=IDBKeyRange.bound([i],[i+1],!1,!0);return o.delete(d)}getMatchingKeysForTargetId(t,i){const o=IDBKeyRange.bound([i],[i+1],!1,!0),d=Ml(t);let I=ci();return d.J({range:o,H:!0},(S,U,G)=>{const ce=Lr(S[1]),we=new je(ce);I=I.add(we)}).next(()=>I)}containsKey(t,i){const o=Yn(i.path),d=IDBKeyRange.bound([o],[vr(o)],!1,!0);let I=0;return Ml(t).J({index:"documentTargetsIndex",H:!0,range:d},([S,U],G,ce)=>{0!==S&&(I++,ce.done())}).next(()=>I>0)}ot(t,i){return jc(t).get(i).next(o=>o?Yi(o):null)}}function jc(u){return yn(u,"targets")}function hl(u){return yn(u,"targetGlobal")}function Ml(u){return yn(u,"targetDocuments")}function id([u,t],[i,o]){const d=Jn(u,i);return 0===d?Jn(t,o):d}class En{constructor(t){this.Un=t,this.buffer=new kr(id),this.Wn=0}Gn(){return++this.Wn}zn(t){const i=[t,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(i);else{const o=this.buffer.last();id(i,o)<0&&(this.buffer=this.buffer.delete(o).add(i))}}get maxValue(){return this.buffer.last()[0]}}class ii{constructor(t,i,o){this.garbageCollector=t,this.asyncQueue=i,this.localStore=o,this.jn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return null!==this.jn}Hn(t){var i=this;me("LruGarbageCollector",`Garbage collection scheduled in ${t}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(0,b.A)(function*(){i.jn=null;try{yield i.localStore.collectGarbage(i.garbageCollector)}catch(o){Te(o)?me("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",o):yield Yr(o)}yield i.Hn(3e5)}))}}class ka{constructor(t,i){this.Jn=t,this.params=i}calculateTargetCount(t,i){return this.Jn.Yn(t).next(o=>Math.floor(i/100*o))}nthSequenceNumber(t,i){if(0===i)return xt.resolve(Oe.oe);const o=new En(i);return this.Jn.forEachTarget(t,d=>o.zn(d.sequenceNumber)).next(()=>this.Jn.Zn(t,d=>o.zn(d))).next(()=>o.maxValue)}removeTargets(t,i,o){return this.Jn.removeTargets(t,i,o)}removeOrphanedDocuments(t,i){return this.Jn.removeOrphanedDocuments(t,i)}collect(t,i){return-1===this.params.cacheSizeCollectionThreshold?(me("LruGarbageCollector","Garbage collection skipped; disabled"),xt.resolve(Rl)):this.getCacheSize(t).next(o=>o<this.params.cacheSizeCollectionThreshold?(me("LruGarbageCollector",`Garbage collection skipped; Cache size ${o} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Rl):this.Xn(t,i))}getCacheSize(t){return this.Jn.getCacheSize(t)}Xn(t,i){let o,d,I,S,U,G,ce;const we=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(ze=>(ze>this.params.maximumSequenceNumbersToCollect?(me("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${ze}`),d=this.params.maximumSequenceNumbersToCollect):d=ze,S=Date.now(),this.nthSequenceNumber(t,d))).next(ze=>(o=ze,U=Date.now(),this.removeTargets(t,o,i))).next(ze=>(I=ze,G=Date.now(),this.removeOrphanedDocuments(t,o))).next(ze=>(ce=Date.now(),Ze()<=H.$b.DEBUG&&me("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${S-we}ms\n\tDetermined least recently used ${d} in `+(U-S)+`ms\n\tRemoved ${I} targets in `+(G-U)+`ms\n\tRemoved ${ze} documents in `+(ce-G)+`ms\nTotal Duration: ${ce-we}ms`),xt.resolve({didRun:!0,sequenceNumbersCollected:d,targetsRemoved:I,documentsRemoved:ze})))}}class Hi{constructor(t,i){this.db=t,this.garbageCollector=function _c(u,t){return new ka(u,t)}(this,i)}Yn(t){const i=this.er(t);return this.db.getTargetCache().getTargetCount(t).next(o=>i.next(d=>o+d))}er(t){let i=0;return this.Zn(t,o=>{i++}).next(()=>i)}forEachTarget(t,i){return this.db.getTargetCache().forEachTarget(t,i)}Zn(t,i){return this.tr(t,(o,d)=>i(d))}addReference(t,i,o){return fl(t,o)}removeReference(t,i,o){return fl(t,o)}removeTargets(t,i,o){return this.db.getTargetCache().removeTargets(t,i,o)}markPotentiallyOrphaned(t,i){return fl(t,i)}nr(t,i){return function(d,I){let S=!1;return Fu(d).Y(U=>Xl(d,U,I).next(G=>(G&&(S=!0),xt.resolve(!G)))).next(()=>S)}(t,i)}removeOrphanedDocuments(t,i){const o=this.db.getRemoteDocumentCache().newChangeBuffer(),d=[];let I=0;return this.tr(t,(S,U)=>{if(U<=i){const G=this.nr(t,S).next(ce=>{if(!ce)return I++,o.getEntry(t,S).next(()=>(o.removeEntry(S,qn.min()),Ml(t).delete([0,Yn(S.path)])))});d.push(G)}}).next(()=>xt.waitFor(d)).next(()=>o.apply(t)).next(()=>I)}removeTarget(t,i){const o=i.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,o)}updateLimboDocument(t,i){return fl(t,i)}tr(t,i){const o=Ml(t);let d,I=Oe.oe;return o.J({index:"documentTargetsIndex"},([S,U],{path:G,sequenceNumber:ce})=>{0===S?(I!==Oe.oe&&i(new je(Lr(d)),I),I=ce,d=G):I=Oe.oe}).next(()=>{I!==Oe.oe&&i(new je(Lr(d)),I)})}getCacheSize(t){return this.db.getRemoteDocumentCache().getSize(t)}}function fl(u,t){return Ml(u).put((d=u.currentSequenceNumber,{targetId:0,path:Yn(t.path),sequenceNumber:d}));var d}class Ol{constructor(){this.changes=new Zo(t=>t.toString(),(t,i)=>t.isEqual(i)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,i){this.assertNotApplied(),this.changes.set(t,Fi.newInvalidDocument(t).setReadTime(i))}getEntry(t,i){this.assertNotApplied();const o=this.changes.get(i);return void 0!==o?xt.resolve(o):this.getFromCache(t,i)}getEntries(t,i){return this.getAllFromCache(t,i)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}class La{constructor(t){this.serializer=t}setIndexManager(t){this.indexManager=t}addEntry(t,i,o){return Vu(t).put(o)}removeEntry(t,i,o){return Vu(t).delete(function(I,S){const U=I.path.toArray();return[U.slice(0,U.length-2),U[U.length-2],Qt(S),U[U.length-1]]}(i,o))}updateMetadata(t,i){return this.getMetadata(t).next(o=>(o.byteSize+=i,this.rr(t,o)))}getEntry(t,i){let o=Fi.newInvalidDocument(i);return Vu(t).J({index:"documentKeyIndex",range:IDBKeyRange.only($c(i))},(d,I)=>{o=this.ir(i,I)}).next(()=>o)}sr(t,i){let o={size:0,document:Fi.newInvalidDocument(i)};return Vu(t).J({index:"documentKeyIndex",range:IDBKeyRange.only($c(i))},(d,I)=>{o={document:this.ir(i,I),size:Lu(I)}}).next(()=>o)}getEntries(t,i){let o=hs();return this._r(t,i,(d,I)=>{const S=this.ir(d,I);o=o.insert(d,S)}).next(()=>o)}ar(t,i){let o=hs(),d=new xn(je.comparator);return this._r(t,i,(I,S)=>{const U=this.ir(I,S);o=o.insert(I,U),d=d.insert(I,Lu(S))}).next(()=>({documents:o,ur:d}))}_r(t,i,o){if(i.isEmpty())return xt.resolve();let d=new kr(yc);i.forEach(G=>d=d.add(G));const I=IDBKeyRange.bound($c(d.first()),$c(d.last())),S=d.getIterator();let U=S.getNext();return Vu(t).J({index:"documentKeyIndex",range:I},(G,ce,we)=>{const ze=je.fromSegments([...ce.prefixPath,ce.collectionGroup,ce.documentId]);for(;U&&yc(U,ze)<0;)o(U,null),U=S.getNext();U&&U.isEqual(ze)&&(o(U,ce),U=S.hasNext()?S.getNext():null),U?we.$($c(U)):we.done()}).next(()=>{for(;U;)o(U,null),U=S.hasNext()?S.getNext():null})}getDocumentsMatchingQuery(t,i,o,d,I){const S=i.path,U=[S.popLast().toArray(),S.lastSegment(),Qt(o.readTime),o.documentKey.path.isEmpty()?"":o.documentKey.path.lastSegment()],G=[S.popLast().toArray(),S.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Vu(t).U(IDBKeyRange.bound(U,G,!0)).next(ce=>{I?.incrementDocumentReadCount(ce.length);let we=hs();for(const ze of ce){const ht=this.ir(je.fromSegments(ze.prefixPath.concat(ze.collectionGroup,ze.documentId)),ze);ht.isFoundDocument()&&(ga(i,ht)||d.has(ht.key))&&(we=we.insert(ht.key,ht))}return we})}getAllFromCollectionGroup(t,i,o,d){let I=hs();const S=as(i,o),U=as(i,ir.max());return Vu(t).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(S,U,!0)},(G,ce,we)=>{const ze=this.ir(je.fromSegments(ce.prefixPath.concat(ce.collectionGroup,ce.documentId)),ce);I=I.insert(ze.key,ze),I.size===d&&we.done()}).next(()=>I)}newChangeBuffer(t){return new _u(this,!!t&&t.trackRemovals)}getSize(t){return this.getMetadata(t).next(i=>i.byteSize)}getMetadata(t){return lh(t).get("remoteDocumentGlobalKey").next(i=>(Yt(!!i),i))}rr(t,i){return lh(t).put("remoteDocumentGlobalKey",i)}ir(t,i){if(i){const o=function rt(u,t){let i;if(t.document)i=ps(u.ct,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const o=je.fromSegments(t.noDocument.path),d=li(t.noDocument.readTime);i=Fi.newNoDocument(o,d),t.hasCommittedMutations&&i.setHasCommittedMutations()}else{if(!t.unknownDocument)return Nt();{const o=je.fromSegments(t.unknownDocument.path),d=li(t.unknownDocument.version);i=Fi.newUnknownDocument(o,d)}}return t.readTime&&i.setReadTime(function(d){const I=new $n(d[0],d[1]);return qn.fromTimestamp(I)}(t.readTime)),i}(this.serializer,i);if(!o.isNoDocument()||!o.version.isEqual(qn.min()))return o}return Fi.newInvalidDocument(t)}}function gu(u){return new La(u)}class _u extends Ol{constructor(t,i){super(),this.cr=t,this.trackRemovals=i,this.lr=new Zo(o=>o.toString(),(o,d)=>o.isEqual(d))}applyChanges(t){const i=[];let o=0,d=new kr((I,S)=>Jn(I.canonicalString(),S.canonicalString()));return this.changes.forEach((I,S)=>{const U=this.lr.get(I);if(i.push(this.cr.removeEntry(t,I,U.readTime)),S.isValidDocument()){const G=on(this.cr.serializer,S);d=d.add(I.path.popLast());const ce=Lu(G);o+=ce-U.size,i.push(this.cr.addEntry(t,I,G))}else if(o-=U.size,this.trackRemovals){const G=on(this.cr.serializer,S.convertToNoDocument(qn.min()));i.push(this.cr.addEntry(t,I,G))}}),d.forEach(I=>{i.push(this.cr.indexManager.addToCollectionParentIndex(t,I))}),i.push(this.cr.updateMetadata(t,o)),xt.waitFor(i)}getFromCache(t,i){return this.cr.sr(t,i).next(o=>(this.lr.set(i,{size:o.size,readTime:o.document.readTime}),o.document))}getAllFromCache(t,i){return this.cr.ar(t,i).next(({documents:o,ur:d})=>(d.forEach((I,S)=>{this.lr.set(I,{size:S,readTime:o.get(I).readTime})}),o))}}function lh(u){return yn(u,"remoteDocumentGlobal")}function Vu(u){return yn(u,"remoteDocumentsV14")}function $c(u){const t=u.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function as(u,t){const i=t.documentKey.path.toArray();return[u,Qt(t.readTime),i.slice(0,i.length-2),i.length>0?i[i.length-1]:""]}function yc(u,t){const i=u.path.toArray(),o=t.path.toArray();let d=0;for(let I=0;I<i.length-2&&I<o.length-2;++I)if(d=Jn(i[I],o[I]),d)return d;return d=Jn(i.length,o.length),d||(d=Jn(i[i.length-2],o[o.length-2]),d||Jn(i[i.length-1],o[o.length-1]))}class yu{constructor(t,i){this.overlayedDocument=t,this.mutatedFields=i}}class Ys{constructor(t,i,o,d){this.remoteDocumentCache=t,this.mutationQueue=i,this.documentOverlayCache=o,this.indexManager=d}getDocument(t,i){let o=null;return this.documentOverlayCache.getOverlay(t,i).next(d=>(o=d,this.remoteDocumentCache.getEntry(t,i))).next(d=>(null!==o&&xc(o.mutation,d,qi.empty(),$n.now()),d))}getDocuments(t,i){return this.remoteDocumentCache.getEntries(t,i).next(o=>this.getLocalViewOfDocuments(t,o,ci()).next(()=>o))}getLocalViewOfDocuments(t,i,o=ci()){const d=Ci();return this.populateOverlays(t,d,i).next(()=>this.computeViews(t,i,d,o).next(I=>{let S=ri();return I.forEach((U,G)=>{S=S.insert(U,G.overlayedDocument)}),S}))}getOverlayedDocuments(t,i){const o=Ci();return this.populateOverlays(t,o,i).next(()=>this.computeViews(t,i,o,ci()))}populateOverlays(t,i,o){const d=[];return o.forEach(I=>{i.has(I)||d.push(I)}),this.documentOverlayCache.getOverlays(t,d).next(I=>{I.forEach((S,U)=>{i.set(S,U)})})}computeViews(t,i,o,d){let I=hs();const S=Ss(),U=Ss();return i.forEach((G,ce)=>{const we=o.get(ce.key);d.has(ce.key)&&(void 0===we||we.mutation instanceof Eo)?I=I.insert(ce.key,ce):void 0!==we?(S.set(ce.key,we.mutation.getFieldMask()),xc(we.mutation,ce,we.mutation.getFieldMask(),$n.now())):S.set(ce.key,qi.empty())}),this.recalculateAndSaveOverlays(t,I).next(G=>(G.forEach((ce,we)=>S.set(ce,we)),i.forEach((ce,we)=>{var ze;return U.set(ce,new yu(we,null!==(ze=S.get(ce))&&void 0!==ze?ze:null))}),U))}recalculateAndSaveOverlays(t,i){const o=Ss();let d=new xn((S,U)=>S-U),I=ci();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,i).next(S=>{for(const U of S)U.keys().forEach(G=>{const ce=i.get(G);if(null===ce)return;let we=o.get(G)||qi.empty();we=U.applyToLocalView(ce,we),o.set(G,we);const ze=(d.get(U.batchId)||ci()).add(G);d=d.insert(U.batchId,ze)})}).next(()=>{const S=[],U=d.getReverseIterator();for(;U.hasNext();){const G=U.getNext(),ce=G.key,we=G.value,ze=Bo();we.forEach(ht=>{if(!I.has(ht)){const nn=dc(i.get(ht),o.get(ht));null!==nn&&ze.set(ht,nn),I=I.add(ht)}}),S.push(this.documentOverlayCache.saveOverlays(t,ce,ze))}return xt.waitFor(S)}).next(()=>o)}recalculateAndSaveOverlaysForDocumentKeys(t,i){return this.remoteDocumentCache.getEntries(t,i).next(o=>this.recalculateAndSaveOverlays(t,o))}getDocumentsMatchingQuery(t,i,o,d){return je.isDocumentKey((S=i).path)&&null===S.collectionGroup&&0===S.filters.length?this.getDocumentsMatchingDocumentQuery(t,i.path):no(i)?this.getDocumentsMatchingCollectionGroupQuery(t,i,o,d):this.getDocumentsMatchingCollectionQuery(t,i,o,d);var S}getNextDocuments(t,i,o,d){return this.remoteDocumentCache.getAllFromCollectionGroup(t,i,o,d).next(I=>{const S=d-I.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,i,o.largestBatchId,d-I.size):xt.resolve(Ci());let U=-1,G=I;return S.next(ce=>xt.forEach(ce,(we,ze)=>(U<ze.largestBatchId&&(U=ze.largestBatchId),I.get(we)?xt.resolve():this.remoteDocumentCache.getEntry(t,we).next(ht=>{G=G.insert(we,ht)}))).next(()=>this.populateOverlays(t,ce,I)).next(()=>this.computeViews(t,G,ce,ci())).next(we=>({batchId:U,changes:Ui(we)})))})}getDocumentsMatchingDocumentQuery(t,i){return this.getDocument(t,new je(i)).next(o=>{let d=ri();return o.isFoundDocument()&&(d=d.insert(o.key,o)),d})}getDocumentsMatchingCollectionGroupQuery(t,i,o,d){const I=i.collectionGroup;let S=ri();return this.indexManager.getCollectionParents(t,I).next(U=>xt.forEach(U,G=>{const ce=(ze=i,ht=G.child(I),new Uo(ht,null,ze.explicitOrderBy.slice(),ze.filters.slice(),ze.limit,ze.limitType,ze.startAt,ze.endAt));var ze,ht;return this.getDocumentsMatchingCollectionQuery(t,ce,o,d).next(we=>{we.forEach((ze,ht)=>{S=S.insert(ze,ht)})})}).next(()=>S))}getDocumentsMatchingCollectionQuery(t,i,o,d){let I;return this.documentOverlayCache.getOverlaysForCollection(t,i.path,o.largestBatchId).next(S=>(I=S,this.remoteDocumentCache.getDocumentsMatchingQuery(t,i,o,I,d))).next(S=>{I.forEach((G,ce)=>{const we=ce.getKey();null===S.get(we)&&(S=S.insert(we,Fi.newInvalidDocument(we)))});let U=ri();return S.forEach((G,ce)=>{const we=I.get(G);void 0!==we&&xc(we.mutation,ce,qi.empty(),$n.now()),ga(i,ce)&&(U=U.insert(G,ce))}),U})}}class pl{constructor(t){this.serializer=t,this.hr=new Map,this.Pr=new Map}getBundleMetadata(t,i){return xt.resolve(this.hr.get(i))}saveBundleMetadata(t,i){return this.hr.set(i.id,{id:(d=i).id,version:d.version,createTime:bs(d.createTime)}),xt.resolve();var d}getNamedQuery(t,i){return xt.resolve(this.Pr.get(i))}saveNamedQuery(t,i){return this.Pr.set(i.name,{name:(d=i).name,query:Gl(d.bundledQuery),readTime:bs(d.readTime)}),xt.resolve();var d}}class uh{constructor(){this.overlays=new xn(je.comparator),this.Ir=new Map}getOverlay(t,i){return xt.resolve(this.overlays.get(i))}getOverlays(t,i){const o=Ci();return xt.forEach(i,d=>this.getOverlay(t,d).next(I=>{null!==I&&o.set(d,I)})).next(()=>o)}saveOverlays(t,i,o){return o.forEach((d,I)=>{this.ht(t,i,I)}),xt.resolve()}removeOverlaysForBatchId(t,i,o){const d=this.Ir.get(o);return void 0!==d&&(d.forEach(I=>this.overlays=this.overlays.remove(I)),this.Ir.delete(o)),xt.resolve()}getOverlaysForCollection(t,i,o){const d=Ci(),I=i.length+1,S=new je(i.child("")),U=this.overlays.getIteratorFrom(S);for(;U.hasNext();){const G=U.getNext().value,ce=G.getKey();if(!i.isPrefixOf(ce.path))break;ce.path.length===I&&G.largestBatchId>o&&d.set(G.getKey(),G)}return xt.resolve(d)}getOverlaysForCollectionGroup(t,i,o,d){let I=new xn((ce,we)=>ce-we);const S=this.overlays.getIterator();for(;S.hasNext();){const ce=S.getNext().value;if(ce.getKey().getCollectionGroup()===i&&ce.largestBatchId>o){let we=I.get(ce.largestBatchId);null===we&&(we=Ci(),I=I.insert(ce.largestBatchId,we)),we.set(ce.getKey(),ce)}}const U=Ci(),G=I.getIterator();for(;G.hasNext()&&(G.getNext().value.forEach((ce,we)=>U.set(ce,we)),!(U.size()>=d)););return xt.resolve(U)}ht(t,i,o){const d=this.overlays.get(o.key);if(null!==d){const S=this.Ir.get(d.largestBatchId).delete(o.key);this.Ir.set(d.largestBatchId,S)}this.overlays=this.overlays.insert(o.key,new qe(i,o));let I=this.Ir.get(i);void 0===I&&(I=ci(),this.Ir.set(i,I)),this.Ir.set(i,I.add(o.key))}}class sd{constructor(){this.sessionToken=bt.EMPTY_BYTE_STRING}getSessionToken(t){return xt.resolve(this.sessionToken)}setSessionToken(t,i){return this.sessionToken=i,xt.resolve()}}class Hd{constructor(){this.Tr=new kr(ks.Er),this.dr=new kr(ks.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(t,i){const o=new ks(t,i);this.Tr=this.Tr.add(o),this.dr=this.dr.add(o)}Rr(t,i){t.forEach(o=>this.addReference(o,i))}removeReference(t,i){this.Vr(new ks(t,i))}mr(t,i){t.forEach(o=>this.removeReference(o,i))}gr(t){const i=new je(new st([])),o=new ks(i,t),d=new ks(i,t+1),I=[];return this.dr.forEachInRange([o,d],S=>{this.Vr(S),I.push(S.key)}),I}pr(){this.Tr.forEach(t=>this.Vr(t))}Vr(t){this.Tr=this.Tr.delete(t),this.dr=this.dr.delete(t)}yr(t){const i=new je(new st([])),o=new ks(i,t),d=new ks(i,t+1);let I=ci();return this.dr.forEachInRange([o,d],S=>{I=I.add(S.key)}),I}containsKey(t){const i=new ks(t,0),o=this.Tr.firstAfterOrEqual(i);return null!==o&&t.isEqual(o.key)}}class ks{constructor(t,i){this.key=t,this.wr=i}static Er(t,i){return je.comparator(t.key,i.key)||Jn(t.wr,i.wr)}static Ar(t,i){return Jn(t.wr,i.wr)||je.comparator(t.key,i.key)}}class od{constructor(t,i){this.indexManager=t,this.referenceDelegate=i,this.mutationQueue=[],this.Sr=1,this.br=new kr(ks.Er)}checkEmpty(t){return xt.resolve(0===this.mutationQueue.length)}addMutationBatch(t,i,o,d){const I=this.Sr;this.Sr++;const S=new X(I,i,o,d);this.mutationQueue.push(S);for(const U of d)this.br=this.br.add(new ks(U.key,I)),this.indexManager.addToCollectionParentIndex(t,U.key.path.popLast());return xt.resolve(S)}lookupMutationBatch(t,i){return xt.resolve(this.Dr(i))}getNextMutationBatchAfterBatchId(t,i){const d=this.vr(i+1),I=d<0?0:d;return xt.resolve(this.mutationQueue.length>I?this.mutationQueue[I]:null)}getHighestUnacknowledgedBatchId(){return xt.resolve(0===this.mutationQueue.length?-1:this.Sr-1)}getAllMutationBatches(t){return xt.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,i){const o=new ks(i,0),d=new ks(i,Number.POSITIVE_INFINITY),I=[];return this.br.forEachInRange([o,d],S=>{const U=this.Dr(S.wr);I.push(U)}),xt.resolve(I)}getAllMutationBatchesAffectingDocumentKeys(t,i){let o=new kr(Jn);return i.forEach(d=>{const I=new ks(d,0),S=new ks(d,Number.POSITIVE_INFINITY);this.br.forEachInRange([I,S],U=>{o=o.add(U.wr)})}),xt.resolve(this.Cr(o))}getAllMutationBatchesAffectingQuery(t,i){const o=i.path,d=o.length+1;let I=o;je.isDocumentKey(I)||(I=I.child(""));const S=new ks(new je(I),0);let U=new kr(Jn);return this.br.forEachWhile(G=>{const ce=G.key.path;return!!o.isPrefixOf(ce)&&(ce.length===d&&(U=U.add(G.wr)),!0)},S),xt.resolve(this.Cr(U))}Cr(t){const i=[];return t.forEach(o=>{const d=this.Dr(o);null!==d&&i.push(d)}),i}removeMutationBatch(t,i){Yt(0===this.Fr(i.batchId,"removed")),this.mutationQueue.shift();let o=this.br;return xt.forEach(i.mutations,d=>{const I=new ks(d.key,i.batchId);return o=o.delete(I),this.referenceDelegate.markPotentiallyOrphaned(t,d.key)}).next(()=>{this.br=o})}On(t){}containsKey(t,i){const o=new ks(i,0),d=this.br.firstAfterOrEqual(o);return xt.resolve(i.isEqual(d&&d.key))}performConsistencyCheck(t){return xt.resolve()}Fr(t,i){return this.vr(t)}vr(t){return 0===this.mutationQueue.length?0:t-this.mutationQueue[0].batchId}Dr(t){const i=this.vr(t);return i<0||i>=this.mutationQueue.length?null:this.mutationQueue[i]}}class vu{constructor(t){this.Mr=t,this.docs=new xn(je.comparator),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,i){const o=i.key,d=this.docs.get(o),I=d?d.size:0,S=this.Mr(i);return this.docs=this.docs.insert(o,{document:i.mutableCopy(),size:S}),this.size+=S-I,this.indexManager.addToCollectionParentIndex(t,o.path.popLast())}removeEntry(t){const i=this.docs.get(t);i&&(this.docs=this.docs.remove(t),this.size-=i.size)}getEntry(t,i){const o=this.docs.get(i);return xt.resolve(o?o.document.mutableCopy():Fi.newInvalidDocument(i))}getEntries(t,i){let o=hs();return i.forEach(d=>{const I=this.docs.get(d);o=o.insert(d,I?I.document.mutableCopy():Fi.newInvalidDocument(d))}),xt.resolve(o)}getDocumentsMatchingQuery(t,i,o,d){let I=hs();const S=i.path,U=new je(S.child("")),G=this.docs.getIteratorFrom(U);for(;G.hasNext();){const{key:ce,value:{document:we}}=G.getNext();if(!S.isPrefixOf(ce.path))break;ce.path.length>S.length+1||yr(An(we),o)<=0||(d.has(we.key)||ga(i,we))&&(I=I.insert(we.key,we.mutableCopy()))}return xt.resolve(I)}getAllFromCollectionGroup(t,i,o,d){Nt()}Or(t,i){return xt.forEach(this.docs,o=>i(o))}newChangeBuffer(t){return new Td(this)}getSize(t){return xt.resolve(this.size)}}class Td extends Ol{constructor(t){super(),this.cr=t}applyChanges(t){const i=[];return this.changes.forEach((o,d)=>{d.isValidDocument()?i.push(this.cr.addEntry(t,d)):this.cr.removeEntry(o)}),xt.waitFor(i)}getFromCache(t,i){return this.cr.getEntry(t,i)}getAllFromCache(t,i){return this.cr.getEntries(t,i)}}class ad{constructor(t){this.persistence=t,this.Nr=new Zo(i=>vs(i),ic),this.lastRemoteSnapshotVersion=qn.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Hd,this.targetCount=0,this.kr=Aa.Bn()}forEachTarget(t,i){return this.Nr.forEach((o,d)=>i(d)),xt.resolve()}getLastRemoteSnapshotVersion(t){return xt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return xt.resolve(this.Lr)}allocateTargetId(t){return this.highestTargetId=this.kr.next(),xt.resolve(this.highestTargetId)}setTargetsMetadata(t,i,o){return o&&(this.lastRemoteSnapshotVersion=o),i>this.Lr&&(this.Lr=i),xt.resolve()}Kn(t){this.Nr.set(t.target,t);const i=t.targetId;i>this.highestTargetId&&(this.kr=new Aa(i),this.highestTargetId=i),t.sequenceNumber>this.Lr&&(this.Lr=t.sequenceNumber)}addTargetData(t,i){return this.Kn(i),this.targetCount+=1,xt.resolve()}updateTargetData(t,i){return this.Kn(i),xt.resolve()}removeTargetData(t,i){return this.Nr.delete(i.target),this.Br.gr(i.targetId),this.targetCount-=1,xt.resolve()}removeTargets(t,i,o){let d=0;const I=[];return this.Nr.forEach((S,U)=>{U.sequenceNumber<=i&&null===o.get(U.targetId)&&(this.Nr.delete(S),I.push(this.removeMatchingKeysForTargetId(t,U.targetId)),d++)}),xt.waitFor(I).next(()=>d)}getTargetCount(t){return xt.resolve(this.targetCount)}getTargetData(t,i){const o=this.Nr.get(i)||null;return xt.resolve(o)}addMatchingKeys(t,i,o){return this.Br.Rr(i,o),xt.resolve()}removeMatchingKeys(t,i,o){this.Br.mr(i,o);const d=this.persistence.referenceDelegate,I=[];return d&&i.forEach(S=>{I.push(d.markPotentiallyOrphaned(t,S))}),xt.waitFor(I)}removeMatchingKeysForTargetId(t,i){return this.Br.gr(i),xt.resolve()}getMatchingKeysForTargetId(t,i){const o=this.Br.yr(i);return xt.resolve(o)}containsKey(t,i){return xt.resolve(this.Br.containsKey(i))}}class Uu{constructor(t,i){this.qr={},this.overlays={},this.Qr=new Oe(0),this.Kr=!1,this.Kr=!0,this.$r=new sd,this.referenceDelegate=t(this),this.Ur=new ad(this),this.indexManager=new mc,this.remoteDocumentCache=new vu(o=>this.referenceDelegate.Wr(o)),this.serializer=new Ce(i),this.Gr=new pl(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let i=this.overlays[t.toKey()];return i||(i=new uh,this.overlays[t.toKey()]=i),i}getMutationQueue(t,i){let o=this.qr[t.toKey()];return o||(o=new od(i,this.referenceDelegate),this.qr[t.toKey()]=o),o}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(t,i,o){me("MemoryPersistence","Starting transaction:",t);const d=new Eu(this.Qr.next());return this.referenceDelegate.zr(),o(d).next(I=>this.referenceDelegate.jr(d).next(()=>I)).toPromise().then(I=>(d.raiseOnCommittedEvent(),I))}Hr(t,i){return xt.or(Object.values(this.qr).map(o=>()=>o.containsKey(t,i)))}}class Eu extends mr{constructor(t){super(),this.currentSequenceNumber=t}}class Wc{constructor(t){this.persistence=t,this.Jr=new Hd,this.Yr=null}static Zr(t){return new Wc(t)}get Xr(){if(this.Yr)return this.Yr;throw Nt()}addReference(t,i,o){return this.Jr.addReference(o,i),this.Xr.delete(o.toString()),xt.resolve()}removeReference(t,i,o){return this.Jr.removeReference(o,i),this.Xr.add(o.toString()),xt.resolve()}markPotentiallyOrphaned(t,i){return this.Xr.add(i.toString()),xt.resolve()}removeTarget(t,i){this.Jr.gr(i.targetId).forEach(d=>this.Xr.add(d.toString()));const o=this.persistence.getTargetCache();return o.getMatchingKeysForTargetId(t,i.targetId).next(d=>{d.forEach(I=>this.Xr.add(I.toString()))}).next(()=>o.removeTargetData(t,i))}zr(){this.Yr=new Set}jr(t){const i=this.persistence.getRemoteDocumentCache().newChangeBuffer();return xt.forEach(this.Xr,o=>{const d=je.fromPath(o);return this.ei(t,d).next(I=>{I||i.removeEntry(d,qn.min())})}).next(()=>(this.Yr=null,i.apply(t)))}updateLimboDocument(t,i){return this.ei(t,i).next(o=>{o?this.Xr.delete(i.toString()):this.Xr.add(i.toString())})}Wr(t){return 0}ei(t,i){return xt.or([()=>xt.resolve(this.Jr.containsKey(i)),()=>this.persistence.getTargetCache().containsKey(t,i),()=>this.persistence.Hr(t,i)])}}class cd{constructor(t){this.serializer=t}O(t,i,o,d){const I=new qr("createOrUpgrade",i);var G;o<1&&d>=1&&(t.createObjectStore("owner"),(G=t).createObjectStore("mutationQueues",{keyPath:"userId"}),G.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",hi,{unique:!0}),G.createObjectStore("documentMutations"),bu(t),function(G){G.createObjectStore("remoteDocuments")}(t));let S=xt.resolve();return o<3&&d>=3&&(0!==o&&(function(G){G.deleteObjectStore("targetDocuments"),G.deleteObjectStore("targets"),G.deleteObjectStore("targetGlobal")}(t),bu(t)),S=S.next(()=>function(G){const ce=G.store("targetGlobal"),we={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:qn.min().toTimestamp(),targetCount:0};return ce.put("targetGlobalKey",we)}(I))),o<4&&d>=4&&(0!==o&&(S=S.next(()=>function(G,ce){return ce.store("mutations").U().next(we=>{G.deleteObjectStore("mutations"),G.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",hi,{unique:!0});const ze=ce.store("mutations"),ht=we.map(nn=>ze.put(nn));return xt.waitFor(ht)})}(t,I))),S=S.next(()=>{!function(G){G.createObjectStore("clientMetadata",{keyPath:"clientId"})}(t)})),o<5&&d>=5&&(S=S.next(()=>this.ni(I))),o<6&&d>=6&&(S=S.next(()=>(function(G){G.createObjectStore("remoteDocumentGlobal")}(t),this.ri(I)))),o<7&&d>=7&&(S=S.next(()=>this.ii(I))),o<8&&d>=8&&(S=S.next(()=>this.si(t,I))),o<9&&d>=9&&(S=S.next(()=>{!function(G){G.objectStoreNames.contains("remoteDocumentChanges")&&G.deleteObjectStore("remoteDocumentChanges")}(t)})),o<10&&d>=10&&(S=S.next(()=>this.oi(I))),o<11&&d>=11&&(S=S.next(()=>{(function(G){G.createObjectStore("bundles",{keyPath:"bundleId"})})(t),function(G){G.createObjectStore("namedQueries",{keyPath:"name"})}(t)})),o<12&&d>=12&&(S=S.next(()=>{!function(G){const ce=G.createObjectStore("documentOverlays",{keyPath:Ue});ce.createIndex("collectionPathOverlayIndex",it,{unique:!1}),ce.createIndex("collectionGroupOverlayIndex",ut,{unique:!1})}(t)})),o<13&&d>=13&&(S=S.next(()=>function(G){const ce=G.createObjectStore("remoteDocumentsV14",{keyPath:Ks});ce.createIndex("documentKeyIndex",Co),ce.createIndex("collectionGroupIndex",Os)}(t)).next(()=>this._i(t,I)).next(()=>t.deleteObjectStore("remoteDocuments"))),o<14&&d>=14&&(S=S.next(()=>this.ai(t,I))),o<15&&d>=15&&(S=S.next(()=>function(G){G.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),G.createObjectStore("indexState",{keyPath:fo}).createIndex("sequenceNumberIndex",Gs,{unique:!1}),G.createObjectStore("indexEntries",{keyPath:_s}).createIndex("documentKeyIndex",Ts,{unique:!1})}(t))),o<16&&d>=16&&(S=S.next(()=>{i.objectStore("indexState").clear()}).next(()=>{i.objectStore("indexEntries").clear()})),o<17&&d>=17&&(S=S.next(()=>{!function(G){G.createObjectStore("globals",{keyPath:"name"})}(t)})),S}ri(t){let i=0;return t.store("remoteDocuments").J((o,d)=>{i+=Lu(d)}).next(()=>{const o={byteSize:i};return t.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",o)})}ni(t){const i=t.store("mutationQueues"),o=t.store("mutations");return i.U().next(d=>xt.forEach(d,I=>{const S=IDBKeyRange.bound([I.userId,-1],[I.userId,I.lastAcknowledgedBatchId]);return o.U("userMutationsIndex",S).next(U=>xt.forEach(U,G=>{Yt(G.userId===I.userId);const ce=pi(this.serializer,G);return ei(t,I.userId,ce).next(()=>{})}))}))}ii(t){const i=t.store("targetDocuments"),o=t.store("remoteDocuments");return t.store("targetGlobal").get("targetGlobalKey").next(d=>{const I=[];return o.J((S,U)=>{const G=new st(S),ce=[0,Yn(G)];I.push(i.get(ce).next(we=>we?xt.resolve():i.put({targetId:0,path:Yn(G),sequenceNumber:d.highestListenSequenceNumber})))}).next(()=>xt.waitFor(I))})}si(t,i){t.createObjectStore("collectionParents",{keyPath:so});const o=i.store("collectionParents"),d=new sa,I=S=>{if(d.add(S)){const U=S.lastSegment(),G=S.popLast();return o.put({collectionId:U,parent:Yn(G)})}};return i.store("remoteDocuments").J({H:!0},(S,U)=>{const G=new st(S);return I(G.popLast())}).next(()=>i.store("documentMutations").J({H:!0},([S,U,G],ce)=>{const we=Lr(U);return I(we.popLast())}))}oi(t){const i=t.store("targets");return i.J((o,d)=>{const I=Yi(d),S=Sl(this.serializer,I);return i.put(S)})}_i(t,i){const o=i.store("remoteDocuments"),d=[];return o.J((I,S)=>{const U=i.store("remoteDocumentsV14"),G=(ze=S,ze.document?new je(st.fromString(ze.document.name).popFirst(5)):ze.noDocument?je.fromSegments(ze.noDocument.path):ze.unknownDocument?je.fromSegments(ze.unknownDocument.path):Nt()).path.toArray(),ce={prefixPath:G.slice(0,G.length-2),collectionGroup:G[G.length-2],documentId:G[G.length-1],readTime:S.readTime||[0,0],unknownDocument:S.unknownDocument,noDocument:S.noDocument,document:S.document,hasCommittedMutations:!!S.hasCommittedMutations};var ze;d.push(U.put(ce))}).next(()=>xt.waitFor(d))}ai(t,i){const o=i.store("mutations"),d=gu(this.serializer),I=new Uu(Wc.Zr,this.serializer.ct);return o.U().next(S=>{const U=new Map;return S.forEach(G=>{var ce;let we=null!==(ce=U.get(G.userId))&&void 0!==ce?ce:ci();pi(this.serializer,G).keys().forEach(ze=>we=we.add(ze)),U.set(G.userId,we)}),xt.forEach(U,(G,ce)=>{const we=new Ke(ce),ze=xu.lt(this.serializer,we),ht=I.getIndexManager(we),nn=lo.lt(we,this.serializer,ht,I.referenceDelegate);return new Ys(d,nn,ze,ht).recalculateAndSaveOverlaysForDocumentKeys(new wr(i,Oe.oe),G).next()})})}}function bu(u){u.createObjectStore("targetDocuments",{keyPath:la}).createIndex("documentTargetsIndex",$s,{unique:!0}),u.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",vi,{unique:!0}),u.createObjectStore("targetGlobal")}const ju="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Iu{constructor(t,i,o,d,I,S,U,G,ce,we,ze=17){if(this.allowTabSynchronization=t,this.persistenceKey=i,this.clientId=o,this.ui=I,this.window=S,this.document=U,this.ci=ce,this.li=we,this.hi=ze,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=ht=>Promise.resolve(),!Iu.D())throw new Ye(ye.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Hi(this,d),this.Ai=i+"main",this.serializer=new Ce(G),this.Ri=new ai(this.Ai,this.hi,new cd(this.serializer)),this.$r=new Nu,this.Ur=new Pl(this.referenceDelegate,this.serializer),this.remoteDocumentCache=gu(this.serializer),this.Gr=new Wd,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,!1===we&&ve("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Ye(ye.FAILED_PRECONDITION,ju);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",t=>this.Ur.getHighestSequenceNumber(t))}).then(t=>{this.Qr=new Oe(t,this.ci)}).then(()=>{this.Kr=!0}).catch(t=>(this.Ri&&this.Ri.close(),Promise.reject(t)))}yi(t){var i=this;return this.di=function(){var o=(0,b.A)(function*(d){if(i.started)return t(d)});return function(d){return o.apply(this,arguments)}}(),t(this.isPrimary)}setDatabaseDeletedListener(t){this.Ri.L(function(){var i=(0,b.A)(function*(o){null===o.newVersion&&(yield t())});return function(o){return i.apply(this,arguments)}}())}setNetworkEnabled(t){var i=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.ui.enqueueAndForget((0,b.A)(function*(){i.started&&(yield i.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",t=>uo(t).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(t).next(i=>{i||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(t)).next(i=>this.isPrimary&&!i?this.bi(t).next(()=>!1):!!i&&this.Di(t).next(()=>!0))).catch(t=>{if(Te(t))return me("IndexedDbPersistence","Failed to extend owner lease: ",t),this.isPrimary;if(!this.allowTabSynchronization)throw t;return me("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1}).then(t=>{this.isPrimary!==t&&this.ui.enqueueRetryable(()=>this.di(t)),this.isPrimary=t})}wi(t){return ld(t).get("owner").next(i=>xt.resolve(this.vi(i)))}Ci(t){return uo(t).delete(this.clientId)}Fi(){var t=this;return(0,b.A)(function*(){if(t.isPrimary&&!t.Mi(t.Ei,18e5)){t.Ei=Date.now();const i=yield t.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",o=>{const d=yn(o,"clientMetadata");return d.U().next(I=>{const S=t.xi(I,18e5),U=I.filter(G=>-1===S.indexOf(G));return xt.forEach(U,G=>d.delete(G.clientId)).next(()=>U)})}).catch(()=>[]);if(t.Vi)for(const o of i)t.Vi.removeItem(t.Oi(o.clientId))}})()}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(t){return!!t&&t.ownerId===this.clientId}Si(t){return this.li?xt.resolve(!0):ld(t).get("owner").next(i=>{if(null!==i&&this.Mi(i.leaseTimestampMs,5e3)&&!this.Ni(i.ownerId)){if(this.vi(i)&&this.networkEnabled)return!0;if(!this.vi(i)){if(!i.allowTabSynchronization)throw new Ye(ye.FAILED_PRECONDITION,ju);return!1}}return!(!this.networkEnabled||!this.inForeground)||uo(t).U().next(o=>void 0===this.xi(o,5e3).find(d=>!(this.clientId===d.clientId||!(!this.networkEnabled&&d.networkEnabled||!this.inForeground&&d.inForeground&&this.networkEnabled===d.networkEnabled))))}).next(i=>(this.isPrimary!==i&&me("IndexedDbPersistence",`Client ${i?"is":"is not"} eligible for a primary lease.`),i))}shutdown(){var t=this;return(0,b.A)(function*(){t.Kr=!1,t.Li(),t.Ti&&(t.Ti.cancel(),t.Ti=null),t.Bi(),t.ki(),yield t.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],i=>{const o=new wr(i,Oe.oe);return t.bi(o).next(()=>t.Ci(o))}),t.Ri.close(),t.qi()})()}xi(t,i){return t.filter(o=>this.Mi(o.updateTimeMs,i)&&!this.Ni(o.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",t=>uo(t).U().next(i=>this.xi(i,18e5).map(o=>o.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(t,i){return lo.lt(t,this.serializer,i,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(t){return new mu(t,this.serializer.ct.databaseId)}getDocumentOverlayCache(t){return xu.lt(this.serializer,t)}getBundleCache(){return this.Gr}runTransaction(t,i,o){me("IndexedDbPersistence","Starting transaction:",t);const d="readonly"===i?"readonly":"readwrite",I=17===(G=this.hi)?ti:16===G?Bn:15===G?Xn:14===G?jt:13===G?Sn:12===G?sn:11===G?un:void Nt();var G;let S;return this.Ri.runTransaction(t,d,I,U=>(S=new wr(U,this.Qr?this.Qr.next():Oe.oe),"readwrite-primary"===i?this.wi(S).next(G=>!!G||this.Si(S)).next(G=>{if(!G)throw ve(`Failed to obtain primary lease for action '${t}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new Ye(ye.FAILED_PRECONDITION,ar);return o(S)}).next(G=>this.Di(S).next(()=>G)):this.Ki(S).next(()=>o(S)))).then(U=>(S.raiseOnCommittedEvent(),U))}Ki(t){return ld(t).get("owner").next(i=>{if(null!==i&&this.Mi(i.leaseTimestampMs,5e3)&&!this.Ni(i.ownerId)&&!this.vi(i)&&!(this.li||this.allowTabSynchronization&&i.allowTabSynchronization))throw new Ye(ye.FAILED_PRECONDITION,ju)})}Di(t){const i={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return ld(t).put("owner",i)}static D(){return ai.D()}bi(t){const i=ld(t);return i.get("owner").next(o=>this.vi(o)?(me("IndexedDbPersistence","Releasing primary lease."),i.delete("owner")):xt.resolve())}Mi(t,i){const o=Date.now();return!(t<o-i||t>o&&(ve(`Detected an update time that is in the future: ${t} > ${o}`),1))}fi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground="visible"===this.document.visibilityState)}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var t;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.Pi=()=>{this.Li();const i=/(?:Version|Mobile)\/1[456]/;(0,Ee.nr)()&&(navigator.appVersion.match(i)||navigator.userAgent.match(i))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(t){var i;try{const o=null!==(null===(i=this.Vi)||void 0===i?void 0:i.getItem(this.Oi(t)));return me("IndexedDbPersistence",`Client '${t}' ${o?"is":"is not"} zombied in LocalStorage`),o}catch(o){return ve("IndexedDbPersistence","Failed to get zombied client id.",o),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(t){ve("Failed to set zombie client id.",t)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(t){return`firestore_zombie_${this.persistenceKey}_${t}`}}function ld(u){return yn(u,"owner")}function uo(u){return yn(u,"clientMetadata")}function zc(u,t){let i=u.projectId;return u.isDefaultDatabase||(i+="."+u.database),"firestore/"+t+"/"+i+"/"}class cs{constructor(t,i,o,d){this.targetId=t,this.fromCache=i,this.$i=o,this.Ui=d}static Wi(t,i){let o=ci(),d=ci();for(const I of i.docChanges)switch(I.type){case 0:o=o.add(I.doc.key);break;case 1:d=d.add(I.doc.key)}return new cs(t,i.fromCache,o,d)}}class dh{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}class wa{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=(0,Ee.nr)()?8:yi((0,Ee.ZQ)())>0?6:4}initialize(t,i){this.Ji=t,this.indexManager=i,this.Gi=!0}getDocumentsMatchingQuery(t,i,o,d){const I={result:null};return this.Yi(t,i).next(S=>{I.result=S}).next(()=>{if(!I.result)return this.Zi(t,i,d,o).next(S=>{I.result=S})}).next(()=>{if(I.result)return;const S=new dh;return this.Xi(t,i,S).next(U=>{if(I.result=U,this.zi)return this.es(t,i,S,U.size)})}).next(()=>I.result)}es(t,i,o,d){return o.documentReadCount<this.ji?(Ze()<=H.$b.DEBUG&&me("QueryEngine","SDK will not create cache indexes for query:",ma(i),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),xt.resolve()):(Ze()<=H.$b.DEBUG&&me("QueryEngine","Query:",ma(i),"scans",o.documentReadCount,"local documents and returns",d,"documents as results."),o.documentReadCount>this.Hi*d?(Ze()<=H.$b.DEBUG&&me("QueryEngine","The SDK decides to create cache indexes for query:",ma(i),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Cs(i))):xt.resolve())}Yi(t,i){if(Pc(i))return xt.resolve(null);let o=Cs(i);return this.indexManager.getIndexType(t,o).next(d=>0===d?null:(null!==i.limit&&1===d&&(i=Xo(i,null,"F"),o=Cs(i)),this.indexManager.getDocumentsMatchingTarget(t,o).next(I=>{const S=ci(...I);return this.Ji.getDocuments(t,S).next(U=>this.indexManager.getMinOffset(t,o).next(G=>{const ce=this.ts(i,U);return this.ns(i,ce,S,G.readTime)?this.Yi(t,Xo(i,null,"F")):this.rs(t,ce,i,G)}))})))}Zi(t,i,o,d){return Pc(i)||d.isEqual(qn.min())?xt.resolve(null):this.Ji.getDocuments(t,o).next(I=>{const S=this.ts(i,I);return this.ns(i,S,o,d)?xt.resolve(null):(Ze()<=H.$b.DEBUG&&me("QueryEngine","Re-using previous result from %s to execute query: %s",d.toString(),ma(i)),this.rs(t,S,i,gn(d,-1)).next(U=>U))})}ts(t,i){let o=new kr(vo(t));return i.forEach((d,I)=>{ga(t,I)&&(o=o.add(I))}),o}ns(t,i,o,d){if(null===t.limit)return!1;if(o.size!==i.size)return!0;const I="F"===t.limitType?i.last():i.first();return!!I&&(I.hasPendingWrites||I.version.compareTo(d)>0)}Xi(t,i,o){return Ze()<=H.$b.DEBUG&&me("QueryEngine","Using full collection scan to execute query:",ma(i)),this.Ji.getDocumentsMatchingQuery(t,i,ir.min(),o)}rs(t,i,o,d){return this.Ji.getDocumentsMatchingQuery(t,o,d).next(I=>(i.forEach(S=>{I=I.insert(S.key,S)}),I))}}class ml{constructor(t,i,o,d){this.persistence=t,this.ss=i,this.serializer=d,this.os=new xn(Jn),this._s=new Zo(I=>vs(I),ic),this.us=new Map,this.cs=t.getRemoteDocumentCache(),this.Ur=t.getTargetCache(),this.Gr=t.getBundleCache(),this.ls(o)}ls(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new Ys(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",i=>t.collect(i,this.os))}}function Hc(u,t,i,o){return new ml(u,t,i,o)}function xl(u,t){return Xs.apply(this,arguments)}function Xs(){return(Xs=(0,b.A)(function*(u,t){const i=$t(u);return yield i.persistence.runTransaction("Handle user change","readonly",o=>{let d;return i.mutationQueue.getAllMutationBatches(o).next(I=>(d=I,i.ls(t),i.mutationQueue.getAllMutationBatches(o))).next(I=>{const S=[],U=[];let G=ci();for(const ce of d){S.push(ce.batchId);for(const we of ce.mutations)G=G.add(we.key)}for(const ce of I){U.push(ce.batchId);for(const we of ce.mutations)G=G.add(we.key)}return i.localDocuments.getDocuments(o,G).next(ce=>({hs:ce,removedBatchIds:S,addedBatchIds:U}))})})})).apply(this,arguments)}function Fa(u){const t=$t(u);return t.persistence.runTransaction("Get last remote snapshot version","readonly",i=>t.Ur.getLastRemoteSnapshotVersion(i))}function Kc(u,t,i){let o=ci(),d=ci();return i.forEach(I=>o=o.add(I)),t.getEntries(u,o).next(I=>{let S=hs();return i.forEach((U,G)=>{const ce=I.get(U);G.isFoundDocument()!==ce.isFoundDocument()&&(d=d.add(U)),G.isNoDocument()&&G.version.isEqual(qn.min())?(t.removeEntry(U,G.readTime),S=S.insert(U,G)):!ce.isValidDocument()||G.version.compareTo(ce.version)>0||0===G.version.compareTo(ce.version)&&ce.hasPendingWrites?(t.addEntry(G),S=S.insert(U,G)):me("LocalStore","Ignoring outdated watch update for ",U,". Current version:",ce.version," Watch version:",G.version)}),{Ps:S,Is:d}})}function ud(u,t){const i=$t(u);return i.persistence.runTransaction("Get next mutation batch","readonly",o=>(void 0===t&&(t=-1),i.mutationQueue.getNextMutationBatchAfterBatchId(o,t)))}function Za(u,t){const i=$t(u);return i.persistence.runTransaction("Allocate target","readwrite",o=>{let d;return i.Ur.getTargetData(o,t).next(I=>I?(d=I,xt.resolve(d)):i.Ur.allocateTargetId(o).next(S=>(d=new ae(t,S,"TargetPurposeListen",o.currentSequenceNumber),i.Ur.addTargetData(o,d).next(()=>d))))}).then(o=>{const d=i.os.get(o.targetId);return(null===d||o.snapshotVersion.compareTo(d.snapshotVersion)>0)&&(i.os=i.os.insert(o.targetId,o),i._s.set(t,o.targetId)),o})}function Nl(u,t,i){return Zl.apply(this,arguments)}function Zl(){return(Zl=(0,b.A)(function*(u,t,i){const o=$t(u),d=o.os.get(t),I=i?"readwrite":"readwrite-primary";try{i||(yield o.persistence.runTransaction("Release target",I,S=>o.persistence.referenceDelegate.removeTarget(S,d)))}catch(S){if(!Te(S))throw S;me("LocalStore",`Failed to update sequence numbers for target ${t}: ${S}`)}o.os=o.os.remove(t),o._s.delete(d.target)})).apply(this,arguments)}function Jl(u,t,i){const o=$t(u);let d=qn.min(),I=ci();return o.persistence.runTransaction("Execute query","readwrite",S=>function(G,ce,we){const ze=$t(G),ht=ze._s.get(we);return void 0!==ht?xt.resolve(ze.os.get(ht)):ze.Ur.getTargetData(ce,we)}(o,S,Cs(t)).next(U=>{if(U)return d=U.lastLimboFreeSnapshotVersion,o.Ur.getMatchingKeysForTargetId(S,U.targetId).next(G=>{I=G})}).next(()=>o.ss.getDocumentsMatchingQuery(S,t,i?d:qn.min(),i?I:ci())).next(U=>(qc(o,yo(t),U),{documents:U,Ts:I})))}function eu(u,t){const i=$t(u),o=$t(i.Ur),d=i.os.get(t);return d?Promise.resolve(d.target):i.persistence.runTransaction("Get target data","readonly",I=>o.ot(I,t).next(S=>S?S.target:null))}function Gc(u,t){const i=$t(u),o=i.us.get(t)||qn.min();return i.persistence.runTransaction("Get new document changes","readonly",d=>i.cs.getAllFromCollectionGroup(d,t,gn(o,-1),Number.MAX_SAFE_INTEGER)).then(d=>(qc(i,t,d),d))}function qc(u,t,i){let o=u.us.get(t)||qn.min();i.forEach((d,I)=>{I.readTime.compareTo(o)>0&&(o=I.readTime)}),u.us.set(t,o)}function gl(){return(gl=(0,b.A)(function*(u,t,i,o){const d=$t(u);let I=ci(),S=hs();for(const ce of i){const we=t.Es(ce.metadata.name);ce.document&&(I=I.add(we));const ze=t.ds(ce);ze.setReadTime(t.As(ce.metadata.readTime)),S=S.insert(we,ze)}const U=d.cs.newChangeBuffer({trackRemovals:!0}),G=yield Za(d,(we=o,Cs(ao(st.fromString(`__bundle__/docs/${we}`)))));var we;return d.persistence.runTransaction("Apply bundle documents","readwrite",ce=>Kc(ce,U,S).next(we=>(U.apply(ce),we)).next(we=>d.Ur.removeMatchingKeysForTargetId(ce,G.targetId).next(()=>d.Ur.addMatchingKeys(ce,I,G.targetId)).next(()=>d.localDocuments.getLocalViewOfDocuments(ce,we.Ps,we.Is)).next(()=>we.Ps)))})).apply(this,arguments)}function Au(u,t){return dd.apply(this,arguments)}function dd(){return(dd=(0,b.A)(function*(u,t,i=ci()){const o=yield Za(u,Cs(Gl(t.bundledQuery))),d=$t(u);return d.persistence.runTransaction("Save named query","readwrite",I=>{const S=bs(t.readTime);if(o.snapshotVersion.compareTo(S)>=0)return d.Gr.saveNamedQuery(I,t);const U=o.withResumeToken(bt.EMPTY_BYTE_STRING,S);return d.os=d.os.insert(U.targetId,U),d.Ur.updateTargetData(I,U).next(()=>d.Ur.removeMatchingKeysForTargetId(I,o.targetId)).next(()=>d.Ur.addMatchingKeys(I,i,o.targetId)).next(()=>d.Gr.saveNamedQuery(I,t))})})).apply(this,arguments)}function xh(u,t){return`firestore_clients_${u}_${t}`}function Nh(u,t,i){let o=`firestore_mutations_${u}_${i}`;return t.isAuthenticated()&&(o+=`_${t.uid}`),o}function Ad(u,t){return`firestore_targets_${u}_${t}`}class wu{constructor(t,i,o,d){this.user=t,this.batchId=i,this.state=o,this.error=d}static Rs(t,i,o){const d=JSON.parse(o);let I,S="object"==typeof d&&-1!==["pending","acknowledged","rejected"].indexOf(d.state)&&(void 0===d.error||"object"==typeof d.error);return S&&d.error&&(S="string"==typeof d.error.message&&"string"==typeof d.error.code,S&&(I=new Ye(d.error.code,d.error.message))),S?new wu(t,i,d.state,I):(ve("SharedClientState",`Failed to parse mutation state for ID '${i}': ${o}`),null)}Vs(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class kl{constructor(t,i,o){this.targetId=t,this.state=i,this.error=o}static Rs(t,i){const o=JSON.parse(i);let d,I="object"==typeof o&&-1!==["not-current","current","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return I&&o.error&&(I="string"==typeof o.error.message&&"string"==typeof o.error.code,I&&(d=new Ye(o.error.code,o.error.message))),I?new kl(t,o.state,d):(ve("SharedClientState",`Failed to parse target state for ID '${t}': ${i}`),null)}Vs(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class Ja{constructor(t,i){this.clientId=t,this.activeTargetIds=i}static Rs(t,i){const o=JSON.parse(i);let d="object"==typeof o&&o.activeTargetIds instanceof Array,I=Ro();for(let S=0;d&&S<o.activeTargetIds.length;++S)d=On(o.activeTargetIds[S]),I=I.add(o.activeTargetIds[S]);return d?new Ja(t,I):(ve("SharedClientState",`Failed to parse client data for instance '${t}': ${i}`),null)}}class N{constructor(t,i){this.clientId=t,this.onlineState=i}static Rs(t){const i=JSON.parse(t);return"object"==typeof i&&-1!==["Unknown","Online","Offline"].indexOf(i.onlineState)&&"string"==typeof i.clientId?new N(i.clientId,i.onlineState):(ve("SharedClientState",`Failed to parse online state: ${t}`),null)}}class E{constructor(){this.activeTargetIds=Ro()}fs(t){this.activeTargetIds=this.activeTargetIds.add(t)}gs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Vs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class C{constructor(t,i,o,d,I){this.window=t,this.ui=i,this.persistenceKey=o,this.ps=d,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new xn(Jn),this.started=!1,this.bs=[];const S=o.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=I,this.Ds=xh(this.persistenceKey,this.ps),this.vs=`firestore_sequence_number_${this.persistenceKey}`,this.Ss=this.Ss.insert(this.ps,new E),this.Cs=new RegExp(`^firestore_clients_${S}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${S}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${S}_(\\d+)$`),this.xs=`firestore_online_state_${this.persistenceKey}`,this.Os=function(G){return`firestore_bundle_loaded_v2_${G}`}(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(t){return!(!t||!t.localStorage)}start(){var t=this;return(0,b.A)(function*(){const i=yield t.syncEngine.Qi();for(const d of i){if(d===t.ps)continue;const I=t.getItem(xh(t.persistenceKey,d));if(I){const S=Ja.Rs(d,I);S&&(t.Ss=t.Ss.insert(S.clientId,S))}}t.Ns();const o=t.storage.getItem(t.xs);if(o){const d=t.Ls(o);d&&t.Bs(d)}for(const d of t.bs)t.ws(d);t.bs=[],t.window.addEventListener("pagehide",()=>t.shutdown()),t.started=!0})()}writeSequenceNumber(t){this.setItem(this.vs,JSON.stringify(t))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(t){let i=!1;return this.Ss.forEach((o,d)=>{d.activeTargetIds.has(t)&&(i=!0)}),i}addPendingMutation(t){this.qs(t,"pending")}updateMutationState(t,i,o){this.qs(t,i,o),this.Qs(t)}addLocalQueryTarget(t,i=!0){let o="not-current";if(this.isActiveQueryTarget(t)){const d=this.storage.getItem(Ad(this.persistenceKey,t));if(d){const I=kl.Rs(t,d);I&&(o=I.state)}}return i&&this.Ks.fs(t),this.Ns(),o}removeLocalQueryTarget(t){this.Ks.gs(t),this.Ns()}isLocalQueryTarget(t){return this.Ks.activeTargetIds.has(t)}clearQueryState(t){this.removeItem(Ad(this.persistenceKey,t))}updateQueryState(t,i,o){this.$s(t,i,o)}handleUserChange(t,i,o){i.forEach(d=>{this.Qs(d)}),this.currentUser=t,o.forEach(d=>{this.addPendingMutation(d)})}setOnlineState(t){this.Us(t)}notifyBundleLoaded(t){this.Ws(t)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(t){const i=this.storage.getItem(t);return me("SharedClientState","READ",t,i),i}setItem(t,i){me("SharedClientState","SET",t,i),this.storage.setItem(t,i)}removeItem(t){me("SharedClientState","REMOVE",t),this.storage.removeItem(t)}ws(t){var i=this;const o=t;if(o.storageArea===this.storage){if(me("SharedClientState","EVENT",o.key,o.newValue),o.key===this.Ds)return void ve("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable((0,b.A)(function*(){if(i.started){if(null!==o.key)if(i.Cs.test(o.key)){if(null==o.newValue){const d=i.Gs(o.key);return i.zs(d,null)}{const d=i.js(o.key,o.newValue);if(d)return i.zs(d.clientId,d)}}else if(i.Fs.test(o.key)){if(null!==o.newValue){const d=i.Hs(o.key,o.newValue);if(d)return i.Js(d)}}else if(i.Ms.test(o.key)){if(null!==o.newValue){const d=i.Ys(o.key,o.newValue);if(d)return i.Zs(d)}}else if(o.key===i.xs){if(null!==o.newValue){const d=i.Ls(o.newValue);if(d)return i.Bs(d)}}else if(o.key===i.vs){const d=function(S){let U=Oe.oe;if(null!=S)try{const G=JSON.parse(S);Yt("number"==typeof G),U=G}catch(G){ve("SharedClientState","Failed to read sequence number from WebStorage",G)}return U}(o.newValue);d!==Oe.oe&&i.sequenceNumberHandler(d)}else if(o.key===i.Os){const d=i.Xs(o.newValue);yield Promise.all(d.map(I=>i.syncEngine.eo(I)))}}else i.bs.push(o)}))}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(t,i,o){const d=new wu(this.currentUser,t,i,o),I=Nh(this.persistenceKey,this.currentUser,t);this.setItem(I,d.Vs())}Qs(t){const i=Nh(this.persistenceKey,this.currentUser,t);this.removeItem(i)}Us(t){this.storage.setItem(this.xs,JSON.stringify({clientId:this.ps,onlineState:t}))}$s(t,i,o){const d=Ad(this.persistenceKey,t),I=new kl(t,i,o);this.setItem(d,I.Vs())}Ws(t){const i=JSON.stringify(Array.from(t));this.setItem(this.Os,i)}Gs(t){const i=this.Cs.exec(t);return i?i[1]:null}js(t,i){const o=this.Gs(t);return Ja.Rs(o,i)}Hs(t,i){const o=this.Fs.exec(t),d=Number(o[1]);return wu.Rs(new Ke(void 0!==o[2]?o[2]:null),d,i)}Ys(t,i){const o=this.Ms.exec(t),d=Number(o[1]);return kl.Rs(d,i)}Ls(t){return N.Rs(t)}Xs(t){return JSON.parse(t)}Js(t){var i=this;return(0,b.A)(function*(){if(t.user.uid===i.currentUser.uid)return i.syncEngine.no(t.batchId,t.state,t.error);me("SharedClientState",`Ignoring mutation for non-active user ${t.user.uid}`)})()}Zs(t){return this.syncEngine.ro(t.targetId,t.state,t.error)}zs(t,i){const o=i?this.Ss.insert(t,i):this.Ss.remove(t),d=this.ks(this.Ss),I=this.ks(o),S=[],U=[];return I.forEach(G=>{d.has(G)||S.push(G)}),d.forEach(G=>{I.has(G)||U.push(G)}),this.syncEngine.io(S,U).then(()=>{this.Ss=o})}Bs(t){this.Ss.get(t.clientId)&&this.onlineStateHandler(t.onlineState)}ks(t){let i=Ro();return t.forEach((o,d)=>{i=i.unionWith(d.activeTargetIds)}),i}}class B{constructor(){this.so=new E,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,i,o){}addLocalQueryTarget(t,i=!0){return i&&this.so.fs(t),this.oo[t]||"not-current"}updateQueryState(t,i,o){this.oo[t]=i}removeLocalQueryTarget(t){this.so.gs(t)}isLocalQueryTarget(t){return this.so.activeTargetIds.has(t)}clearQueryState(t){delete this.oo[t]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(t){return this.so.activeTargetIds.has(t)}start(){return this.so=new E,Promise.resolve()}handleUserChange(t,i,o){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}class de{_o(t){}shutdown(){}}class Se{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(t){this.ho.push(t)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){me("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.ho)t(0)}lo(){me("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.ho)t(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let It=null;function qt(){return null===It?It=268435456+Math.round(2147483648*Math.random()):It++,"0x"+It.toString(16)}const Fn={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Dr{constructor(t){this.Io=t.Io,this.To=t.To}Eo(t){this.Ao=t}Ro(t){this.Vo=t}mo(t){this.fo=t}onMessage(t){this.po=t}close(){this.To()}send(t){this.Io(t)}yo(){this.Ao()}wo(){this.Vo()}So(t){this.fo(t)}bo(t){this.po(t)}}const Vr="WebChannelConnection";class ui extends class{constructor(i){this.databaseInfo=i,this.databaseId=i.databaseId;const o=i.ssl?"https":"http",d=encodeURIComponent(this.databaseId.projectId),I=encodeURIComponent(this.databaseId.database);this.Do=o+"://"+i.host,this.vo=`projects/${d}/databases/${I}`,this.Co="(default)"===this.databaseId.database?`project_id=${d}`:`project_id=${d}&database_id=${I}`}get Fo(){return!1}Mo(i,o,d,I,S){const U=qt(),G=this.xo(i,o.toUriEncodedString());me("RestConnection",`Sending RPC '${i}' ${U}:`,G,d);const ce={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(ce,I,S),this.No(i,G,ce,d).then(we=>(me("RestConnection",`Received RPC '${i}' ${U}: `,we),we),we=>{throw At("RestConnection",`RPC '${i}' ${U} failed with error: `,we,"url: ",G,"request:",d),we})}Lo(i,o,d,I,S,U){return this.Mo(i,o,d,I,S)}Oo(i,o,d){i["X-Goog-Api-Client"]="gl-js/ fire/"+Qe,i["Content-Type"]="text/plain",this.databaseInfo.appId&&(i["X-Firebase-GMPID"]=this.databaseInfo.appId),o&&o.headers.forEach((I,S)=>i[S]=I),d&&d.headers.forEach((I,S)=>i[S]=I)}xo(i,o){return`${this.Do}/v1/${o}:${Fn[i]}`}terminate(){}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}No(t,i,o,d){const I=qt();return new Promise((S,U)=>{const G=new He;G.setWithCredentials(!0),G.listenOnce(Rt.COMPLETE,()=>{try{switch(G.getLastErrorCode()){case Ft.NO_ERROR:const we=G.getResponseJson();me(Vr,`XHR for RPC '${t}' ${I} received:`,JSON.stringify(we)),S(we);break;case Ft.TIMEOUT:me(Vr,`RPC '${t}' ${I} timed out`),U(new Ye(ye.DEADLINE_EXCEEDED,"Request time out"));break;case Ft.HTTP_ERROR:const ze=G.getStatus();if(me(Vr,`RPC '${t}' ${I} failed with status:`,ze,"response text:",G.getResponseText()),ze>0){let ht=G.getResponseJson();Array.isArray(ht)&&(ht=ht[0]);const nn=ht?.error;if(nn&&nn.status&&nn.message){const Un=function(Zn){const Kr=Zn.toLowerCase().replace(/_/g,"-");return Object.values(ye).indexOf(Kr)>=0?Kr:ye.UNKNOWN}(nn.status);U(new Ye(Un,nn.message))}else U(new Ye(ye.UNKNOWN,"Server responded with status "+G.getStatus()))}else U(new Ye(ye.UNAVAILABLE,"Connection failed."));break;default:Nt()}}finally{me(Vr,`RPC '${t}' ${I} completed.`)}});const ce=JSON.stringify(d);me(Vr,`RPC '${t}' ${I} sending request:`,d),G.send(i,"POST",ce,o,15)})}Bo(t,i,o){const d=qt(),I=[this.Do,"/","google.firestore.v1.Firestore","/",t,"/channel"],S=Et(),U=hn(),G={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},ce=this.longPollingOptions.timeoutSeconds;void 0!==ce&&(G.longPollingTimeout=Math.round(1e3*ce)),this.useFetchStreams&&(G.useFetchStreams=!0),this.Oo(G.initMessageHeaders,i,o),G.encodeInitMessageHeaders=!0;const we=I.join("");me(Vr,`Creating RPC '${t}' stream ${d}: ${we}`,G);const ze=S.createWebChannel(we,G);let ht=!1,nn=!1;const Un=new Dr({Io:Zn=>{nn?me(Vr,`Not sending because RPC '${t}' stream ${d} is closed:`,Zn):(ht||(me(Vr,`Opening RPC '${t}' stream ${d} transport.`),ze.open(),ht=!0),me(Vr,`RPC '${t}' stream ${d} sending:`,Zn),ze.send(Zn))},To:()=>ze.close()}),lr=(Zn,Kr,si)=>{Zn.listen(Kr,Qr=>{try{si(Qr)}catch(ki){setTimeout(()=>{throw ki},0)}})};return lr(ze,tt.EventType.OPEN,()=>{nn||(me(Vr,`RPC '${t}' stream ${d} transport opened.`),Un.yo())}),lr(ze,tt.EventType.CLOSE,()=>{nn||(nn=!0,me(Vr,`RPC '${t}' stream ${d} transport closed`),Un.So())}),lr(ze,tt.EventType.ERROR,Zn=>{nn||(nn=!0,At(Vr,`RPC '${t}' stream ${d} transport errored:`,Zn),Un.So(new Ye(ye.UNAVAILABLE,"The operation could not be completed")))}),lr(ze,tt.EventType.MESSAGE,Zn=>{var Kr;if(!nn){const si=Zn.data[0];Yt(!!si);const ki=si.error||(null===(Kr=si[0])||void 0===Kr?void 0:Kr.error);if(ki){me(Vr,`RPC '${t}' stream ${d} received error:`,ki);const Is=ki.status;let $i=function(Dt){const zt=cr[Dt];if(void 0!==zt)return os(zt)}(Is),Wt=ki.message;void 0===$i&&($i=ye.INTERNAL,Wt="Unknown error status: "+Is+" with message "+ki.message),nn=!0,Un.So(new Ye($i,Wt)),ze.close()}else me(Vr,`RPC '${t}' stream ${d} received:`,si),Un.bo(si)}}),lr(U,Pt.STAT_EVENT,Zn=>{Zn.stat===Gt.PROXY?me(Vr,`RPC '${t}' stream ${d} detected buffering proxy`):Zn.stat===Gt.NOPROXY&&me(Vr,`RPC '${t}' stream ${d} detected no buffering proxy`)}),setTimeout(()=>{Un.wo()},0),Un}}function Xi(){return typeof window<"u"?window:null}function Ls(){return typeof document<"u"?document:null}function vc(u){return new kc(u,!0)}class ec{constructor(t,i,o=1e3,d=1.5,I=6e4){this.ui=t,this.timerId=i,this.ko=o,this.qo=d,this.Qo=I,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(t){this.cancel();const i=Math.floor(this.Ko+this.zo()),o=Math.max(0,Date.now()-this.Uo),d=Math.max(0,i-o);d>0&&me("ExponentialBackoff",`Backing off for ${d} ms (base delay: ${this.Ko} ms, delay with jitter: ${i} ms, last attempt: ${o} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,d,()=>(this.Uo=Date.now(),t())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){null!==this.$o&&(this.$o.skipDelay(),this.$o=null)}cancel(){null!==this.$o&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}class Cu{constructor(t,i,o,d,I,S,U,G){this.ui=t,this.Ho=o,this.Jo=d,this.connection=I,this.authCredentialsProvider=S,this.appCheckCredentialsProvider=U,this.listener=G,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new ec(t,i)}n_(){return 1===this.state||5===this.state||this.r_()}r_(){return 2===this.state||3===this.state}start(){this.e_=0,4!==this.state?this.auth():this.i_()}stop(){var t=this;return(0,b.A)(function*(){t.n_()&&(yield t.close(0))})()}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&null===this.Zo&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(t){this.u_(),this.stream.send(t)}__(){var t=this;return(0,b.A)(function*(){if(t.r_())return t.close(0)})()}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(t,i){var o=this;return(0,b.A)(function*(){o.u_(),o.c_(),o.t_.cancel(),o.Yo++,4!==t?o.t_.reset():i&&i.code===ye.RESOURCE_EXHAUSTED?(ve(i.toString()),ve("Using maximum backoff delay to prevent overloading the backend."),o.t_.Wo()):i&&i.code===ye.UNAUTHENTICATED&&3!==o.state&&(o.authCredentialsProvider.invalidateToken(),o.appCheckCredentialsProvider.invalidateToken()),null!==o.stream&&(o.l_(),o.stream.close(),o.stream=null),o.state=t,yield o.listener.mo(i)})()}l_(){}auth(){this.state=1;const t=this.h_(this.Yo),i=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([o,d])=>{this.Yo===i&&this.P_(o,d)},o=>{t(()=>{const d=new Ye(ye.UNKNOWN,"Fetching auth token failed: "+o.message);return this.I_(d)})})}P_(t,i){const o=this.h_(this.Yo);this.stream=this.T_(t,i),this.stream.Eo(()=>{o(()=>this.listener.Eo())}),this.stream.Ro(()=>{o(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(d=>{o(()=>this.I_(d))}),this.stream.onMessage(d=>{o(()=>1==++this.e_?this.E_(d):this.onNext(d))})}i_(){var t=this;this.state=5,this.t_.Go((0,b.A)(function*(){t.state=0,t.start()}))}I_(t){return me("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}h_(t){return i=>{this.ui.enqueueAndForget(()=>this.Yo===t?i():(me("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Gd extends Cu{constructor(t,i,o,d,I,S){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",i,o,d,S),this.serializer=I}T_(t,i){return this.connection.Bo("Listen",t,i)}E_(t){return this.onNext(t)}onNext(t){this.t_.reset();const i=function xo(u,t){let i;if("targetChange"in t){const o="NO_CHANGE"===(ce=t.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===ce?1:"REMOVE"===ce?2:"CURRENT"===ce?3:"RESET"===ce?4:Nt(),d=t.targetChange.targetIds||[],I=function(ce,we){return ce.useProto3Json?(Yt(void 0===we||"string"==typeof we),bt.fromBase64String(we||"")):(Yt(void 0===we||we instanceof Buffer||we instanceof Uint8Array),bt.fromUint8Array(we||new Uint8Array))}(u,t.targetChange.resumeToken),S=t.targetChange.cause,U=S&&function(ce){const we=void 0===ce.code?ye.UNKNOWN:os(ce.code);return new Ye(we,ce.message||"")}(S);i=new bo(o,d,I,U||null)}else if("documentChange"in t){const o=t.documentChange,d=zr(u,o.document.name),I=bs(o.document.updateTime),S=o.document.createTime?bs(o.document.createTime):qn.min(),U=new ts({mapValue:{fields:o.document.fields}}),G=Fi.newFoundDocument(d,I,S,U);i=new Us(o.targetIds||[],o.removedTargetIds||[],G.key,G)}else if("documentDelete"in t){const o=t.documentDelete,d=zr(u,o.document),I=o.readTime?bs(o.readTime):qn.min(),S=Fi.newNoDocument(d,I);i=new Us([],o.removedTargetIds||[],S.key,S)}else if("documentRemove"in t){const o=t.documentRemove,d=zr(u,o.document);i=new Us([],o.removedTargetIds||[],d,null)}else{if(!("filter"in t))return Nt();{const o=t.filter,{count:d=0,unchangedNames:I}=o,S=new Nn(d,I);i=new Bs(o.targetId,S)}}var ce;return i}(this.serializer,t),o=function(I){if(!("targetChange"in I))return qn.min();const S=I.targetChange;return S.targetIds&&S.targetIds.length?qn.min():S.readTime?bs(S.readTime):qn.min()}(t);return this.listener.d_(i,o)}A_(t){const i={};i.database=ra(this.serializer),i.addTarget=function(I,S){let U;const G=S.target;if(U=nl(G)?{documents:Fc(I,G)}:{query:ms(I,G)._t},U.targetId=S.targetId,S.resumeToken.approximateByteSize()>0){U.resumeToken=Hl(I,S.resumeToken);const ce=fs(I,S.expectedCount);null!==ce&&(U.expectedCount=ce)}else if(S.snapshotVersion.compareTo(qn.min())>0){U.readTime=Ga(I,S.snapshotVersion.toTimestamp());const ce=fs(I,S.expectedCount);null!==ce&&(U.expectedCount=ce)}return U}(this.serializer,t);const o=function bd(u,t){const i=function(d){switch(d){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Nt()}}(t.purpose);return null==i?null:{"goog-listen-tags":i}}(0,t);o&&(i.labels=o),this.a_(i)}R_(t){const i={};i.database=ra(this.serializer),i.removeTarget=t,this.a_(i)}}class wd extends Cu{constructor(t,i,o,d,I,S){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",i,o,d,S),this.serializer=I}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(t,i){return this.connection.Bo("Write",t,i)}E_(t){return Yt(!!t.streamToken),this.lastStreamToken=t.streamToken,Yt(!t.writeResults||0===t.writeResults.length),this.listener.f_()}onNext(t){Yt(!!t.streamToken),this.lastStreamToken=t.streamToken,this.t_.reset();const i=function xa(u,t){return u&&u.length>0?(Yt(void 0!==t),u.map(i=>function(d,I){let S=bs(d.updateTime?d.updateTime:I);return S.isEqual(qn.min())&&(S=bs(I)),new uc(S,d.transformResults||[])}(i,t))):[]}(t.writeResults,t.commitTime),o=bs(t.commitTime);return this.listener.g_(o,i)}p_(){const t={};t.database=ra(this.serializer),this.a_(t)}m_(t){const i={streamToken:this.lastStreamToken,writes:t.map(o=>Qs(this.serializer,o))};this.a_(i)}}class Su extends class{}{constructor(t,i,o,d){super(),this.authCredentials=t,this.appCheckCredentials=i,this.connection=o,this.serializer=d,this.y_=!1}w_(){if(this.y_)throw new Ye(ye.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(t,i,o,d){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([I,S])=>this.connection.Mo(t,Oo(i,o),d,I,S)).catch(I=>{throw"FirebaseError"===I.name?(I.code===ye.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),I):new Ye(ye.UNKNOWN,I.toString())})}Lo(t,i,o,d,I){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([S,U])=>this.connection.Lo(t,Oo(i,o),d,S,U,I)).catch(S=>{throw"FirebaseError"===S.name?(S.code===ye.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),S):new Ye(ye.UNKNOWN,S.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class hd{constructor(t,i){this.asyncQueue=t,this.onlineStateHandler=i,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){0===this.S_&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(t){"Online"===this.state?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.C_("Offline")))}set(t){this.x_(),this.S_=0,"Online"===t&&(this.D_=!1),this.C_(t)}C_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}F_(t){const i=`Could not reach Cloud Firestore backend. ${t}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(ve(i),this.D_=!1):me("OnlineStateTracker",i)}x_(){null!==this.b_&&(this.b_.cancel(),this.b_=null)}}class tu{constructor(t,i,o,d,I){var S=this;this.localStore=t,this.datastore=i,this.asyncQueue=o,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=I,this.k_._o(U=>{o.enqueueAndForget((0,b.A)(function*(){var G;nu(S)&&(me("RemoteStore","Restarting streams for network reachability change."),yield(G=(0,b.A)(function*(we){const ze=$t(we);ze.L_.add(4),yield _l(ze),ze.q_.set("Unknown"),ze.L_.delete(4),yield Ec(ze)}),function ce(we){return G.apply(this,arguments)})(S))}))}),this.q_=new hd(o,d)}}function Ec(u){return Du.apply(this,arguments)}function Du(){return(Du=(0,b.A)(function*(u){if(nu(u))for(const t of u.B_)yield t(!0)})).apply(this,arguments)}function _l(u){return bc.apply(this,arguments)}function bc(){return(bc=(0,b.A)(function*(u){for(const t of u.B_)yield t(!1)})).apply(this,arguments)}function tc(u,t){const i=$t(u);i.N_.has(t.targetId)||(i.N_.set(t.targetId,t),hh(i)?Cd(i):Hr(i).r_()&&$u(i,t))}function ji(u,t){const i=$t(u),o=Hr(i);i.N_.delete(t),o.r_()&&kh(i,t),0===i.N_.size&&(o.r_()?o.o_():nu(i)&&i.q_.set("Unknown"))}function $u(u,t){if(u.Q_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(qn.min())>0){const i=u.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(i)}Hr(u).A_(t)}function kh(u,t){u.Q_.xe(t),Hr(u).R_(t)}function Cd(u){u.Q_=new Es({getRemoteKeysForTarget:t=>u.remoteSyncer.getRemoteKeysForTarget(t),ot:t=>u.N_.get(t)||null,tt:()=>u.datastore.serializer.databaseId}),Hr(u).start(),u.q_.v_()}function hh(u){return nu(u)&&!Hr(u).n_()&&u.N_.size>0}function nu(u){return 0===$t(u).L_.size}function Sd(u){u.Q_=void 0}function qd(u){return Wu.apply(this,arguments)}function Wu(){return(Wu=(0,b.A)(function*(u){u.q_.set("Online")})).apply(this,arguments)}function zu(u){return Ru.apply(this,arguments)}function Ru(){return(Ru=(0,b.A)(function*(u){u.N_.forEach((t,i)=>{$u(u,t)})})).apply(this,arguments)}function cf(u,t){return fh.apply(this,arguments)}function fh(){return(fh=(0,b.A)(function*(u,t){Sd(u),hh(u)?(u.q_.M_(t),Cd(u)):u.q_.set("Unknown")})).apply(this,arguments)}function lf(u,t,i){return uf.apply(this,arguments)}function uf(){return uf=(0,b.A)(function*(u,t,i){if(u.q_.set("Online"),t instanceof bo&&2===t.state&&t.cause)try{yield(o=(0,b.A)(function*(I,S){const U=S.cause;for(const G of S.targetIds)I.N_.has(G)&&(yield I.remoteSyncer.rejectListen(G,U),I.N_.delete(G),I.Q_.removeTarget(G))}),function d(I,S){return o.apply(this,arguments)})(u,t)}catch(o){me("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),o),yield Qd(u,o)}else if(t instanceof Us?u.Q_.Ke(t):t instanceof Bs?u.Q_.He(t):u.Q_.We(t),!i.isEqual(qn.min()))try{const o=yield Fa(u.localStore);i.compareTo(o)>=0&&(yield function(I,S){const U=I.Q_.rt(S);return U.targetChanges.forEach((G,ce)=>{if(G.resumeToken.approximateByteSize()>0){const we=I.N_.get(ce);we&&I.N_.set(ce,we.withResumeToken(G.resumeToken,S))}}),U.targetMismatches.forEach((G,ce)=>{const we=I.N_.get(G);if(!we)return;I.N_.set(G,we.withResumeToken(bt.EMPTY_BYTE_STRING,we.snapshotVersion)),kh(I,G);const ze=new ae(we.target,G,ce,we.sequenceNumber);$u(I,ze)}),I.remoteSyncer.applyRemoteEvent(U)}(u,i))}catch(o){me("RemoteStore","Failed to raise snapshot:",o),yield Qd(u,o)}var o}),uf.apply(this,arguments)}function Qd(u,t,i){return Hu.apply(this,arguments)}function Hu(){return(Hu=(0,b.A)(function*(u,t,i){if(!Te(t))throw t;u.L_.add(1),yield _l(u),u.q_.set("Offline"),i||(i=()=>Fa(u.localStore)),u.asyncQueue.enqueueRetryable((0,b.A)(function*(){me("RemoteStore","Retrying IndexedDB access"),yield i(),u.L_.delete(1),yield Ec(u)}))})).apply(this,arguments)}function Dd(u,t){return t().catch(i=>Qd(u,i,t))}function Ku(u){return df.apply(this,arguments)}function df(){return(df=(0,b.A)(function*(u){const t=$t(u),i=di(t);let o=t.O_.length>0?t.O_[t.O_.length-1].batchId:-1;for(;Bf(t);)try{const d=yield ud(t.localStore,o);if(null===d){0===t.O_.length&&i.o_();break}o=d.batchId,jf(t,d)}catch(d){yield Qd(t,d)}y(t)&&h(t)})).apply(this,arguments)}function Bf(u){return nu(u)&&u.O_.length<10}function jf(u,t){u.O_.push(t);const i=di(u);i.r_()&&i.V_&&i.m_(t.mutations)}function y(u){return nu(u)&&!di(u).n_()&&u.O_.length>0}function h(u){di(u).start()}function f(u){return T.apply(this,arguments)}function T(){return(T=(0,b.A)(function*(u){di(u).p_()})).apply(this,arguments)}function V(u){return Z.apply(this,arguments)}function Z(){return(Z=(0,b.A)(function*(u){const t=di(u);for(const i of u.O_)t.m_(i.mutations)})).apply(this,arguments)}function se(u,t,i){return Me.apply(this,arguments)}function Me(){return(Me=(0,b.A)(function*(u,t,i){const o=u.O_.shift(),d=ue.from(o,t,i);yield Dd(u,()=>u.remoteSyncer.applySuccessfulWrite(d)),yield Ku(u)})).apply(this,arguments)}function Je(u,t){return pt.apply(this,arguments)}function pt(){return pt=(0,b.A)(function*(u,t){var i;t&&di(u).V_&&(yield(i=(0,b.A)(function*(d,I){if(Bi(U=I.code)&&U!==ye.ABORTED){const S=d.O_.shift();di(d).s_(),yield Dd(d,()=>d.remoteSyncer.rejectFailedWrite(S.batchId,I)),yield Ku(d)}var U}),function o(d,I){return i.apply(this,arguments)})(u,t)),y(u)&&h(u)}),pt.apply(this,arguments)}function _n(u,t){return Tn.apply(this,arguments)}function Tn(){return(Tn=(0,b.A)(function*(u,t){const i=$t(u);i.asyncQueue.verifyOperationInProgress(),me("RemoteStore","RemoteStore received new credentials");const o=nu(i);i.L_.add(3),yield _l(i),o&&i.q_.set("Unknown"),yield i.remoteSyncer.handleCredentialChange(t),i.L_.delete(3),yield Ec(i)})).apply(this,arguments)}function Ln(u,t){return Ir.apply(this,arguments)}function Ir(){return(Ir=(0,b.A)(function*(u,t){const i=$t(u);t?(i.L_.delete(2),yield Ec(i)):t||(i.L_.add(2),yield _l(i),i.q_.set("Unknown"))})).apply(this,arguments)}function Hr(u){return u.K_||(u.K_=function(i,o,d){const I=$t(i);return I.w_(),new Gd(o,I.connection,I.authCredentials,I.appCheckCredentials,I.serializer,d)}(u.datastore,u.asyncQueue,{Eo:qd.bind(null,u),Ro:zu.bind(null,u),mo:cf.bind(null,u),d_:lf.bind(null,u)}),u.B_.push(function(){var t=(0,b.A)(function*(i){i?(u.K_.s_(),hh(u)?Cd(u):u.q_.set("Unknown")):(yield u.K_.stop(),Sd(u))});return function(i){return t.apply(this,arguments)}}())),u.K_}function di(u){return u.U_||(u.U_=function(i,o,d){const I=$t(i);return I.w_(),new wd(o,I.connection,I.authCredentials,I.appCheckCredentials,I.serializer,d)}(u.datastore,u.asyncQueue,{Eo:()=>Promise.resolve(),Ro:f.bind(null,u),mo:Je.bind(null,u),f_:V.bind(null,u),g_:se.bind(null,u)}),u.B_.push(function(){var t=(0,b.A)(function*(i){i?(u.U_.s_(),yield Ku(u)):(yield u.U_.stop(),u.O_.length>0&&(me("RemoteStore",`Stopping write stream with ${u.O_.length} pending writes`),u.O_=[]))});return function(i){return t.apply(this,arguments)}}())),u.U_}class To{constructor(t,i,o,d,I){this.asyncQueue=t,this.timerId=i,this.targetTimeMs=o,this.op=d,this.removalCallback=I,this.deferred=new Ht,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(S=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,i,o,d,I){const S=Date.now()+o,U=new To(t,i,S,d,I);return U.start(o),U}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ye(ye.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function aa(u,t){if(ve("AsyncQueue",`${t}: ${u}`),Te(u))return new Ye(ye.UNAVAILABLE,`${t}: ${u}`);throw u}class Qc{constructor(t){this.comparator=t?(i,o)=>t(i,o)||je.comparator(i.key,o.key):(i,o)=>je.comparator(i.key,o.key),this.keyedMap=ri(),this.sortedSet=new xn(this.comparator)}static emptySet(t){return new Qc(t.comparator)}has(t){return null!=this.keyedMap.get(t)}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const i=this.keyedMap.get(t);return i?this.sortedSet.indexOf(i):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((i,o)=>(t(i),!1))}add(t){const i=this.delete(t.key);return i.copy(i.keyedMap.insert(t.key,t),i.sortedSet.insert(t,null))}delete(t){const i=this.get(t);return i?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(i)):this}isEqual(t){if(!(t instanceof Qc)||this.size!==t.size)return!1;const i=this.sortedSet.getIterator(),o=t.sortedSet.getIterator();for(;i.hasNext();){const d=i.getNext().key,I=o.getNext().key;if(!d.isEqual(I))return!1}return!0}toString(){const t=[];return this.forEach(i=>{t.push(i.toString())}),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"}copy(t,i){const o=new Qc;return o.comparator=this.comparator,o.keyedMap=t,o.sortedSet=i,o}}class ho{constructor(){this.W_=new xn(je.comparator)}track(t){const i=t.doc.key,o=this.W_.get(i);o?0!==t.type&&3===o.type?this.W_=this.W_.insert(i,t):3===t.type&&1!==o.type?this.W_=this.W_.insert(i,{type:o.type,doc:t.doc}):2===t.type&&2===o.type?this.W_=this.W_.insert(i,{type:2,doc:t.doc}):2===t.type&&0===o.type?this.W_=this.W_.insert(i,{type:0,doc:t.doc}):1===t.type&&0===o.type?this.W_=this.W_.remove(i):1===t.type&&2===o.type?this.W_=this.W_.insert(i,{type:1,doc:o.doc}):0===t.type&&1===o.type?this.W_=this.W_.insert(i,{type:2,doc:t.doc}):Nt():this.W_=this.W_.insert(i,t)}G_(){const t=[];return this.W_.inorderTraversal((i,o)=>{t.push(o)}),t}}class Ll{constructor(t,i,o,d,I,S,U,G,ce){this.query=t,this.docs=i,this.oldDocs=o,this.docChanges=d,this.mutatedKeys=I,this.fromCache=S,this.syncStateChanged=U,this.excludesMetadataChanges=G,this.hasCachedResults=ce}static fromInitialDocuments(t,i,o,d,I){const S=[];return i.forEach(U=>{S.push({type:0,doc:U})}),new Ll(t,i,Qc.emptySet(i),S,o,d,!0,!1,I)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&co(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const i=this.docChanges,o=t.docChanges;if(i.length!==o.length)return!1;for(let d=0;d<i.length;d++)if(i[d].type!==o[d].type||!i[d].doc.isEqual(o[d].doc))return!1;return!0}}class hf{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(t=>t.J_())}}class ff{constructor(){this.queries=Pu(),this.onlineState="Unknown",this.Y_=new Set}terminate(){!function(i,o){const d=$t(i),I=d.queries;d.queries=Pu(),I.forEach((S,U)=>{for(const G of U.j_)G.onError(o)})}(this,new Ye(ye.ABORTED,"Firestore shutting down"))}}function Pu(){return new Zo(u=>Mc(u),co)}function ph(u,t){return mh.apply(this,arguments)}function mh(){return(mh=(0,b.A)(function*(u,t){const i=$t(u);let o=3;const d=t.query;let I=i.queries.get(d);I?!I.H_()&&t.J_()&&(o=2):(I=new hf,o=t.J_()?0:1);try{switch(o){case 0:I.z_=yield i.onListen(d,!0);break;case 1:I.z_=yield i.onListen(d,!1);break;case 2:yield i.onFirstRemoteStoreListen(d)}}catch(S){const U=aa(S,`Initialization of query '${ma(t.query)}' failed`);return void t.onError(U)}i.queries.set(d,I),I.j_.push(t),t.Z_(i.onlineState),I.z_&&t.X_(I.z_)&&g(i)})).apply(this,arguments)}function Yd(u,t){return yl.apply(this,arguments)}function yl(){return(yl=(0,b.A)(function*(u,t){const i=$t(u),o=t.query;let d=3;const I=i.queries.get(o);if(I){const S=I.j_.indexOf(t);S>=0&&(I.j_.splice(S,1),0===I.j_.length?d=t.J_()?0:1:!I.H_()&&t.J_()&&(d=2))}switch(d){case 0:return i.queries.delete(o),i.onUnlisten(o,!0);case 1:return i.queries.delete(o),i.onUnlisten(o,!1);case 2:return i.onLastRemoteStoreUnlisten(o);default:return}})).apply(this,arguments)}function Tp(u,t){const i=$t(u);let o=!1;for(const d of t){const S=i.queries.get(d.query);if(S){for(const U of S.j_)U.X_(d)&&(o=!0);S.z_=d}}o&&g(i)}function D(u,t,i){const o=$t(u),d=o.queries.get(t);if(d)for(const I of d.j_)I.onError(i);o.queries.delete(t)}function g(u){u.Y_.forEach(t=>{t.next()})}var v,M;(M=v||(v={})).ea="default",M.Cache="cache";class te{constructor(t,i,o){this.query=t,this.ta=i,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=o||{}}X_(t){if(!this.options.includeMetadataChanges){const o=[];for(const d of t.docChanges)3!==d.type&&o.push(d);t=new Ll(t.query,t.docs,t.oldDocs,o,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let i=!1;return this.na?this.ia(t)&&(this.ta.next(t),i=!0):this.sa(t,this.onlineState)&&(this.oa(t),i=!0),this.ra=t,i}onError(t){this.ta.error(t)}Z_(t){this.onlineState=t;let i=!1;return this.ra&&!this.na&&this.sa(this.ra,t)&&(this.oa(this.ra),i=!0),i}sa(t,i){return!t.fromCache||!this.J_()||(!this.options._a||!("Offline"!==i))&&(!t.docs.isEmpty()||t.hasCachedResults||"Offline"===i)}ia(t){return t.docChanges.length>0||!!(t.syncStateChanged||this.ra&&this.ra.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges}oa(t){t=Ll.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.na=!0,this.ta.next(t)}J_(){return this.options.source!==v.Cache}}class be{constructor(t,i){this.aa=t,this.byteLength=i}ua(){return"metadata"in this.aa}}class at{constructor(t){this.serializer=t}Es(t){return zr(this.serializer,t)}ds(t){return t.metadata.exists?ps(this.serializer,t.document,!1):Fi.newNoDocument(this.Es(t.metadata.name),this.As(t.metadata.readTime))}As(t){return bs(t)}}class Bt{constructor(t,i,o){this.ca=t,this.localStore=i,this.serializer=o,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=vn(t)}la(t){this.progress.bytesLoaded+=t.byteLength;let i=this.progress.documentsLoaded;if(t.aa.namedQuery)this.queries.push(t.aa.namedQuery);else if(t.aa.documentMetadata){this.documents.push({metadata:t.aa.documentMetadata}),t.aa.documentMetadata.exists||++i;const o=st.fromString(t.aa.documentMetadata.name);this.collectionGroups.add(o.get(o.length-2))}else t.aa.document&&(this.documents[this.documents.length-1].document=t.aa.document,++i);return i!==this.progress.documentsLoaded?(this.progress.documentsLoaded=i,Object.assign({},this.progress)):null}ha(t){const i=new Map,o=new at(this.serializer);for(const d of t)if(d.metadata.queries){const I=o.Es(d.metadata.name);for(const S of d.metadata.queries){const U=(i.get(S)||ci()).add(I);i.set(S,U)}}return i}complete(){var t=this;return(0,b.A)(function*(){const i=yield function Tu(u,t,i,o){return gl.apply(this,arguments)}(t.localStore,new at(t.serializer),t.documents,t.ca.id),o=t.ha(t.documents);for(const d of t.queries)yield Au(t.localStore,d,o.get(d.name));return t.progress.taskState="Success",{progress:t.progress,Pa:t.collectionGroups,Ia:i}})()}}function vn(u){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:u.totalDocuments,totalBytes:u.totalBytes}}class Tr{constructor(t){this.key=t}}class Mr{constructor(t){this.key=t}}class br{constructor(t,i){this.query=t,this.Ta=i,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ci(),this.mutatedKeys=ci(),this.Aa=vo(t),this.Ra=new Qc(this.Aa)}get Va(){return this.Ta}ma(t,i){const o=i?i.fa:new ho,d=i?i.Ra:this.Ra;let I=i?i.mutatedKeys:this.mutatedKeys,S=d,U=!1;const G="F"===this.query.limitType&&d.size===this.query.limit?d.last():null,ce="L"===this.query.limitType&&d.size===this.query.limit?d.first():null;if(t.inorderTraversal((we,ze)=>{const ht=d.get(we),nn=ga(this.query,ze)?ze:null,Un=!!ht&&this.mutatedKeys.has(ht.key),lr=!!nn&&(nn.hasLocalMutations||this.mutatedKeys.has(nn.key)&&nn.hasCommittedMutations);let Zn=!1;ht&&nn?ht.data.isEqual(nn.data)?Un!==lr&&(o.track({type:3,doc:nn}),Zn=!0):this.ga(ht,nn)||(o.track({type:2,doc:nn}),Zn=!0,(G&&this.Aa(nn,G)>0||ce&&this.Aa(nn,ce)<0)&&(U=!0)):!ht&&nn?(o.track({type:0,doc:nn}),Zn=!0):ht&&!nn&&(o.track({type:1,doc:ht}),Zn=!0,(G||ce)&&(U=!0)),Zn&&(nn?(S=S.add(nn),I=lr?I.add(we):I.delete(we)):(S=S.delete(we),I=I.delete(we)))}),null!==this.query.limit)for(;S.size>this.query.limit;){const we="F"===this.query.limitType?S.last():S.first();S=S.delete(we.key),I=I.delete(we.key),o.track({type:1,doc:we})}return{Ra:S,fa:o,ns:U,mutatedKeys:I}}ga(t,i){return t.hasLocalMutations&&i.hasCommittedMutations&&!i.hasLocalMutations}applyChanges(t,i,o,d){const I=this.Ra;this.Ra=t.Ra,this.mutatedKeys=t.mutatedKeys;const S=t.fa.G_();S.sort((we,ze)=>function(nn,Un){const lr=Zn=>{switch(Zn){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Nt()}};return lr(nn)-lr(Un)}(we.type,ze.type)||this.Aa(we.doc,ze.doc)),this.pa(o),d=null!=d&&d;const U=i&&!d?this.ya():[],G=0===this.da.size&&this.current&&!d?1:0,ce=G!==this.Ea;return this.Ea=G,0!==S.length||ce?{snapshot:new Ll(this.query,t.Ra,I,S,t.mutatedKeys,0===G,ce,!1,!!o&&o.resumeToken.approximateByteSize()>0),wa:U}:{wa:U}}Z_(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new ho,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(t){return!this.Ta.has(t)&&!!this.Ra.has(t)&&!this.Ra.get(t).hasLocalMutations}pa(t){t&&(t.addedDocuments.forEach(i=>this.Ta=this.Ta.add(i)),t.modifiedDocuments.forEach(i=>{}),t.removedDocuments.forEach(i=>this.Ta=this.Ta.delete(i)),this.current=t.current)}ya(){if(!this.current)return[];const t=this.da;this.da=ci(),this.Ra.forEach(o=>{this.Sa(o.key)&&(this.da=this.da.add(o.key))});const i=[];return t.forEach(o=>{this.da.has(o)||i.push(new Mr(o))}),this.da.forEach(o=>{t.has(o)||i.push(new Tr(o))}),i}ba(t){this.Ta=t.Ts,this.da=ci();const i=this.ma(t.documents);return this.applyChanges(i,!0)}Da(){return Ll.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,0===this.Ea,this.hasCachedResults)}}class Zi{constructor(t,i,o){this.query=t,this.targetId=i,this.view=o}}class Ic{constructor(t){this.key=t,this.va=!1}}class No{constructor(t,i,o,d,I,S){this.localStore=t,this.remoteStore=i,this.eventManager=o,this.sharedClientState=d,this.currentUser=I,this.maxConcurrentLimboResolutions=S,this.Ca={},this.Fa=new Zo(U=>Mc(U),co),this.Ma=new Map,this.xa=new Set,this.Oa=new xn(je.comparator),this.Na=new Map,this.La=new Hd,this.Ba={},this.ka=new Map,this.qa=Aa.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return!0===this.Qa}}function Gu(u,t){return Rd.apply(this,arguments)}function Rd(){return(Rd=(0,b.A)(function*(u,t,i=!0){const o=Vh(u);let d;const I=o.Fa.get(t);return I?(o.sharedClientState.addLocalQueryTarget(I.targetId),d=I.view.Da()):d=yield Xd(o,t,i,!0),d})).apply(this,arguments)}function $f(u,t){return pf.apply(this,arguments)}function pf(){return(pf=(0,b.A)(function*(u,t){const i=Vh(u);yield Xd(i,t,!0,!1)})).apply(this,arguments)}function Xd(u,t,i,o){return fd.apply(this,arguments)}function fd(){return(fd=(0,b.A)(function*(u,t,i,o){const d=yield Za(u.localStore,Cs(t)),I=d.targetId,S=u.sharedClientState.addLocalQueryTarget(I,i);let U;return o&&(U=yield nc(u,t,I,"current"===S,d.resumeToken)),u.isPrimaryClient&&i&&tc(u.remoteStore,d),U})).apply(this,arguments)}function nc(u,t,i,o,d){return vl.apply(this,arguments)}function vl(){return vl=(0,b.A)(function*(u,t,i,o,d){u.Ka=(ze,ht,nn)=>{return(Un=(0,b.A)(function*(Zn,Kr,si,Qr){let ki=Kr.view.ma(si);ki.ns&&(ki=yield Jl(Zn.localStore,Kr.query,!1).then(({documents:dt})=>Kr.view.ma(dt,ki)));const Is=Qr&&Qr.targetChanges.get(Kr.targetId),$i=Qr&&null!=Qr.targetMismatches.get(Kr.targetId),Wt=Kr.view.applyChanges(ki,Zn.isPrimaryClient,Is,$i);return wp(Zn,Kr.targetId,Wt.wa),Wt.snapshot}),function lr(Zn,Kr,si,Qr){return Un.apply(this,arguments)})(u,ze,ht,nn);var Un};const I=yield Jl(u.localStore,t,!0),S=new br(t,I.Ts),U=S.ma(I.documents),G=Ti.createSynthesizedTargetChangeForCurrentChange(i,o&&"Offline"!==u.onlineState,d),ce=S.applyChanges(U,u.isPrimaryClient,G);wp(u,i,ce.wa);const we=new Zi(t,i,S);return u.Fa.set(t,we),u.Ma.has(i)?u.Ma.get(i).push(t):u.Ma.set(i,[t]),ce.snapshot}),vl.apply(this,arguments)}function Lh(u,t,i){return Wf.apply(this,arguments)}function Wf(){return(Wf=(0,b.A)(function*(u,t,i){const o=$t(u),d=o.Fa.get(t),I=o.Ma.get(d.targetId);if(I.length>1)return o.Ma.set(d.targetId,I.filter(S=>!co(S,t))),void o.Fa.delete(t);o.isPrimaryClient?(o.sharedClientState.removeLocalQueryTarget(d.targetId),o.sharedClientState.isActiveQueryTarget(d.targetId)||(yield Nl(o.localStore,d.targetId,!1).then(()=>{o.sharedClientState.clearQueryState(d.targetId),i&&ji(o.remoteStore,d.targetId),Fh(o,d.targetId)}).catch(Yr))):(Fh(o,d.targetId),yield Nl(o.localStore,d.targetId,!0))})).apply(this,arguments)}function zf(u,t){return mf.apply(this,arguments)}function mf(){return(mf=(0,b.A)(function*(u,t){const i=$t(u),o=i.Fa.get(t),d=i.Ma.get(o.targetId);i.isPrimaryClient&&1===d.length&&(i.sharedClientState.removeLocalQueryTarget(o.targetId),ji(i.remoteStore,o.targetId))})).apply(this,arguments)}function xr(){return(xr=(0,b.A)(function*(u,t,i){const o=yh(u);try{const d=yield function(S,U){const G=$t(S),ce=$n.now(),we=U.reduce((nn,Un)=>nn.add(Un.key),ci());let ze,ht;return G.persistence.runTransaction("Locally write mutations","readwrite",nn=>{let Un=hs(),lr=ci();return G.cs.getEntries(nn,we).next(Zn=>{Un=Zn,Un.forEach((Kr,si)=>{si.isValidDocument()||(lr=lr.add(Kr))})}).next(()=>G.localDocuments.getOverlayedDocuments(nn,Un)).next(Zn=>{ze=Zn;const Kr=[];for(const si of U){const Qr=Al(si,ze.get(si.key).overlayedDocument);null!=Qr&&Kr.push(new Eo(si.key,Qr,ha(Qr.value.mapValue),Oi.exists(!0)))}return G.mutationQueue.addMutationBatch(nn,ce,Kr,U)}).next(Zn=>{ht=Zn;const Kr=Zn.applyToLocalDocumentSet(ze,lr);return G.documentOverlayCache.saveOverlays(nn,Zn.batchId,Kr)})}).then(()=>({batchId:ht.batchId,changes:Ui(ze)}))}(o.localStore,t);o.sharedClientState.addPendingMutation(d.batchId),function(S,U,G){let ce=S.Ba[S.currentUser.toKey()];ce||(ce=new xn(Jn)),ce=ce.insert(U,G),S.Ba[S.currentUser.toKey()]=ce}(o,d.batchId,i),yield Od(o,d.changes),yield Ku(o.remoteStore)}catch(d){const I=aa(d,"Failed to persist write");i.reject(I)}})).apply(this,arguments)}function wm(u,t){return Ap.apply(this,arguments)}function Ap(){return(Ap=(0,b.A)(function*(u,t){const i=$t(u);try{const o=yield function Kd(u,t){const i=$t(u),o=t.snapshotVersion;let d=i.os;return i.persistence.runTransaction("Apply remote event","readwrite-primary",I=>{const S=i.cs.newChangeBuffer({trackRemovals:!0});d=i.os;const U=[];t.targetChanges.forEach((we,ze)=>{const ht=d.get(ze);if(!ht)return;U.push(i.Ur.removeMatchingKeys(I,we.removedDocuments,ze).next(()=>i.Ur.addMatchingKeys(I,we.addedDocuments,ze)));let nn=ht.withSequenceNumber(I.currentSequenceNumber);var lr,Zn,Kr;null!==t.targetMismatches.get(ze)?nn=nn.withResumeToken(bt.EMPTY_BYTE_STRING,qn.min()).withLastLimboFreeSnapshotVersion(qn.min()):we.resumeToken.approximateByteSize()>0&&(nn=nn.withResumeToken(we.resumeToken,o)),d=d.insert(ze,nn),Zn=nn,Kr=we,(0===(lr=ht).resumeToken.approximateByteSize()||Zn.snapshotVersion.toMicroseconds()-lr.snapshotVersion.toMicroseconds()>=3e8||Kr.addedDocuments.size+Kr.modifiedDocuments.size+Kr.removedDocuments.size>0)&&U.push(i.Ur.updateTargetData(I,nn))});let G=hs(),ce=ci();if(t.documentUpdates.forEach(we=>{t.resolvedLimboDocuments.has(we)&&U.push(i.persistence.referenceDelegate.updateLimboDocument(I,we))}),U.push(Kc(I,S,t.documentUpdates).next(we=>{G=we.Ps,ce=we.Is})),!o.isEqual(qn.min())){const we=i.Ur.getLastRemoteSnapshotVersion(I).next(ze=>i.Ur.setTargetsMetadata(I,I.currentSequenceNumber,o));U.push(we)}return xt.waitFor(U).next(()=>S.apply(I)).next(()=>i.localDocuments.getLocalViewOfDocuments(I,G,ce)).next(()=>G)}).then(I=>(i.os=d,I))}(i.localStore,t);t.targetChanges.forEach((d,I)=>{const S=i.Na.get(I);S&&(Yt(d.addedDocuments.size+d.modifiedDocuments.size+d.removedDocuments.size<=1),d.addedDocuments.size>0?S.va=!0:d.modifiedDocuments.size>0?Yt(S.va):d.removedDocuments.size>0&&(Yt(S.va),S.va=!1))}),yield Od(i,o,t)}catch(o){yield Yr(o)}})).apply(this,arguments)}function Hf(u,t,i){const o=$t(u);if(o.isPrimaryClient&&0===i||!o.isPrimaryClient&&1===i){const d=[];o.Fa.forEach((I,S)=>{const U=S.view.Z_(t);U.snapshot&&d.push(U.snapshot)}),function(S,U){const G=$t(S);G.onlineState=U;let ce=!1;G.queries.forEach((we,ze)=>{for(const ht of ze.j_)ht.Z_(U)&&(ce=!0)}),ce&&g(G)}(o.eventManager,t),d.length&&o.Ca.d_(d),o.onlineState=t,o.isPrimaryClient&&o.sharedClientState.setOnlineState(t)}}function Ei(u,t,i){return ro.apply(this,arguments)}function ro(){return(ro=(0,b.A)(function*(u,t,i){const o=$t(u);o.sharedClientState.updateQueryState(t,"rejected",i);const d=o.Na.get(t),I=d&&d.key;if(I){let S=new xn(je.comparator);S=S.insert(I,Fi.newNoDocument(I,qn.min()));const U=ci().add(I),G=new Er(qn.min(),new Map,new xn(Jn),S,U);yield wm(o,G),o.Oa=o.Oa.remove(I),o.Na.delete(t),Cp(o)}else yield Nl(o.localStore,t,!1).then(()=>Fh(o,t,i)).catch(Yr)})).apply(this,arguments)}function Pd(u,t){return Kf.apply(this,arguments)}function Kf(){return(Kf=(0,b.A)(function*(u,t){const i=$t(u),o=t.batch.batchId;try{const d=yield function Xa(u,t){const i=$t(u);return i.persistence.runTransaction("Acknowledge batch","readwrite-primary",o=>{const d=t.batch.keys(),I=i.cs.newChangeBuffer({trackRemovals:!0});return function(U,G,ce,we){const ze=ce.batch,ht=ze.keys();let nn=xt.resolve();return ht.forEach(Un=>{nn=nn.next(()=>we.getEntry(G,Un)).next(lr=>{const Zn=ce.docVersions.get(Un);Yt(null!==Zn),lr.version.compareTo(Zn)<0&&(ze.applyToRemoteDocument(lr,ce),lr.isValidDocument()&&(lr.setReadTime(ce.commitVersion),we.addEntry(lr)))})}),nn.next(()=>U.mutationQueue.removeMutationBatch(G,ze))}(i,o,t,I).next(()=>I.apply(o)).next(()=>i.mutationQueue.performConsistencyCheck(o)).next(()=>i.documentOverlayCache.removeOverlaysForBatchId(o,d,t.batch.batchId)).next(()=>i.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(o,function(U){let G=ci();for(let ce=0;ce<U.mutationResults.length;++ce)U.mutationResults[ce].transformResults.length>0&&(G=G.add(U.batch.mutations[ce].key));return G}(t))).next(()=>i.localDocuments.getDocuments(o,d))})}(i.localStore,t);Rm(i,o,null),Dm(i,o),i.sharedClientState.updateMutationState(o,"acknowledged"),yield Od(i,d)}catch(d){yield Yr(d)}})).apply(this,arguments)}function ty(u,t,i){return Cm.apply(this,arguments)}function Cm(){return(Cm=(0,b.A)(function*(u,t,i){const o=$t(u);try{const d=yield function(S,U){const G=$t(S);return G.persistence.runTransaction("Reject batch","readwrite-primary",ce=>{let we;return G.mutationQueue.lookupMutationBatch(ce,U).next(ze=>(Yt(null!==ze),we=ze.keys(),G.mutationQueue.removeMutationBatch(ce,ze))).next(()=>G.mutationQueue.performConsistencyCheck(ce)).next(()=>G.documentOverlayCache.removeOverlaysForBatchId(ce,we,U)).next(()=>G.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(ce,we)).next(()=>G.localDocuments.getDocuments(ce,we))})}(o.localStore,t);Rm(o,t,i),Dm(o,t),o.sharedClientState.updateMutationState(t,"rejected",i),yield Od(o,d)}catch(d){yield Yr(d)}})).apply(this,arguments)}function Sm(){return(Sm=(0,b.A)(function*(u,t){const i=$t(u);nu(i.remoteStore)||me("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const o=yield function(S){const U=$t(S);return U.persistence.runTransaction("Get highest unacknowledged batch id","readonly",G=>U.mutationQueue.getHighestUnacknowledgedBatchId(G))}(i.localStore);if(-1===o)return void t.resolve();const d=i.ka.get(o)||[];d.push(t),i.ka.set(o,d)}catch(o){const d=aa(o,"Initialization of waitForPendingWrites() operation failed");t.reject(d)}})).apply(this,arguments)}function Dm(u,t){(u.ka.get(t)||[]).forEach(i=>{i.resolve()}),u.ka.delete(t)}function Rm(u,t,i){const o=$t(u);let d=o.Ba[o.currentUser.toKey()];if(d){const I=d.get(t);I&&(i?I.reject(i):I.resolve(),d=d.remove(t)),o.Ba[o.currentUser.toKey()]=d}}function Fh(u,t,i=null){u.sharedClientState.removeLocalQueryTarget(t);for(const o of u.Ma.get(t))u.Fa.delete(o),i&&u.Ca.$a(o,i);u.Ma.delete(t),u.isPrimaryClient&&u.La.gr(t).forEach(o=>{u.La.containsKey(o)||Md(u,o)})}function Md(u,t){u.xa.delete(t.path.canonicalString());const i=u.Oa.get(t);null!==i&&(ji(u.remoteStore,i),u.Oa=u.Oa.remove(t),u.Na.delete(i),Cp(u))}function wp(u,t,i){for(const o of i)o instanceof Tr?(u.La.addReference(o.key,t),gv(u,o)):o instanceof Mr?(me("SyncEngine","Document no longer in limbo: "+o.key),u.La.removeReference(o.key,t),u.La.containsKey(o.key)||Md(u,o.key)):Nt()}function gv(u,t){const i=t.key,o=i.path.canonicalString();u.Oa.get(i)||u.xa.has(o)||(me("SyncEngine","New document in limbo: "+i),u.xa.add(o),Cp(u))}function Cp(u){for(;u.xa.size>0&&u.Oa.size<u.maxConcurrentLimboResolutions;){const t=u.xa.values().next().value;u.xa.delete(t);const i=new je(st.fromString(t)),o=u.qa.next();u.Na.set(o,new Ic(i)),u.Oa=u.Oa.insert(i,o),tc(u.remoteStore,new ae(Cs(ao(i.path)),o,"TargetPurposeLimboResolution",Oe.oe))}}function Od(u,t,i){return Gf.apply(this,arguments)}function Gf(){return Gf=(0,b.A)(function*(u,t,i){const o=$t(u),d=[],I=[],S=[];var U;o.Fa.isEmpty()||(o.Fa.forEach((U,G)=>{S.push(o.Ka(G,t,i).then(ce=>{var we;if((ce||i)&&o.isPrimaryClient){const ze=ce?!ce.fromCache:null===(we=i?.targetChanges.get(G.targetId))||void 0===we?void 0:we.current;o.sharedClientState.updateQueryState(G.targetId,ze?"current":"not-current")}if(ce){d.push(ce);const ze=cs.Wi(G.targetId,ce);I.push(ze)}}))}),yield Promise.all(S),o.Ca.d_(d),yield(U=(0,b.A)(function*(ce,we){const ze=$t(ce);try{yield ze.persistence.runTransaction("notifyLocalViewChanges","readwrite",ht=>xt.forEach(we,nn=>xt.forEach(nn.$i,Un=>ze.persistence.referenceDelegate.addReference(ht,nn.targetId,Un)).next(()=>xt.forEach(nn.Ui,Un=>ze.persistence.referenceDelegate.removeReference(ht,nn.targetId,Un)))))}catch(ht){if(!Te(ht))throw ht;me("LocalStore","Failed to update sequence numbers: "+ht)}for(const ht of we){const nn=ht.targetId;if(!ht.fromCache){const Un=ze.os.get(nn),Zn=Un.withLastLimboFreeSnapshotVersion(Un.snapshotVersion);ze.os=ze.os.insert(nn,Zn)}}}),function G(ce,we){return U.apply(this,arguments)})(o.localStore,I))}),Gf.apply(this,arguments)}function Sp(u,t){return ru.apply(this,arguments)}function ru(){return(ru=(0,b.A)(function*(u,t){const i=$t(u);if(!i.currentUser.isEqual(t)){me("SyncEngine","User change. New user:",t.toKey());const o=yield xl(i.localStore,t);i.currentUser=t,(I=i).ka.forEach(U=>{U.forEach(G=>{G.reject(new Ye(ye.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),I.ka.clear(),i.sharedClientState.handleUserChange(t,o.removedBatchIds,o.addedBatchIds),yield Od(i,o.hs)}var I})).apply(this,arguments)}function xg(u,t){const i=$t(u),o=i.Na.get(t);if(o&&o.va)return ci().add(o.key);{let d=ci();const I=i.Ma.get(t);if(!I)return d;for(const S of I){const U=i.Fa.get(S);d=d.unionWith(U.view.Va)}return d}}function _v(u,t){return qf.apply(this,arguments)}function qf(){return(qf=(0,b.A)(function*(u,t){const i=$t(u),o=yield Jl(i.localStore,t.query,!0),d=t.view.ba(o);return i.isPrimaryClient&&wp(i,t.targetId,d.wa),d})).apply(this,arguments)}function Dp(u,t){return Ng.apply(this,arguments)}function Ng(){return(Ng=(0,b.A)(function*(u,t){const i=$t(u);return Gc(i.localStore,t).then(o=>Od(i,o))})).apply(this,arguments)}function Pm(u,t,i,o){return Qf.apply(this,arguments)}function Qf(){return(Qf=(0,b.A)(function*(u,t,i,o){const d=$t(u),I=yield function(U,G){const ce=$t(U),we=$t(ce.mutationQueue);return ce.persistence.runTransaction("Lookup mutation documents","readonly",ze=>we.Mn(ze,G).next(ht=>ht?ce.localDocuments.getDocuments(ze,ht):xt.resolve(null)))}(d.localStore,t);var G;null!==I?("pending"===i?yield Ku(d.remoteStore):"acknowledged"===i||"rejected"===i?(Rm(d,t,o||null),Dm(d,t),G=t,$t($t(d.localStore).mutationQueue).On(G)):Nt(),yield Od(d,I)):me("SyncEngine","Cannot apply mutation batch with id: "+t)})).apply(this,arguments)}function Mm(){return(Mm=(0,b.A)(function*(u,t){const i=$t(u);if(Vh(i),yh(i),!0===t&&!0!==i.Qa){const o=i.sharedClientState.getAllActiveQueryTargets(),d=yield kg(i,o.toArray());i.Qa=!0,yield Ln(i.remoteStore,!0);for(const I of d)tc(i.remoteStore,I)}else if(!1===t&&!1!==i.Qa){const o=[];let d=Promise.resolve();i.Ma.forEach((I,S)=>{i.sharedClientState.isLocalQueryTarget(S)?o.push(S):d=d.then(()=>(Fh(i,S),Nl(i.localStore,S,!0))),ji(i.remoteStore,S)}),yield d,yield kg(i,o),function(S){const U=$t(S);U.Na.forEach((G,ce)=>{ji(U.remoteStore,ce)}),U.La.pr(),U.Na=new Map,U.Oa=new xn(je.comparator)}(i),i.Qa=!1,yield Ln(i.remoteStore,!1)}})).apply(this,arguments)}function kg(u,t,i){return Rp.apply(this,arguments)}function Rp(){return(Rp=(0,b.A)(function*(u,t,i){const o=$t(u),d=[],I=[];for(const S of t){let U;const G=o.Ma.get(S);if(G&&0!==G.length){U=yield Za(o.localStore,Cs(G[0]));for(const ce of G){const we=o.Fa.get(ce),ze=yield _v(o,we);ze.snapshot&&I.push(ze.snapshot)}}else{const ce=yield eu(o.localStore,S);U=yield Za(o.localStore,ce),yield nc(o,Zd(ce),S,!1,U.resumeToken)}d.push(U)}return o.Ca.d_(I),d})).apply(this,arguments)}function Zd(u){return za(u.path,u.collectionGroup,u.orderBy,u.filters,u.limit,"F",u.startAt,u.endAt)}function Om(u){return i=$t(u).localStore,$t($t(i).persistence).Qi();var i}function Pp(u,t,i,o){return gh.apply(this,arguments)}function gh(){return(gh=(0,b.A)(function*(u,t,i,o){const d=$t(u);if(d.Qa)return void me("SyncEngine","Ignoring unexpected query state notification.");const I=d.Ma.get(t);if(I&&I.length>0)switch(i){case"current":case"not-current":{const S=yield Gc(d.localStore,yo(I[0])),U=Er.createSynthesizedRemoteEventForCurrentChange(t,"current"===i,bt.EMPTY_BYTE_STRING);yield Od(d,S,U);break}case"rejected":yield Nl(d.localStore,t,!0),Fh(d,t,o);break;default:Nt()}})).apply(this,arguments)}function _h(u,t,i){return gf.apply(this,arguments)}function gf(){return(gf=(0,b.A)(function*(u,t,i){const o=Vh(u);if(o.Qa){for(const d of t){if(o.Ma.has(d)&&o.sharedClientState.isActiveQueryTarget(d)){me("SyncEngine","Adding an already active target "+d);continue}const I=yield eu(o.localStore,d),S=yield Za(o.localStore,I);yield nc(o,Zd(I),S.targetId,!1,S.resumeToken),tc(o.remoteStore,S)}for(const d of i)o.Ma.has(d)&&(yield Nl(o.localStore,d,!1).then(()=>{ji(o.remoteStore,d),Fh(o,d)}).catch(Yr))}})).apply(this,arguments)}function Vh(u){const t=$t(u);return t.remoteStore.remoteSyncer.applyRemoteEvent=wm.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=xg.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Ei.bind(null,t),t.Ca.d_=Tp.bind(null,t.eventManager),t.Ca.$a=D.bind(null,t.eventManager),t}function yh(u){const t=$t(u);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Pd.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=ty.bind(null,t),t}let qu=(()=>{class u{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(i){var o=this;return(0,b.A)(function*(){o.serializer=vc(i.databaseInfo.databaseId),o.sharedClientState=o.Wa(i),o.persistence=o.Ga(i),yield o.persistence.start(),o.localStore=o.za(i),o.gcScheduler=o.ja(i,o.localStore),o.indexBackfillerScheduler=o.Ha(i,o.localStore)})()}ja(i,o){return null}Ha(i,o){return null}za(i){return Hc(this.persistence,new wa,i.initialUser,this.serializer)}Ga(i){return new Uu(Wc.Zr,this.serializer)}Wa(i){return new B}terminate(){var i=this;return(0,b.A)(function*(){var o,d;null===(o=i.gcScheduler)||void 0===o||o.stop(),null===(d=i.indexBackfillerScheduler)||void 0===d||d.stop(),i.sharedClientState.shutdown(),yield i.persistence.shutdown()})()}}return u.provider={build:()=>new u},u})();class Yf extends qu{constructor(t,i,o){super(),this.Ja=t,this.cacheSizeBytes=i,this.forceOwnership=o,this.kind="persistent",this.synchronizeTabs=!1}initialize(t){var i=()=>super.initialize,o=this;return(0,b.A)(function*(){yield i().call(o,t),yield o.Ja.initialize(o,t),yield yh(o.Ja.syncEngine),yield Ku(o.Ja.remoteStore),yield o.persistence.yi(()=>(o.gcScheduler&&!o.gcScheduler.started&&o.gcScheduler.start(),o.indexBackfillerScheduler&&!o.indexBackfillerScheduler.started&&o.indexBackfillerScheduler.start(),Promise.resolve()))})()}za(t){return Hc(this.persistence,new wa,t.initialUser,this.serializer)}ja(t,i){return new ii(this.persistence.referenceDelegate.garbageCollector,t.asyncQueue,i)}Ha(t,i){const o=new pe(i,this.persistence);return new ee(t.asyncQueue,o)}Ga(t){const i=zc(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),o=void 0!==this.cacheSizeBytes?Rs.withCacheSize(this.cacheSizeBytes):Rs.DEFAULT;return new Iu(this.synchronizeTabs,i,t.clientId,o,t.asyncQueue,Xi(),Ls(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(t){return new B}}class Xf extends Yf{constructor(t,i){super(t,i,!1),this.Ja=t,this.cacheSizeBytes=i,this.synchronizeTabs=!0}initialize(t){var i=()=>super.initialize,o=this;return(0,b.A)(function*(){yield i().call(o,t);const d=o.Ja.syncEngine;o.sharedClientState instanceof C&&(o.sharedClientState.syncEngine={no:Pm.bind(null,d),ro:Pp.bind(null,d),io:_h.bind(null,d),Qi:Om.bind(null,d),eo:Dp.bind(null,d)},yield o.sharedClientState.start()),yield o.persistence.yi(function(){var I=(0,b.A)(function*(S){yield function ny(u,t){return Mm.apply(this,arguments)}(o.Ja.syncEngine,S),o.gcScheduler&&(S&&!o.gcScheduler.started?o.gcScheduler.start():S||o.gcScheduler.stop()),o.indexBackfillerScheduler&&(S&&!o.indexBackfillerScheduler.started?o.indexBackfillerScheduler.start():S||o.indexBackfillerScheduler.stop())});return function(S){return I.apply(this,arguments)}}())})()}Wa(t){const i=Xi();if(!C.D(i))throw new Ye(ye.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const o=zc(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new C(i,t.asyncQueue,o,t.clientId,t.initialUser)}}let Zf=(()=>{class u{initialize(i,o){var d=this;return(0,b.A)(function*(){d.localStore||(d.localStore=i.localStore,d.sharedClientState=i.sharedClientState,d.datastore=d.createDatastore(o),d.remoteStore=d.createRemoteStore(o),d.eventManager=d.createEventManager(o),d.syncEngine=d.createSyncEngine(o,!i.synchronizeTabs),d.sharedClientState.onlineStateHandler=I=>Hf(d.syncEngine,I,1),d.remoteStore.remoteSyncer.handleCredentialChange=Sp.bind(null,d.syncEngine),yield Ln(d.remoteStore,d.syncEngine.isPrimaryClient))})()}createEventManager(i){return new ff}createDatastore(i){const o=vc(i.databaseInfo.databaseId),d=new ui(i.databaseInfo);return new Su(i.authCredentials,i.appCheckCredentials,d,o)}createRemoteStore(i){return d=this.localStore,I=this.datastore,S=i.asyncQueue,U=o=>Hf(this.syncEngine,o,0),G=Se.D()?new Se:new de,new tu(d,I,S,U,G);var d,I,S,U,G}createSyncEngine(i,o){return function(I,S,U,G,ce,we,ze){const ht=new No(I,S,U,G,ce,we);return ze&&(ht.Qa=!0),ht}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,i.initialUser,i.maxConcurrentLimboResolutions,o)}terminate(){var i=this;return(0,b.A)(function*(){var o,d,I;yield(I=(0,b.A)(function*(U){const G=$t(U);me("RemoteStore","RemoteStore shutting down."),G.L_.add(5),yield _l(G),G.k_.shutdown(),G.q_.set("Unknown")}),function S(U){return I.apply(this,arguments)})(i.remoteStore),null===(o=i.datastore)||void 0===o||o.terminate(),null===(d=i.eventManager)||void 0===d||d.terminate()})()}}return u.provider={build:()=>new u},u})();function Op(u,t=10240){let i=0;return{read:()=>(0,b.A)(function*(){if(i<u.byteLength){const o={value:u.slice(i,i+t),done:!1};return i+=t,o}return{done:!0}})(),cancel:()=>(0,b.A)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class vh{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ya(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ya(this.observer.error,t):ve("Uncaught Error in snapshot listener:",t.toString()))}Za(){this.muted=!0}Ya(t,i){setTimeout(()=>{this.muted||t(i)},0)}}class ry{constructor(t,i){this.Xa=t,this.serializer=i,this.metadata=new Ht,this.buffer=new Uint8Array,this.eu=new TextDecoder("utf-8"),this.tu().then(o=>{o&&o.ua()?this.metadata.resolve(o.aa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(o?.aa)}`))},o=>this.metadata.reject(o))}close(){return this.Xa.cancel()}getMetadata(){var t=this;return(0,b.A)(function*(){return t.metadata.promise})()}Ua(){var t=this;return(0,b.A)(function*(){return yield t.getMetadata(),t.tu()})()}tu(){var t=this;return(0,b.A)(function*(){const i=yield t.nu();if(null===i)return null;const o=t.eu.decode(i),d=Number(o);isNaN(d)&&t.ru(`length string (${o}) is not valid number`);const I=yield t.iu(d);return new be(JSON.parse(I),i.length+d)})()}su(){return this.buffer.findIndex(t=>123===t)}nu(){var t=this;return(0,b.A)(function*(){for(;t.su()<0&&!(yield t.ou()););if(0===t.buffer.length)return null;const i=t.su();i<0&&t.ru("Reached the end of bundle when a length string is expected.");const o=t.buffer.slice(0,i);return t.buffer=t.buffer.slice(i),o})()}iu(t){var i=this;return(0,b.A)(function*(){for(;i.buffer.length<t;)(yield i.ou())&&i.ru("Reached the end of bundle when more is expected.");const o=i.eu.decode(i.buffer.slice(0,t));return i.buffer=i.buffer.slice(t),o})()}ru(t){throw this.Xa.cancel(),new Error(`Invalid bundle format: ${t}`)}ou(){var t=this;return(0,b.A)(function*(){const i=yield t.Xa.read();if(!i.done){const o=new Uint8Array(t.buffer.length+i.value.length);o.set(t.buffer),o.set(i.value,t.buffer.length),t.buffer=o}return i.done})()}}class Lg{constructor(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(t){var i=this;return(0,b.A)(function*(){if(i.ensureCommitNotCalled(),i.mutations.length>0)throw i.lastTransactionError=new Ye(ye.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),i.lastTransactionError;const o=yield(d=(0,b.A)(function*(S,U){const G=$t(S),ce={documents:U.map(nn=>Oa(G.serializer,nn))},we=yield G.Lo("BatchGetDocuments",G.serializer.databaseId,st.emptyPath(),ce,U.length),ze=new Map;we.forEach(nn=>{const Un=function Ed(u,t){return"found"in t?function(o,d){Yt(!!d.found);const I=zr(o,d.found.name),S=bs(d.found.updateTime),U=d.found.createTime?bs(d.found.createTime):qn.min(),G=new ts({mapValue:{fields:d.found.fields}});return Fi.newFoundDocument(I,S,U,G)}(u,t):"missing"in t?function(o,d){Yt(!!d.missing),Yt(!!d.readTime);const I=zr(o,d.missing),S=bs(d.readTime);return Fi.newNoDocument(I,S)}(u,t):Nt()}(G.serializer,nn);ze.set(Un.key.toString(),Un)});const ht=[];return U.forEach(nn=>{const Un=ze.get(nn.toString());Yt(!!Un),ht.push(Un)}),ht}),function I(S,U){return d.apply(this,arguments)})(i.datastore,t);var d;return o.forEach(d=>i.recordVersion(d)),o})()}set(t,i){this.write(i.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())}update(t,i){try{this.write(i.toMutation(t,this.preconditionForUpdate(t)))}catch(o){this.lastTransactionError=o}this.writtenDocs.add(t.toString())}delete(t){this.write(new L(t,this.precondition(t))),this.writtenDocs.add(t.toString())}commit(){var t=this;return(0,b.A)(function*(){if(t.ensureCommitNotCalled(),t.lastTransactionError)throw t.lastTransactionError;const i=t.readVersions;var o;t.mutations.forEach(o=>{i.delete(o.key.toString())}),i.forEach((o,d)=>{const I=je.fromPath(d);t.mutations.push(new _e(I,t.precondition(I)))}),yield(o=(0,b.A)(function*(I,S){const U=$t(I),G={writes:S.map(ce=>Qs(U.serializer,ce))};yield U.Mo("Commit",U.serializer.databaseId,st.emptyPath(),G)}),function d(I,S){return o.apply(this,arguments)})(t.datastore,t.mutations),t.committed=!0})()}recordVersion(t){let i;if(t.isFoundDocument())i=t.version;else{if(!t.isNoDocument())throw Nt();i=qn.min()}const o=this.readVersions.get(t.key.toString());if(o){if(!i.isEqual(o))throw new Ye(ye.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),i)}precondition(t){const i=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&i?i.isEqual(qn.min())?Oi.exists(!1):Oi.updateTime(i):Oi.none()}preconditionForUpdate(t){const i=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&i){if(i.isEqual(qn.min()))throw new Ye(ye.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Oi.updateTime(i)}return Oi.exists(!0)}write(t){this.ensureCommitNotCalled(),this.mutations.push(t)}ensureCommitNotCalled(){}}class iy{constructor(t,i,o,d,I){this.asyncQueue=t,this.datastore=i,this.options=o,this.updateFunction=d,this.deferred=I,this._u=o.maxAttempts,this.t_=new ec(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){var t=this;this.t_.Go((0,b.A)(function*(){const i=new Lg(t.datastore),o=t.cu(i);o&&o.then(d=>{t.asyncQueue.enqueueAndForget(()=>i.commit().then(()=>{t.deferred.resolve(d)}).catch(I=>{t.lu(I)}))}).catch(d=>{t.lu(d)})}))}cu(t){try{const i=this.updateFunction(t);return!Tt(i)&&i.catch&&i.then?i:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(i){return this.deferred.reject(i),null}}lu(t){this._u>0&&this.hu(t)?(this._u-=1,this.asyncQueue.enqueueAndForget(()=>(this.uu(),Promise.resolve()))):this.deferred.reject(t)}hu(t){if("FirebaseError"===t.name){const i=t.code;return"aborted"===i||"failed-precondition"===i||"already-exists"===i||!Bi(i)}return!1}}class sy{constructor(t,i,o,d,I){var S=this;this.authCredentials=t,this.appCheckCredentials=i,this.asyncQueue=o,this.databaseInfo=d,this.user=Ke.UNAUTHENTICATED,this.clientId=fr.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=I,this.authCredentials.start(o,function(){var U=(0,b.A)(function*(G){me("FirestoreClient","Received user=",G.uid),yield S.authCredentialListener(G),S.user=G});return function(G){return U.apply(this,arguments)}}()),this.appCheckCredentials.start(o,U=>(me("FirestoreClient","Received new app check token=",U),this.appCheckCredentialListener(U,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){var t=this;this.asyncQueue.enterRestrictedMode();const i=new Ht;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,b.A)(function*(){try{t._onlineComponents&&(yield t._onlineComponents.terminate()),t._offlineComponents&&(yield t._offlineComponents.terminate()),t.authCredentials.shutdown(),t.appCheckCredentials.shutdown(),i.resolve()}catch(o){const d=aa(o,"Failed to shutdown persistence");i.reject(d)}})),i.promise}}function Jf(u,t){return _f.apply(this,arguments)}function _f(){return _f=(0,b.A)(function*(u,t){u.asyncQueue.verifyOperationInProgress(),me("FirestoreClient","Initializing OfflineComponentProvider");const i=u.configuration;yield t.initialize(i);let o=i.initialUser;u.setCredentialChangeListener(function(){var d=(0,b.A)(function*(I){o.isEqual(I)||(yield xl(t.localStore,I),o=I)});return function(I){return d.apply(this,arguments)}}()),t.persistence.setDatabaseDeletedListener(()=>u.terminate()),u._offlineComponents=t}),_f.apply(this,arguments)}function ep(u,t){return Nm.apply(this,arguments)}function Nm(){return(Nm=(0,b.A)(function*(u,t){u.asyncQueue.verifyOperationInProgress();const i=yield Uh(u);me("FirestoreClient","Initializing OnlineComponentProvider"),yield t.initialize(i,u.configuration),u.setCredentialChangeListener(o=>_n(t.remoteStore,o)),u.setAppCheckTokenChangeListener((o,d)=>_n(t.remoteStore,d)),u._onlineComponents=t})).apply(this,arguments)}function Uh(u){return yf.apply(this,arguments)}function yf(){return(yf=(0,b.A)(function*(u){if(!u._offlineComponents)if(u._uninitializedComponentsProvider){me("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Jf(u,u._uninitializedComponentsProvider._offline)}catch(t){if(!("FirebaseError"===(d=t).name?d.code===ye.FAILED_PRECONDITION||d.code===ye.UNIMPLEMENTED:!(typeof DOMException<"u"&&d instanceof DOMException)||22===d.code||20===d.code||11===d.code))throw t;At("Error using user provided cache. Falling back to memory cache: "+t),yield Jf(u,new qu)}}else me("FirestoreClient","Using default OfflineComponentProvider"),yield Jf(u,new qu);var d;return u._offlineComponents})).apply(this,arguments)}function Bh(u){return km.apply(this,arguments)}function km(){return(km=(0,b.A)(function*(u){return u._onlineComponents||(u._uninitializedComponentsProvider?(me("FirestoreClient","Using user provided OnlineComponentProvider"),yield ep(u,u._uninitializedComponentsProvider._online)):(me("FirestoreClient","Using default OnlineComponentProvider"),yield ep(u,new Zf))),u._onlineComponents})).apply(this,arguments)}function oy(u){return Uh(u).then(t=>t.persistence)}function vf(u){return Uh(u).then(t=>t.localStore)}function Ef(u){return Bh(u).then(t=>t.remoteStore)}function Fg(u){return Bh(u).then(t=>t.syncEngine)}function jh(u){return $h.apply(this,arguments)}function $h(){return($h=(0,b.A)(function*(u){const t=yield Bh(u),i=t.eventManager;return i.onListen=Gu.bind(null,t.syncEngine),i.onUnlisten=Lh.bind(null,t.syncEngine),i.onFirstRemoteStoreListen=$f.bind(null,t.syncEngine),i.onLastRemoteStoreUnlisten=zf.bind(null,t.syncEngine),i})).apply(this,arguments)}function bf(u,t,i={}){const o=new Ht;return u.asyncQueue.enqueueAndForget((0,b.A)(function*(){return function(I,S,U,G,ce){const we=new vh({next:ht=>{we.Za(),S.enqueueAndForget(()=>Yd(I,ze));const nn=ht.docs.has(U);!nn&&ht.fromCache?ce.reject(new Ye(ye.UNAVAILABLE,"Failed to get document because the client is offline.")):nn&&ht.fromCache&&G&&"server"===G.source?ce.reject(new Ye(ye.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):ce.resolve(ht)},error:ht=>ce.reject(ht)}),ze=new te(ao(U.path),we,{includeMetadataChanges:!0,_a:!0});return ph(I,ze)}(yield jh(u),u.asyncQueue,t,i,o)})),o.promise}function Np(u,t,i={}){const o=new Ht;return u.asyncQueue.enqueueAndForget((0,b.A)(function*(){return function(I,S,U,G,ce){const we=new vh({next:ht=>{we.Za(),S.enqueueAndForget(()=>Yd(I,ze)),ht.fromCache&&"server"===G.source?ce.reject(new Ye(ye.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):ce.resolve(ht)},error:ht=>ce.reject(ht)}),ze=new te(U,we,{includeMetadataChanges:!0,_a:!0});return ph(I,ze)}(yield jh(u),u.asyncQueue,t,i,o)})),o.promise}function np(u){const t={};return void 0!==u.timeoutSeconds&&(t.timeoutSeconds=u.timeoutSeconds),t}const Lp=new Map;function Fp(u,t,i){if(!i)throw new Ye(ye.INVALID_ARGUMENT,`Function ${u}() cannot be called with an empty ${t}.`)}function Vm(u,t,i,o){if(!0===t&&!0===o)throw new Ye(ye.INVALID_ARGUMENT,`${u} and ${i} cannot be used together.`)}function Um(u){if(!je.isDocumentKey(u))throw new Ye(ye.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${u} has ${u.length}.`)}function Eh(u){if(je.isDocumentKey(u))throw new Ye(ye.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${u} has ${u.length}.`)}function Vp(u){if(void 0===u)return"undefined";if(null===u)return"null";if("string"==typeof u)return u.length>20&&(u=`${u.substring(0,20)}...`),JSON.stringify(u);if("number"==typeof u||"boolean"==typeof u)return""+u;if("object"==typeof u){if(u instanceof Array)return"an array";{const t=(o=u).constructor?o.constructor.name:null;return t?`a custom ${t} object`:"an object"}}var o;return"function"==typeof u?"a function":Nt()}function Ki(u,t){if("_delegate"in u&&(u=u._delegate),!(u instanceof t)){if(t.name===u.constructor.name)throw new Ye(ye.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const i=Vp(u);throw new Ye(ye.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${i}`)}}return u}function Wn(u,t){if(t<=0)throw new Ye(ye.INVALID_ARGUMENT,`Function ${u}() requires a positive number, but it was: ${t}.`)}class Up{constructor(t){var i,o;if(void 0===t.host){if(void 0!==t.ssl)throw new Ye(ye.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(i=t.ssl)||void 0===i||i;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Ye(ye.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}Vm("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==t.experimentalAutoDetectLongPolling&&!t.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=np(null!==(o=t.experimentalLongPollingOptions)&&void 0!==o?o:{}),function(I){if(void 0!==I.timeoutSeconds){if(isNaN(I.timeoutSeconds))throw new Ye(ye.INVALID_ARGUMENT,`invalid long polling timeout: ${I.timeoutSeconds} (must not be NaN)`);if(I.timeoutSeconds<5)throw new Ye(ye.INVALID_ARGUMENT,`invalid long polling timeout: ${I.timeoutSeconds} (minimum allowed value is 5)`);if(I.timeoutSeconds>30)throw new Ye(ye.INVALID_ARGUMENT,`invalid long polling timeout: ${I.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===t.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class Hh{constructor(t,i,o,d){this._authCredentials=t,this._appCheckCredentials=i,this._databaseId=o,this._app=d,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Up({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ye(ye.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(t){if(this._settingsFrozen)throw new Ye(ye.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Up(t),void 0!==t.credentials&&(this._authCredentials=function(o){if(!o)return new gt;switch(o.type){case"firstParty":return new ln(o.sessionIndex||"0",o.iamToken||null,o.authTokenFactory||null);case"provider":return o.client;default:throw new Ye(ye.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){var t=this;return(0,b.A)(function*(){"notTerminated"===t._terminateTask?yield t._terminate():t._terminateTask="notTerminated"})()}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(i){const o=Lp.get(i);o&&(me("ComponentProvider","Removing Datastore"),Lp.delete(i),o.terminate())}(this),Promise.resolve()}}function xd(u,t,i,o={}){var d;const I=(u=Ki(u,Hh))._getSettings(),S=`${t}:${i}`;if("firestore.googleapis.com"!==I.host&&I.host!==S&&At("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),u._setSettings(Object.assign(Object.assign({},I),{host:S,ssl:!1})),o.mockUserToken){let U,G;if("string"==typeof o.mockUserToken)U=o.mockUserToken,G=Ke.MOCK_USER;else{U=(0,Ee.Fy)(o.mockUserToken,null===(d=u._app)||void 0===d?void 0:d.options.projectId);const ce=o.mockUserToken.sub||o.mockUserToken.user_id;if(!ce)throw new Ye(ye.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");G=new Ke(ce)}u._authCredentials=new Mt(new et(U,G))}}class zo{constructor(t,i,o){this.converter=i,this._query=o,this.type="query",this.firestore=t}withConverter(t){return new zo(this.firestore,t,this._query)}}class io{constructor(t,i,o){this.converter=i,this._key=o,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Nd(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new io(this.firestore,t,this._key)}}class Nd extends zo{constructor(t,i,o){super(t,i,ao(o)),this._path=o,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new io(this.firestore,null,new je(t))}withConverter(t){return new Nd(this.firestore,t,this._path)}}function Ug(u,t,...i){if(u=(0,Ee.Ku)(u),Fp("collection","path",t),u instanceof Hh){const o=st.fromString(t,...i);return Eh(o),new Nd(u,null,o)}{if(!(u instanceof io||u instanceof Nd))throw new Ye(ye.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=u._path.child(st.fromString(t,...i));return Eh(o),new Nd(u.firestore,null,o)}}function Bp(u,t){if(u=Ki(u,Hh),Fp("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new Ye(ye.INVALID_ARGUMENT,`Invalid collection ID '${t}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new zo(u,null,(o=t,new Uo(st.emptyPath(),o)));var o}function Bm(u,t,...i){if(u=(0,Ee.Ku)(u),1===arguments.length&&(t=fr.newId()),Fp("doc","path",t),u instanceof Hh){const o=st.fromString(t,...i);return Um(o),new io(u,null,new je(o))}{if(!(u instanceof io||u instanceof Nd))throw new Ye(ye.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=u._path.child(st.fromString(t,...i));return Um(o),new io(u.firestore,u instanceof Nd?u.converter:null,new je(o))}}function Bg(u,t){return u=(0,Ee.Ku)(u),t=(0,Ee.Ku)(t),(u instanceof io||u instanceof Nd)&&(t instanceof io||t instanceof Nd)&&u.firestore===t.firestore&&u.path===t.path&&u.converter===t.converter}function jm(u,t){return u=(0,Ee.Ku)(u),t=(0,Ee.Ku)(t),u instanceof zo&&t instanceof zo&&u.firestore===t.firestore&&co(u._query,t._query)&&u.converter===t.converter}class $m{constructor(t=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new ec(this,"async_queue_retry"),this.Vu=()=>{const o=Ls();o&&me("AsyncQueue","Visibility state changed to "+o.visibilityState),this.t_.jo()},this.mu=t;const i=Ls();i&&"function"==typeof i.addEventListener&&i.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.fu(),this.gu(t)}enterRestrictedMode(t){if(!this.Iu){this.Iu=!0,this.Au=t||!1;const i=Ls();i&&"function"==typeof i.removeEventListener&&i.removeEventListener("visibilitychange",this.Vu)}}enqueue(t){if(this.fu(),this.Iu)return new Promise(()=>{});const i=new Ht;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(t().then(i.resolve,i.reject),i.promise)).then(()=>i.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Pu.push(t),this.pu()))}pu(){var t=this;return(0,b.A)(function*(){if(0!==t.Pu.length){try{yield t.Pu[0](),t.Pu.shift(),t.t_.reset()}catch(i){if(!Te(i))throw i;me("AsyncQueue","Operation failed with retryable error: "+i)}t.Pu.length>0&&t.t_.Go(()=>t.pu())}})()}gu(t){const i=this.mu.then(()=>(this.du=!0,t().catch(o=>{throw this.Eu=o,this.du=!1,ve("INTERNAL UNHANDLED ERROR: ",function(S){let U=S.message||"";return S.stack&&(U=S.stack.includes(S.message)?S.stack:S.message+"\n"+S.stack),U}(o)),o}).then(o=>(this.du=!1,o))));return this.mu=i,i}enqueueAfterDelay(t,i,o){this.fu(),this.Ru.indexOf(t)>-1&&(i=0);const d=To.createAndSchedule(this,t,i,o,I=>this.yu(I));return this.Tu.push(d),d}fu(){this.Eu&&Nt()}verifyOperationInProgress(){}wu(){var t=this;return(0,b.A)(function*(){let i;do{i=t.mu,yield i}while(i!==t.mu)})()}Su(t){for(const i of this.Tu)if(i.timerId===t)return!0;return!1}bu(t){return this.wu().then(()=>{this.Tu.sort((i,o)=>i.targetTimeMs-o.targetTimeMs);for(const i of this.Tu)if(i.skipDelay(),"all"!==t&&i.timerId===t)break;return this.wu()})}Du(t){this.Ru.push(t)}yu(t){const i=this.Tu.indexOf(t);this.Tu.splice(i,1)}}function Wm(u){return function(i,o){if("object"!=typeof i||null===i)return!1;const d=i;for(const I of["next","error","complete"])if(I in d&&"function"==typeof d[I])return!0;return!1}(u)}class ay{constructor(){this._progressObserver={},this._taskCompletionResolver=new Ht,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(t,i,o){this._progressObserver={next:t,error:i,complete:o}}catch(t){return this._taskCompletionResolver.promise.catch(t)}then(t,i){return this._taskCompletionResolver.promise.then(t,i)}_completeWith(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)}_failWith(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)}_updateProgress(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)}}const cy=-1;class Fs extends Hh{constructor(t,i,o,d){super(t,i,o,d),this.type="firestore",this._queue=new $m,this._persistenceKey=d?.name||"[DEFAULT]"}_terminate(){var t=this;return(0,b.A)(function*(){if(t._firestoreClient){const i=t._firestoreClient.terminate();t._queue=new $m(i),t._firestoreClient=void 0,yield i}})()}}function If(u,t){const i="object"==typeof u?u:(0,$.getApp)(),o="string"==typeof u?u:t||"(default)",d=(0,$._getProvider)(i,"firestore").getImmediate({identifier:o});if(!d._initialized){const I=(0,Ee.yU)("firestore");I&&xd(d,...I)}return d}function Hs(u){if(u._terminated)throw new Ye(ye.FAILED_PRECONDITION,"The client has already been terminated.");return u._firestoreClient||jp(u),u._firestoreClient}function jp(u){var t,i,o;const d=u._freezeSettings(),I=(G=(null===(t=u._app)||void 0===t?void 0:t.options.appId)||"",new yt(u._databaseId,G,u._persistenceKey,(we=d).host,we.ssl,we.experimentalForceLongPolling,we.experimentalAutoDetectLongPolling,np(we.experimentalLongPollingOptions),we.useFetchStreams));var G,we;u._componentsProvider||!(null===(i=d.localCache)||void 0===i)&&i._offlineComponentProvider&&!(null===(o=d.localCache)||void 0===o)&&o._onlineComponentProvider&&(u._componentsProvider={_offline:d.localCache._offlineComponentProvider,_online:d.localCache._onlineComponentProvider}),u._firestoreClient=new sy(u._authCredentials,u._appCheckCredentials,u._queue,I,u._componentsProvider&&function(U){const G=U?._online.build();return{_offline:U?._offline.build(G),_online:G}}(u._componentsProvider))}function zm(u,t){At("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const i=u._freezeSettings();return uy(u,Zf.provider,{build:o=>new Yf(o,i.cacheSizeBytes,t?.forceOwnership)}),Promise.resolve()}function ly(u){return Hm.apply(this,arguments)}function Hm(){return(Hm=(0,b.A)(function*(u){At("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=u._freezeSettings();uy(u,Zf.provider,{build:i=>new Xf(i,t.cacheSizeBytes)})})).apply(this,arguments)}function uy(u,t,i){if((u=Ki(u,Fs))._firestoreClient||u._terminated)throw new Ye(ye.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(u._componentsProvider||u._getSettings().localCache)throw new Ye(ye.FAILED_PRECONDITION,"SDK cache is already specified.");u._componentsProvider={_online:t,_offline:i},jp(u)}function $p(u){if(u._initialized&&!u._terminated)throw new Ye(ye.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const t=new Ht;return u._queue.enqueueAndForgetEvenWhileRestricted((0,b.A)(function*(){try{yield(i=(0,b.A)(function*(d){if(!ai.D())return Promise.resolve();const I=d+"main";yield ai.delete(I)}),function o(d){return i.apply(this,arguments)})(zc(u._databaseId,u._persistenceKey)),t.resolve()}catch(i){t.reject(i)}var i})),t.promise}function rp(u){return function(i){const o=new Ht;return i.asyncQueue.enqueueAndForget((0,b.A)(function*(){return function mv(u,t){return Sm.apply(this,arguments)}(yield Fg(i),o)})),o.promise}(Hs(u=Ki(u,Fs)))}function jg(u){return function Lm(u){return u.asyncQueue.enqueue((0,b.A)(function*(){const t=yield oy(u),i=yield Ef(u);return t.setNetworkEnabled(!0),function(d){const I=$t(d);return I.L_.delete(0),Ec(I)}(i)}))}(Hs(u=Ki(u,Fs)))}function vv(u){return function Wh(u){return u.asyncQueue.enqueue((0,b.A)(function*(){const t=yield oy(u),i=yield Ef(u);return t.setNetworkEnabled(!1),(o=(0,b.A)(function*(I){const S=$t(I);S.L_.add(0),yield _l(S),S.q_.set("Offline")}),function d(I){return o.apply(this,arguments)})(i);var o}))}(Hs(u=Ki(u,Fs)))}function Wp(u,t){const i=Hs(u=Ki(u,Fs)),o=new ay;return function Vg(u,t,i,o){const d=function(S,U){let G;return G="string"==typeof S?ws().encode(S):S,we=function(we,ze){if(we instanceof Uint8Array)return Op(we,void 0);if(we instanceof ArrayBuffer)return Op(new Uint8Array(we),void 0);if(we instanceof ReadableStream)return we.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(G),new ry(we,U);var we}(i,vc(t));u.asyncQueue.enqueueAndForget((0,b.A)(function*(){!function Mp(u,t,i){const o=$t(u);var d;(d=(0,b.A)(function*(S,U,G){try{const ce=yield U.getMetadata();if(yield function(Un,lr){const Zn=$t(Un),Kr=bs(lr.createTime);return Zn.persistence.runTransaction("hasNewerBundle","readonly",si=>Zn.Gr.getBundleMetadata(si,lr.id)).then(si=>!!si&&si.createTime.compareTo(Kr)>=0)}(S.localStore,ce))return yield U.close(),G._completeWith({taskState:"Success",documentsLoaded:(Un=ce).totalDocuments,bytesLoaded:Un.totalBytes,totalDocuments:Un.totalDocuments,totalBytes:Un.totalBytes}),Promise.resolve(new Set);G._updateProgress(vn(ce));const we=new Bt(ce,S.localStore,U.serializer);let ze=yield U.Ua();for(;ze;){const nn=yield we.la(ze);nn&&G._updateProgress(nn),ze=yield U.Ua()}const ht=yield we.complete();return yield Od(S,ht.Ia,void 0),yield function(Un,lr){const Zn=$t(Un);return Zn.persistence.runTransaction("Save bundle","readwrite",Kr=>Zn.Gr.saveBundleMetadata(Kr,lr))}(S.localStore,ce),G._completeWith(ht.progress),Promise.resolve(ht.Pa)}catch(ce){return At("SyncEngine",`Loading bundle failed with ${ce}`),G._failWith(ce),Promise.resolve(new Set)}var Un}),function I(S,U,G){return d.apply(this,arguments)})(o,t,i).then(d=>{o.sharedClientState.notifyBundleLoaded(d)})}(yield Fg(u),d,o)}))}(i,u._databaseId,t,o),o}function Km(u,t){return function zh(u,t){return u.asyncQueue.enqueue((0,b.A)(function*(){return function(o,d){const I=$t(o);return I.persistence.runTransaction("Get named query","readonly",S=>I.Gr.getNamedQuery(S,d))}(yield vf(u),t)}))}(Hs(u=Ki(u,Fs)),t).then(i=>i?new zo(u,null,i.query):null)}class Ih{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Ih(bt.fromBase64String(t))}catch(i){throw new Ye(ye.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+i)}}static fromUint8Array(t){return new Ih(bt.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}class Qu{constructor(...t){for(let i=0;i<t.length;++i)if(0===t[i].length)throw new Ye(ye.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Xe(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}class Th{constructor(t){this._methodName=t}}class Af{constructor(t,i){if(!isFinite(t)||t<-90||t>90)throw new Ye(ye.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(i)||i<-180||i>180)throw new Ye(ye.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+i);this._lat=t,this._long=i}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return Jn(this._lat,t._lat)||Jn(this._long,t._long)}}class wf{constructor(t){this._values=(t||[]).map(i=>i)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(o,d){if(o.length!==d.length)return!1;for(let I=0;I<o.length;++I)if(o[I]!==d[I])return!1;return!0}(this._values,t._values)}}const ip=/^__.*__$/;class Wg{constructor(t,i,o){this.data=t,this.fieldMask=i,this.fieldTransforms=o}toMutation(t,i){return null!==this.fieldMask?new Eo(t,this.data,this.fieldMask,i,this.fieldTransforms):new Ea(t,this.data,i,this.fieldTransforms)}}class sp{constructor(t,i,o){this.data=t,this.fieldMask=i,this.fieldTransforms=o}toMutation(t,i){return new Eo(t,this.data,this.fieldMask,i,this.fieldTransforms)}}function fy(u){switch(u){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Nt()}}class kd{constructor(t,i,o,d,I,S){this.settings=t,this.databaseId=i,this.serializer=o,this.ignoreUndefinedProperties=d,void 0===I&&this.vu(),this.fieldTransforms=I||[],this.fieldMask=S||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(t){return new kd(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(t){var i;const o=null===(i=this.path)||void 0===i?void 0:i.child(t),d=this.Fu({path:o,xu:!1});return d.Ou(t),d}Nu(t){var i;const o=null===(i=this.path)||void 0===i?void 0:i.child(t),d=this.Fu({path:o,xu:!1});return d.vu(),d}Lu(t){return this.Fu({path:void 0,xu:!0})}Bu(t){return Qp(t,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(t){return void 0!==this.fieldMask.find(i=>t.isPrefixOf(i))||void 0!==this.fieldTransforms.find(i=>t.isPrefixOf(i.field))}vu(){if(this.path)for(let t=0;t<this.path.length;t++)this.Ou(this.path.get(t))}Ou(t){if(0===t.length)throw this.Bu("Document fields must not be empty");if(fy(this.Cu)&&ip.test(t))throw this.Bu('Document fields cannot begin and end with "__"')}}class zp{constructor(t,i,o){this.databaseId=t,this.ignoreUndefinedProperties=i,this.serializer=o||vc(t)}Qu(t,i,o,d=!1){return new kd({Cu:t,methodName:i,qu:o,path:Xe.emptyPath(),xu:!1,ku:d},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Kh(u){const t=u._freezeSettings(),i=vc(u._databaseId);return new zp(u._databaseId,!!t.ignoreUndefinedProperties,i)}function Gh(u,t,i,o,d,I={}){const S=u.Qu(I.merge||I.mergeFields?2:0,t,i,d);op("Data must be an object, but it was:",S,o);const U=Qm(o,S);let G,ce;if(I.merge)G=new qi(S.fieldMask),ce=S.fieldTransforms;else if(I.mergeFields){const we=[];for(const ze of I.mergeFields){const ht=ap(t,ze,i);if(!S.contains(ht))throw new Ye(ye.INVALID_ARGUMENT,`Field '${ht}' is specified in your field mask but missing from your input data.`);my(we,ht)||we.push(ht)}G=new qi(we),ce=S.fieldTransforms.filter(ze=>G.covers(ze.field))}else G=null,ce=S.fieldTransforms;return new Wg(new ts(U),G,ce)}class Ah extends Th{_toFieldTransform(t){if(2!==t.Cu)throw t.Bu(1===t.Cu?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof Ah}}function Gm(u,t,i){return new kd({Cu:3,qu:t.settings.qu,methodName:u._methodName,xu:i},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class Hp extends Th{_toFieldTransform(t){return new lc(t.path,new Oc)}isEqual(t){return t instanceof Hp}}class Kp extends Th{constructor(t,i){super(t),this.Ku=i}_toFieldTransform(t){const i=Gm(this,t,!0),o=this.Ku.map(I=>wh(I,i)),d=new Mo(o);return new lc(t.path,d)}isEqual(t){return t instanceof Kp&&(0,Ee.bD)(this.Ku,t.Ku)}}class qm extends Th{constructor(t,i){super(t),this.Ku=i}_toFieldTransform(t){const i=Gm(this,t,!0),o=this.Ku.map(I=>wh(I,i)),d=new va(o);return new lc(t.path,d)}isEqual(t){return t instanceof qm&&(0,Ee.bD)(this.Ku,t.Ku)}}class Gp extends Th{constructor(t,i){super(t),this.$u=i}_toFieldTransform(t){const i=new cc(t.serializer,il(t.serializer,this.$u));return new lc(t.path,i)}isEqual(t){return t instanceof Gp&&this.$u===t.$u}}function Tc(u,t,i,o){const d=u.Qu(1,t,i);op("Data must be an object, but it was:",d,o);const I=[],S=ts.empty();or(o,(G,ce)=>{const we=qp(t,G,i);ce=(0,Ee.Ku)(ce);const ze=d.Nu(we);if(ce instanceof Ah)I.push(we);else{const ht=wh(ce,ze);null!=ht&&(I.push(we),S.set(we,ht))}});const U=new qi(I);return new sp(S,U,d.fieldTransforms)}function zg(u,t,i,o,d,I){const S=u.Qu(1,t,i),U=[ap(t,o,i)],G=[d];if(I.length%2!=0)throw new Ye(ye.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let ht=0;ht<I.length;ht+=2)U.push(ap(t,I[ht])),G.push(I[ht+1]);const ce=[],we=ts.empty();for(let ht=U.length-1;ht>=0;--ht)if(!my(ce,U[ht])){const nn=U[ht];let Un=G[ht];Un=(0,Ee.Ku)(Un);const lr=S.Nu(nn);if(Un instanceof Ah)ce.push(nn);else{const Zn=wh(Un,lr);null!=Zn&&(ce.push(nn),we.set(nn,Zn))}}const ze=new qi(ce);return new sp(we,ze,S.fieldTransforms)}function Cf(u,t,i,o=!1){return wh(i,u.Qu(o?4:3,t))}function wh(u,t){if(Ym(u=(0,Ee.Ku)(u)))return op("Unsupported field value:",t,u),Qm(u,t);if(u instanceof Th)return function(o,d){if(!fy(d.Cu))throw d.Bu(`${o._methodName}() can only be used with update() and set()`);if(!d.path)throw d.Bu(`${o._methodName}() is not currently supported inside arrays`);const I=o._toFieldTransform(d);I&&d.fieldTransforms.push(I)}(u,t),null;if(void 0===u&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),u instanceof Array){if(t.settings.xu&&4!==t.Cu)throw t.Bu("Nested arrays are not supported");return function(o,d){const I=[];let S=0;for(const U of o){let G=wh(U,d.Lu(S));null==G&&(G={nullValue:"NULL_VALUE"}),I.push(G),S++}return{arrayValue:{values:I}}}(u,t)}return function(o,d){if(null===(o=(0,Ee.Ku)(o)))return{nullValue:"NULL_VALUE"};if("number"==typeof o)return il(d.serializer,o);if("boolean"==typeof o)return{booleanValue:o};if("string"==typeof o)return{stringValue:o};if(o instanceof Date){const I=$n.fromDate(o);return{timestampValue:Ga(d.serializer,I)}}if(o instanceof $n){const I=new $n(o.seconds,1e3*Math.floor(o.nanoseconds/1e3));return{timestampValue:Ga(d.serializer,I)}}if(o instanceof Af)return{geoPointValue:{latitude:o.latitude,longitude:o.longitude}};if(o instanceof Ih)return{bytesValue:Hl(d.serializer,o._byteString)};if(o instanceof io){const I=d.databaseId,S=o.firestore._databaseId;if(!S.isEqual(I))throw d.Bu(`Document reference is for database ${S.projectId}/${S.database} but should be for database ${I.projectId}/${I.database}`);return{referenceValue:ou(o.firestore._databaseId||d.databaseId,o._key.path)}}if(o instanceof wf)return U=d,{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(G=>{if("number"!=typeof G)throw U.Bu("VectorValues must only contain numeric values.");return Po(U.serializer,G)})}}}}};var U;throw d.Bu(`Unsupported field value: ${Vp(o)}`)}(u,t)}function Qm(u,t){const i={};return _r(u)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):or(u,(o,d)=>{const I=wh(d,t.Mu(o));null!=I&&(i[o]=I)}),{mapValue:{fields:i}}}function Ym(u){return!("object"!=typeof u||null===u||u instanceof Array||u instanceof Date||u instanceof $n||u instanceof Af||u instanceof Ih||u instanceof io||u instanceof Th||u instanceof wf)}function op(u,t,i){if(!Ym(i)||"object"!=typeof(d=i)||null===d||Object.getPrototypeOf(d)!==Object.prototype&&null!==Object.getPrototypeOf(d)){const o=Vp(i);throw t.Bu("an object"===o?u+" a custom object":u+" "+o)}var d}function ap(u,t,i){if((t=(0,Ee.Ku)(t))instanceof Qu)return t._internalPath;if("string"==typeof t)return qp(u,t);throw Qp("Field path arguments must be of type string or ",u,!1,void 0,i)}const py=new RegExp("[~\\*/\\[\\]]");function qp(u,t,i){if(t.search(py)>=0)throw Qp(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,u,!1,void 0,i);try{return new Qu(...t.split("."))._internalPath}catch{throw Qp(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,u,!1,void 0,i)}}function Qp(u,t,i,o,d){const I=o&&!o.isEmpty(),S=void 0!==d;let U=`Function ${t}() called with invalid data`;i&&(U+=" (via `toFirestore()`)"),U+=". ";let G="";return(I||S)&&(G+=" (found",I&&(G+=` in field ${o}`),S&&(G+=` in document ${d}`),G+=")"),new Ye(ye.INVALID_ARGUMENT,U+u+G)}function my(u,t){return u.some(i=>i.isEqual(t))}class Yp{constructor(t,i,o,d,I){this._firestore=t,this._userDataWriter=i,this._key=o,this._document=d,this._converter=I}get id(){return this._key.path.lastSegment()}get ref(){return new io(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const t=new Hg(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const i=this._document.data.field(Xp("DocumentSnapshot.get",t));if(null!==i)return this._userDataWriter.convertValue(i)}}}class Hg extends Yp{data(){return super.data()}}function Xp(u,t){return"string"==typeof t?qp(u,t):t instanceof Qu?t._internalPath:t._delegate._internalPath}function gy(u){if("L"===u.limitType&&0===u.explicitOrderBy.length)throw new Ye(ye.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Sf{}class Zp extends Sf{}function Kg(u,t,...i){let o=[];t instanceof Sf&&o.push(t),o=o.concat(i),function(I){const S=I.filter(G=>G instanceof Jp).length,U=I.filter(G=>G instanceof Xm).length;if(S>1||S>0&&U>0)throw new Ye(ye.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(o);for(const d of o)u=d._apply(u);return u}class Xm extends Zp{constructor(t,i,o){super(),this._field=t,this._op=i,this._value=o,this.type="where"}static _create(t,i,o){return new Xm(t,i,o)}_apply(t){const i=this._parse(t);return Xg(t._query,i),new zo(t.firestore,t.converter,Qi(t._query,i))}_parse(t){const i=Kh(t.firestore);return function(I,S,U,G,ce,we,ze){let ht;if(ce.isKeyField()){if("array-contains"===we||"array-contains-any"===we)throw new Ye(ye.INVALID_ARGUMENT,`Invalid Query. You can't perform '${we}' queries on documentId().`);if("in"===we||"not-in"===we){Yg(ze,we);const nn=[];for(const Un of ze)nn.push(nm(G,I,Un));ht={arrayValue:{values:nn}}}else ht=nm(G,I,ze)}else"in"!==we&&"not-in"!==we&&"array-contains-any"!==we||Yg(ze,we),ht=Cf(U,"where",ze,"in"===we||"not-in"===we);return Pr.create(ce,we,ht)}(t._query,0,i,t.firestore._databaseId,this._field,this._op,this._value)}}function _y(u,t,i){const o=t,d=Xp("where",u);return Xm._create(d,o,i)}class Jp extends Sf{constructor(t,i){super(),this.type=t,this._queryConstraints=i}static _create(t,i){return new Jp(t,i)}_parse(t){const i=this._queryConstraints.map(o=>o._parse(t)).filter(o=>o.getFilters().length>0);return 1===i.length?i[0]:fi.create(i,this._getOperator())}_apply(t){const i=this._parse(t);return 0===i.getFilters().length?t:(function(d,I){let S=d;const U=I.getFlattenedFilters();for(const G of U)Xg(S,G),S=Qi(S,G)}(t._query,i),new zo(t.firestore,t.converter,Qi(t._query,i)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class qh extends Zp{constructor(t,i){super(),this._field=t,this._direction=i,this.type="orderBy"}static _create(t,i){return new qh(t,i)}_apply(t){const i=function(d,I,S){if(null!==d.startAt)throw new Ye(ye.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==d.endAt)throw new Ye(ye.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new fa(I,S)}(t._query,this._field,this._direction);return new zo(t.firestore,t.converter,function(d,I){const S=d.explicitOrderBy.concat([I]);return new Uo(d.path,d.collectionGroup,S,d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(t._query,i))}}function Gg(u,t="asc"){const i=t,o=Xp("orderBy",u);return qh._create(o,i)}class Qh extends Zp{constructor(t,i,o){super(),this.type=t,this._limit=i,this._limitType=o}static _create(t,i,o){return new Qh(t,i,o)}_apply(t){return new zo(t.firestore,t.converter,Xo(t._query,this._limit,this._limitType))}}function yy(u){return Wn("limit",u),Qh._create("limit",u,"F")}function Jm(u){return Wn("limitToLast",u),Qh._create("limitToLast",u,"L")}class em extends Zp{constructor(t,i,o){super(),this.type=t,this._docOrFields=i,this._inclusive=o}static _create(t,i,o){return new em(t,i,o)}_apply(t){const i=Qg(t,this.type,this._docOrFields,this._inclusive);return new zo(t.firestore,t.converter,(I=i,new Uo((d=t._query).path,d.collectionGroup,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,I,d.endAt)));var d,I}}function tm(...u){return em._create("startAt",u,!0)}function cp(...u){return em._create("startAfter",u,!1)}class Yc extends Zp{constructor(t,i,o){super(),this.type=t,this._docOrFields=i,this._inclusive=o}static _create(t,i,o){return new Yc(t,i,o)}_apply(t){const i=Qg(t,this.type,this._docOrFields,this._inclusive);return new zo(t.firestore,t.converter,(I=i,new Uo((d=t._query).path,d.collectionGroup,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,I)));var d,I}}function Ld(...u){return Yc._create("endBefore",u,!1)}function qg(...u){return Yc._create("endAt",u,!0)}function Qg(u,t,i,o){if(i[0]=(0,Ee.Ku)(i[0]),i[0]instanceof Yp)return function(I,S,U,G,ce){if(!G)throw new Ye(ye.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${U}().`);const we=[];for(const ze of Yo(I))if(ze.field.isKeyField())we.push(po(S,G.key));else{const ht=G.data.field(ze.field);if(Ie(ht))throw new Ye(ye.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+ze.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===ht){const nn=ze.field.canonicalString();throw new Ye(ye.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${nn}' (used as the orderBy) does not exist.`)}we.push(ht)}return new ls(we,ce)}(u._query,u.firestore._databaseId,t,i[0]._document,o);{const d=Kh(u.firestore);return function(S,U,G,ce,we,ze){const ht=S.explicitOrderBy;if(we.length>ht.length)throw new Ye(ye.INVALID_ARGUMENT,`Too many arguments provided to ${ce}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const nn=[];for(let Un=0;Un<we.length;Un++){const lr=we[Un];if(ht[Un].field.isKeyField()){if("string"!=typeof lr)throw new Ye(ye.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${ce}(), but got a ${typeof lr}`);if(!no(S)&&-1!==lr.indexOf("/"))throw new Ye(ye.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${ce}() must be a plain document ID, but '${lr}' contains a slash.`);const Zn=S.path.child(st.fromString(lr));if(!je.isDocumentKey(Zn))throw new Ye(ye.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${ce}() must result in a valid document path, but '${Zn}' is not because it contains an odd number of segments.`);const Kr=new je(Zn);nn.push(po(U,Kr))}else{const Zn=Cf(G,ce,lr);nn.push(Zn)}}return new ls(nn,ze)}(u._query,u.firestore._databaseId,d,t,i,o)}}function nm(u,t,i){if("string"==typeof(i=(0,Ee.Ku)(i))){if(""===i)throw new Ye(ye.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!no(t)&&-1!==i.indexOf("/"))throw new Ye(ye.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${i}' contains a '/' character.`);const o=t.path.child(st.fromString(i));if(!je.isDocumentKey(o))throw new Ye(ye.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${o}' is not because it has an odd number of segments (${o.length}).`);return po(u,new je(o))}if(i instanceof io)return po(u,i._key);throw new Ye(ye.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Vp(i)}.`)}function Yg(u,t){if(!Array.isArray(u)||0===u.length)throw new Ye(ye.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function Xg(u,t){const i=function(d,I){for(const S of d)for(const U of S.getFlattenedFilters())if(I.indexOf(U.op)>=0)return U.op;return null}(u.filters,function(d){switch(d){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==i)throw new Ye(ye.INVALID_ARGUMENT,i===t.op?`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`:`Invalid query. You cannot use '${t.op.toString()}' filters with '${i.toString()}' filters.`)}class im{convertValue(t,i="none"){switch(Li(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Rn(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,i);case 5:return t.stringValue;case 6:return this.convertBytes(mt(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,i);case 11:return this.convertObject(t.mapValue,i);case 10:return this.convertVectorValue(t.mapValue);default:throw Nt()}}convertObject(t,i){return this.convertObjectMap(t.fields,i)}convertObjectMap(t,i="none"){const o={};return or(t,(d,I)=>{o[d]=this.convertValue(I,i)}),o}convertVectorValue(t){var i,o,d;const I=null===(d=null===(o=null===(i=t.fields)||void 0===i?void 0:i.value.arrayValue)||void 0===o?void 0:o.values)||void 0===d?void 0:d.map(S=>Rn(S.doubleValue));return new wf(I)}convertGeoPoint(t){return new Af(Rn(t.latitude),Rn(t.longitude))}convertArray(t,i){return(t.values||[]).map(o=>this.convertValue(o,i))}convertServerTimestamp(t,i){switch(i){case"previous":const o=he(t);return null==o?null:this.convertValue(o,i);case"estimate":return this.convertTimestamp(We(t));default:return null}}convertTimestamp(t){const i=Kn(t);return new $n(i.seconds,i.nanos)}convertDocumentKey(t,i){const o=st.fromString(t);Yt(W(o));const d=new In(o.get(1),o.get(3)),I=new je(o.popFirst(5));return d.isEqual(i)||ve(`Document ${I} contains a document reference within a different database (${d.projectId}/${d.database}) which is not supported. It will be treated as a reference in the current database (${i.projectId}/${i.database}) instead.`),I}}function sm(u,t,i){let o;return o=u?i&&(i.merge||i.mergeFields)?u.toFirestore(t,i):u.toFirestore(t):t,o}class lp extends im{constructor(t){super(),this.firestore=t}convertBytes(t){return new Ih(t)}convertReference(t){const i=this.convertDocumentKey(t,this.firestore._databaseId);return new io(this.firestore,null,i)}}class Ch{constructor(t,i){this.hasPendingWrites=t,this.fromCache=i}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Jd extends Yp{constructor(t,i,o,d,I,S){super(t,i,o,d,S),this._firestore=t,this._firestoreImpl=t,this.metadata=I}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const i=new Yh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(i,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,i={}){if(this._document){const o=this._document.data.field(Xp("DocumentSnapshot.get",t));if(null!==o)return this._userDataWriter.convertValue(o,i.serverTimestamps)}}}class Yh extends Jd{data(t={}){return super.data(t)}}class Xh{constructor(t,i,o,d){this._firestore=t,this._userDataWriter=i,this._snapshot=d,this.metadata=new Ch(d.hasPendingWrites,d.fromCache),this.query=o}get docs(){const t=[];return this.forEach(i=>t.push(i)),t}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(t,i){this._snapshot.docs.forEach(o=>{t.call(i,new Yh(this._firestore,this._userDataWriter,o.key,o,new Ch(this._snapshot.mutatedKeys.has(o.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const i=!!t.includeMetadataChanges;if(i&&this._snapshot.excludesMetadataChanges)throw new Ye(ye.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===i||(this._cachedChanges=function(d,I){if(d._snapshot.oldDocs.isEmpty()){let S=0;return d._snapshot.docChanges.map(U=>({type:"added",doc:new Yh(d._firestore,d._userDataWriter,U.doc.key,U.doc,new Ch(d._snapshot.mutatedKeys.has(U.doc.key),d._snapshot.fromCache),d.query.converter),oldIndex:-1,newIndex:S++}))}{let S=d._snapshot.oldDocs;return d._snapshot.docChanges.filter(U=>I||3!==U.type).map(U=>{const G=new Yh(d._firestore,d._userDataWriter,U.doc.key,U.doc,new Ch(d._snapshot.mutatedKeys.has(U.doc.key),d._snapshot.fromCache),d.query.converter);let ce=-1,we=-1;return 0!==U.type&&(ce=S.indexOf(U.doc.key),S=S.delete(U.doc.key)),1!==U.type&&(S=S.add(U.doc),we=S.indexOf(U.doc.key)),{type:Ey(U.type),doc:G,oldIndex:ce,newIndex:we}})}}(this,i),this._cachedChangesIncludeMetadataChanges=i),this._cachedChanges}}function Ey(u){switch(u){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Nt()}}function Zg(u,t){return u instanceof Jd&&t instanceof Jd?u._firestore===t._firestore&&u._key.isEqual(t._key)&&(null===u._document?null===t._document:u._document.isEqual(t._document))&&u._converter===t._converter:u instanceof Xh&&t instanceof Xh&&u._firestore===t._firestore&&jm(u.query,t.query)&&u.metadata.isEqual(t.metadata)&&u._snapshot.isEqual(t._snapshot)}function by(u){u=Ki(u,io);const t=Ki(u.firestore,Fs);return bf(Hs(t),u._key).then(i=>cm(t,u,i))}class Fd extends im{constructor(t){super(),this.firestore=t}convertBytes(t){return new Ih(t)}convertReference(t){const i=this.convertDocumentKey(t,this.firestore._databaseId);return new io(this.firestore,null,i)}}function Iy(u){u=Ki(u,io);const t=Ki(u.firestore,Fs),i=Hs(t),o=new Fd(t);return function tp(u,t){const i=new Ht;return u.asyncQueue.enqueueAndForget((0,b.A)(function*(){return(o=(0,b.A)(function*(I,S,U){try{const G=yield function(we,ze){const ht=$t(we);return ht.persistence.runTransaction("read document","readonly",nn=>ht.localDocuments.getDocument(nn,ze))}(I,S);G.isFoundDocument()?U.resolve(G):G.isNoDocument()?U.resolve(null):U.reject(new Ye(ye.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(G){const ce=aa(G,`Failed to get document '${S} from cache`);U.reject(ce)}}),function d(I,S,U){return o.apply(this,arguments)})(yield vf(u),t,i);var o})),i.promise}(i,u._key).then(d=>new Jd(t,o,u._key,d,new Ch(null!==d&&d.hasLocalMutations,!0),u.converter))}function Jg(u){u=Ki(u,io);const t=Ki(u.firestore,Fs);return bf(Hs(t),u._key,{source:"server"}).then(i=>cm(t,u,i))}function up(u){u=Ki(u,zo);const t=Ki(u.firestore,Fs),i=Hs(t),o=new Fd(t);return gy(u._query),Np(i,u._query).then(d=>new Xh(t,o,u,d))}function om(u){u=Ki(u,zo);const t=Ki(u.firestore,Fs),i=Hs(t),o=new Fd(t);return function Fm(u,t){const i=new Ht;return u.asyncQueue.enqueueAndForget((0,b.A)(function*(){return(o=(0,b.A)(function*(I,S,U){try{const G=yield Jl(I,S,!0),ce=new br(S,G.Ts),we=ce.ma(G.documents),ze=ce.applyChanges(we,!1);U.resolve(ze.snapshot)}catch(G){const ce=aa(G,`Failed to execute query '${S} against cache`);U.reject(ce)}}),function d(I,S,U){return o.apply(this,arguments)})(yield vf(u),t,i);var o})),i.promise}(i,u._query).then(d=>new Xh(t,o,u,d))}function Zh(u){u=Ki(u,zo);const t=Ki(u.firestore,Fs),i=Hs(t),o=new Fd(t);return Np(i,u._query,{source:"server"}).then(d=>new Xh(t,o,u,d))}function Ty(u,t,i){u=Ki(u,io);const o=Ki(u.firestore,Fs),d=sm(u.converter,t,i);return Dh(o,[Gh(Kh(o),"setDoc",u._key,d,null!==u.converter,i).toMutation(u._key,Oi.none())])}function e_(u,t,i,...o){u=Ki(u,io);const d=Ki(u.firestore,Fs),I=Kh(d);let S;return S="string"==typeof(t=(0,Ee.Ku)(t))||t instanceof Qu?zg(I,"updateDoc",u._key,t,i,o):Tc(I,"updateDoc",u._key,t),Dh(d,[S.toMutation(u._key,Oi.exists(!0))])}function am(u){return Dh(Ki(u.firestore,Fs),[new L(u._key,Oi.none())])}function ng(u,t){const i=Ki(u.firestore,Fs),o=Bm(u),d=sm(u.converter,t);return Dh(i,[Gh(Kh(u.firestore),"addDoc",o._key,d,null!==u.converter,{}).toMutation(o._key,Oi.exists(!1))]).then(()=>o)}function Sh(u,...t){var i,o,d;u=(0,Ee.Ku)(u);let I={includeMetadataChanges:!1,source:"default"},S=0;"object"!=typeof t[S]||Wm(t[S])||(I=t[S],S++);const U={includeMetadataChanges:I.includeMetadataChanges,source:I.source};if(Wm(t[S])){const ze=t[S];t[S]=null===(i=ze.next)||void 0===i?void 0:i.bind(ze),t[S+1]=null===(o=ze.error)||void 0===o?void 0:o.bind(ze),t[S+2]=null===(d=ze.complete)||void 0===d?void 0:d.bind(ze)}let G,ce,we;if(u instanceof io)ce=Ki(u.firestore,Fs),we=ao(u._key.path),G={next:ze=>{t[S]&&t[S](cm(ce,u,ze))},error:t[S+1],complete:t[S+2]};else{const ze=Ki(u,zo);ce=Ki(ze.firestore,Fs),we=ze._query;const ht=new Fd(ce);G={next:nn=>{t[S]&&t[S](new Xh(ce,ht,ze,nn))},error:t[S+1],complete:t[S+2]},gy(u._query)}return function(ht,nn,Un,lr){const Zn=new vh(lr),Kr=new te(nn,Zn,Un);return ht.asyncQueue.enqueueAndForget((0,b.A)(function*(){return ph(yield jh(ht),Kr)})),()=>{Zn.Za(),ht.asyncQueue.enqueueAndForget((0,b.A)(function*(){return Yd(yield jh(ht),Kr)}))}}(Hs(ce),we,U,G)}function rg(u,t){return function kp(u,t){const i=new vh(t);return u.asyncQueue.enqueueAndForget((0,b.A)(function*(){return d=yield jh(u),I=i,$t(d).Y_.add(I),void I.next();var d,I})),()=>{i.Za(),u.asyncQueue.enqueueAndForget((0,b.A)(function*(){return d=yield jh(u),I=i,void $t(d).Y_.delete(I);var d,I}))}}(Hs(u=Ki(u,Fs)),Wm(t)?t:{next:t})}function Dh(u,t){return function(o,d){const I=new Ht;return o.asyncQueue.enqueueAndForget((0,b.A)(function*(){return function ey(u,t,i){return xr.apply(this,arguments)}(yield Fg(o),d,I)})),I.promise}(Hs(u),t)}function cm(u,t,i){const o=i.docs.get(t._key),d=new Fd(u);return new Jd(u,d,t._key,o,new Ch(i.hasPendingWrites,i.fromCache),t.converter)}const og={maxAttempts:5};class fp{constructor(t,i){this._firestore=t,this._commitHandler=i,this._mutations=[],this._committed=!1,this._dataReader=Kh(t)}set(t,i,o){this._verifyNotCommitted();const d=Rh(t,this._firestore),I=sm(d.converter,i,o),S=Gh(this._dataReader,"WriteBatch.set",d._key,I,null!==d.converter,o);return this._mutations.push(S.toMutation(d._key,Oi.none())),this}update(t,i,o,...d){this._verifyNotCommitted();const I=Rh(t,this._firestore);let S;return S="string"==typeof(i=(0,Ee.Ku)(i))||i instanceof Qu?zg(this._dataReader,"WriteBatch.update",I._key,i,o,d):Tc(this._dataReader,"WriteBatch.update",I._key,i),this._mutations.push(S.toMutation(I._key,Oi.exists(!0))),this}delete(t){this._verifyNotCommitted();const i=Rh(t,this._firestore);return this._mutations=this._mutations.concat(new L(i._key,Oi.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ye(ye.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Rh(u,t){if((u=(0,Ee.Ku)(u)).firestore!==t)throw new Ye(ye.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return u}class Cy extends class{constructor(i,o){this._firestore=i,this._transaction=o,this._dataReader=Kh(i)}get(i){const o=Rh(i,this._firestore),d=new lp(this._firestore);return this._transaction.lookup([o._key]).then(I=>{if(!I||1!==I.length)return Nt();const S=I[0];if(S.isFoundDocument())return new Yp(this._firestore,d,S.key,S,o.converter);if(S.isNoDocument())return new Yp(this._firestore,d,o._key,null,o.converter);throw Nt()})}set(i,o,d){const I=Rh(i,this._firestore),S=sm(I.converter,o,d),U=Gh(this._dataReader,"Transaction.set",I._key,S,null!==I.converter,d);return this._transaction.set(I._key,U),this}update(i,o,d,...I){const S=Rh(i,this._firestore);let U;return U="string"==typeof(o=(0,Ee.Ku)(o))||o instanceof Qu?zg(this._dataReader,"Transaction.update",S._key,o,d,I):Tc(this._dataReader,"Transaction.update",S._key,o),this._transaction.update(S._key,U),this}delete(i){const o=Rh(i,this._firestore);return this._transaction.delete(o._key),this}}{constructor(t,i){super(t,i),this._firestore=t}get(t){const i=Rh(t,this._firestore),o=new Fd(this._firestore);return super.get(t).then(d=>new Jd(this._firestore,o,i._key,d._document,new Ch(!1,!1),i.converter))}}function um(u,t,i){u=Ki(u,Fs);const o=Object.assign(Object.assign({},og),i);return function(I){if(I.maxAttempts<1)throw new Ye(ye.INVALID_ARGUMENT,"Max attempts must be at least 1")}(o),function(I,S,U){const G=new Ht;return I.asyncQueue.enqueueAndForget((0,b.A)(function*(){const ce=yield function xp(u){return Bh(u).then(t=>t.datastore)}(I);new iy(I.asyncQueue,ce,U,S,G).au()})),G.promise}(Hs(u),d=>t(new Cy(u,d)),o)}function o_(){return new Ah("deleteField")}function a_(){return new Hp("serverTimestamp")}function c_(...u){return new Kp("arrayUnion",u)}function l_(...u){return new qm("arrayRemove",u)}function Ni(u){return new Gp("increment",u)}!function(t,i=!0){Qe=$.SDK_VERSION,(0,$._registerComponent)(new q.uA("firestore",(o,{instanceIdentifier:d,options:I})=>{const S=o.getProvider("app").getImmediate(),U=new Fs(new ft(o.getProvider("auth-internal")),new hr(o.getProvider("app-check-internal")),function(ce,we){if(!Object.prototype.hasOwnProperty.apply(ce.options,["projectId"]))throw new Ye(ye.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new In(ce.options.projectId,we)}(S,d),S);return I=Object.assign({useFetchStreams:i},I),U._setSettings(I),U},"PUBLIC").setMultipleInstances(!0)),(0,$.registerVersion)(kt,"4.7.3",t),(0,$.registerVersion)(kt,"4.7.3","esm2017")}()},1076:(Cn,nt,x)=>{x.d(nt,{$L:()=>Cr,$g:()=>Ye,A4:()=>Ae,Am:()=>fn,As:()=>sr,Bd:()=>ve,Cv:()=>vr,FA:()=>ln,Fy:()=>ct,HN:()=>Nr,Hk:()=>q,I9:()=>mn,Im:()=>st,K3:()=>Fe,KA:()=>Ne,Ku:()=>oe,Ll:()=>me,OE:()=>qr,T9:()=>kt,Tj:()=>hn,Uj:()=>Pe,XA:()=>Ke,ZQ:()=>Ze,bD:()=>Xe,c1:()=>Jt,cY:()=>Qe,dI:()=>ar,dM:()=>Mt,eX:()=>gt,g:()=>Ct,gR:()=>qn,gz:()=>wt,hp:()=>Ut,jZ:()=>Ge,kH:()=>De,kj:()=>xt,lT:()=>$t,lV:()=>Yt,mS:()=>tt,nr:()=>Ht,oD:()=>Yr,od:()=>yr,p7:()=>At,p9:()=>ne,qc:()=>$n,sr:()=>Nt,tD:()=>$e,u:()=>K,vA:()=>$,yU:()=>Et,yw:()=>gi,zW:()=>et,zw:()=>He});const b={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},$=function(ee,pe){if(!ee)throw q(pe)},q=function(ee){return new Error("Firebase Database ("+b.SDK_VERSION+") INTERNAL ASSERT FAILED: "+ee)},H=function(ee){const pe=[];let Oe=0;for(let Tt=0;Tt<ee.length;Tt++){let lt=ee.charCodeAt(Tt);lt<128?pe[Oe++]=lt:lt<2048?(pe[Oe++]=lt>>6|192,pe[Oe++]=63&lt|128):55296==(64512&lt)&&Tt+1<ee.length&&56320==(64512&ee.charCodeAt(Tt+1))?(lt=65536+((1023&lt)<<10)+(1023&ee.charCodeAt(++Tt)),pe[Oe++]=lt>>18|240,pe[Oe++]=lt>>12&63|128,pe[Oe++]=lt>>6&63|128,pe[Oe++]=63&lt|128):(pe[Oe++]=lt>>12|224,pe[Oe++]=lt>>6&63|128,pe[Oe++]=63&lt|128)}return pe},Fe={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(ee,pe){if(!Array.isArray(ee))throw Error("encodeByteArray takes an array as a parameter");this.init_();const Oe=pe?this.byteToCharMapWebSafe_:this.byteToCharMap_,Tt=[];for(let lt=0;lt<ee.length;lt+=3){const On=ee[lt],Yn=lt+1<ee.length,wi=Yn?ee[lt+1]:0,bi=lt+2<ee.length,Lr=bi?ee[lt+2]:0;let rs=(15&wi)<<2|Lr>>6,Ms=63&Lr;bi||(Ms=64,Yn||(rs=64)),Tt.push(Oe[On>>2],Oe[(3&On)<<4|wi>>4],Oe[rs],Oe[Ms])}return Tt.join("")},encodeString(ee,pe){return this.HAS_NATIVE_SUPPORT&&!pe?btoa(ee):this.encodeByteArray(H(ee),pe)},decodeString(ee,pe){return this.HAS_NATIVE_SUPPORT&&!pe?atob(ee):function(ee){const pe=[];let Oe=0,Tt=0;for(;Oe<ee.length;){const lt=ee[Oe++];if(lt<128)pe[Tt++]=String.fromCharCode(lt);else if(lt>191&&lt<224){const On=ee[Oe++];pe[Tt++]=String.fromCharCode((31&lt)<<6|63&On)}else if(lt>239&&lt<365){const bi=((7&lt)<<18|(63&ee[Oe++])<<12|(63&ee[Oe++])<<6|63&ee[Oe++])-65536;pe[Tt++]=String.fromCharCode(55296+(bi>>10)),pe[Tt++]=String.fromCharCode(56320+(1023&bi))}else{const On=ee[Oe++],Yn=ee[Oe++];pe[Tt++]=String.fromCharCode((15&lt)<<12|(63&On)<<6|63&Yn)}}return pe.join("")}(this.decodeStringToByteArray(ee,pe))},decodeStringToByteArray(ee,pe){this.init_();const Oe=pe?this.charToByteMapWebSafe_:this.charToByteMap_,Tt=[];for(let lt=0;lt<ee.length;){const On=Oe[ee.charAt(lt++)],wi=lt<ee.length?Oe[ee.charAt(lt)]:0;++lt;const Lr=lt<ee.length?Oe[ee.charAt(lt)]:64;++lt;const er=lt<ee.length?Oe[ee.charAt(lt)]:64;if(++lt,null==On||null==wi||null==Lr||null==er)throw new Le;Tt.push(On<<2|wi>>4),64!==Lr&&(Tt.push(wi<<4&240|Lr>>2),64!==er&&Tt.push(Lr<<6&192|er))}return Tt},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let ee=0;ee<this.ENCODED_VALS.length;ee++)this.byteToCharMap_[ee]=this.ENCODED_VALS.charAt(ee),this.charToByteMap_[this.byteToCharMap_[ee]]=ee,this.byteToCharMapWebSafe_[ee]=this.ENCODED_VALS_WEBSAFE.charAt(ee),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[ee]]=ee,ee>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(ee)]=ee,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(ee)]=ee)}}};class Le extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Ne=function(ee){const pe=H(ee);return Fe.encodeByteArray(pe,!0)},Pe=function(ee){return Ne(ee).replace(/\./g,"")},K=function(ee){try{return Fe.decodeString(ee,!0)}catch(pe){console.error("base64Decode failed: ",pe)}return null};function Ae(ee){return He(void 0,ee)}function He(ee,pe){if(!(pe instanceof Object))return pe;switch(pe.constructor){case Date:return new Date(pe.getTime());case Object:void 0===ee&&(ee={});break;case Array:ee=[];break;default:return pe}for(const Oe in pe)!pe.hasOwnProperty(Oe)||!ot(Oe)||(ee[Oe]=He(ee[Oe],pe[Oe]));return ee}function ot(ee){return"__proto__"!==ee}function tt(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const Pt=()=>{try{return tt().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const ee=process.env.__FIREBASE_DEFAULTS__;return ee?JSON.parse(ee):void 0})()||(()=>{if(typeof document>"u")return;let ee;try{ee=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const pe=ee&&K(ee[1]);return pe&&JSON.parse(pe)})()}catch(ee){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${ee}`)}},hn=ee=>{var pe,Oe;return null===(Oe=null===(pe=Pt())||void 0===pe?void 0:pe.emulatorHosts)||void 0===Oe?void 0:Oe[ee]},Et=ee=>{const pe=hn(ee);if(!pe)return;const Oe=pe.lastIndexOf(":");if(Oe<=0||Oe+1===pe.length)throw new Error(`Invalid host ${pe} with no separate hostname and port!`);const Tt=parseInt(pe.substring(Oe+1),10);return"["===pe[0]?[pe.substring(1,Oe-1),Tt]:[pe.substring(0,Oe),Tt]},kt=()=>{var ee;return null===(ee=Pt())||void 0===ee?void 0:ee.config},Ke=ee=>{var pe;return null===(pe=Pt())||void 0===pe?void 0:pe[`_${ee}`]};class Qe{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((pe,Oe)=>{this.resolve=pe,this.reject=Oe})}wrapCallback(pe){return(Oe,Tt)=>{Oe?this.reject(Oe):this.resolve(Tt),"function"==typeof pe&&(this.promise.catch(()=>{}),1===pe.length?pe(Oe):pe(Oe,Tt))}}}function ct(ee,pe){if(ee.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Tt=pe||"demo-project",lt=ee.iat||0,On=ee.sub||ee.user_id;if(!On)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Yn=Object.assign({iss:`https://securetoken.google.com/${Tt}`,aud:Tt,iat:lt,exp:lt+3600,auth_time:lt,sub:On,user_id:On,firebase:{sign_in_provider:"custom",identities:{}}},ee);return[Pe(JSON.stringify({alg:"none",type:"JWT"})),Pe(JSON.stringify(Yn)),""].join(".")}function Ze(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Ge(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ze())}function me(){var ee;const pe=null===(ee=Pt())||void 0===ee?void 0:ee.forceEnvironment;if("node"===pe)return!0;if("browser"===pe)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function ve(){return typeof window<"u"||At()}function At(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function Jt(){return typeof navigator<"u"&&"Cloudflare-Workers"===navigator.userAgent}function Nt(){const ee="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof ee&&void 0!==ee.id}function Yt(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function $t(){const ee=Ze();return ee.indexOf("MSIE ")>=0||ee.indexOf("Trident/")>=0}function Ye(){return!0===b.NODE_CLIENT||!0===b.NODE_ADMIN}function Ht(){return!me()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function et(){try{return"object"==typeof indexedDB}catch{return!1}}function gt(){return new Promise((ee,pe)=>{try{let Oe=!0;const Tt="validate-browser-context-for-indexeddb-analytics-module",lt=self.indexedDB.open(Tt);lt.onsuccess=()=>{lt.result.close(),Oe||self.indexedDB.deleteDatabase(Tt),ee(!0)},lt.onupgradeneeded=()=>{Oe=!1},lt.onerror=()=>{var On;pe((null===(On=lt.error)||void 0===On?void 0:On.message)||"")}}catch(Oe){pe(Oe)}})}function Mt(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class Ct extends Error{constructor(pe,Oe,Tt){super(Oe),this.code=pe,this.customData=Tt,this.name="FirebaseError",Object.setPrototypeOf(this,Ct.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ln.prototype.create)}}class ln{constructor(pe,Oe,Tt){this.service=pe,this.serviceName=Oe,this.errors=Tt}create(pe,...Oe){const Tt=Oe[0]||{},lt=`${this.service}/${pe}`,On=this.errors[pe],Yn=On?function nr(ee,pe){return ee.replace(hr,(Oe,Tt)=>{const lt=pe[Tt];return null!=lt?String(lt):`<${Tt}?>`})}(On,Tt):"Error";return new Ct(lt,`${this.serviceName}: ${Yn} (${lt}).`,Tt)}}const hr=/\{\$([^}]+)}/g;function Cr(ee){return JSON.parse(ee)}function sr(ee){return JSON.stringify(ee)}const fr=function(ee){let pe={},Oe={},Tt={},lt="";try{const On=ee.split(".");pe=Cr(K(On[0])||""),Oe=Cr(K(On[1])||""),lt=On[2],Tt=Oe.d||{},delete Oe.d}catch{}return{header:pe,claims:Oe,data:Tt,signature:lt}},vr=function(ee){const Oe=fr(ee).claims;return!!Oe&&"object"==typeof Oe&&Oe.hasOwnProperty("iat")},$n=function(ee){const pe=fr(ee).claims;return"object"==typeof pe&&!0===pe.admin};function qn(ee,pe){return Object.prototype.hasOwnProperty.call(ee,pe)}function gi(ee,pe){if(Object.prototype.hasOwnProperty.call(ee,pe))return ee[pe]}function st(ee){for(const pe in ee)if(Object.prototype.hasOwnProperty.call(ee,pe))return!1;return!0}function De(ee,pe,Oe){const Tt={};for(const lt in ee)Object.prototype.hasOwnProperty.call(ee,lt)&&(Tt[lt]=pe.call(Oe,ee[lt],lt,ee));return Tt}function Xe(ee,pe){if(ee===pe)return!0;const Oe=Object.keys(ee),Tt=Object.keys(pe);for(const lt of Oe){if(!Tt.includes(lt))return!1;const On=ee[lt],Yn=pe[lt];if(je(On)&&je(Yn)){if(!Xe(On,Yn))return!1}else if(On!==Yn)return!1}for(const lt of Tt)if(!Oe.includes(lt))return!1;return!0}function je(ee){return null!==ee&&"object"==typeof ee}function fn(ee){const pe=[];for(const[Oe,Tt]of Object.entries(ee))Array.isArray(Tt)?Tt.forEach(lt=>{pe.push(encodeURIComponent(Oe)+"="+encodeURIComponent(lt))}):pe.push(encodeURIComponent(Oe)+"="+encodeURIComponent(Tt));return pe.length?"&"+pe.join("&"):""}function mn(ee){const pe={};return ee.replace(/^\?/,"").split("&").forEach(Tt=>{if(Tt){const[lt,On]=Tt.split("=");pe[decodeURIComponent(lt)]=decodeURIComponent(On)}}),pe}function Ut(ee){const pe=ee.indexOf("?");if(!pe)return"";const Oe=ee.indexOf("#",pe);return ee.substring(pe,Oe>0?Oe:void 0)}class wt{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let pe=1;pe<this.blockSize;++pe)this.pad_[pe]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(pe,Oe){Oe||(Oe=0);const Tt=this.W_;if("string"==typeof pe)for(let er=0;er<16;er++)Tt[er]=pe.charCodeAt(Oe)<<24|pe.charCodeAt(Oe+1)<<16|pe.charCodeAt(Oe+2)<<8|pe.charCodeAt(Oe+3),Oe+=4;else for(let er=0;er<16;er++)Tt[er]=pe[Oe]<<24|pe[Oe+1]<<16|pe[Oe+2]<<8|pe[Oe+3],Oe+=4;for(let er=16;er<80;er++){const rs=Tt[er-3]^Tt[er-8]^Tt[er-14]^Tt[er-16];Tt[er]=4294967295&(rs<<1|rs>>>31)}let Lr,hi,lt=this.chain_[0],On=this.chain_[1],Yn=this.chain_[2],wi=this.chain_[3],bi=this.chain_[4];for(let er=0;er<80;er++){er<40?er<20?(Lr=wi^On&(Yn^wi),hi=1518500249):(Lr=On^Yn^wi,hi=1859775393):er<60?(Lr=On&Yn|wi&(On|Yn),hi=2400959708):(Lr=On^Yn^wi,hi=3395469782);const rs=(lt<<5|lt>>>27)+Lr+bi+hi+Tt[er]&4294967295;bi=wi,wi=Yn,Yn=4294967295&(On<<30|On>>>2),On=lt,lt=rs}this.chain_[0]=this.chain_[0]+lt&4294967295,this.chain_[1]=this.chain_[1]+On&4294967295,this.chain_[2]=this.chain_[2]+Yn&4294967295,this.chain_[3]=this.chain_[3]+wi&4294967295,this.chain_[4]=this.chain_[4]+bi&4294967295}update(pe,Oe){if(null==pe)return;void 0===Oe&&(Oe=pe.length);const Tt=Oe-this.blockSize;let lt=0;const On=this.buf_;let Yn=this.inbuf_;for(;lt<Oe;){if(0===Yn)for(;lt<=Tt;)this.compress_(pe,lt),lt+=this.blockSize;if("string"==typeof pe){for(;lt<Oe;)if(On[Yn]=pe.charCodeAt(lt),++Yn,++lt,Yn===this.blockSize){this.compress_(On),Yn=0;break}}else for(;lt<Oe;)if(On[Yn]=pe[lt],++Yn,++lt,Yn===this.blockSize){this.compress_(On),Yn=0;break}}this.inbuf_=Yn,this.total_+=Oe}digest(){const pe=[];let Oe=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let lt=this.blockSize-1;lt>=56;lt--)this.buf_[lt]=255&Oe,Oe/=256;this.compress_(this.buf_);let Tt=0;for(let lt=0;lt<5;lt++)for(let On=24;On>=0;On-=8)pe[Tt]=this.chain_[lt]>>On&255,++Tt;return pe}}function $e(ee,pe){const Oe=new _t(ee,pe);return Oe.subscribe.bind(Oe)}class _t{constructor(pe,Oe){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=Oe,this.task.then(()=>{pe(this)}).catch(Tt=>{this.error(Tt)})}next(pe){this.forEachObserver(Oe=>{Oe.next(pe)})}error(pe){this.forEachObserver(Oe=>{Oe.error(pe)}),this.close(pe)}complete(){this.forEachObserver(pe=>{pe.complete()}),this.close()}subscribe(pe,Oe,Tt){let lt;if(void 0===pe&&void 0===Oe&&void 0===Tt)throw new Error("Missing Observer.");lt=function An(ee,pe){if("object"!=typeof ee||null===ee)return!1;for(const Oe of pe)if(Oe in ee&&"function"==typeof ee[Oe])return!0;return!1}(pe,["next","error","complete"])?pe:{next:pe,error:Oe,complete:Tt},void 0===lt.next&&(lt.next=ir),void 0===lt.error&&(lt.error=ir),void 0===lt.complete&&(lt.complete=ir);const On=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?lt.error(this.finalError):lt.complete()}catch{}}),this.observers.push(lt),On}unsubscribeOne(pe){void 0===this.observers||void 0===this.observers[pe]||(delete this.observers[pe],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(pe){if(!this.finalized)for(let Oe=0;Oe<this.observers.length;Oe++)this.sendOne(Oe,pe)}sendOne(pe,Oe){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[pe])try{Oe(this.observers[pe])}catch(Tt){typeof console<"u"&&console.error&&console.error(Tt)}})}close(pe){this.finalized||(this.finalized=!0,void 0!==pe&&(this.finalError=pe),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function ir(){}const yr=function(ee,pe,Oe,Tt){let lt;if(Tt<pe?lt="at least "+pe:Tt>Oe&&(lt=0===Oe?"none":"no more than "+Oe),lt)throw new Error(ee+" failed: Was called with "+Tt+(1===Tt?" argument.":" arguments.")+" Expects "+lt+".")};function ar(ee,pe){return`${ee} failed: ${pe} argument `}function Yr(ee,pe,Oe,Tt){if((!Tt||Oe)&&"function"!=typeof Oe)throw new Error(ar(ee,pe)+"must be a valid function.")}function Nr(ee,pe,Oe,Tt){if((!Tt||Oe)&&("object"!=typeof Oe||null===Oe))throw new Error(ar(ee,pe)+"must be a valid context object.")}const xt=function(ee){const pe=[];let Oe=0;for(let Tt=0;Tt<ee.length;Tt++){let lt=ee.charCodeAt(Tt);if(lt>=55296&&lt<=56319){const On=lt-55296;Tt++,$(Tt<ee.length,"Surrogate pair missing trail surrogate."),lt=65536+(On<<10)+(ee.charCodeAt(Tt)-56320)}lt<128?pe[Oe++]=lt:lt<2048?(pe[Oe++]=lt>>6|192,pe[Oe++]=63&lt|128):lt<65536?(pe[Oe++]=lt>>12|224,pe[Oe++]=lt>>6&63|128,pe[Oe++]=63&lt|128):(pe[Oe++]=lt>>18|240,pe[Oe++]=lt>>12&63|128,pe[Oe++]=lt>>6&63|128,pe[Oe++]=63&lt|128)}return pe},qr=function(ee){let pe=0;for(let Oe=0;Oe<ee.length;Oe++){const Tt=ee.charCodeAt(Oe);Tt<128?pe++:Tt<2048?pe+=2:Tt>=55296&&Tt<=56319?(pe+=4,Oe++):pe+=3}return pe},yi=1e3,Xr=2,pn=144e5,Te=.5;function ne(ee,pe=yi,Oe=Xr){const Tt=pe*Math.pow(Oe,ee),lt=Math.round(Te*Tt*(Math.random()-.5)*2);return Math.min(pn,Tt+lt)}function oe(ee){return ee&&ee._delegate?ee._delegate:ee}},4468:(Cn,nt,x)=>{x.d(nt,{u:()=>Rn});var b=x(4412),$=x(7696),q=x(4438),H=x(177),Ee=x(3710),Fe=x(9253),Le=x(5719),Ne=x(3236),Pe=x(1985),K=x(8455),Ae=x(7673),He=x(9172),ot=x(3946),tt=x(6354),Rt=x(2816),Ft=x(3294),Gt=x(5964),hn=(x(7586),x(3345)),Et=x(9583),kt=x(1076),Ke=x(1362);function Ze(mt,Ie){if(void 0===Ie)return{merge:!1};if(void 0!==Ie.mergeFields&&void 0!==Ie.merge)throw new Et.W6("invalid-argument",`Invalid options passed to function ${mt}(): You cannot specify both "merge" and "mergeFields".`);return Ie}function Ge(){if(typeof Uint8Array>"u")throw new Et.W6("unimplemented","Uint8Arrays are not available in this environment.")}function me(){if(!(0,Et.qG)())throw new Et.W6("unimplemented","Blobs are unavailable in Firestore in this environment.")}class ve{constructor(Ie){this._delegate=Ie}static fromBase64String(Ie){return me(),new ve(Et.Ix.fromBase64String(Ie))}static fromUint8Array(Ie){return Ge(),new ve(Et.Ix.fromUint8Array(Ie))}toBase64(){return me(),this._delegate.toBase64()}toUint8Array(){return Ge(),this._delegate.toUint8Array()}isEqual(Ie){return this._delegate.isEqual(Ie._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function At(mt){return function Jt(mt,Ie){if("object"!=typeof mt||null===mt)return!1;const he=mt;for(const We of Ie)if(We in he&&"function"==typeof he[We])return!0;return!1}(mt,["next","error","complete"])}class Nt{enableIndexedDbPersistence(Ie,he){return(0,Et.ol)(Ie._delegate,{forceOwnership:he})}enableMultiTabIndexedDbPersistence(Ie){return(0,Et.Q5)(Ie._delegate)}clearIndexedDbPersistence(Ie){return(0,Et.me)(Ie._delegate)}}class Yt{constructor(Ie,he,We){this._delegate=he,this._persistenceProvider=We,this.INTERNAL={delete:()=>this.terminate()},Ie instanceof Et.cm||(this._appCompat=Ie)}get _databaseId(){return this._delegate._databaseId}settings(Ie){const he=this._delegate._getSettings();!Ie.merge&&he.host!==Ie.host&&(0,Et.qi)("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),Ie.merge&&delete(Ie=Object.assign(Object.assign({},he),Ie)).merge,this._delegate._setSettings(Ie)}useEmulator(Ie,he,We={}){(0,Et.vN)(this._delegate,Ie,he,We)}enableNetwork(){return(0,Et.Os)(this._delegate)}disableNetwork(){return(0,Et.LA)(this._delegate)}enablePersistence(Ie){let he=!1,We=!1;return Ie&&(he=!!Ie.synchronizeTabs,We=!!Ie.experimentalForceOwningTab,(0,Et.c8)("synchronizeTabs",he,"experimentalForceOwningTab",We)),he?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,We)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return(0,Et.iB)(this._delegate)}onSnapshotsInSync(Ie){return(0,Et.FC)(this._delegate,Ie)}get app(){if(!this._appCompat)throw new Et.W6("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(Ie){try{return new sr(this,(0,Et.rJ)(this._delegate,Ie))}catch(he){throw gt(he,"collection()","Firestore.collection()")}}doc(Ie){try{return new et(this,(0,Et.H9)(this._delegate,Ie))}catch(he){throw gt(he,"doc()","Firestore.doc()")}}collectionGroup(Ie){try{return new nr(this,(0,Et.Cs)(this._delegate,Ie))}catch(he){throw gt(he,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(Ie){return(0,Et.c4)(this._delegate,he=>Ie(new ye(this,he)))}batch(){return(0,Et.Ws)(this._delegate),new Ye(new Et.GA(this._delegate,Ie=>(0,Et.z6)(this._delegate,Ie)))}loadBundle(Ie){return(0,Et.po)(this._delegate,Ie)}namedQuery(Ie){return(0,Et.St)(this._delegate,Ie).then(he=>he?new nr(this,he):null)}}class an extends Et.fS{constructor(Ie){super(),this.firestore=Ie}convertBytes(Ie){return new ve(new Et.Ix(Ie))}convertReference(Ie){const he=this.convertDocumentKey(Ie,this.firestore._databaseId);return et.forKey(he,this.firestore,null)}}class ye{constructor(Ie,he){this._firestore=Ie,this._delegate=he,this._userDataWriter=new an(Ie)}get(Ie){const he=fr(Ie);return this._delegate.get(he).then(We=>new Ct(this._firestore,new Et.Wq(this._firestore._delegate,this._userDataWriter,We._key,We._document,We.metadata,he.converter)))}set(Ie,he,We){const yt=fr(Ie);return We?(Ze("Transaction.set",We),this._delegate.set(yt,he,We)):this._delegate.set(yt,he),this}update(Ie,he,We,...yt){const In=fr(Ie);return 2===arguments.length?this._delegate.update(In,he):this._delegate.update(In,he,We,...yt),this}delete(Ie){const he=fr(Ie);return this._delegate.delete(he),this}}class Ye{constructor(Ie){this._delegate=Ie}set(Ie,he,We){const yt=fr(Ie);return We?(Ze("WriteBatch.set",We),this._delegate.set(yt,he,We)):this._delegate.set(yt,he),this}update(Ie,he,We,...yt){const In=fr(Ie);return 2===arguments.length?this._delegate.update(In,he):this._delegate.update(In,he,We,...yt),this}delete(Ie){const he=fr(Ie);return this._delegate.delete(he),this}commit(){return this._delegate.commit()}}class Ht{constructor(Ie,he,We){this._firestore=Ie,this._userDataWriter=he,this._delegate=We}fromFirestore(Ie,he){const We=new Et.YQ(this._firestore._delegate,this._userDataWriter,Ie._key,Ie._document,Ie.metadata,null);return this._delegate.fromFirestore(new ln(this._firestore,We),he??{})}toFirestore(Ie,he){return he?this._delegate.toFirestore(Ie,he):this._delegate.toFirestore(Ie)}static getInstance(Ie,he){const We=Ht.INSTANCES;let yt=We.get(Ie);yt||(yt=new WeakMap,We.set(Ie,yt));let In=yt.get(he);return In||(In=new Ht(Ie,new an(Ie),he),yt.set(he,In)),In}}Ht.INSTANCES=new WeakMap;class et{constructor(Ie,he){this.firestore=Ie,this._delegate=he,this._userDataWriter=new an(Ie)}static forPath(Ie,he,We){if(Ie.length%2!=0)throw new Et.W6("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${Ie.canonicalString()} has ${Ie.length}`);return new et(he,new Et.T1(he._delegate,We,new Et.K$(Ie)))}static forKey(Ie,he,We){return new et(he,new Et.T1(he._delegate,We,Ie))}get id(){return this._delegate.id}get parent(){return new sr(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(Ie){try{return new sr(this.firestore,(0,Et.rJ)(this._delegate,Ie))}catch(he){throw gt(he,"collection()","DocumentReference.collection()")}}isEqual(Ie){return(Ie=(0,kt.Ku)(Ie))instanceof Et.T1&&(0,Et.yx)(this._delegate,Ie)}set(Ie,he){he=Ze("DocumentReference.set",he);try{return he?(0,Et.BN)(this._delegate,Ie,he):(0,Et.BN)(this._delegate,Ie)}catch(We){throw gt(We,"setDoc()","DocumentReference.set()")}}update(Ie,he,...We){try{return 1===arguments.length?(0,Et.mZ)(this._delegate,Ie):(0,Et.mZ)(this._delegate,Ie,he,...We)}catch(yt){throw gt(yt,"updateDoc()","DocumentReference.update()")}}delete(){return(0,Et.kd)(this._delegate)}onSnapshot(...Ie){const he=Mt(Ie),We=ft(Ie,yt=>new Ct(this.firestore,new Et.Wq(this.firestore._delegate,this._userDataWriter,yt._key,yt._document,yt.metadata,this._delegate.converter)));return(0,Et.aQ)(this._delegate,he,We)}get(Ie){let he;return he="cache"===Ie?.source?(0,Et.nY)(this._delegate):"server"===Ie?.source?(0,Et._e)(this._delegate):(0,Et.x7)(this._delegate),he.then(We=>new Ct(this.firestore,new Et.Wq(this.firestore._delegate,this._userDataWriter,We._key,We._document,We.metadata,this._delegate.converter)))}withConverter(Ie){return new et(this.firestore,this._delegate.withConverter(Ie?Ht.getInstance(this.firestore,Ie):null))}}function gt(mt,Ie,he){return mt.message=mt.message.replace(Ie,he),mt}function Mt(mt){for(const Ie of mt)if("object"==typeof Ie&&!At(Ie))return Ie;return{}}function ft(mt,Ie){var he,We;let yt;return yt=At(mt[0])?mt[0]:At(mt[1])?mt[1]:"function"==typeof mt[0]?{next:mt[0],error:mt[1],complete:mt[2]}:{next:mt[1],error:mt[2],complete:mt[3]},{next:In=>{yt.next&&yt.next(Ie(In))},error:null===(he=yt.error)||void 0===he?void 0:he.bind(yt),complete:null===(We=yt.complete)||void 0===We?void 0:We.bind(yt)}}class Ct{constructor(Ie,he){this._firestore=Ie,this._delegate=he}get ref(){return new et(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(Ie){return this._delegate.data(Ie)}get(Ie,he){return this._delegate.get(Ie,he)}isEqual(Ie){return(0,Et.lN)(this._delegate,Ie._delegate)}}class ln extends Ct{data(Ie){const he=this._delegate.data(Ie);return this._delegate._converter||(0,Et.bI)(void 0!==he,"Document in a QueryDocumentSnapshot should exist"),he}}class nr{constructor(Ie,he){this.firestore=Ie,this._delegate=he,this._userDataWriter=new an(Ie)}where(Ie,he,We){try{return new nr(this.firestore,(0,Et.P)(this._delegate,(0,Et._M)(Ie,he,We)))}catch(yt){throw gt(yt,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(Ie,he){try{return new nr(this.firestore,(0,Et.P)(this._delegate,(0,Et.My)(Ie,he)))}catch(We){throw gt(We,/(orderBy|where)\(\)/,"Query.$1()")}}limit(Ie){try{return new nr(this.firestore,(0,Et.P)(this._delegate,(0,Et.AB)(Ie)))}catch(he){throw gt(he,"limit()","Query.limit()")}}limitToLast(Ie){try{return new nr(this.firestore,(0,Et.P)(this._delegate,(0,Et.$1)(Ie)))}catch(he){throw gt(he,"limitToLast()","Query.limitToLast()")}}startAt(...Ie){try{return new nr(this.firestore,(0,Et.P)(this._delegate,(0,Et.EO)(...Ie)))}catch(he){throw gt(he,"startAt()","Query.startAt()")}}startAfter(...Ie){try{return new nr(this.firestore,(0,Et.P)(this._delegate,(0,Et.HM)(...Ie)))}catch(he){throw gt(he,"startAfter()","Query.startAfter()")}}endBefore(...Ie){try{return new nr(this.firestore,(0,Et.P)(this._delegate,(0,Et.rf)(...Ie)))}catch(he){throw gt(he,"endBefore()","Query.endBefore()")}}endAt(...Ie){try{return new nr(this.firestore,(0,Et.P)(this._delegate,(0,Et.FD)(...Ie)))}catch(he){throw gt(he,"endAt()","Query.endAt()")}}isEqual(Ie){return(0,Et.B)(this._delegate,Ie._delegate)}get(Ie){let he;return he="cache"===Ie?.source?(0,Et.kU)(this._delegate):"server"===Ie?.source?(0,Et.Rr)(this._delegate):(0,Et.GG)(this._delegate),he.then(We=>new Cr(this.firestore,new Et.NJ(this.firestore._delegate,this._userDataWriter,this._delegate,We._snapshot)))}onSnapshot(...Ie){const he=Mt(Ie),We=ft(Ie,yt=>new Cr(this.firestore,new Et.NJ(this.firestore._delegate,this._userDataWriter,this._delegate,yt._snapshot)));return(0,Et.aQ)(this._delegate,he,We)}withConverter(Ie){return new nr(this.firestore,this._delegate.withConverter(Ie?Ht.getInstance(this.firestore,Ie):null))}}class hr{constructor(Ie,he){this._firestore=Ie,this._delegate=he}get type(){return this._delegate.type}get doc(){return new ln(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Cr{constructor(Ie,he){this._firestore=Ie,this._delegate=he}get query(){return new nr(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(Ie=>new ln(this._firestore,Ie))}docChanges(Ie){return this._delegate.docChanges(Ie).map(he=>new hr(this._firestore,he))}forEach(Ie,he){this._delegate.forEach(We=>{Ie.call(he,new ln(this._firestore,We))})}isEqual(Ie){return(0,Et.lN)(this._delegate,Ie._delegate)}}class sr extends nr{constructor(Ie,he){super(Ie,he),this.firestore=Ie,this._delegate=he}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const Ie=this._delegate.parent;return Ie?new et(this.firestore,Ie):null}doc(Ie){try{return new et(this.firestore,void 0===Ie?(0,Et.H9)(this._delegate):(0,Et.H9)(this._delegate,Ie))}catch(he){throw gt(he,"doc()","CollectionReference.doc()")}}add(Ie){return(0,Et.gS)(this._delegate,Ie).then(he=>new et(this.firestore,he))}isEqual(Ie){return(0,Et.yx)(this._delegate,Ie._delegate)}withConverter(Ie){return new sr(this.firestore,this._delegate.withConverter(Ie?Ht.getInstance(this.firestore,Ie):null))}}function fr(mt){return(0,Et.lo)(mt,Et.T1)}class Jn{constructor(...Ie){this._delegate=new Et.uY(...Ie)}static documentId(){return new Jn(Et.FA.keyField().canonicalString())}isEqual(Ie){return(Ie=(0,kt.Ku)(Ie))instanceof Et.uY&&this._delegate._internalPath.isEqual(Ie._internalPath)}}class Rr{constructor(Ie){this._delegate=Ie}static serverTimestamp(){const Ie=(0,Et.O5)();return Ie._methodName="FieldValue.serverTimestamp",new Rr(Ie)}static delete(){const Ie=(0,Et.CL)();return Ie._methodName="FieldValue.delete",new Rr(Ie)}static arrayUnion(...Ie){const he=(0,Et.hq)(...Ie);return he._methodName="FieldValue.arrayUnion",new Rr(he)}static arrayRemove(...Ie){const he=(0,Et.C3)(...Ie);return he._methodName="FieldValue.arrayRemove",new Rr(he)}static increment(Ie){const he=(0,Et.GV)(Ie);return he._methodName="FieldValue.increment",new Rr(he)}isEqual(Ie){return this._delegate.isEqual(Ie._delegate)}}const vr={Firestore:Yt,GeoPoint:Et.Ci,Timestamp:Et.Dc,Blob:ve,Transaction:ye,WriteBatch:Ye,DocumentReference:et,DocumentSnapshot:Ct,Query:nr,QueryDocumentSnapshot:ln,QuerySnapshot:Cr,CollectionReference:sr,FieldPath:Jn,FieldValue:Rr,setLogLevel:function $t(mt){(0,Et.He)(mt)},CACHE_SIZE_UNLIMITED:Et.H6};function De(mt,Ie){return function st(mt,Ie=Ne.E){return new Pe.c(he=>{let We;return null!=Ie?Ie.schedule(()=>{We=mt.onSnapshot({includeMetadataChanges:!0},he)}):We=mt.onSnapshot({includeMetadataChanges:!0},he),()=>{We?.()}})}(mt,Ie)}function je(mt,Ie){return De(mt,Ie).pipe((0,tt.T)(he=>({payload:he,type:"query"})))}!function qn(mt){(function $n(mt,Ie){mt.INTERNAL.registerComponent(new Ke.uA("firestore-compat",he=>{const We=he.getProvider("app-compat").getImmediate(),yt=he.getProvider("firestore").getImmediate();return Ie(We,yt)},"PUBLIC").setServiceProps(Object.assign({},vr)))})(mt,(Ie,he)=>new Yt(Ie,he,new Nt)),mt.registerVersion("@firebase/firestore-compat","0.3.38")}(hn.A),x(7935);class rn{ref;afs;constructor(Ie,he){this.ref=Ie,this.afs=he}set(Ie,he){return this.ref.set(Ie,he)}update(Ie){return this.ref.update(Ie)}delete(){return this.ref.delete()}collection(Ie,he){const We=this.ref.collection(Ie),{ref:yt,query:In}=Yr(We,he);return new gn(yt,In,this.afs)}snapshotChanges(){return function Xe(mt,Ie){return De(mt,Ie).pipe((0,He.Z)(void 0),(0,ot.J)(),(0,tt.T)(he=>{const[We,yt]=he;return yt.exists?We?.exists?{payload:yt,type:"modified"}:{payload:yt,type:"added"}:{payload:yt,type:"removed"}}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Ee.U0)}valueChanges(Ie={}){return this.snapshotChanges().pipe((0,tt.T)(({payload:he})=>Ie.idField?{...he.data(),[Ie.idField]:he.id}:he.data()))}get(Ie){return(0,K.H)(this.ref.get(Ie)).pipe(Ee.U0)}}function fn(mt,Ie){return je(mt,Ie).pipe((0,He.Z)(void 0),(0,ot.J)(),(0,tt.T)(he=>{const[We,yt]=he,In=yt.payload.docChanges(),jn=In.map(Jr=>({type:Jr.type,payload:Jr}));return We&&JSON.stringify(We.payload.metadata)!==JSON.stringify(yt.payload.metadata)&&yt.payload.docs.forEach((Jr,Li)=>{const es=In.find(is=>is.doc.ref.isEqual(Jr.ref)),ds=We?.payload.docs.find(is=>is.ref.isEqual(Jr.ref));es&&JSON.stringify(es.doc.metadata)===JSON.stringify(Jr.metadata)||!es&&ds&&JSON.stringify(ds.metadata)===JSON.stringify(Jr.metadata)||jn.push({type:"modified",payload:{oldIndex:Li,newIndex:Li,type:"modified",doc:Jr}})}),jn}))}function mn(mt,Ie,he){return fn(mt,he).pipe((0,Rt.S)((We,yt)=>function Ut(mt,Ie,he){return Ie.forEach(We=>{he.indexOf(We.type)>-1&&(mt=function $e(mt,Ie){switch(Ie.type){case"added":if(!mt[Ie.newIndex]||!mt[Ie.newIndex].doc.ref.isEqual(Ie.doc.ref))return wt(mt,Ie.newIndex,0,Ie);break;case"modified":if(null==mt[Ie.oldIndex]||mt[Ie.oldIndex].doc.ref.isEqual(Ie.doc.ref)){if(Ie.oldIndex!==Ie.newIndex){const he=mt.slice();return he.splice(Ie.oldIndex,1),he.splice(Ie.newIndex,0,Ie),he}return wt(mt,Ie.newIndex,1,Ie)}break;case"removed":if(mt[Ie.oldIndex]&&mt[Ie.oldIndex].doc.ref.isEqual(Ie.doc.ref))return wt(mt,Ie.oldIndex,1)}return mt}(mt,We))}),mt}(We,yt.map(In=>In.payload),Ie),[]),(0,Ft.F)(),(0,tt.T)(We=>We.map(yt=>({type:yt.type,payload:yt}))))}function wt(mt,Ie,he,...We){const yt=mt.slice();return yt.splice(Ie,he,...We),yt}function _t(mt){return(!mt||0===mt.length)&&(mt=["added","removed","modified"]),mt}class gn{ref;query;afs;constructor(Ie,he,We){this.ref=Ie,this.query=he,this.afs=We}stateChanges(Ie){let he=fn(this.query,this.afs.schedulers.outsideAngular);return Ie&&Ie.length>0&&(he=he.pipe((0,tt.T)(We=>We.filter(yt=>Ie.indexOf(yt.type)>-1)))),he.pipe((0,He.Z)(void 0),(0,ot.J)(),(0,Gt.p)(([We,yt])=>yt.length>0||!We),(0,tt.T)(([,We])=>We),Ee.U0)}auditTrail(Ie){return this.stateChanges(Ie).pipe((0,Rt.S)((he,We)=>[...he,...We],[]))}snapshotChanges(Ie){const he=_t(Ie);return mn(this.query,he,this.afs.schedulers.outsideAngular).pipe(Ee.U0)}valueChanges(Ie={}){return je(this.query,this.afs.schedulers.outsideAngular).pipe((0,tt.T)(he=>he.payload.docs.map(We=>Ie.idField?{...We.data(),[Ie.idField]:We.id}:We.data())),Ee.U0)}get(Ie){return(0,K.H)(this.query.get(Ie)).pipe(Ee.U0)}add(Ie){return this.ref.add(Ie)}doc(Ie){return new rn(this.ref.doc(Ie),this.afs)}}class An{query;afs;constructor(Ie,he){this.query=Ie,this.afs=he}stateChanges(Ie){return Ie&&0!==Ie.length?fn(this.query,this.afs.schedulers.outsideAngular).pipe((0,tt.T)(he=>he.filter(We=>Ie.indexOf(We.type)>-1)),(0,Gt.p)(he=>he.length>0),Ee.U0):fn(this.query,this.afs.schedulers.outsideAngular).pipe(Ee.U0)}auditTrail(Ie){return this.stateChanges(Ie).pipe((0,Rt.S)((he,We)=>[...he,...We],[]))}snapshotChanges(Ie){const he=_t(Ie);return mn(this.query,he,this.afs.schedulers.outsideAngular).pipe(Ee.U0)}valueChanges(Ie={}){return je(this.query,this.afs.schedulers.outsideAngular).pipe((0,tt.T)(We=>We.payload.docs.map(yt=>Ie.idField?{[Ie.idField]:yt.id,...yt.data()}:yt.data())),Ee.U0)}get(Ie){return(0,K.H)(this.query.get(Ie)).pipe(Ee.U0)}}const ir=new q.nKC("angularfire2.enableFirestorePersistence"),yr=new q.nKC("angularfire2.firestore.persistenceSettings"),ar=new q.nKC("angularfire2.firestore.settings"),mr=new q.nKC("angularfire2.firestore.use-emulator");function Yr(mt,Ie=(he=>he)){return{query:Ie(mt),ref:mt}}let Nr=(()=>{class mt{schedulers;firestore;persistenceEnabled$;constructor(he,We,yt,In,jn,Jr,Li,es,ds,is,xs,ua,ys,da,Zs,po,Js){this.schedulers=Li;const So=(0,Fe.iB)(he,Jr,We),Wi=ds;is&&(0,Le.gF)(So,Jr,xs,ys,da,Zs,ua,po),[this.firestore,this.persistenceEnabled$]=(0,Fe.BM)(`${So.name}.firestore`,"AngularFirestore",So.name,()=>{const eo=Jr.runOutsideAngular(()=>So.firestore());if(In&&eo.settings(In),Wi&&eo.useEmulator(...Wi),yt&&!(0,H.Vy)(jn)){const Ur=()=>{try{return(0,K.H)(eo.enablePersistence(es||void 0).then(()=>!0,()=>!1))}catch(Go){return typeof console<"u"&&console.warn(Go),(0,Ae.of)(!1)}};return[eo,Jr.runOutsideAngular(Ur)]}return[eo,(0,Ae.of)(!1)]},[In,Wi,yt])}collection(he,We){let yt;yt="string"==typeof he?this.firestore.collection(he):he;const{ref:In,query:jn}=Yr(yt,We),Jr=this.schedulers.ngZone.run(()=>In);return new gn(Jr,jn,this)}collectionGroup(he,We){const yt=We||(jn=>jn),In=this.firestore.collectionGroup(he);return new An(yt(In),this)}doc(he){let We;We="string"==typeof he?this.firestore.doc(he):he;const yt=this.schedulers.ngZone.run(()=>We);return new rn(yt,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(We){return new(We||mt)(q.KVO(Fe.rx),q.KVO(Fe.uP,8),q.KVO(ir,8),q.KVO(ar,8),q.KVO(q.Agw),q.KVO(q.SKi),q.KVO(Ee.u0),q.KVO(yr,8),q.KVO(mr,8),q.KVO(Le.DS,8),q.KVO(Le.CP,8),q.KVO(Le.yy,8),q.KVO(Le.ZP,8),q.KVO(Le.$z,8),q.KVO(Le.AU,8),q.KVO(Le.UB,8),q.KVO(Ee.Jv,8))};static \u0275prov=q.jDH({token:mt,factory:mt.\u0275fac,providedIn:"any"})}return mt})();var qr=x(1188),ai=x(6860),yi=x(851),Xr=x(6600);const pn=["mat-button",""],Te=[[["",8,"material-icons",3,"iconPositionEnd",""],["mat-icon",3,"iconPositionEnd",""],["","matButtonIcon","",3,"iconPositionEnd",""]],"*",[["","iconPositionEnd","",8,"material-icons"],["mat-icon","iconPositionEnd",""],["","matButtonIcon","","iconPositionEnd",""]]],ne=[".material-icons:not([iconPositionEnd]), mat-icon:not([iconPositionEnd]), [matButtonIcon]:not([iconPositionEnd])","*",".material-icons[iconPositionEnd], mat-icon[iconPositionEnd], [matButtonIcon][iconPositionEnd]"],Yn=[{attribute:"mat-button",mdcClasses:["mdc-button","mat-mdc-button"]},{attribute:"mat-flat-button",mdcClasses:["mdc-button","mdc-button--unelevated","mat-mdc-unelevated-button"]},{attribute:"mat-raised-button",mdcClasses:["mdc-button","mdc-button--raised","mat-mdc-raised-button"]},{attribute:"mat-stroked-button",mdcClasses:["mdc-button","mdc-button--outlined","mat-mdc-outlined-button"]},{attribute:"mat-fab",mdcClasses:["mdc-fab","mat-mdc-fab"]},{attribute:"mat-mini-fab",mdcClasses:["mdc-fab","mdc-fab--mini","mat-mdc-mini-fab"]},{attribute:"mat-icon-button",mdcClasses:["mdc-icon-button","mat-mdc-icon-button"]}];let wi=(()=>{class mt{get ripple(){return this._rippleLoader?.getRipple(this._elementRef.nativeElement)}set ripple(he){this._rippleLoader?.attachRipple(this._elementRef.nativeElement,he)}get disableRipple(){return this._disableRipple}set disableRipple(he){this._disableRipple=he,this._updateRippleDisabled()}get disabled(){return this._disabled}set disabled(he){this._disabled=he,this._updateRippleDisabled()}constructor(he,We,yt,In){this._elementRef=he,this._platform=We,this._ngZone=yt,this._animationMode=In,this._focusMonitor=(0,q.WQX)(yi.FN),this._rippleLoader=(0,q.WQX)(Xr.Ej),this._isFab=!1,this._disableRipple=!1,this._disabled=!1,this._rippleLoader?.configureRipple(this._elementRef.nativeElement,{className:"mat-mdc-button-ripple"});const jn=this._elementRef.nativeElement,Jr=jn.classList;for(const{attribute:Li,mdcClasses:es}of Yn)jn.hasAttribute(Li)&&Jr.add(...es)}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._rippleLoader?.destroyRipple(this._elementRef.nativeElement)}focus(he="program",We){he?this._focusMonitor.focusVia(this._elementRef.nativeElement,he,We):this._elementRef.nativeElement.focus(We)}_updateRippleDisabled(){this._rippleLoader?.setDisabled(this._elementRef.nativeElement,this.disableRipple||this.disabled)}static{this.\u0275fac=function(We){q.QTQ()}}static{this.\u0275dir=q.FsC({type:mt,inputs:{color:"color",disableRipple:[q.Mj6.HasDecoratorInputTransform,"disableRipple","disableRipple",q.L39],disabled:[q.Mj6.HasDecoratorInputTransform,"disabled","disabled",q.L39]},features:[q.GFd]})}}return mt})(),hi=(()=>{class mt extends wi{constructor(he,We,yt,In){super(he,We,yt,In)}static{this.\u0275fac=function(We){return new(We||mt)(q.rXU(q.aKT),q.rXU(ai.OD),q.rXU(q.SKi),q.rXU(q.bc$,8))}}static{this.\u0275cmp=q.VBU({type:mt,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-flat-button",""],["button","mat-stroked-button",""]],hostVars:9,hostBindings:function(We,yt){2&We&&(q.BMQ("disabled",yt.disabled||null),q.HbH(yt.color?"mat-"+yt.color:""),q.AVh("_mat-animation-noopable","NoopAnimations"===yt._animationMode)("mat-unthemed",!yt.color)("mat-mdc-button-base",!0))},exportAs:["matButton"],features:[q.Vt3],attrs:pn,ngContentSelectors:ne,decls:7,vars:4,consts:[[1,"mat-mdc-button-persistent-ripple"],[1,"mdc-button__label"],[1,"mat-mdc-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(We,yt){1&We&&(q.NAR(Te),q.nrm(0,"span",0),q.SdG(1),q.j41(2,"span",1),q.SdG(3,1),q.k0s(),q.SdG(4,2),q.nrm(5,"span",2)(6,"span",3)),2&We&&q.AVh("mdc-button__ripple",!yt._isFab)("mdc-fab__ripple",yt._isFab)},styles:['.mdc-touch-target-wrapper{display:inline}.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity, 0);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-button{position:relative;display:inline-flex;align-items:center;justify-content:center;box-sizing:border-box;min-width:64px;border:none;outline:none;line-height:inherit;user-select:none;-webkit-appearance:none;overflow:visible;vertical-align:middle;background:rgba(0,0,0,0)}.mdc-button .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}.mdc-button::-moz-focus-inner{padding:0;border:0}.mdc-button:active{outline:none}.mdc-button:hover{cursor:pointer}.mdc-button:disabled{cursor:default;pointer-events:none}.mdc-button[hidden]{display:none}.mdc-button .mdc-button__icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top}[dir=rtl] .mdc-button .mdc-button__icon,.mdc-button .mdc-button__icon[dir=rtl]{margin-left:8px;margin-right:0}.mdc-button .mdc-button__progress-indicator{font-size:0;position:absolute;transform:translate(-50%, -50%);top:50%;left:50%;line-height:initial}.mdc-button .mdc-button__label{position:relative}.mdc-button .mdc-button__focus-ring{pointer-events:none;border:2px solid rgba(0,0,0,0);border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px);display:none}@media screen and (forced-colors: active){.mdc-button .mdc-button__focus-ring{border-color:CanvasText}}.mdc-button .mdc-button__focus-ring::after{content:"";border:2px solid rgba(0,0,0,0);border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mdc-button .mdc-button__focus-ring::after{border-color:CanvasText}}@media screen and (forced-colors: active){.mdc-button.mdc-ripple-upgraded--background-focused .mdc-button__focus-ring,.mdc-button:not(.mdc-ripple-upgraded):focus .mdc-button__focus-ring{display:block}}.mdc-button .mdc-button__touch{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%)}.mdc-button__label+.mdc-button__icon{margin-left:8px;margin-right:0}[dir=rtl] .mdc-button__label+.mdc-button__icon,.mdc-button__label+.mdc-button__icon[dir=rtl]{margin-left:0;margin-right:8px}svg.mdc-button__icon{fill:currentColor}.mdc-button--touch{margin-top:6px;margin-bottom:6px}.mdc-button{padding:0 8px 0 8px}.mdc-button--unelevated{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 16px 0 16px}.mdc-button--unelevated.mdc-button--icon-trailing{padding:0 12px 0 16px}.mdc-button--unelevated.mdc-button--icon-leading{padding:0 16px 0 12px}.mdc-button--raised{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 16px 0 16px}.mdc-button--raised.mdc-button--icon-trailing{padding:0 12px 0 16px}.mdc-button--raised.mdc-button--icon-leading{padding:0 16px 0 12px}.mdc-button--outlined{border-style:solid;transition:border 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-button--outlined .mdc-button__ripple{border-style:solid;border-color:rgba(0,0,0,0)}.mat-mdc-button{font-family:var(--mdc-text-button-label-text-font);font-size:var(--mdc-text-button-label-text-size);letter-spacing:var(--mdc-text-button-label-text-tracking);font-weight:var(--mdc-text-button-label-text-weight);text-transform:var(--mdc-text-button-label-text-transform);height:var(--mdc-text-button-container-height);border-radius:var(--mdc-text-button-container-shape);--mdc-text-button-container-shape:4px;--mdc-text-button-container-height:36px;--mdc-text-button-keep-touch-target:false}.mat-mdc-button:not(:disabled){color:var(--mdc-text-button-label-text-color)}.mat-mdc-button:disabled{color:var(--mdc-text-button-disabled-label-text-color)}.mat-mdc-button .mdc-button__ripple{border-radius:var(--mdc-text-button-container-shape)}.mat-mdc-button .mat-ripple-element{background-color:var(--mat-text-button-ripple-color)}.mat-mdc-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-text-button-state-layer-color)}.mat-mdc-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-hover-state-layer-opacity)}.mat-mdc-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-focus-state-layer-opacity)}.mat-mdc-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-pressed-state-layer-opacity)}.mat-mdc-button[disabled]{cursor:default;pointer-events:none;color:var(--mdc-text-button-disabled-label-text-color)}.mat-mdc-unelevated-button{font-family:var(--mdc-filled-button-label-text-font);font-size:var(--mdc-filled-button-label-text-size);letter-spacing:var(--mdc-filled-button-label-text-tracking);font-weight:var(--mdc-filled-button-label-text-weight);text-transform:var(--mdc-filled-button-label-text-transform);height:var(--mdc-filled-button-container-height);border-radius:var(--mdc-filled-button-container-shape);--mdc-filled-button-container-shape:4px;--mdc-filled-button-container-elevation:0;--mdc-filled-button-disabled-container-elevation:0;--mdc-filled-button-focus-container-elevation:0;--mdc-filled-button-hover-container-elevation:0;--mdc-filled-button-keep-touch-target:false;--mdc-filled-button-pressed-container-elevation:0}.mat-mdc-unelevated-button:not(:disabled){background-color:var(--mdc-filled-button-container-color)}.mat-mdc-unelevated-button:disabled{background-color:var(--mdc-filled-button-disabled-container-color)}.mat-mdc-unelevated-button:not(:disabled){color:var(--mdc-filled-button-label-text-color)}.mat-mdc-unelevated-button:disabled{color:var(--mdc-filled-button-disabled-label-text-color)}.mat-mdc-unelevated-button .mdc-button__ripple{border-radius:var(--mdc-filled-button-container-shape)}.mat-mdc-unelevated-button .mat-ripple-element{background-color:var(--mat-filled-button-ripple-color)}.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-filled-button-state-layer-color)}.mat-mdc-unelevated-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-hover-state-layer-opacity)}.mat-mdc-unelevated-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-focus-state-layer-opacity)}.mat-mdc-unelevated-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-pressed-state-layer-opacity)}.mat-mdc-unelevated-button[disabled]{cursor:default;pointer-events:none;color:var(--mdc-filled-button-disabled-label-text-color);background-color:var(--mdc-filled-button-disabled-container-color)}.mat-mdc-raised-button{font-family:var(--mdc-protected-button-label-text-font);font-size:var(--mdc-protected-button-label-text-size);letter-spacing:var(--mdc-protected-button-label-text-tracking);font-weight:var(--mdc-protected-button-label-text-weight);text-transform:var(--mdc-protected-button-label-text-transform);height:var(--mdc-protected-button-container-height);border-radius:var(--mdc-protected-button-container-shape);--mdc-protected-button-container-shape:4px;--mdc-protected-button-keep-touch-target:false}.mat-mdc-raised-button:not(:disabled){background-color:var(--mdc-protected-button-container-color)}.mat-mdc-raised-button:disabled{background-color:var(--mdc-protected-button-disabled-container-color)}.mat-mdc-raised-button:not(:disabled){color:var(--mdc-protected-button-label-text-color)}.mat-mdc-raised-button:disabled{color:var(--mdc-protected-button-disabled-label-text-color)}.mat-mdc-raised-button .mdc-button__ripple{border-radius:var(--mdc-protected-button-container-shape)}.mat-mdc-raised-button .mat-ripple-element{background-color:var(--mat-protected-button-ripple-color)}.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-protected-button-state-layer-color)}.mat-mdc-raised-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-hover-state-layer-opacity)}.mat-mdc-raised-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-focus-state-layer-opacity)}.mat-mdc-raised-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-pressed-state-layer-opacity)}.mat-mdc-raised-button[disabled]{cursor:default;pointer-events:none;color:var(--mdc-protected-button-disabled-label-text-color);background-color:var(--mdc-protected-button-disabled-container-color)}.mat-mdc-raised-button[disabled][disabled]{box-shadow:none}.mat-mdc-outlined-button{font-family:var(--mdc-outlined-button-label-text-font);font-size:var(--mdc-outlined-button-label-text-size);letter-spacing:var(--mdc-outlined-button-label-text-tracking);font-weight:var(--mdc-outlined-button-label-text-weight);text-transform:var(--mdc-outlined-button-label-text-transform);height:var(--mdc-outlined-button-container-height);border-radius:var(--mdc-outlined-button-container-shape);padding:0 15px 0 15px;border-width:var(--mdc-outlined-button-outline-width);--mdc-outlined-button-keep-touch-target:false;--mdc-outlined-button-outline-width:1px;--mdc-outlined-button-container-shape:4px}.mat-mdc-outlined-button:not(:disabled){color:var(--mdc-outlined-button-label-text-color)}.mat-mdc-outlined-button:disabled{color:var(--mdc-outlined-button-disabled-label-text-color)}.mat-mdc-outlined-button .mdc-button__ripple{border-radius:var(--mdc-outlined-button-container-shape)}.mat-mdc-outlined-button:not(:disabled){border-color:var(--mdc-outlined-button-outline-color)}.mat-mdc-outlined-button:disabled{border-color:var(--mdc-outlined-button-disabled-outline-color)}.mat-mdc-outlined-button.mdc-button--icon-trailing{padding:0 11px 0 15px}.mat-mdc-outlined-button.mdc-button--icon-leading{padding:0 15px 0 11px}.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px;border-width:var(--mdc-outlined-button-outline-width)}.mat-mdc-outlined-button .mdc-button__touch{left:calc(-1 * var(--mdc-outlined-button-outline-width));width:calc(100% + 2 * var(--mdc-outlined-button-outline-width))}.mat-mdc-outlined-button .mat-ripple-element{background-color:var(--mat-outlined-button-ripple-color)}.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-outlined-button-state-layer-color)}.mat-mdc-outlined-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-hover-state-layer-opacity)}.mat-mdc-outlined-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-focus-state-layer-opacity)}.mat-mdc-outlined-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-pressed-state-layer-opacity)}.mat-mdc-outlined-button[disabled]{cursor:default;pointer-events:none;color:var(--mdc-outlined-button-disabled-label-text-color);border-color:var(--mdc-outlined-button-disabled-outline-color)}.mat-mdc-button-base{text-decoration:none}.mat-mdc-button,.mat-mdc-unelevated-button,.mat-mdc-raised-button,.mat-mdc-outlined-button{-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0}.mat-mdc-button .mdc-button__label,.mat-mdc-unelevated-button .mdc-button__label,.mat-mdc-raised-button .mdc-button__label,.mat-mdc-outlined-button .mdc-button__label{z-index:1}.mat-mdc-button .mat-mdc-focus-indicator,.mat-mdc-unelevated-button .mat-mdc-focus-indicator,.mat-mdc-raised-button .mat-mdc-focus-indicator,.mat-mdc-outlined-button .mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-unelevated-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-raised-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-outlined-button:focus .mat-mdc-focus-indicator::before{content:""}.mat-mdc-button .mat-mdc-button-touch-target,.mat-mdc-unelevated-button .mat-mdc-button-touch-target,.mat-mdc-raised-button .mat-mdc-button-touch-target,.mat-mdc-outlined-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%)}.mat-mdc-button._mat-animation-noopable,.mat-mdc-unelevated-button._mat-animation-noopable,.mat-mdc-raised-button._mat-animation-noopable,.mat-mdc-outlined-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-button>.mat-icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem}[dir=rtl] .mat-mdc-button>.mat-icon,.mat-mdc-button>.mat-icon[dir=rtl]{margin-left:8px;margin-right:0}.mat-mdc-button .mdc-button__label+.mat-icon{margin-left:8px;margin-right:0}[dir=rtl] .mat-mdc-button .mdc-button__label+.mat-icon,.mat-mdc-button .mdc-button__label+.mat-icon[dir=rtl]{margin-left:0;margin-right:8px}.mat-mdc-unelevated-button>.mat-icon,.mat-mdc-raised-button>.mat-icon,.mat-mdc-outlined-button>.mat-icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem;margin-left:-4px;margin-right:8px}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon,[dir=rtl] .mat-mdc-raised-button>.mat-icon,[dir=rtl] .mat-mdc-outlined-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon[dir=rtl],.mat-mdc-raised-button>.mat-icon[dir=rtl],.mat-mdc-outlined-button>.mat-icon[dir=rtl]{margin-left:8px;margin-right:0}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon,[dir=rtl] .mat-mdc-raised-button>.mat-icon,[dir=rtl] .mat-mdc-outlined-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon[dir=rtl],.mat-mdc-raised-button>.mat-icon[dir=rtl],.mat-mdc-outlined-button>.mat-icon[dir=rtl]{margin-left:8px;margin-right:-4px}.mat-mdc-unelevated-button .mdc-button__label+.mat-icon,.mat-mdc-raised-button .mdc-button__label+.mat-icon,.mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-left:8px;margin-right:-4px}[dir=rtl] .mat-mdc-unelevated-button .mdc-button__label+.mat-icon,[dir=rtl] .mat-mdc-raised-button .mdc-button__label+.mat-icon,[dir=rtl] .mat-mdc-outlined-button .mdc-button__label+.mat-icon,.mat-mdc-unelevated-button .mdc-button__label+.mat-icon[dir=rtl],.mat-mdc-raised-button .mdc-button__label+.mat-icon[dir=rtl],.mat-mdc-outlined-button .mdc-button__label+.mat-icon[dir=rtl]{margin-left:-4px;margin-right:8px}.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px;border-width:-1px}.mat-mdc-unelevated-button .mat-mdc-focus-indicator::before,.mat-mdc-raised-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 2px)*-1)}.mat-mdc-outlined-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 3px)*-1)}',".cdk-high-contrast-active .mat-mdc-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-unelevated-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-raised-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-outlined-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-icon-button{outline:solid 1px}"],encapsulation:2,changeDetection:0})}}return mt})(),fo=(()=>{class mt{static{this.\u0275fac=function(We){return new(We||mt)}}static{this.\u0275mod=q.$C({type:mt})}static{this.\u0275inj=q.G2t({imports:[Xr.yE,Xr.pZ,Xr.yE]})}}return mt})();var Gs=x(1413),_s=x(9969),Ts=x(6939),Ue=x(6697),it=x(6977),ut=x(9327),un=x(7987);function sn(mt,Ie){if(1&mt){const he=q.RV6();q.j41(0,"div",1)(1,"button",2),q.bIt("click",function(){q.eBV(he);const yt=q.XpG();return q.Njj(yt.action())}),q.EFF(2),q.k0s()()}if(2&mt){const he=q.XpG();q.R7$(2),q.SpI(" ",he.data.action," ")}}const Sn=["label"];function jt(mt,Ie){}const Xn=Math.pow(2,31)-1;class Bn{constructor(Ie,he){this._overlayRef=he,this._afterDismissed=new Gs.B,this._afterOpened=new Gs.B,this._onAction=new Gs.B,this._dismissedByAction=!1,this.containerInstance=Ie,Ie._onExit.subscribe(()=>this._finishDismiss())}dismiss(){this._afterDismissed.closed||this.containerInstance.exit(),clearTimeout(this._durationTimeoutId)}dismissWithAction(){this._onAction.closed||(this._dismissedByAction=!0,this._onAction.next(),this._onAction.complete(),this.dismiss()),clearTimeout(this._durationTimeoutId)}closeWithAction(){this.dismissWithAction()}_dismissAfter(Ie){this._durationTimeoutId=setTimeout(()=>this.dismiss(),Math.min(Ie,Xn))}_open(){this._afterOpened.closed||(this._afterOpened.next(),this._afterOpened.complete())}_finishDismiss(){this._overlayRef.dispose(),this._onAction.closed||this._onAction.complete(),this._afterDismissed.next({dismissedByAction:this._dismissedByAction}),this._afterDismissed.complete(),this._dismissedByAction=!1}afterDismissed(){return this._afterDismissed}afterOpened(){return this.containerInstance._onEnter}onAction(){return this._onAction}}const ti=new q.nKC("MatSnackBarData");class wr{constructor(){this.politeness="assertive",this.announcementMessage="",this.duration=0,this.data=null,this.horizontalPosition="center",this.verticalPosition="bottom"}}let yn=(()=>{class mt{static{this.\u0275fac=function(We){return new(We||mt)}}static{this.\u0275dir=q.FsC({type:mt,selectors:[["","matSnackBarLabel",""]],hostAttrs:[1,"mat-mdc-snack-bar-label","mdc-snackbar__label"],standalone:!0})}}return mt})(),Dn=(()=>{class mt{static{this.\u0275fac=function(We){return new(We||mt)}}static{this.\u0275dir=q.FsC({type:mt,selectors:[["","matSnackBarActions",""]],hostAttrs:[1,"mat-mdc-snack-bar-actions","mdc-snackbar__actions"],standalone:!0})}}return mt})(),or=(()=>{class mt{static{this.\u0275fac=function(We){return new(We||mt)}}static{this.\u0275dir=q.FsC({type:mt,selectors:[["","matSnackBarAction",""]],hostAttrs:[1,"mat-mdc-snack-bar-action","mdc-snackbar__action"],standalone:!0})}}return mt})(),gr=(()=>{class mt{constructor(he,We){this.snackBarRef=he,this.data=We}action(){this.snackBarRef.dismissWithAction()}get hasAction(){return!!this.data.action}static{this.\u0275fac=function(We){return new(We||mt)(q.rXU(Bn),q.rXU(ti))}}static{this.\u0275cmp=q.VBU({type:mt,selectors:[["simple-snack-bar"]],hostAttrs:[1,"mat-mdc-simple-snack-bar"],exportAs:["matSnackBar"],standalone:!0,features:[q.aNF],decls:3,vars:2,consts:[["matSnackBarLabel",""],["matSnackBarActions",""],["mat-button","","matSnackBarAction","",3,"click"]],template:function(We,yt){1&We&&(q.j41(0,"div",0),q.EFF(1),q.k0s(),q.DNE(2,sn,3,1,"div",1)),2&We&&(q.R7$(),q.SpI(" ",yt.data.message,"\n"),q.R7$(),q.vxM(2,yt.hasAction?2:-1))},dependencies:[fo,hi,yn,Dn,or,H.MD],styles:[".mat-mdc-simple-snack-bar{display:flex}"],encapsulation:2,changeDetection:0})}}return mt})();const _r={snackBarState:(0,_s.hZ)("state",[(0,_s.wk)("void, hidden",(0,_s.iF)({transform:"scale(0.8)",opacity:0})),(0,_s.wk)("visible",(0,_s.iF)({transform:"scale(1)",opacity:1})),(0,_s.kY)("* => visible",(0,_s.i0)("150ms cubic-bezier(0, 0, 0.2, 1)")),(0,_s.kY)("* => void, * => hidden",(0,_s.i0)("75ms cubic-bezier(0.4, 0.0, 1, 1)",(0,_s.iF)({opacity:0})))])};let xn=0,Zr=(()=>{class mt extends Ts.lb{constructor(he,We,yt,In,jn){super(),this._ngZone=he,this._elementRef=We,this._changeDetectorRef=yt,this._platform=In,this.snackBarConfig=jn,this._document=(0,q.WQX)(H.qQ),this._trackedModals=new Set,this._announceDelay=150,this._destroyed=!1,this._onAnnounce=new Gs.B,this._onExit=new Gs.B,this._onEnter=new Gs.B,this._animationState="void",this._liveElementId="mat-snack-bar-container-live-"+xn++,this.attachDomPortal=Jr=>{this._assertNotAttached();const Li=this._portalOutlet.attachDomPortal(Jr);return this._afterPortalAttached(),Li},this._live="assertive"!==jn.politeness||jn.announcementMessage?"off"===jn.politeness?"off":"polite":"assertive",this._platform.FIREFOX&&("polite"===this._live&&(this._role="status"),"assertive"===this._live&&(this._role="alert"))}attachComponentPortal(he){this._assertNotAttached();const We=this._portalOutlet.attachComponentPortal(he);return this._afterPortalAttached(),We}attachTemplatePortal(he){this._assertNotAttached();const We=this._portalOutlet.attachTemplatePortal(he);return this._afterPortalAttached(),We}onAnimationEnd(he){const{fromState:We,toState:yt}=he;if(("void"===yt&&"void"!==We||"hidden"===yt)&&this._completeExit(),"visible"===yt){const In=this._onEnter;this._ngZone.run(()=>{In.next(),In.complete()})}}enter(){this._destroyed||(this._animationState="visible",this._changeDetectorRef.detectChanges(),this._screenReaderAnnounce())}exit(){return this._ngZone.run(()=>{this._animationState="hidden",this._elementRef.nativeElement.setAttribute("mat-exit",""),clearTimeout(this._announceTimeoutId)}),this._onExit}ngOnDestroy(){this._destroyed=!0,this._clearFromModals(),this._completeExit()}_completeExit(){this._ngZone.onMicrotaskEmpty.pipe((0,Ue.s)(1)).subscribe(()=>{this._ngZone.run(()=>{this._onExit.next(),this._onExit.complete()})})}_afterPortalAttached(){const he=this._elementRef.nativeElement,We=this.snackBarConfig.panelClass;We&&(Array.isArray(We)?We.forEach(jn=>he.classList.add(jn)):he.classList.add(We)),this._exposeToModals();const yt=this._label.nativeElement,In="mdc-snackbar__label";yt.classList.toggle(In,!yt.querySelector(`.${In}`))}_exposeToModals(){const he=this._liveElementId,We=this._document.querySelectorAll('body > .cdk-overlay-container [aria-modal="true"]');for(let yt=0;yt<We.length;yt++){const In=We[yt],jn=In.getAttribute("aria-owns");this._trackedModals.add(In),jn?-1===jn.indexOf(he)&&In.setAttribute("aria-owns",jn+" "+he):In.setAttribute("aria-owns",he)}}_clearFromModals(){this._trackedModals.forEach(he=>{const We=he.getAttribute("aria-owns");if(We){const yt=We.replace(this._liveElementId,"").trim();yt.length>0?he.setAttribute("aria-owns",yt):he.removeAttribute("aria-owns")}}),this._trackedModals.clear()}_assertNotAttached(){this._portalOutlet.hasAttached()}_screenReaderAnnounce(){this._announceTimeoutId||this._ngZone.runOutsideAngular(()=>{this._announceTimeoutId=setTimeout(()=>{const he=this._elementRef.nativeElement.querySelector("[aria-hidden]"),We=this._elementRef.nativeElement.querySelector("[aria-live]");if(he&&We){let yt=null;this._platform.isBrowser&&document.activeElement instanceof HTMLElement&&he.contains(document.activeElement)&&(yt=document.activeElement),he.removeAttribute("aria-hidden"),We.appendChild(he),yt?.focus(),this._onAnnounce.next(),this._onAnnounce.complete()}},this._announceDelay)})}static{this.\u0275fac=function(We){return new(We||mt)(q.rXU(q.SKi),q.rXU(q.aKT),q.rXU(q.gRc),q.rXU(ai.OD),q.rXU(wr))}}static{this.\u0275cmp=q.VBU({type:mt,selectors:[["mat-snack-bar-container"]],viewQuery:function(We,yt){if(1&We&&(q.GBs(Ts.I3,7),q.GBs(Sn,7)),2&We){let In;q.mGM(In=q.lsd())&&(yt._portalOutlet=In.first),q.mGM(In=q.lsd())&&(yt._label=In.first)}},hostAttrs:[1,"mdc-snackbar","mat-mdc-snack-bar-container","mdc-snackbar--open"],hostVars:1,hostBindings:function(We,yt){1&We&&q.Kam("@state.done",function(jn){return yt.onAnimationEnd(jn)}),2&We&&q.zvX("@state",yt._animationState)},standalone:!0,features:[q.Vt3,q.aNF],decls:6,vars:3,consts:[["label",""],[1,"mdc-snackbar__surface"],[1,"mat-mdc-snack-bar-label"],["aria-hidden","true"],["cdkPortalOutlet",""]],template:function(We,yt){1&We&&(q.j41(0,"div",1)(1,"div",2,0)(3,"div",3),q.DNE(4,jt,0,0,"ng-template",4),q.k0s(),q.nrm(5,"div"),q.k0s()()),2&We&&(q.R7$(5),q.BMQ("aria-live",yt._live)("role",yt._role)("id",yt._liveElementId))},dependencies:[Ts.jc,Ts.I3],styles:['.mdc-snackbar{display:none;position:fixed;right:0;bottom:0;left:0;align-items:center;justify-content:center;box-sizing:border-box;pointer-events:none;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mdc-snackbar--opening,.mdc-snackbar--open,.mdc-snackbar--closing{display:flex}.mdc-snackbar--open .mdc-snackbar__label,.mdc-snackbar--open .mdc-snackbar__actions{visibility:visible}.mdc-snackbar__surface{padding-left:0;padding-right:8px;display:flex;align-items:center;justify-content:flex-start;box-sizing:border-box;transform:scale(0.8);opacity:0}.mdc-snackbar__surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-snackbar__surface::before{border-color:CanvasText}}[dir=rtl] .mdc-snackbar__surface,.mdc-snackbar__surface[dir=rtl]{padding-left:8px;padding-right:0}.mdc-snackbar--open .mdc-snackbar__surface{transform:scale(1);opacity:1;pointer-events:auto}.mdc-snackbar--closing .mdc-snackbar__surface{transform:scale(1)}.mdc-snackbar__label{padding-left:16px;padding-right:8px;width:100%;flex-grow:1;box-sizing:border-box;margin:0;visibility:hidden;padding-top:14px;padding-bottom:14px}[dir=rtl] .mdc-snackbar__label,.mdc-snackbar__label[dir=rtl]{padding-left:8px;padding-right:16px}.mdc-snackbar__label::before{display:inline;content:attr(data-mdc-snackbar-label-text)}.mdc-snackbar__actions{display:flex;flex-shrink:0;align-items:center;box-sizing:border-box;visibility:hidden}.mdc-snackbar__action+.mdc-snackbar__dismiss{margin-left:8px;margin-right:0}[dir=rtl] .mdc-snackbar__action+.mdc-snackbar__dismiss,.mdc-snackbar__action+.mdc-snackbar__dismiss[dir=rtl]{margin-left:0;margin-right:8px}.mat-mdc-snack-bar-container{margin:8px;position:static}.mat-mdc-snack-bar-container .mdc-snackbar__surface{min-width:344px}@media(max-width: 480px),(max-width: 344px){.mat-mdc-snack-bar-container .mdc-snackbar__surface{min-width:100%}}@media(max-width: 480px),(max-width: 344px){.mat-mdc-snack-bar-container{width:100vw}}.mat-mdc-snack-bar-container .mdc-snackbar__surface{max-width:672px}.mat-mdc-snack-bar-container .mdc-snackbar__surface{box-shadow:0px 3px 5px -1px rgba(0, 0, 0, 0.2), 0px 6px 10px 0px rgba(0, 0, 0, 0.14), 0px 1px 18px 0px rgba(0, 0, 0, 0.12)}.mat-mdc-snack-bar-container .mdc-snackbar__surface{background-color:var(--mdc-snackbar-container-color)}.mat-mdc-snack-bar-container .mdc-snackbar__surface{border-radius:var(--mdc-snackbar-container-shape)}.mat-mdc-snack-bar-container .mdc-snackbar__label{color:var(--mdc-snackbar-supporting-text-color)}.mat-mdc-snack-bar-container .mdc-snackbar__label{font-size:var(--mdc-snackbar-supporting-text-size);font-family:var(--mdc-snackbar-supporting-text-font);font-weight:var(--mdc-snackbar-supporting-text-weight);line-height:var(--mdc-snackbar-supporting-text-line-height)}.mat-mdc-snack-bar-container .mat-mdc-button.mat-mdc-snack-bar-action:not(:disabled){color:var(--mat-snack-bar-button-color);--mat-text-button-state-layer-color:currentColor;--mat-text-button-ripple-color:currentColor}.mat-mdc-snack-bar-container .mat-mdc-button.mat-mdc-snack-bar-action:not(:disabled) .mat-ripple-element{opacity:.1}.mat-mdc-snack-bar-container .mdc-snackbar__label::before{display:none}.mat-mdc-snack-bar-handset,.mat-mdc-snack-bar-container,.mat-mdc-snack-bar-label{flex:1 1 auto}.mat-mdc-snack-bar-handset .mdc-snackbar__surface{width:100%}'],encapsulation:2,data:{animation:[_r.snackBarState]}})}}return mt})();const kr=new q.nKC("mat-snack-bar-default-options",{providedIn:"root",factory:function Ri(){return new wr}});let oi=(()=>{class mt{get _openedSnackBarRef(){const he=this._parentSnackBar;return he?he._openedSnackBarRef:this._snackBarRefAtThisLevel}set _openedSnackBarRef(he){this._parentSnackBar?this._parentSnackBar._openedSnackBarRef=he:this._snackBarRefAtThisLevel=he}constructor(he,We,yt,In,jn,Jr){this._overlay=he,this._live=We,this._injector=yt,this._breakpointObserver=In,this._parentSnackBar=jn,this._defaultConfig=Jr,this._snackBarRefAtThisLevel=null,this.simpleSnackBarComponent=gr,this.snackBarContainerComponent=Zr,this.handsetCssClass="mat-mdc-snack-bar-handset"}openFromComponent(he,We){return this._attach(he,We)}openFromTemplate(he,We){return this._attach(he,We)}open(he,We="",yt){const In={...this._defaultConfig,...yt};return In.data={message:he,action:We},In.announcementMessage===he&&(In.announcementMessage=void 0),this.openFromComponent(this.simpleSnackBarComponent,In)}dismiss(){this._openedSnackBarRef&&this._openedSnackBarRef.dismiss()}ngOnDestroy(){this._snackBarRefAtThisLevel&&this._snackBarRefAtThisLevel.dismiss()}_attachSnackBarContainer(he,We){const In=q.zZn.create({parent:We&&We.viewContainerRef&&We.viewContainerRef.injector||this._injector,providers:[{provide:wr,useValue:We}]}),jn=new Ts.A8(this.snackBarContainerComponent,We.viewContainerRef,In),Jr=he.attach(jn);return Jr.instance.snackBarConfig=We,Jr.instance}_attach(he,We){const yt={...new wr,...this._defaultConfig,...We},In=this._createOverlay(yt),jn=this._attachSnackBarContainer(In,yt),Jr=new Bn(jn,In);if(he instanceof q.C4Q){const Li=new Ts.VA(he,null,{$implicit:yt.data,snackBarRef:Jr});Jr.instance=jn.attachTemplatePortal(Li)}else{const Li=this._createInjector(yt,Jr),es=new Ts.A8(he,void 0,Li),ds=jn.attachComponentPortal(es);Jr.instance=ds.instance}return this._breakpointObserver.observe(ut.Rp.HandsetPortrait).pipe((0,it.Q)(In.detachments())).subscribe(Li=>{In.overlayElement.classList.toggle(this.handsetCssClass,Li.matches)}),yt.announcementMessage&&jn._onAnnounce.subscribe(()=>{this._live.announce(yt.announcementMessage,yt.politeness)}),this._animateSnackBar(Jr,yt),this._openedSnackBarRef=Jr,this._openedSnackBarRef}_animateSnackBar(he,We){he.afterDismissed().subscribe(()=>{this._openedSnackBarRef==he&&(this._openedSnackBarRef=null),We.announcementMessage&&this._live.clear()}),this._openedSnackBarRef?(this._openedSnackBarRef.afterDismissed().subscribe(()=>{he.containerInstance.enter()}),this._openedSnackBarRef.dismiss()):he.containerInstance.enter(),We.duration&&We.duration>0&&he.afterOpened().subscribe(()=>he._dismissAfter(We.duration))}_createOverlay(he){const We=new un.rR;We.direction=he.direction;let yt=this._overlay.position().global();const In="rtl"===he.direction,jn="left"===he.horizontalPosition||"start"===he.horizontalPosition&&!In||"end"===he.horizontalPosition&&In,Jr=!jn&&"center"!==he.horizontalPosition;return jn?yt.left("0"):Jr?yt.right("0"):yt.centerHorizontally(),"top"===he.verticalPosition?yt.top("0"):yt.bottom("0"),We.positionStrategy=yt,this._overlay.create(We)}_createInjector(he,We){return q.zZn.create({parent:he&&he.viewContainerRef&&he.viewContainerRef.injector||this._injector,providers:[{provide:Bn,useValue:We},{provide:ti,useValue:he.data}]})}static{this.\u0275fac=function(We){return new(We||mt)(q.KVO(un.hJ),q.KVO(yi.Ai),q.KVO(q.zZn),q.KVO(ut.QP),q.KVO(mt,12),q.KVO(kr))}}static{this.\u0275prov=q.jDH({token:mt,factory:mt.\u0275fac,providedIn:"root"})}}return mt})(),qi=(()=>{class mt{static{this.\u0275fac=function(We){return new(We||mt)}}static{this.\u0275mod=q.$C({type:mt})}static{this.\u0275inj=q.G2t({providers:[oi],imports:[un.z_,Ts.jc,fo,Xr.yE,gr,Zr,Xr.yE]})}}return mt})();function Be(mt,Ie){1&mt&&q.nrm(0,"img",2)}function Zt(mt,Ie){1&mt&&q.nrm(0,"img",3)}let bt=(()=>{class mt{constructor(he){this.data=he}static{this.\u0275fac=function(We){return new(We||mt)(q.rXU(ti))}}static{this.\u0275cmp=q.VBU({type:mt,selectors:[["cv-snackbar"]],standalone:!0,features:[q.aNF],decls:5,vars:3,consts:[[1,"snackbar"],[1,"snackbar-message"],["src","assets/img/snackbar/accept.png","alt","snackbar accept",1,"snackbar-img"],["src","assets/img/snackbar/reject.png","alt","snackbar reject",1,"snackbar-img"]],template:function(We,yt){1&We&&(q.j41(0,"div",0)(1,"span",1),q.EFF(2),q.k0s(),q.DNE(3,Be,1,0,"img",2)(4,Zt,1,0,"img",3),q.k0s()),2&We&&(q.R7$(2),q.JRh(yt.data.message),q.R7$(),q.vxM(3,yt.data.isSuccess?3:-1),q.R7$(),q.vxM(4,yt.data.isSuccess?-1:4))},dependencies:[H.MD,qi],styles:[".snackbar[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.snackbar-message[_ngcontent-%COMP%]{color:#fff;font-weight:700}.snackbar-img[_ngcontent-%COMP%]{margin-left:10px;width:30px;height:30px}"],changeDetection:0})}}return mt})(),Kt=(()=>{class mt{constructor(he){this._snackBar=he}openSnackBar(he){this._snackBar.openFromComponent(bt,{horizontalPosition:"center",verticalPosition:"top",duration:6e3,data:he})}static{this.\u0275fac=function(We){return new(We||mt)(q.KVO(oi))}}static{this.\u0275prov=q.jDH({token:mt,factory:mt.\u0275fac,providedIn:"root"})}}return mt})();var Kn=x(2486);let Rn=(()=>{class mt{constructor(he,We,yt,In,jn){this._afs=he,this._afAuth=We,this._router=yt,this._snackbarService=In,this._localStorageService=jn,this.userData=null,this.isAuth$=new b.t(!1),this.userState=this._localStorageService.getUsersState(),localStorage.getItem("usersState"),this.isAuth$.next(!0)}signIn(he,We){return this._afAuth.signInWithEmailAndPassword(he,We).then(yt=>{this.userState?this._localStorageService.setUser(yt.user):this._localStorageService.initUser(yt.user),this.setUserData(yt.user),yt.user&&(this.isAuth$.next(!0),this._afAuth.authState.subscribe(In=>{if(In){const jn={message:`You are logged in as ${yt.user?.email}`,isSuccess:!0};this.isAuth$.value&&(this._router.navigate([$.w.LAYOUT]),this._snackbarService.openSnackBar(jn))}}))}).catch(yt=>{const In={message:yt.message,isSuccess:!1};this.isAuth$.next(!1),this._snackbarService.openSnackBar(In)})}setUserData(he){return this._afs.doc(`users/${he?.uid}`).set({uid:he?.uid,email:he?.email,displayName:he?.displayName,photoURL:he?.photoURL,emailVerified:he?.emailVerified},{merge:!0})}signOut(){return this._afAuth.signOut().then(()=>{const he=this._localStorageService.getUsersState();he&&(he.previousUser=he.user,he.user=null,null===he.user&&this._localStorageService.setNewUserState(he),this.isAuth$.next(!1),this._router.navigate([$.w.AUTH]))})}static{this.\u0275fac=function(We){return new(We||mt)(q.KVO(Nr),q.KVO(Le.DS),q.KVO(qr.Ix),q.KVO(Kt),q.KVO(Kn.w))}}static{this.\u0275prov=q.jDH({token:mt,factory:mt.\u0275fac,providedIn:"root"})}}return mt})()},2815:(Cn,nt,x)=>{x.d(nt,{M:()=>Ee});var b=x(980),$=x(13),q=x(4438),H=x(9640);let Ee=(()=>{class Fe{constructor(Ne){this._store=Ne,this.totalRequests=0}intercept(Ne,Pe){return this._store.dispatch((0,$.x)()),Pe.handle(Ne).pipe((0,b.j)(()=>{this._store.dispatch((0,$.W)())}))}static{this.\u0275fac=function(Pe){return new(Pe||Fe)(q.KVO(H.il))}}static{this.\u0275prov=q.jDH({token:Fe,factory:Fe.\u0275fac})}}return Fe})()},9113:(Cn,nt,x)=>{x.d(nt,{p:()=>q});var b=x(9640);(0,b.VP)("[DARK_MODE_SELECTOR] Set mode");const q=(0,b.VP)("[DARK_MODE_SELECTOR] Set mode success",H=>({isDark:H}))},573:(Cn,nt,x)=>{x.d(nt,{e:()=>q});var b=x(9640);(0,b.VP)("[DARK_MODE_SELECTOR] Set language");const q=(0,b.VP)("LANGUAGE_SELECTOR Set language",H=>({language:H}))},6885:(Cn,nt,x)=>{x.d(nt,{G:()=>q});var b=x(9640);(0,b.VP)("[LOGOUT_BUTTON] Set logout button");const q=(0,b.VP)("[LOGOUT_BUTTON] Set logout button",H=>({isLogout:H}))},13:(Cn,nt,x)=>{x.d(nt,{W:()=>q,x:()=>$});var b=x(9640);const $=(0,b.VP)("[SPINNER] Show spinner"),q=(0,b.VP)("[SPINNER] Hide spinner")},3269:(Cn,nt,x)=>{x.d(nt,{d:()=>$,o:()=>q});var b=x(9640);const $=(0,b.VP)("[User Repos] Load github repos"),q=(0,b.VP)("[GITHUB REPOS] Load github repos success",(0,b.xk)())},9029:(Cn,nt,x)=>{x.d(nt,{_F:()=>q,a$:()=>Ee});var b=x(9640),$=x(3269);const q="githubRepos",Ee=(0,b.vy)({githubRepos:[]},(0,b.on)($.o,(Fe,Le)=>({...Fe,githubRepos:Le.githubRepos})))},2486:(Cn,nt,x)=>{x.d(nt,{w:()=>q});var b=x(7696),$=x(4438);let q=(()=>{class H{constructor(){this.usersState=null}setUser(Fe){this.usersState=this.getUsersState(),this.usersState&&(this.usersState.user=Fe,localStorage.setItem("usersState",JSON.stringify(this.usersState)))}setRout(Fe){this.usersState&&(this.usersState.rout=Fe,localStorage.setItem("usersState",JSON.stringify(this.usersState)))}setMode(Fe){this.usersState&&localStorage.setItem("usersState",JSON.stringify(this.usersState))}setLanguage(Fe){this.usersState&&(this.usersState.language=Fe,localStorage.setItem("usersState",JSON.stringify(this.usersState)))}setNewUserState(Fe){this.usersState=Fe,this.usersState&&localStorage.setItem("usersState",JSON.stringify(Fe))}initUser(Fe){localStorage.getItem("userState")||(this.usersState={previousUser:null,user:Fe,rout:`${b.w.LAYOUT}`,isDarkMode:"false",language:"ru"})}getUsersState(){const Fe=localStorage.getItem("usersState");return Fe?JSON.parse(Fe):this.usersState}static{this.\u0275fac=function(Le){return new(Le||H)}}static{this.\u0275prov=$.jDH({token:H,factory:H.\u0275fac,providedIn:"root"})}}return H})()},7074:(Cn,nt,x)=>{var b=x(3955);class ${http;prefix;suffix;constructor(c,a="/assets/i18n/",m=".json"){this.http=c,this.prefix=a,this.suffix=m}getTranslation(c){return this.http.get(`${this.prefix}${c}${this.suffix}`)}}const H=(_,c)=>_?{...c(_),...H(_.children.find(({outlet:a})=>"primary"===a)||_.firstChild,c)}:{},Ee=_=>_?{..._.data,...Ee(_.children.find(({outlet:c})=>"primary"===c)||_.firstChild)}:{};var Fe=x(2214),Le=x(9055),Ne=x(2784),Pe=x(1626),K=x(4438),Ae=x(4523),He=x(3710),ot=x(7673),tt=x(5964),Rt=x(5558),Ft=x(6354),Gt=x(1985),Pt=x(8750),hn=x(1413),Et=x(9974),kt=x(4360);function Ke(_,c,a,m){return(0,Et.N)((R,j)=>{let ie;c&&"function"!=typeof c?({duration:a,element:ie,connector:m}=c):ie=c;const fe=new Map,ke=Pn=>{fe.forEach(Pn),Pn(j)},Re=Pn=>ke(rr=>rr.error(Pn));let Ot=0,Lt=!1;const wn=new kt.H(j,Pn=>{try{const rr=_(Pn);let zn=fe.get(rr);if(!zn){fe.set(rr,zn=m?m():new hn.B);const Vn=function kn(Pn,rr){const zn=new Gt.c(Vn=>{Ot++;const Hn=rr.subscribe(Vn);return()=>{Hn.unsubscribe(),0==--Ot&&Lt&&wn.unsubscribe()}});return zn.key=Pn,zn}(rr,zn);if(j.next(Vn),a){const Hn=(0,kt._)(zn,()=>{zn.complete(),Hn?.unsubscribe()},void 0,void 0,()=>fe.delete(rr));wn.add((0,Pt.Tg)(a(Vn)).subscribe(Hn))}}zn.next(ie?ie(Pn):Pn)}catch(rr){Re(rr)}},()=>ke(Pn=>Pn.complete()),Re,()=>fe.clear(),()=>(Lt=!0,0===Ot));R.subscribe(wn)})}var Qe=x(1397),ct=x(3294),Ze=x(9172),Ge=x(3946),me=x(7440),ve=x(8742),At=x(8041),Jt=x(1076),Nt=x(1362),Yt=x(6749);const an="@firebase/installations",$t="0.6.9",ye=1e4,Ye=`w:${$t}`,Ht="FIS_v2",et="https://firebaseinstallations.googleapis.com/v1",gt=36e5,ln=new Jt.FA("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function nr(_){return _ instanceof Jt.g&&_.code.includes("request-failed")}function hr({projectId:_}){return`${et}/projects/${_}/installations`}function Cr(_){return{token:_.token,requestStatus:2,expiresIn:qn(_.expiresIn),creationTime:Date.now()}}function sr(_,c){return fr.apply(this,arguments)}function fr(){return(fr=(0,Ae.A)(function*(_,c){const m=(yield c.json()).error;return ln.create("request-failed",{requestName:_,serverCode:m.code,serverMessage:m.message,serverStatus:m.status})})).apply(this,arguments)}function Jn({apiKey:_}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":_})}function vr(_){return $n.apply(this,arguments)}function $n(){return($n=(0,Ae.A)(function*(_){const c=yield _();return c.status>=500&&c.status<600?_():c})).apply(this,arguments)}function qn(_){return Number(_.replace("s","000"))}function De(){return(De=(0,Ae.A)(function*({appConfig:_,heartbeatServiceProvider:c},{fid:a}){const m=hr(_),R=Jn(_),j=c.getImmediate({optional:!0});if(j){const Re=yield j.getHeartbeatsHeader();Re&&R.append("x-firebase-client",Re)}const fe={method:"POST",headers:R,body:JSON.stringify({fid:a,authVersion:Ht,appId:_.appId,sdkVersion:Ye})},ke=yield vr(()=>fetch(m,fe));if(ke.ok){const Re=yield ke.json();return{fid:Re.fid||a,registrationStatus:2,refreshToken:Re.refreshToken,authToken:Cr(Re.authToken)}}throw yield sr("Create Installation",ke)})).apply(this,arguments)}function Xe(_){return new Promise(c=>{setTimeout(c,_)})}const rn=/^[cdef][\w-]{21}$/,fn="";function mn(){try{const _=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(_),_[0]=112+_[0]%16;const a=function Ut(_){return function je(_){return btoa(String.fromCharCode(..._)).replace(/\+/g,"-").replace(/\//g,"_")}(_).substr(0,22)}(_);return rn.test(a)?a:fn}catch{return fn}}function wt(_){return`${_.appName}!${_.appId}`}const $e=new Map;function _t(_,c){const a=wt(_);ir(a,c),function yr(_,c){const a=function mr(){return!ar&&"BroadcastChannel"in self&&(ar=new BroadcastChannel("[Firebase] FID Change"),ar.onmessage=_=>{ir(_.data.key,_.data.fid)}),ar}();a&&a.postMessage({key:_,fid:c}),function Yr(){0===$e.size&&ar&&(ar.close(),ar=null)}()}(a,c)}function ir(_,c){const a=$e.get(_);if(a)for(const m of a)m(c)}let ar=null;const Nr="firebase-installations-database",xt=1,qr="firebase-installations-store";let ai=null;function yi(){return ai||(ai=(0,Yt.P2)(Nr,xt,{upgrade:(_,c)=>{0===c&&_.createObjectStore(qr)}})),ai}function Xr(_,c){return pn.apply(this,arguments)}function pn(){return(pn=(0,Ae.A)(function*(_,c){const a=wt(_),R=(yield yi()).transaction(qr,"readwrite"),j=R.objectStore(qr),ie=yield j.get(a);return yield j.put(c,a),yield R.done,(!ie||ie.fid!==c.fid)&&_t(_,c.fid),c})).apply(this,arguments)}function Te(_){return ne.apply(this,arguments)}function ne(){return(ne=(0,Ae.A)(function*(_){const c=wt(_),m=(yield yi()).transaction(qr,"readwrite");yield m.objectStore(qr).delete(c),yield m.done})).apply(this,arguments)}function J(_,c){return Q.apply(this,arguments)}function Q(){return(Q=(0,Ae.A)(function*(_,c){const a=wt(_),R=(yield yi()).transaction(qr,"readwrite"),j=R.objectStore(qr),ie=yield j.get(a),fe=c(ie);return void 0===fe?yield j.delete(a):yield j.put(fe,a),yield R.done,fe&&(!ie||ie.fid!==fe.fid)&&_t(_,fe.fid),fe})).apply(this,arguments)}function oe(_){return ee.apply(this,arguments)}function ee(){return ee=(0,Ae.A)(function*(_){let c;const a=yield J(_.appConfig,m=>{const R=function pe(_){return bi(_||{fid:mn(),registrationStatus:0})}(m),j=function Oe(_,c){if(0===c.registrationStatus){if(!navigator.onLine)return{installationEntry:c,registrationPromise:Promise.reject(ln.create("app-offline"))};const a={fid:c.fid,registrationStatus:1,registrationTime:Date.now()},m=function Tt(_,c){return lt.apply(this,arguments)}(_,a);return{installationEntry:a,registrationPromise:m}}return 1===c.registrationStatus?{installationEntry:c,registrationPromise:On(_)}:{installationEntry:c}}(_,R);return c=j.registrationPromise,j.installationEntry});return a.fid===fn?{installationEntry:yield c}:{installationEntry:a,registrationPromise:c}}),ee.apply(this,arguments)}function lt(){return lt=(0,Ae.A)(function*(_,c){try{const a=yield function st(_,c){return De.apply(this,arguments)}(_,c);return Xr(_.appConfig,a)}catch(a){throw nr(a)&&409===a.customData.serverCode?yield Te(_.appConfig):yield Xr(_.appConfig,{fid:c.fid,registrationStatus:0}),a}}),lt.apply(this,arguments)}function On(_){return Yn.apply(this,arguments)}function Yn(){return(Yn=(0,Ae.A)(function*(_){let c=yield wi(_.appConfig);for(;1===c.registrationStatus;)yield Xe(100),c=yield wi(_.appConfig);if(0===c.registrationStatus){const{installationEntry:a,registrationPromise:m}=yield oe(_);return m||a}return c})).apply(this,arguments)}function wi(_){return J(_,c=>{if(!c)throw ln.create("installation-not-found");return bi(c)})}function bi(_){return function Lr(_){return 1===_.registrationStatus&&_.registrationTime+ye<Date.now()}(_)?{fid:_.fid,registrationStatus:0}:_}function er(){return(er=(0,Ae.A)(function*({appConfig:_,heartbeatServiceProvider:c},a){const m=function rs(_,{fid:c}){return`${hr(_)}/${c}/authTokens:generate`}(_,a),R=function Rr(_,{refreshToken:c}){const a=Jn(_);return a.append("Authorization",function gi(_){return`${Ht} ${_}`}(c)),a}(_,a),j=c.getImmediate({optional:!0});if(j){const Re=yield j.getHeartbeatsHeader();Re&&R.append("x-firebase-client",Re)}const fe={method:"POST",headers:R,body:JSON.stringify({installation:{sdkVersion:Ye,appId:_.appId}})},ke=yield vr(()=>fetch(m,fe));if(ke.ok)return Cr(yield ke.json());throw yield sr("Generate Auth Token",ke)})).apply(this,arguments)}function Ms(_){return Ks.apply(this,arguments)}function Ks(){return Ks=(0,Ae.A)(function*(_,c=!1){let a;const m=yield J(_.appConfig,j=>{if(!so(j))throw ln.create("not-registered");const ie=j.authToken;if(!c&&function fo(_){return 2===_.requestStatus&&!function Gs(_){const c=Date.now();return c<_.creationTime||_.creationTime+_.expiresIn<c+gt}(_)}(ie))return j;if(1===ie.requestStatus)return a=function Co(_,c){return Os.apply(this,arguments)}(_,c),j;{if(!navigator.onLine)throw ln.create("app-offline");const fe=function _s(_){const c={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},_),{authToken:c})}(j);return a=function la(_,c){return $s.apply(this,arguments)}(_,fe),fe}});return a?yield a:m.authToken}),Ks.apply(this,arguments)}function Os(){return(Os=(0,Ae.A)(function*(_,c){let a=yield vi(_.appConfig);for(;1===a.authToken.requestStatus;)yield Xe(100),a=yield vi(_.appConfig);const m=a.authToken;return 0===m.requestStatus?Ms(_,c):m})).apply(this,arguments)}function vi(_){return J(_,c=>{if(!so(c))throw ln.create("not-registered");return function Ts(_){return 1===_.requestStatus&&_.requestTime+ye<Date.now()}(c.authToken)?Object.assign(Object.assign({},c),{authToken:{requestStatus:0}}):c})}function $s(){return $s=(0,Ae.A)(function*(_,c){try{const a=yield function hi(_,c){return er.apply(this,arguments)}(_,c),m=Object.assign(Object.assign({},c),{authToken:a});return yield Xr(_.appConfig,m),a}catch(a){if(!nr(a)||401!==a.customData.serverCode&&404!==a.customData.serverCode){const m=Object.assign(Object.assign({},c),{authToken:{requestStatus:0}});yield Xr(_.appConfig,m)}else yield Te(_.appConfig);throw a}}),$s.apply(this,arguments)}function so(_){return void 0!==_&&2===_.registrationStatus}function it(){return(it=(0,Ae.A)(function*(_){const c=_,{installationEntry:a,registrationPromise:m}=yield oe(c);return m?m.catch(console.error):Ms(c).catch(console.error),a.fid})).apply(this,arguments)}function un(){return un=(0,Ae.A)(function*(_,c=!1){const a=_;return yield function sn(_){return Sn.apply(this,arguments)}(a),(yield Ms(a,c)).token}),un.apply(this,arguments)}function Sn(){return(Sn=(0,Ae.A)(function*(_){const{registrationPromise:c}=yield oe(_);c&&(yield c)})).apply(this,arguments)}function gr(_){return ln.create("missing-app-config-values",{valueName:_})}const _r="installations",Zr=_=>{const c=_.getProvider("app").getImmediate(),a=function or(_){if(!_||!_.options)throw gr("App Configuration");if(!_.name)throw gr("App Name");const c=["projectId","apiKey","appId"];for(const a of c)if(!_.options[a])throw gr(a);return{appName:_.name,projectId:_.options.projectId,apiKey:_.options.apiKey,appId:_.options.appId}}(c);return{app:c,appConfig:a,heartbeatServiceProvider:(0,ve._getProvider)(c,"heartbeat"),_delete:()=>Promise.resolve()}},Ri=_=>{const c=_.getProvider("app").getImmediate(),a=(0,ve._getProvider)(c,_r).getImmediate();return{getId:()=>function Ue(_){return it.apply(this,arguments)}(a),getToken:R=>function ut(_){return un.apply(this,arguments)}(a,R)}};(function kr(){(0,ve._registerComponent)(new Nt.uA(_r,Zr,"PUBLIC")),(0,ve._registerComponent)(new Nt.uA("installations-internal",Ri,"PRIVATE"))})(),(0,ve.registerVersion)(an,$t),(0,ve.registerVersion)(an,$t,"esm2017");const oi="analytics",As="firebase_id",qi="origin",Be=6e4,Zt="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",bt="https://www.googletagmanager.com/gtag/js",Kt=new At.Vy("@firebase/analytics"),Rn=new Jt.FA("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function mt(_){if(!_.startsWith(bt)){const c=Rn.create("invalid-gtag-resource",{gtagURL:_});return Kt.warn(c.message),""}return _}function Ie(_){return Promise.all(_.map(c=>c.catch(a=>a)))}function jn(){return(jn=(0,Ae.A)(function*(_,c,a,m,R,j){const ie=m[R];try{if(ie)yield c[ie];else{const ke=(yield Ie(a)).find(Re=>Re.measurementId===R);ke&&(yield c[ke.appId])}}catch(fe){Kt.error(fe)}_("config",R,j)})).apply(this,arguments)}function Li(){return(Li=(0,Ae.A)(function*(_,c,a,m,R){try{let j=[];if(R&&R.send_to){let ie=R.send_to;Array.isArray(ie)||(ie=[ie]);const fe=yield Ie(a);for(const ke of ie){const Re=fe.find(Lt=>Lt.measurementId===ke),Ot=Re&&c[Re.appId];if(!Ot){j=[];break}j.push(Ot)}}0===j.length&&(j=Object.values(c)),yield Promise.all(j),_("event",m,R||{})}catch(j){Kt.error(j)}})).apply(this,arguments)}const xs=30,da=new class ys{constructor(c={},a=1e3){this.throttleMetadata=c,this.intervalMillis=a}getThrottleMetadata(c){return this.throttleMetadata[c]}setThrottleMetadata(c,a){this.throttleMetadata[c]=a}deleteThrottleMetadata(c){delete this.throttleMetadata[c]}};function Zs(_){return new Headers({Accept:"application/json","x-goog-api-key":_})}function Js(){return(Js=(0,Ae.A)(function*(_){var c;const{appId:a,apiKey:m}=_,R={method:"GET",headers:Zs(m)},j=Zt.replace("{app-id}",a),ie=yield fetch(j,R);if(200!==ie.status&&304!==ie.status){let fe="";try{const ke=yield ie.json();null!==(c=ke.error)&&void 0!==c&&c.message&&(fe=ke.error.message)}catch{}throw Rn.create("config-fetch-failed",{httpStatus:ie.status,responseMessage:fe})}return ie.json()})).apply(this,arguments)}function Wi(){return(Wi=(0,Ae.A)(function*(_,c=da,a){const{appId:m,apiKey:R,measurementId:j}=_.options;if(!m)throw Rn.create("no-app-id");if(!R){if(j)return{measurementId:j,appId:m};throw Rn.create("no-api-key")}const ie=c.getThrottleMetadata(m)||{backoffCount:0,throttleEndTimeMillis:Date.now()},fe=new Fo;return setTimeout((0,Ae.A)(function*(){fe.abort()}),void 0!==a?a:Be),eo({appId:m,apiKey:R,measurementId:j},ie,fe,c)})).apply(this,arguments)}function eo(_,c,a){return Ur.apply(this,arguments)}function Ur(){return Ur=(0,Ae.A)(function*(_,{throttleEndTimeMillis:c,backoffCount:a},m,R=da){var j;const{appId:ie,measurementId:fe}=_;try{yield function Go(_,c){return new Promise((a,m)=>{const R=Math.max(c-Date.now(),0),j=setTimeout(a,R);_.addEventListener(()=>{clearTimeout(j),m(Rn.create("fetch-throttle",{throttleEndTimeMillis:c}))})})}(m,c)}catch(ke){if(fe)return Kt.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${fe} provided in the "measurementId" field in the local Firebase config. [${ke?.message}]`),{appId:ie,measurementId:fe};throw ke}try{const ke=yield function po(_){return Js.apply(this,arguments)}(_);return R.deleteThrottleMetadata(ie),ke}catch(ke){const Re=ke;if(!function Ca(_){if(!(_ instanceof Jt.g&&_.customData))return!1;const c=Number(_.customData.httpStatus);return 429===c||500===c||503===c||504===c}(Re)){if(R.deleteThrottleMetadata(ie),fe)return Kt.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${fe} provided in the "measurementId" field in the local Firebase config. [${Re?.message}]`),{appId:ie,measurementId:fe};throw ke}const Ot=503===Number(null===(j=Re?.customData)||void 0===j?void 0:j.httpStatus)?(0,Jt.p9)(a,R.intervalMillis,xs):(0,Jt.p9)(a,R.intervalMillis),Lt={throttleEndTimeMillis:Date.now()+Ot,backoffCount:a+1};return R.setThrottleMetadata(ie,Lt),Kt.debug(`Calling attemptFetch again in ${Ot} millis`),eo(_,Lt,m,R)}}),Ur.apply(this,arguments)}class Fo{constructor(){this.listeners=[]}addEventListener(c){this.listeners.push(c)}abort(){this.listeners.forEach(c=>c())}}let rc,Qo;function Ii(){return(Ii=(0,Ae.A)(function*(_,c,a,m,R){if(R&&R.global)_("event",a,m);else{const j=yield c;_("event",a,Object.assign(Object.assign({},m),{send_to:j}))}})).apply(this,arguments)}function ha(){return(ha=(0,Ae.A)(function*(_,c,a,m){if(m&&m.global)return _("set",{user_id:a}),Promise.resolve();_("config",yield c,{update:!0,user_id:a})})).apply(this,arguments)}function Do(){return(Do=(0,Ae.A)(function*(){if(!(0,Jt.zW)())return Kt.warn(Rn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,Jt.eX)()}catch(_){return Kt.warn(Rn.create("indexeddb-unavailable",{errorInfo:_?.toString()}).message),!1}return!0})).apply(this,arguments)}function Ns(){return Ns=(0,Ae.A)(function*(_,c,a,m,R,j,ie){var fe;const ke=function So(_){return Wi.apply(this,arguments)}(_);ke.then(kn=>{a[kn.measurementId]=kn.appId,_.options.measurementId&&kn.measurementId!==_.options.measurementId&&Kt.warn(`The measurement ID in the local Firebase config (${_.options.measurementId}) does not match the measurement ID fetched from the server (${kn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(kn=>Kt.error(kn)),c.push(ke);const Re=function $l(){return Do.apply(this,arguments)}().then(kn=>{if(kn)return m.getId()}),[Ot,Lt]=yield Promise.all([ke,Re]);(function is(_){const c=window.document.getElementsByTagName("script");for(const a of Object.values(c))if(a.src&&a.src.includes(bt)&&a.src.includes(_))return a;return null})(j)||function We(_,c){const a=function he(_,c){let a;return window.trustedTypes&&(a=window.trustedTypes.createPolicy(_,c)),a}("firebase-js-sdk-policy",{createScriptURL:mt}),m=document.createElement("script"),R=`${bt}?l=${_}&id=${c}`;m.src=a?a?.createScriptURL(R):R,m.async=!0,document.head.appendChild(m)}(j,Ot.measurementId),Qo&&(R("consent","default",Qo),function Pr(_){Qo=_}(void 0)),R("js",new Date);const wn=null!==(fe=ie?.config)&&void 0!==fe?fe:{};return wn[qi]="firebase",wn.update=!0,null!=Lt&&(wn[As]=Lt),R("config",Ot.measurementId,wn),rc&&(R("set",rc),function fi(_){rc=_}(void 0)),Ot.measurementId}),Ns.apply(this,arguments)}class ss{constructor(c){this.app=c}_delete(){return delete ns[this.app.options.appId],Promise.resolve()}}let ns={},ja=[];const Sa={};let pa,oo,qs="dataLayer",go=!1;function $a(_,c,a){!function Rc(){const _=[];if((0,Jt.sr)()&&_.push("This is a browser extension environment."),(0,Jt.dM)()||_.push("Cookies are not available."),_.length>0){const c=_.map((m,R)=>`(${R+1}) ${m}`).join(" "),a=Rn.create("invalid-analytics-context",{errorInfo:c});Kt.warn(a.message)}}();const m=_.options.appId;if(!m)throw Rn.create("no-app-id");if(!_.options.apiKey){if(!_.options.measurementId)throw Rn.create("no-api-key");Kt.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${_.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=ns[m])throw Rn.create("already-exists",{id:m});if(!go){!function yt(_){let c=[];Array.isArray(window[_])?c=window[_]:window[_]=c}(qs);const{wrappedGtag:j,gtagCore:ie}=function ds(_,c,a,m,R){let j=function(...ie){window[m].push(arguments)};return window[R]&&"function"==typeof window[R]&&(j=window[R]),window[R]=function es(_,c,a,m){function j(){return j=(0,Ae.A)(function*(ie,...fe){try{if("event"===ie){const[ke,Re]=fe;yield function Jr(_,c,a,m,R){return Li.apply(this,arguments)}(_,c,a,ke,Re)}else if("config"===ie){const[ke,Re]=fe;yield function In(_,c,a,m,R,j){return jn.apply(this,arguments)}(_,c,a,m,ke,Re)}else if("consent"===ie){const[ke,Re]=fe;_("consent",ke,Re)}else if("get"===ie){const[ke,Re,Ot]=fe;_("get",ke,Re,Ot)}else if("set"===ie){const[ke]=fe;_("set",ke)}else _(ie,...fe)}catch(ke){Kt.error(ke)}}),j.apply(this,arguments)}return function R(ie){return j.apply(this,arguments)}}(j,_,c,a),{gtagCore:j,wrappedGtag:window[R]}}(ns,ja,Sa,qs,"gtag");oo=j,pa=ie,go=!0}return ns[m]=function mo(_,c,a,m,R,j,ie){return Ns.apply(this,arguments)}(_,ja,Sa,c,pa,qs,a),new ss(_)}function vs(){return ic.apply(this,arguments)}function ic(){return(ic=(0,Ae.A)(function*(){if((0,Jt.sr)()||!(0,Jt.dM)()||!(0,Jt.zW)())return!1;try{return yield(0,Jt.eX)()}catch{return!1}})).apply(this,arguments)}function sc(_,c,a){_=(0,Jt.Ku)(_),function ts(_,c,a,m){return ha.apply(this,arguments)}(oo,ns[_.app.options.appId],c,a).catch(m=>Kt.error(m))}function Pc(_,c,a,m){_=(0,Jt.Ku)(_),function Vo(_,c,a,m,R){return Ii.apply(this,arguments)}(oo,ns[_.app.options.appId],c,a,m).catch(R=>Kt.error(R))}const Yo="@firebase/analytics";!function Tl(){(0,ve._registerComponent)(new Nt.uA(oi,(c,{options:a})=>$a(c.getProvider("app").getImmediate(),c.getProvider("installations-internal").getImmediate(),a),"PUBLIC")),(0,ve._registerComponent)(new Nt.uA("analytics-internal",function _(c){try{const a=c.getProvider(oi).getImmediate();return{logEvent:(m,R,j)=>Pc(a,m,R,j)}}catch(a){throw Rn.create("interop-component-reg-failed",{reason:a})}},"PRIVATE")),(0,ve.registerVersion)(Yo,"0.10.8"),(0,ve.registerVersion)(Yo,"0.10.8","esm2017")}();var Vi=x(345),Qi=x(1188),Xo=x(6335);class co{constructor(c){return c}}const yo="__angularfire_symbol__analyticsIsSupportedValue",vo="__angularfire_symbol__analyticsIsSupported";globalThis[vo]||=vs().then(_=>globalThis[yo]=_).catch(()=>globalThis[yo]=!1);const Zo=()=>globalThis[vo],ri=(0,He.S3)(Pc,!0),rl=(0,He.S3)(sc,!0);let zi=(()=>{class _{initialized;disposables=[];constructor(a,m,R){let j;(0,Fe.KO)("angularfire",He.xv.full,"user-tracking"),this.initialized=m.runOutsideAngular(()=>new Promise(ie=>{j=ie})),Zo().then(()=>{const ie=R.get(co);ie?this.disposables=[(0,Xo.wh)(a).subscribe(fe=>{rl(ie,fe?.uid),j()})]:j()})}ngOnDestroy(){this.disposables.forEach(a=>a.unsubscribe())}static \u0275fac=function(m){return new(m||_)(K.KVO(Xo.Nj),K.KVO(K.SKi),K.KVO(K.zZn))};static \u0275prov=K.jDH({token:_,factory:_.\u0275fac})}return _})();const ya="firebase_screen_id",jo="outlet",ac="screen_class",va="screen_name";let ol=Math.floor(Math.random()*(2**32-1))-2**31;const lc={},Wl=_=>{const c=[_[ac],_[jo]].join("#");if(lc.hasOwnProperty(c))return lc[c];{const a=ol++;return lc[c]=a,a}};let Oi=(()=>{class _{disposable;constructor(a,m,R,j,ie,fe){(0,Fe.KO)("angularfire",He.xv.full,"screen-tracking"),Zo().then(()=>{const ke=fe.get(co);!a||!ke||j.runOutsideAngular(()=>{this.disposable=((_,c,a)=>_.events.pipe((0,tt.p)(R=>R instanceof Qi._d)).pipe((0,Rt.n)(R=>{const ie=_.parseUrl(_.url.replace(/(?:\().+(?:\))/g,wn=>wn.replace("://",":///"))).root.children[R.snapshot.outlet]?.toString()||"",fe=_.routerState.root.children.map(wn=>wn).find(wn=>wn.outlet===R.snapshot.outlet);if(!fe)return(0,ot.of)(null);let ke=fe;for(;ke.firstChild;)ke=ke.firstChild;const Re=ke.pathFromRoot.map(wn=>wn.routeConfig?.path).filter(wn=>wn).join("/")||"/",Ot={[va]:Re,page_path:`/${ie}`,firebase_event_origin:"auto",firebase_screen:Re,[jo]:R.snapshot.outlet};c&&(Ot.page_title=c.getTitle());let Lt=fe.component;if(Lt){if(Lt===Qi.we){let wn=R.snapshot;for(;wn.firstChild;)wn=wn.firstChild;Lt=wn.component}}else Lt=R.snapshot.component;if("string"==typeof Lt)return(0,ot.of)({...Ot,[ac]:Lt});if(Lt){const wn=a.resolveComponentFactory(Lt);return(0,ot.of)({...Ot,[ac]:wn.selector})}return(0,ot.of)(null)}),(0,tt.p)(R=>!!R),(0,Ft.T)(R=>({firebase_screen_class:R[ac],[ya]:Wl(R),...R})),Ke(R=>R[jo]),(0,Qe.Z)(R=>R.pipe((0,ct.F)((j,ie)=>JSON.stringify(j)===JSON.stringify(ie)),(0,Ze.Z)(void 0),(0,Ge.J)(),(0,Ft.T)(([j,ie])=>j?{firebase_previous_class:j[ac],firebase_previous_screen:j[va],firebase_previous_id:j[ya],...ie}:ie)))))(a,m,R).pipe((0,Rt.n)(function(){var Re=(0,Ae.A)(function*(Ot){return ie&&(yield ie.initialized),ri(ke,"screen_view",Ot)});return function(Ot){return Re.apply(this,arguments)}}())).subscribe()})})}ngOnDestroy(){this.disposable&&this.disposable.unsubscribe()}static \u0275fac=function(m){return new(m||_)(K.KVO(Qi.Ix,8),K.KVO(Vi.hE,8),K.KVO(K.OM3),K.KVO(K.SKi),K.KVO(zi,8),K.KVO(K.zZn))};static \u0275prov=K.jDH({token:_,factory:_.\u0275fac})}return _})();var Ea=x(463);class Eo{constructor(c){return c}}const ea="database",L=new K.nKC("angularfire2.database-instances");function X(_){return(c,a)=>{const m=c.runOutsideAngular(()=>_(a));return new Eo(m)}}const ue={provide:class ta{constructor(){return(0,He.CA)(ea)}},deps:[[new K.Xx1,L]]},qe={provide:Eo,useFactory:function _e(_,c){const a=(0,He.lR)(ea,_,c);return a&&new Eo(a)},deps:[[new K.Xx1,L],me.XU]},Es=(0,He.S3)(Ea.C3,!0);var Na=x(9967),$r=x(9969);function Cl(_){return new K.wOt(3e3,!1)}function Wo(_){switch(_.length){case 0:return new $r.sf;case 1:return _[0];default:return new $r.ui(_)}}function fc(_,c,a=new Map,m=new Map){const R=[],j=[];let ie=-1,fe=null;if(c.forEach(ke=>{const Re=ke.get("offset"),Ot=Re==ie,Lt=Ot&&fe||new Map;ke.forEach((wn,kn)=>{let Pn=kn,rr=wn;if("offset"!==kn)switch(Pn=_.normalizePropertyName(Pn,R),rr){case $r.FX:rr=a.get(kn);break;case $r.kp:rr=m.get(kn);break;default:rr=_.normalizeStyleValue(kn,Pn,rr,R)}Lt.set(Pn,rr)}),Ot||j.push(Lt),fe=Lt,ie=Re}),R.length)throw function Id(_){return new K.wOt(3502,!1)}();return j}function Ai(_,c,a,m){switch(c){case"start":_.onStart(()=>m(a&&cl(a,"start",_)));break;case"done":_.onDone(()=>m(a&&cl(a,"done",_)));break;case"destroy":_.onDestroy(()=>m(a&&cl(a,"destroy",_)))}}function cl(_,c,a){const j=fu(_.element,_.triggerName,_.fromState,_.toState,c||_.phaseName,a.totalTime??_.totalTime,!!a.disabled),ie=_._data;return null!=ie&&(j._data=ie),j}function fu(_,c,a,m,R="",j=0,ie){return{element:_,triggerName:c,fromState:a,toState:m,phaseName:R,totalTime:j,disabled:!!ie}}function gs(_,c,a){let m=_.get(c);return m||_.set(c,m=a),m}function ku(_){const c=_.indexOf(":");return[_.substring(1,c),_.slice(c+1)]}const ll=typeof document>"u"?null:document.documentElement;function Ya(_){const c=_.parentNode||_.host||null;return c===ll?null:c}let ul=null,pc=!1;function mu(_,c){for(;c;){if(c===_)return!0;c=Ya(c)}return!1}function Yl(_,c,a){if(a)return Array.from(_.querySelectorAll(c));const m=_.querySelector(c);return m?[m]:[]}let oa=(()=>{class _{validateStyleProperty(a){return function mc(_){ul||(ul=function pu(){return typeof document<"u"?document.body:null}()||{},pc=!!ul.style&&"WebkitAppearance"in ul.style);let c=!0;return ul.style&&!function Ia(_){return"ebkit"==_.substring(1,6)}(_)&&(c=_ in ul.style,!c&&pc&&(c="Webkit"+_.charAt(0).toUpperCase()+_.slice(1)in ul.style)),c}(a)}matchesElement(a,m){return!1}containsElement(a,m){return mu(a,m)}getParentElement(a){return Ya(a)}query(a,m,R){return Yl(a,m,R)}computeStyle(a,m,R){return R||""}animate(a,m,R,j,ie,fe=[],ke){return new $r.sf(R,j)}static{this.\u0275fac=function(m){return new(m||_)}}static{this.\u0275prov=K.jDH({token:_,factory:_.\u0275fac})}}return _})();class gc{static{this.NOOP=new oa}}class Io{}const Rs=1e3,lo="ng-enter",Xl="ng-leave",Bc="ng-trigger",dl=".ng-trigger",Fu="ng-animating",Aa=".ng-animating";function Pl(_){if("number"==typeof _)return _;const c=_.match(/^(-?[\.\d]+)(m?s)/);return!c||c.length<2?0:jc(parseFloat(c[1]),c[2])}function jc(_,c){return"s"===c?_*Rs:_}function hl(_,c,a){return _.hasOwnProperty("duration")?_:function Ml(_,c,a){let R,j=0,ie="";if("string"==typeof _){const fe=_.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===fe)return c.push(Cl()),{duration:0,delay:0,easing:""};R=jc(parseFloat(fe[1]),fe[2]);const ke=fe[3];null!=ke&&(j=jc(parseFloat(ke),fe[4]));const Re=fe[5];Re&&(ie=Re)}else R=_;if(!a){let fe=!1,ke=c.length;R<0&&(c.push(function Kl(){return new K.wOt(3100,!1)}()),fe=!0),j<0&&(c.push(function nd(){return new K.wOt(3101,!1)}()),fe=!0),fe&&c.splice(ke,0,Cl())}return{duration:R,delay:j,easing:ie}}(_,c,a)}function ii(_,c,a){c.forEach((m,R)=>{const j=_u(R);a&&!a.has(R)&&a.set(R,_.style[j]),_.style[j]=m})}function ka(_,c){c.forEach((a,m)=>{const R=_u(m);_.style[R]=""})}function _c(_){return Array.isArray(_)?1==_.length?_[0]:(0,$r.K2)(_):_}const fl=new RegExp("{{\\s*(.+?)\\s*}}","g");function Ol(_){let c=[];if("string"==typeof _){let a;for(;a=fl.exec(_);)c.push(a[1]);fl.lastIndex=0}return c}function La(_,c,a){const m=`${_}`,R=m.replace(fl,(j,ie)=>{let fe=c[ie];return null==fe&&(a.push(function Vc(_){return new K.wOt(3003,!1)}()),fe=""),fe.toString()});return R==m?_:R}const gu=/-+([a-z0-9])/g;function _u(_){return _.replace(gu,(...c)=>c[1].toUpperCase())}function as(_,c,a){switch(c.type){case $r.If.Trigger:return _.visitTrigger(c,a);case $r.If.State:return _.visitState(c,a);case $r.If.Transition:return _.visitTransition(c,a);case $r.If.Sequence:return _.visitSequence(c,a);case $r.If.Group:return _.visitGroup(c,a);case $r.If.Animate:return _.visitAnimate(c,a);case $r.If.Keyframes:return _.visitKeyframes(c,a);case $r.If.Style:return _.visitStyle(c,a);case $r.If.Reference:return _.visitReference(c,a);case $r.If.AnimateChild:return _.visitAnimateChild(c,a);case $r.If.AnimateRef:return _.visitAnimateRef(c,a);case $r.If.Query:return _.visitQuery(c,a);case $r.If.Stagger:return _.visitStagger(c,a);default:throw function O(_){return new K.wOt(3004,!1)}()}}function yc(_,c){return window.getComputedStyle(_)[c]}const yu=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class Ys extends Io{normalizePropertyName(c,a){return _u(c)}normalizeStyleValue(c,a,m,R){let j="";const ie=m.toString().trim();if(yu.has(a)&&0!==m&&"0"!==m)if("number"==typeof m)j="px";else{const fe=m.match(/^[+-]?[\d\.]+([a-z]*)$/);fe&&0==fe[1].length&&R.push(function z(_,c){return new K.wOt(3005,!1)}())}return ie+j}}const vu="*";const Eu=new Set(["true","1"]),Wc=new Set(["false","0"]);function Bu(_,c){const a=Eu.has(_)||Wc.has(_),m=Eu.has(c)||Wc.has(c);return(R,j)=>{let ie=_==vu||_==R,fe=c==vu||c==j;return!ie&&a&&"boolean"==typeof R&&(ie=R?Eu.has(_):Wc.has(_)),!fe&&m&&"boolean"==typeof j&&(fe=j?Eu.has(c):Wc.has(c)),ie&&fe}}const bu=new RegExp("s*:selfs*,?","g");function ju(_,c,a,m){return new ld(_).build(c,a,m)}class ld{constructor(c){this._driver=c}build(c,a,m){const R=new cs(a);return this._resetContextStyleTimingState(R),as(this,_c(c),R)}_resetContextStyleTimingState(c){c.currentQuerySelector="",c.collectedStyles=new Map,c.collectedStyles.set("",new Map),c.currentTime=0}visitTrigger(c,a){let m=a.queryCount=0,R=a.depCount=0;const j=[],ie=[];return"@"==c.name.charAt(0)&&a.errors.push(function k(){return new K.wOt(3006,!1)}()),c.definitions.forEach(fe=>{if(this._resetContextStyleTimingState(a),fe.type==$r.If.State){const ke=fe,Re=ke.name;Re.toString().split(/\s*,\s*/).forEach(Ot=>{ke.name=Ot,j.push(this.visitState(ke,a))}),ke.name=Re}else if(fe.type==$r.If.Transition){const ke=this.visitTransition(fe,a);m+=ke.queryCount,R+=ke.depCount,ie.push(ke)}else a.errors.push(function W(){return new K.wOt(3007,!1)}())}),{type:$r.If.Trigger,name:c.name,states:j,transitions:ie,queryCount:m,depCount:R,options:null}}visitState(c,a){const m=this.visitStyle(c.styles,a),R=c.options&&c.options.params||null;if(m.containsDynamicStyles){const j=new Set,ie=R||{};m.styles.forEach(fe=>{fe instanceof Map&&fe.forEach(ke=>{Ol(ke).forEach(Re=>{ie.hasOwnProperty(Re)||j.add(Re)})})}),j.size&&a.errors.push(function ae(_,c){return new K.wOt(3008,!1)}(0,j.values()))}return{type:$r.If.State,name:c.name,style:m,options:R?{params:R}:null}}visitTransition(c,a){a.queryCount=0,a.depCount=0;const m=as(this,_c(c.animation),a),R=function Td(_,c){const a=[];return"string"==typeof _?_.split(/\s*,\s*/).forEach(m=>function ad(_,c,a){if(":"==_[0]){const ke=function Uu(_,c){switch(_){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(a,m)=>parseFloat(m)>parseFloat(a);case":decrement":return(a,m)=>parseFloat(m)<parseFloat(a);default:return c.push(function ql(_){return new K.wOt(3016,!1)}()),"* => *"}}(_,a);if("function"==typeof ke)return void c.push(ke);_=ke}const m=_.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==m||m.length<4)return a.push(function Gl(_){return new K.wOt(3015,!1)}()),c;const R=m[1],j=m[2],ie=m[3];c.push(Bu(R,ie)),"<"==j[0]&&(R!=vu||ie!=vu)&&c.push(Bu(ie,R))}(m,a,c)):a.push(_),a}(c.expr,a.errors);return{type:$r.If.Transition,matchers:R,animation:m,queryCount:a.queryCount,depCount:a.depCount,options:ml(c.options)}}visitSequence(c,a){return{type:$r.If.Sequence,steps:c.steps.map(m=>as(this,m,a)),options:ml(c.options)}}visitGroup(c,a){const m=a.currentTime;let R=0;const j=c.steps.map(ie=>{a.currentTime=m;const fe=as(this,ie,a);return R=Math.max(R,a.currentTime),fe});return a.currentTime=R,{type:$r.If.Group,steps:j,options:ml(c.options)}}visitAnimate(c,a){const m=function wa(_,c){if(_.hasOwnProperty("duration"))return _;if("number"==typeof _)return Hc(hl(_,c).duration,0,"");const a=_;if(a.split(/\s+/).some(j=>"{"==j.charAt(0)&&"{"==j.charAt(1))){const j=Hc(0,0,"");return j.dynamic=!0,j.strValue=a,j}const R=hl(a,c);return Hc(R.duration,R.delay,R.easing)}(c.timings,a.errors);a.currentAnimateTimings=m;let R,j=c.styles?c.styles:(0,$r.iF)({});if(j.type==$r.If.Keyframes)R=this.visitKeyframes(j,a);else{let ie=c.styles,fe=!1;if(!ie){fe=!0;const Re={};m.easing&&(Re.easing=m.easing),ie=(0,$r.iF)(Re)}a.currentTime+=m.duration+m.delay;const ke=this.visitStyle(ie,a);ke.isEmptyStep=fe,R=ke}return a.currentAnimateTimings=null,{type:$r.If.Animate,timings:m,style:R,options:null}}visitStyle(c,a){const m=this._makeStyleAst(c,a);return this._validateStyleAst(m,a),m}_makeStyleAst(c,a){const m=[],R=Array.isArray(c.styles)?c.styles:[c.styles];for(let fe of R)"string"==typeof fe?fe===$r.kp?m.push(fe):a.errors.push(new K.wOt(3002,!1)):m.push(new Map(Object.entries(fe)));let j=!1,ie=null;return m.forEach(fe=>{if(fe instanceof Map&&(fe.has("easing")&&(ie=fe.get("easing"),fe.delete("easing")),!j))for(let ke of fe.values())if(ke.toString().indexOf("{{")>=0){j=!0;break}}),{type:$r.If.Style,styles:m,easing:ie,offset:c.offset,containsDynamicStyles:j,options:null}}_validateStyleAst(c,a){const m=a.currentAnimateTimings;let R=a.currentTime,j=a.currentTime;m&&j>0&&(j-=m.duration+m.delay),c.styles.forEach(ie=>{"string"!=typeof ie&&ie.forEach((fe,ke)=>{const Re=a.collectedStyles.get(a.currentQuerySelector),Ot=Re.get(ke);let Lt=!0;Ot&&(j!=R&&j>=Ot.startTime&&R<=Ot.endTime&&(a.errors.push(function on(_,c,a,m,R){return new K.wOt(3010,!1)}()),Lt=!1),j=Ot.startTime),Lt&&Re.set(ke,{startTime:j,endTime:R}),a.options&&function Hi(_,c,a){const m=c.params||{},R=Ol(_);R.length&&R.forEach(j=>{m.hasOwnProperty(j)||a.push(function cu(_){return new K.wOt(3001,!1)}())})}(fe,a.options,a.errors)})})}visitKeyframes(c,a){const m={type:$r.If.Keyframes,styles:[],options:null};if(!a.currentAnimateTimings)return a.errors.push(function Qt(){return new K.wOt(3011,!1)}()),m;let j=0;const ie=[];let fe=!1,ke=!1,Re=0;const Ot=c.steps.map(Vn=>{const Hn=this._makeStyleAst(Vn,a);let tr=null!=Hn.offset?Hn.offset:function dh(_){if("string"==typeof _)return null;let c=null;if(Array.isArray(_))_.forEach(a=>{if(a instanceof Map&&a.has("offset")){const m=a;c=parseFloat(m.get("offset")),m.delete("offset")}});else if(_ instanceof Map&&_.has("offset")){const a=_;c=parseFloat(a.get("offset")),a.delete("offset")}return c}(Hn.styles),ur=0;return null!=tr&&(j++,ur=Hn.offset=tr),ke=ke||ur<0||ur>1,fe=fe||ur<Re,Re=ur,ie.push(ur),Hn});ke&&a.errors.push(function pr(){return new K.wOt(3012,!1)}()),fe&&a.errors.push(function li(){return new K.wOt(3200,!1)}());const Lt=c.steps.length;let wn=0;j>0&&j<Lt?a.errors.push(function pi(){return new K.wOt(3202,!1)}()):0==j&&(wn=1/(Lt-1));const kn=Lt-1,Pn=a.currentTime,rr=a.currentAnimateTimings,zn=rr.duration;return Ot.forEach((Vn,Hn)=>{const tr=wn>0?Hn==kn?1:wn*Hn:ie[Hn],ur=tr*zn;a.currentTime=Pn+rr.delay+ur,rr.duration=ur,this._validateStyleAst(Vn,a),Vn.offset=tr,m.styles.push(Vn)}),m}visitReference(c,a){return{type:$r.If.Reference,animation:as(this,_c(c.animation),a),options:ml(c.options)}}visitAnimateChild(c,a){return a.depCount++,{type:$r.If.AnimateChild,options:ml(c.options)}}visitAnimateRef(c,a){return{type:$r.If.AnimateRef,animation:this.visitReference(c.animation,a),options:ml(c.options)}}visitQuery(c,a){const m=a.currentQuerySelector,R=c.options||{};a.queryCount++,a.currentQuery=c;const[j,ie]=function uo(_){const c=!!_.split(/\s*,\s*/).find(a=>":self"==a);return c&&(_=_.replace(bu,"")),_=_.replace(/@\*/g,dl).replace(/@\w+/g,a=>dl+"-"+a.slice(1)).replace(/:animating/g,Aa),[_,c]}(c.selector);a.currentQuerySelector=m.length?m+" "+j:j,gs(a.collectedStyles,a.currentQuerySelector,new Map);const fe=as(this,_c(c.animation),a);return a.currentQuery=null,a.currentQuerySelector=m,{type:$r.If.Query,selector:j,limit:R.limit||0,optional:!!R.optional,includeSelf:ie,animation:fe,originalSelector:c.selector,options:ml(c.options)}}visitStagger(c,a){a.currentQuery||a.errors.push(function Yi(){return new K.wOt(3013,!1)}());const m="full"===c.timings?{duration:0,delay:0,easing:"full"}:hl(c.timings,a.errors,!0);return{type:$r.If.Stagger,animation:as(this,_c(c.animation),a),timings:m,options:null}}}class cs{constructor(c){this.errors=c,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function ml(_){return _?(_={..._}).params&&(_.params=function zc(_){return _?{..._}:null}(_.params)):_={},_}function Hc(_,c,a){return{duration:_,delay:c,easing:a}}function xl(_,c,a,m,R,j,ie=null,fe=!1){return{type:1,element:_,keyframes:c,preStyleProps:a,postStyleProps:m,duration:R,delay:j,totalTime:R+j,easing:ie,subTimeline:fe}}class Xs{constructor(){this._map=new Map}get(c){return this._map.get(c)||[]}append(c,a){let m=this._map.get(c);m||this._map.set(c,m=[]),m.push(...a)}has(c){return this._map.has(c)}clear(){this._map.clear()}}const Kd=new RegExp(":enter","g"),ud=new RegExp(":leave","g");function Za(_,c,a,m,R,j=new Map,ie=new Map,fe,ke,Re=[]){return(new Nl).buildKeyframes(_,c,a,m,R,j,ie,fe,ke,Re)}class Nl{buildKeyframes(c,a,m,R,j,ie,fe,ke,Re,Ot=[]){Re=Re||new Xs;const Lt=new Jl(c,a,Re,R,j,Ot,[]);Lt.options=ke;const wn=ke.delay?Pl(ke.delay):0;Lt.currentTimeline.delayNextStep(wn),Lt.currentTimeline.setStyles([ie],null,Lt.errors,ke),as(this,m,Lt);const kn=Lt.timelines.filter(Pn=>Pn.containsAnimation());if(kn.length&&fe.size){let Pn;for(let rr=kn.length-1;rr>=0;rr--){const zn=kn[rr];if(zn.element===a){Pn=zn;break}}Pn&&!Pn.allowOnlyTimelineStyles()&&Pn.setStyles([fe],null,Lt.errors,ke)}return kn.length?kn.map(Pn=>Pn.buildKeyframes()):[xl(a,[],[],[],0,wn,"",!1)]}visitTrigger(c,a){}visitState(c,a){}visitTransition(c,a){}visitAnimateChild(c,a){const m=a.subInstructions.get(a.element);if(m){const R=a.createSubContext(c.options),j=a.currentTimeline.currentTime,ie=this._visitSubInstructions(m,R,R.options);j!=ie&&a.transformIntoNewTimeline(ie)}a.previousNode=c}visitAnimateRef(c,a){const m=a.createSubContext(c.options);m.transformIntoNewTimeline(),this._applyAnimationRefDelays([c.options,c.animation.options],a,m),this.visitReference(c.animation,m),a.transformIntoNewTimeline(m.currentTimeline.currentTime),a.previousNode=c}_applyAnimationRefDelays(c,a,m){for(const R of c){const j=R?.delay;if(j){const ie="number"==typeof j?j:Pl(La(j,R?.params??{},a.errors));m.delayNextStep(ie)}}}_visitSubInstructions(c,a,m){let j=a.currentTimeline.currentTime;const ie=null!=m.duration?Pl(m.duration):null,fe=null!=m.delay?Pl(m.delay):null;return 0!==ie&&c.forEach(ke=>{const Re=a.appendInstructionToTimeline(ke,ie,fe);j=Math.max(j,Re.duration+Re.delay)}),j}visitReference(c,a){a.updateOptions(c.options,!0),as(this,c.animation,a),a.previousNode=c}visitSequence(c,a){const m=a.subContextCount;let R=a;const j=c.options;if(j&&(j.params||j.delay)&&(R=a.createSubContext(j),R.transformIntoNewTimeline(),null!=j.delay)){R.previousNode.type==$r.If.Style&&(R.currentTimeline.snapshotCurrentStyles(),R.previousNode=Zl);const ie=Pl(j.delay);R.delayNextStep(ie)}c.steps.length&&(c.steps.forEach(ie=>as(this,ie,R)),R.currentTimeline.applyStylesToKeyframe(),R.subContextCount>m&&R.transformIntoNewTimeline()),a.previousNode=c}visitGroup(c,a){const m=[];let R=a.currentTimeline.currentTime;const j=c.options&&c.options.delay?Pl(c.options.delay):0;c.steps.forEach(ie=>{const fe=a.createSubContext(c.options);j&&fe.delayNextStep(j),as(this,ie,fe),R=Math.max(R,fe.currentTimeline.currentTime),m.push(fe.currentTimeline)}),m.forEach(ie=>a.currentTimeline.mergeTimelineCollectedStyles(ie)),a.transformIntoNewTimeline(R),a.previousNode=c}_visitTiming(c,a){if(c.dynamic){const m=c.strValue;return hl(a.params?La(m,a.params,a.errors):m,a.errors)}return{duration:c.duration,delay:c.delay,easing:c.easing}}visitAnimate(c,a){const m=a.currentAnimateTimings=this._visitTiming(c.timings,a),R=a.currentTimeline;m.delay&&(a.incrementTime(m.delay),R.snapshotCurrentStyles());const j=c.style;j.type==$r.If.Keyframes?this.visitKeyframes(j,a):(a.incrementTime(m.duration),this.visitStyle(j,a),R.applyStylesToKeyframe()),a.currentAnimateTimings=null,a.previousNode=c}visitStyle(c,a){const m=a.currentTimeline,R=a.currentAnimateTimings;!R&&m.hasCurrentStyleProperties()&&m.forwardFrame();const j=R&&R.easing||c.easing;c.isEmptyStep?m.applyEmptyStep(j):m.setStyles(c.styles,j,a.errors,a.options),a.previousNode=c}visitKeyframes(c,a){const m=a.currentAnimateTimings,R=a.currentTimeline.duration,j=m.duration,fe=a.createSubContext().currentTimeline;fe.easing=m.easing,c.styles.forEach(ke=>{fe.forwardTime((ke.offset||0)*j),fe.setStyles(ke.styles,ke.easing,a.errors,a.options),fe.applyStylesToKeyframe()}),a.currentTimeline.mergeTimelineCollectedStyles(fe),a.transformIntoNewTimeline(R+j),a.previousNode=c}visitQuery(c,a){const m=a.currentTimeline.currentTime,R=c.options||{},j=R.delay?Pl(R.delay):0;j&&(a.previousNode.type===$r.If.Style||0==m&&a.currentTimeline.hasCurrentStyleProperties())&&(a.currentTimeline.snapshotCurrentStyles(),a.previousNode=Zl);let ie=m;const fe=a.invokeQuery(c.selector,c.originalSelector,c.limit,c.includeSelf,!!R.optional,a.errors);a.currentQueryTotal=fe.length;let ke=null;fe.forEach((Re,Ot)=>{a.currentQueryIndex=Ot;const Lt=a.createSubContext(c.options,Re);j&&Lt.delayNextStep(j),Re===a.element&&(ke=Lt.currentTimeline),as(this,c.animation,Lt),Lt.currentTimeline.applyStylesToKeyframe(),ie=Math.max(ie,Lt.currentTimeline.currentTime)}),a.currentQueryIndex=0,a.currentQueryTotal=0,a.transformIntoNewTimeline(ie),ke&&(a.currentTimeline.mergeTimelineCollectedStyles(ke),a.currentTimeline.snapshotCurrentStyles()),a.previousNode=c}visitStagger(c,a){const m=a.parentContext,R=a.currentTimeline,j=c.timings,ie=Math.abs(j.duration),fe=ie*(a.currentQueryTotal-1);let ke=ie*a.currentQueryIndex;switch(j.duration<0?"reverse":j.easing){case"reverse":ke=fe-ke;break;case"full":ke=m.currentStaggerTime}const Ot=a.currentTimeline;ke&&Ot.delayNextStep(ke);const Lt=Ot.currentTime;as(this,c.animation,a),a.previousNode=c,m.currentStaggerTime=R.currentTime-Lt+(R.startTime-m.currentTimeline.startTime)}}const Zl={};class Jl{constructor(c,a,m,R,j,ie,fe,ke){this._driver=c,this.element=a,this.subInstructions=m,this._enterClassName=R,this._leaveClassName=j,this.errors=ie,this.timelines=fe,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=Zl,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=ke||new eu(this._driver,a,0),fe.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(c,a){if(!c)return;const m=c;let R=this.options;null!=m.duration&&(R.duration=Pl(m.duration)),null!=m.delay&&(R.delay=Pl(m.delay));const j=m.params;if(j){let ie=R.params;ie||(ie=this.options.params={}),Object.keys(j).forEach(fe=>{(!a||!ie.hasOwnProperty(fe))&&(ie[fe]=La(j[fe],ie,this.errors))})}}_copyOptions(){const c={};if(this.options){const a=this.options.params;if(a){const m=c.params={};Object.keys(a).forEach(R=>{m[R]=a[R]})}}return c}createSubContext(c=null,a,m){const R=a||this.element,j=new Jl(this._driver,R,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(R,m||0));return j.previousNode=this.previousNode,j.currentAnimateTimings=this.currentAnimateTimings,j.options=this._copyOptions(),j.updateOptions(c),j.currentQueryIndex=this.currentQueryIndex,j.currentQueryTotal=this.currentQueryTotal,j.parentContext=this,this.subContextCount++,j}transformIntoNewTimeline(c){return this.previousNode=Zl,this.currentTimeline=this.currentTimeline.fork(this.element,c),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(c,a,m){const R={duration:a??c.duration,delay:this.currentTimeline.currentTime+(m??0)+c.delay,easing:""},j=new Gc(this._driver,c.element,c.keyframes,c.preStyleProps,c.postStyleProps,R,c.stretchStartingKeyframe);return this.timelines.push(j),R}incrementTime(c){this.currentTimeline.forwardTime(this.currentTimeline.duration+c)}delayNextStep(c){c>0&&this.currentTimeline.delayNextStep(c)}invokeQuery(c,a,m,R,j,ie){let fe=[];if(R&&fe.push(this.element),c.length>0){c=(c=c.replace(Kd,"."+this._enterClassName)).replace(ud,"."+this._leaveClassName);let Re=this._driver.query(this.element,c,1!=m);0!==m&&(Re=m<0?Re.slice(Re.length+m,Re.length):Re.slice(0,m)),fe.push(...Re)}return!j&&0==fe.length&&ie.push(function Sl(_){return new K.wOt(3014,!1)}()),fe}}class eu{constructor(c,a,m,R){this._driver=c,this.element=a,this.startTime=m,this._elementTimelineStylesLookup=R,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(a),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(a,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(c){const a=1===this._keyframes.size&&this._pendingStyles.size;this.duration||a?(this.forwardTime(this.currentTime+c),a&&this.snapshotCurrentStyles()):this.startTime+=c}fork(c,a){return this.applyStylesToKeyframe(),new eu(this._driver,c,a||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(c){this.applyStylesToKeyframe(),this.duration=c,this._loadKeyframe()}_updateStyle(c,a){this._localTimelineStyles.set(c,a),this._globalTimelineStyles.set(c,a),this._styleSummary.set(c,{time:this.currentTime,value:a})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(c){c&&this._previousKeyframe.set("easing",c);for(let[a,m]of this._globalTimelineStyles)this._backFill.set(a,m||$r.kp),this._currentKeyframe.set(a,$r.kp);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(c,a,m,R){a&&this._previousKeyframe.set("easing",a);const j=R&&R.params||{},ie=function Tu(_,c){const a=new Map;let m;return _.forEach(R=>{if("*"===R){m??=c.keys();for(let j of m)a.set(j,$r.kp)}else for(let[j,ie]of R)a.set(j,ie)}),a}(c,this._globalTimelineStyles);for(let[fe,ke]of ie){const Re=La(ke,j,m);this._pendingStyles.set(fe,Re),this._localTimelineStyles.has(fe)||this._backFill.set(fe,this._globalTimelineStyles.get(fe)??$r.kp),this._updateStyle(fe,Re)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((c,a)=>{this._currentKeyframe.set(a,c)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((c,a)=>{this._currentKeyframe.has(a)||this._currentKeyframe.set(a,c)}))}snapshotCurrentStyles(){for(let[c,a]of this._localTimelineStyles)this._pendingStyles.set(c,a),this._updateStyle(c,a)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const c=[];for(let a in this._currentKeyframe)c.push(a);return c}mergeTimelineCollectedStyles(c){c._styleSummary.forEach((a,m)=>{const R=this._styleSummary.get(m);(!R||a.time>R.time)&&this._updateStyle(m,a.value)})}buildKeyframes(){this.applyStylesToKeyframe();const c=new Set,a=new Set,m=1===this._keyframes.size&&0===this.duration;let R=[];this._keyframes.forEach((fe,ke)=>{const Re=new Map([...this._backFill,...fe]);Re.forEach((Ot,Lt)=>{Ot===$r.FX?c.add(Lt):Ot===$r.kp&&a.add(Lt)}),m||Re.set("offset",ke/this.duration),R.push(Re)});const j=[...c.values()],ie=[...a.values()];if(m){const fe=R[0],ke=new Map(fe);fe.set("offset",0),ke.set("offset",1),R=[fe,ke]}return xl(this.element,R,j,ie,this.duration,this.startTime,this.easing,!1)}}class Gc extends eu{constructor(c,a,m,R,j,ie,fe=!1){super(c,a,ie.delay),this.keyframes=m,this.preStyleProps=R,this.postStyleProps=j,this._stretchStartingKeyframe=fe,this.timings={duration:ie.duration,delay:ie.delay,easing:ie.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let c=this.keyframes,{delay:a,duration:m,easing:R}=this.timings;if(this._stretchStartingKeyframe&&a){const j=[],ie=m+a,fe=a/ie,ke=new Map(c[0]);ke.set("offset",0),j.push(ke);const Re=new Map(c[0]);Re.set("offset",qc(fe)),j.push(Re);const Ot=c.length-1;for(let Lt=1;Lt<=Ot;Lt++){let wn=new Map(c[Lt]);const kn=wn.get("offset");wn.set("offset",qc((a+kn*m)/ie)),j.push(wn)}m=ie,a=0,R="",c=j}return xl(this.element,c,this.preStyleProps,this.postStyleProps,m,a,R,!0)}}function qc(_,c=3){const a=Math.pow(10,c-1);return Math.round(_*a)/a}function gl(_,c,a,m,R,j,ie,fe,ke,Re,Ot,Lt,wn){return{type:0,element:_,triggerName:c,isRemovalTransition:R,fromState:a,fromStyles:j,toState:m,toStyles:ie,timelines:fe,queriedElements:ke,preStyleProps:Re,postStyleProps:Ot,totalTime:Lt,errors:wn}}const Au={};class dd{constructor(c,a,m){this._triggerName=c,this.ast=a,this._stateStyles=m}match(c,a,m,R){return function Nh(_,c,a,m,R){return _.some(j=>j(c,a,m,R))}(this.ast.matchers,c,a,m,R)}buildStyles(c,a,m){let R=this._stateStyles.get("*");return void 0!==c&&(R=this._stateStyles.get(c?.toString())||R),R?R.buildStyles(a,m):new Map}build(c,a,m,R,j,ie,fe,ke,Re,Ot){const Lt=[],wn=this.ast.options&&this.ast.options.params||Au,Pn=this.buildStyles(m,fe&&fe.params||Au,Lt),rr=ke&&ke.params||Au,zn=this.buildStyles(R,rr,Lt),Vn=new Set,Hn=new Map,tr=new Map,ur="void"===R,Or={params:Ad(rr,wn),delay:this.ast.options?.delay},Gr=Ot?[]:Za(c,a,this.ast.animation,j,ie,Pn,zn,Or,Re,Lt);let Di=0;return Gr.forEach(Gi=>{Di=Math.max(Gi.duration+Gi.delay,Di)}),Lt.length?gl(a,this._triggerName,m,R,ur,Pn,zn,[],[],Hn,tr,Di,Lt):(Gr.forEach(Gi=>{const ca=Gi.element,md=gs(Hn,ca,new Set);Gi.preStyleProps.forEach(gd=>md.add(gd));const xf=gs(tr,ca,new Set);Gi.postStyleProps.forEach(gd=>xf.add(gd)),ca!==a&&Vn.add(ca)}),gl(a,this._triggerName,m,R,ur,Pn,zn,Gr,[...Vn.values()],Hn,tr,Di))}}function Ad(_,c){const a={...c};return Object.entries(_).forEach(([m,R])=>{null!=R&&(a[m]=R)}),a}class wu{constructor(c,a,m){this.styles=c,this.defaultParams=a,this.normalizer=m}buildStyles(c,a){const m=new Map,R=Ad(c,this.defaultParams);return this.styles.styles.forEach(j=>{"string"!=typeof j&&j.forEach((ie,fe)=>{ie&&(ie=La(ie,R,a));const ke=this.normalizer.normalizePropertyName(fe,a);ie=this.normalizer.normalizeStyleValue(fe,ke,ie,a),m.set(fe,ie)})}),m}}class Ja{constructor(c,a,m){this.name=c,this.ast=a,this._normalizer=m,this.transitionFactories=[],this.states=new Map,a.states.forEach(R=>{this.states.set(R.name,new wu(R.style,R.options&&R.options.params||{},m))}),E(this.states,"true","1"),E(this.states,"false","0"),a.transitions.forEach(R=>{this.transitionFactories.push(new dd(c,R,this.states))}),this.fallbackTransition=function N(_,c,a){return new dd(_,{type:$r.If.Transition,animation:{type:$r.If.Sequence,steps:[],options:null},matchers:[(ie,fe)=>!0],options:null,queryCount:0,depCount:0},c)}(c,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(c,a,m,R){return this.transitionFactories.find(ie=>ie.match(c,a,m,R))||null}matchStyles(c,a,m){return this.fallbackTransition.buildStyles(c,a,m)}}function E(_,c,a){_.has(c)?_.has(a)||_.set(a,_.get(c)):_.has(a)&&_.set(c,_.get(a))}const C=new Xs;class B{constructor(c,a,m){this.bodyNode=c,this._driver=a,this._normalizer=m,this._animations=new Map,this._playersById=new Map,this.players=[]}register(c,a){const m=[],j=ju(this._driver,a,m,[]);if(m.length)throw function zd(_){return new K.wOt(3503,!1)}();this._animations.set(c,j)}_buildPlayer(c,a,m){const R=c.element,j=fc(this._normalizer,c.keyframes,a,m);return this._driver.animate(R,j,c.duration,c.delay,c.easing,[],!0)}create(c,a,m={}){const R=[],j=this._animations.get(c);let ie;const fe=new Map;if(j?(ie=Za(this._driver,a,j,lo,Xl,new Map,new Map,m,C,R),ie.forEach(Ot=>{const Lt=gs(fe,Ot.element,new Map);Ot.postStyleProps.forEach(wn=>Lt.set(wn,null))})):(R.push(function xu(){return new K.wOt(3300,!1)}()),ie=[]),R.length)throw function uu(_){return new K.wOt(3504,!1)}();fe.forEach((Ot,Lt)=>{Ot.forEach((wn,kn)=>{Ot.set(kn,this._driver.computeStyle(Lt,kn,$r.kp))})});const Re=Wo(ie.map(Ot=>{const Lt=fe.get(Ot.element);return this._buildPlayer(Ot,new Map,Lt)}));return this._playersById.set(c,Re),Re.onDestroy(()=>this.destroy(c)),this.players.push(Re),Re}destroy(c){const a=this._getPlayer(c);a.destroy(),this._playersById.delete(c);const m=this.players.indexOf(a);m>=0&&this.players.splice(m,1)}_getPlayer(c){const a=this._playersById.get(c);if(!a)throw function Nu(_){return new K.wOt(3301,!1)}();return a}listen(c,a,m,R){const j=fu(a,"","","");return Ai(this._getPlayer(c),m,j,R),()=>{}}command(c,a,m,R){if("register"==m)return void this.register(c,R[0]);if("create"==m)return void this.create(c,a,R[0]||{});const j=this._getPlayer(c);switch(m){case"play":j.play();break;case"pause":j.pause();break;case"reset":j.reset();break;case"restart":j.restart();break;case"finish":j.finish();break;case"init":j.init();break;case"setPosition":j.setPosition(parseFloat(R[0]));break;case"destroy":this.destroy(c)}}}const de="ng-animate-queued",It="ng-animate-disabled",Vr=[],ui={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Xi={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Ls="__ng_removed";class vc{get params(){return this.options.params}constructor(c,a=""){this.namespaceId=a;const m=c&&c.hasOwnProperty("value");if(this.value=function tu(_){return _??null}(m?c.value:c),m){const{value:j,...ie}=c;this.options=ie}else this.options={};this.options.params||(this.options.params={})}absorbOptions(c){const a=c.params;if(a){const m=this.options.params;Object.keys(a).forEach(R=>{null==m[R]&&(m[R]=a[R])})}}}const ec="void",Cu=new vc(ec);class Gd{constructor(c,a,m){this.id=c,this.hostElement=a,this._engine=m,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+c,ji(a,this._hostClassName)}listen(c,a,m,R){if(!this._triggers.has(a))throw function Uc(_,c){return new K.wOt(3302,!1)}();if(null==m||0==m.length)throw function rd(_){return new K.wOt(3303,!1)}();if(!function Du(_){return"start"==_||"done"==_}(m))throw function Ql(_,c){return new K.wOt(3400,!1)}();const j=gs(this._elementListeners,c,[]),ie={name:a,phase:m,callback:R};j.push(ie);const fe=gs(this._engine.statesByElement,c,new Map);return fe.has(a)||(ji(c,Bc),ji(c,Bc+"-"+a),fe.set(a,Cu)),()=>{this._engine.afterFlush(()=>{const ke=j.indexOf(ie);ke>=0&&j.splice(ke,1),this._triggers.has(a)||fe.delete(a)})}}register(c,a){return!this._triggers.has(c)&&(this._triggers.set(c,a),!0)}_getTrigger(c){const a=this._triggers.get(c);if(!a)throw function Dl(_){return new K.wOt(3401,!1)}();return a}trigger(c,a,m,R=!0){const j=this._getTrigger(a),ie=new Su(this.id,a,c);let fe=this._engine.statesByElement.get(c);fe||(ji(c,Bc),ji(c,Bc+"-"+a),this._engine.statesByElement.set(c,fe=new Map));let ke=fe.get(a);const Re=new vc(m,this.id);if(!(m&&m.hasOwnProperty("value"))&&ke&&Re.absorbOptions(ke.options),fe.set(a,Re),ke||(ke=Cu),Re.value!==ec&&ke.value===Re.value){if(!function nu(_,c){const a=Object.keys(_),m=Object.keys(c);if(a.length!=m.length)return!1;for(let R=0;R<a.length;R++){const j=a[R];if(!c.hasOwnProperty(j)||_[j]!==c[j])return!1}return!0}(ke.params,Re.params)){const rr=[],zn=j.matchStyles(ke.value,ke.params,rr),Vn=j.matchStyles(Re.value,Re.params,rr);rr.length?this._engine.reportError(rr):this._engine.afterFlush(()=>{ka(c,zn),ii(c,Vn)})}return}const wn=gs(this._engine.playersByElement,c,[]);wn.forEach(rr=>{rr.namespaceId==this.id&&rr.triggerName==a&&rr.queued&&rr.destroy()});let kn=j.matchTransition(ke.value,Re.value,c,Re.params),Pn=!1;if(!kn){if(!R)return;kn=j.fallbackTransition,Pn=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:c,triggerName:a,transition:kn,fromState:ke,toState:Re,player:ie,isFallbackTransition:Pn}),Pn||(ji(c,de),ie.onStart(()=>{$u(c,de)})),ie.onDone(()=>{let rr=this.players.indexOf(ie);rr>=0&&this.players.splice(rr,1);const zn=this._engine.playersByElement.get(c);if(zn){let Vn=zn.indexOf(ie);Vn>=0&&zn.splice(Vn,1)}}),this.players.push(ie),wn.push(ie),ie}deregister(c){this._triggers.delete(c),this._engine.statesByElement.forEach(a=>a.delete(c)),this._elementListeners.forEach((a,m)=>{this._elementListeners.set(m,a.filter(R=>R.name!=c))})}clearElementCache(c){this._engine.statesByElement.delete(c),this._elementListeners.delete(c);const a=this._engine.playersByElement.get(c);a&&(a.forEach(m=>m.destroy()),this._engine.playersByElement.delete(c))}_signalRemovalForInnerTriggers(c,a){const m=this._engine.driver.query(c,dl,!0);m.forEach(R=>{if(R[Ls])return;const j=this._engine.fetchNamespacesByElement(R);j.size?j.forEach(ie=>ie.triggerLeaveAnimation(R,a,!1,!0)):this.clearElementCache(R)}),this._engine.afterFlushAnimationsDone(()=>m.forEach(R=>this.clearElementCache(R)))}triggerLeaveAnimation(c,a,m,R){const j=this._engine.statesByElement.get(c),ie=new Map;if(j){const fe=[];if(j.forEach((ke,Re)=>{if(ie.set(Re,ke.value),this._triggers.has(Re)){const Ot=this.trigger(c,Re,ec,R);Ot&&fe.push(Ot)}}),fe.length)return this._engine.markElementAsRemoved(this.id,c,!0,a,ie),m&&Wo(fe).onDone(()=>this._engine.processLeaveNode(c)),!0}return!1}prepareLeaveAnimationListeners(c){const a=this._elementListeners.get(c),m=this._engine.statesByElement.get(c);if(a&&m){const R=new Set;a.forEach(j=>{const ie=j.name;if(R.has(ie))return;R.add(ie);const ke=this._triggers.get(ie).fallbackTransition,Re=m.get(ie)||Cu,Ot=new vc(ec),Lt=new Su(this.id,ie,c);this._engine.totalQueuedPlayers++,this._queue.push({element:c,triggerName:ie,transition:ke,fromState:Re,toState:Ot,player:Lt,isFallbackTransition:!0})})}}removeNode(c,a){const m=this._engine;if(c.childElementCount&&this._signalRemovalForInnerTriggers(c,a),this.triggerLeaveAnimation(c,a,!0))return;let R=!1;if(m.totalAnimations){const j=m.players.length?m.playersByQueriedElement.get(c):[];if(j&&j.length)R=!0;else{let ie=c;for(;ie=ie.parentNode;)if(m.statesByElement.get(ie)){R=!0;break}}}if(this.prepareLeaveAnimationListeners(c),R)m.markElementAsRemoved(this.id,c,!1,a);else{const j=c[Ls];(!j||j===ui)&&(m.afterFlush(()=>this.clearElementCache(c)),m.destroyInnerAnimations(c),m._onRemovalComplete(c,a))}}insertNode(c,a){ji(c,this._hostClassName)}drainQueuedTransitions(c){const a=[];return this._queue.forEach(m=>{const R=m.player;if(R.destroyed)return;const j=m.element,ie=this._elementListeners.get(j);ie&&ie.forEach(fe=>{if(fe.name==m.triggerName){const ke=fu(j,m.triggerName,m.fromState.value,m.toState.value);ke._data=c,Ai(m.player,fe.phase,ke,fe.callback)}}),R.markedForDestroy?this._engine.afterFlush(()=>{R.destroy()}):a.push(m)}),this._queue=[],a.sort((m,R)=>{const j=m.transition.ast.depCount,ie=R.transition.ast.depCount;return 0==j||0==ie?j-ie:this._engine.driver.containsElement(m.element,R.element)?1:-1})}destroy(c){this.players.forEach(a=>a.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,c)}}class wd{_onRemovalComplete(c,a){this.onRemovalComplete(c,a)}constructor(c,a,m,R){this.bodyNode=c,this.driver=a,this._normalizer=m,this.scheduler=R,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(j,ie)=>{}}get queuedPlayers(){const c=[];return this._namespaceList.forEach(a=>{a.players.forEach(m=>{m.queued&&c.push(m)})}),c}createNamespace(c,a){const m=new Gd(c,a,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,a)?this._balanceNamespaceList(m,a):(this.newHostElements.set(a,m),this.collectEnterElement(a)),this._namespaceLookup[c]=m}_balanceNamespaceList(c,a){const m=this._namespaceList,R=this.namespacesByHostElement;if(m.length-1>=0){let ie=!1,fe=this.driver.getParentElement(a);for(;fe;){const ke=R.get(fe);if(ke){const Re=m.indexOf(ke);m.splice(Re+1,0,c),ie=!0;break}fe=this.driver.getParentElement(fe)}ie||m.unshift(c)}else m.push(c);return R.set(a,c),c}register(c,a){let m=this._namespaceLookup[c];return m||(m=this.createNamespace(c,a)),m}registerTrigger(c,a,m){let R=this._namespaceLookup[c];R&&R.register(a,m)&&this.totalAnimations++}destroy(c,a){c&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{const m=this._fetchNamespace(c);this.namespacesByHostElement.delete(m.hostElement);const R=this._namespaceList.indexOf(m);R>=0&&this._namespaceList.splice(R,1),m.destroy(a),delete this._namespaceLookup[c]}))}_fetchNamespace(c){return this._namespaceLookup[c]}fetchNamespacesByElement(c){const a=new Set,m=this.statesByElement.get(c);if(m)for(let R of m.values())if(R.namespaceId){const j=this._fetchNamespace(R.namespaceId);j&&a.add(j)}return a}trigger(c,a,m,R){if(Ec(a)){const j=this._fetchNamespace(c);if(j)return j.trigger(a,m,R),!0}return!1}insertNode(c,a,m,R){if(!Ec(a))return;const j=a[Ls];if(j&&j.setForRemoval){j.setForRemoval=!1,j.setForMove=!0;const ie=this.collectedLeaveElements.indexOf(a);ie>=0&&this.collectedLeaveElements.splice(ie,1)}if(c){const ie=this._fetchNamespace(c);ie&&ie.insertNode(a,m)}R&&this.collectEnterElement(a)}collectEnterElement(c){this.collectedEnterElements.push(c)}markElementAsDisabled(c,a){a?this.disabledNodes.has(c)||(this.disabledNodes.add(c),ji(c,It)):this.disabledNodes.has(c)&&(this.disabledNodes.delete(c),$u(c,It))}removeNode(c,a,m){if(Ec(a)){this.scheduler?.notify();const R=c?this._fetchNamespace(c):null;R?R.removeNode(a,m):this.markElementAsRemoved(c,a,!1,m);const j=this.namespacesByHostElement.get(a);j&&j.id!==c&&j.removeNode(a,m)}else this._onRemovalComplete(a,m)}markElementAsRemoved(c,a,m,R,j){this.collectedLeaveElements.push(a),a[Ls]={namespaceId:c,setForRemoval:R,hasAnimation:m,removedBeforeQueried:!1,previousTriggersValues:j}}listen(c,a,m,R,j){return Ec(a)?this._fetchNamespace(c).listen(a,m,R,j):()=>{}}_buildInstruction(c,a,m,R,j){return c.transition.build(this.driver,c.element,c.fromState.value,c.toState.value,m,R,c.fromState.options,c.toState.options,a,j)}destroyInnerAnimations(c){let a=this.driver.query(c,dl,!0);a.forEach(m=>this.destroyActiveAnimationsForElement(m)),0!=this.playersByQueriedElement.size&&(a=this.driver.query(c,Aa,!0),a.forEach(m=>this.finishActiveQueriedAnimationOnElement(m)))}destroyActiveAnimationsForElement(c){const a=this.playersByElement.get(c);a&&a.forEach(m=>{m.queued?m.markedForDestroy=!0:m.destroy()})}finishActiveQueriedAnimationOnElement(c){const a=this.playersByQueriedElement.get(c);a&&a.forEach(m=>m.finish())}whenRenderingDone(){return new Promise(c=>{if(this.players.length)return Wo(this.players).onDone(()=>c());c()})}processLeaveNode(c){const a=c[Ls];if(a&&a.setForRemoval){if(c[Ls]=ui,a.namespaceId){this.destroyInnerAnimations(c);const m=this._fetchNamespace(a.namespaceId);m&&m.clearElementCache(c)}this._onRemovalComplete(c,a.setForRemoval)}c.classList?.contains(It)&&this.markElementAsDisabled(c,!1),this.driver.query(c,".ng-animate-disabled",!0).forEach(m=>{this.markElementAsDisabled(m,!1)})}flush(c=-1){let a=[];if(this.newHostElements.size&&(this.newHostElements.forEach((m,R)=>this._balanceNamespaceList(m,R)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let m=0;m<this.collectedEnterElements.length;m++)ji(this.collectedEnterElements[m],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const m=[];try{a=this._flushAnimations(m,c)}finally{for(let R=0;R<m.length;R++)m[R]()}}else for(let m=0;m<this.collectedLeaveElements.length;m++)this.processLeaveNode(this.collectedLeaveElements[m]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(m=>m()),this._flushFns=[],this._whenQuietFns.length){const m=this._whenQuietFns;this._whenQuietFns=[],a.length?Wo(a).onDone(()=>{m.forEach(R=>R())}):m.forEach(R=>R())}}reportError(c){throw function ia(_){return new K.wOt(3402,!1)}()}_flushAnimations(c,a){const m=new Xs,R=[],j=new Map,ie=[],fe=new Map,ke=new Map,Re=new Map,Ot=new Set;this.disabledNodes.forEach(Wr=>{Ot.add(Wr);const ni=this.driver.query(Wr,".ng-animate-queued",!0);for(let mi=0;mi<ni.length;mi++)Ot.add(ni[mi])});const Lt=this.bodyNode,wn=Array.from(this.statesByElement.keys()),kn=tc(wn,this.collectedEnterElements),Pn=new Map;let rr=0;kn.forEach((Wr,ni)=>{const mi=lo+rr++;Pn.set(ni,mi),Wr.forEach(Ji=>ji(Ji,mi))});const zn=[],Vn=new Set,Hn=new Set;for(let Wr=0;Wr<this.collectedLeaveElements.length;Wr++){const ni=this.collectedLeaveElements[Wr],mi=ni[Ls];mi&&mi.setForRemoval&&(zn.push(ni),Vn.add(ni),mi.hasAnimation?this.driver.query(ni,".ng-star-inserted",!0).forEach(Ji=>Vn.add(Ji)):Hn.add(ni))}const tr=new Map,ur=tc(wn,Array.from(Vn));ur.forEach((Wr,ni)=>{const mi=Xl+rr++;tr.set(ni,mi),Wr.forEach(Ji=>ji(Ji,mi))}),c.push(()=>{kn.forEach((Wr,ni)=>{const mi=Pn.get(ni);Wr.forEach(Ji=>$u(Ji,mi))}),ur.forEach((Wr,ni)=>{const mi=tr.get(ni);Wr.forEach(Ji=>$u(Ji,mi))}),zn.forEach(Wr=>{this.processLeaveNode(Wr)})});const Or=[],Gr=[];for(let Wr=this._namespaceList.length-1;Wr>=0;Wr--)this._namespaceList[Wr].drainQueuedTransitions(a).forEach(mi=>{const Ji=mi.player,wc=mi.element;if(Or.push(Ji),this.collectedEnterElements.length){const Ua=wc[Ls];if(Ua&&Ua.setForMove){if(Ua.previousTriggersValues&&Ua.previousTriggersValues.has(mi.triggerName)){const _d=Ua.previousTriggersValues.get(mi.triggerName),Zu=this.statesByElement.get(mi.element);if(Zu&&Zu.has(mi.triggerName)){const Nf=Zu.get(mi.triggerName);Nf.value=_d,Zu.set(mi.triggerName,Nf)}}return void Ji.destroy()}}const Yu=!Lt||!this.driver.containsElement(Lt,wc),iu=tr.get(wc),Xu=Pn.get(wc),Ho=this._buildInstruction(mi,m,Xu,iu,Yu);if(Ho.errors&&Ho.errors.length)return void Gr.push(Ho);if(Yu)return Ji.onStart(()=>ka(wc,Ho.fromStyles)),Ji.onDestroy(()=>ii(wc,Ho.toStyles)),void R.push(Ji);if(mi.isFallbackTransition)return Ji.onStart(()=>ka(wc,Ho.fromStyles)),Ji.onDestroy(()=>ii(wc,Ho.toStyles)),void R.push(Ji);const El=[];Ho.timelines.forEach(Ua=>{Ua.stretchStartingKeyframe=!0,this.disabledNodes.has(Ua.element)||El.push(Ua)}),Ho.timelines=El,m.append(wc,Ho.timelines),ie.push({instruction:Ho,player:Ji,element:wc}),Ho.queriedElements.forEach(Ua=>gs(fe,Ua,[]).push(Ji)),Ho.preStyleProps.forEach((Ua,_d)=>{if(Ua.size){let Zu=ke.get(_d);Zu||ke.set(_d,Zu=new Set),Ua.forEach((Nf,Ju)=>Zu.add(Ju))}}),Ho.postStyleProps.forEach((Ua,_d)=>{let Zu=Re.get(_d);Zu||Re.set(_d,Zu=new Set),Ua.forEach((Nf,Ju)=>Zu.add(Ju))})});if(Gr.length){const Wr=[];Gr.forEach(ni=>{Wr.push(function hu(_,c){return new K.wOt(3505,!1)}())}),Or.forEach(ni=>ni.destroy()),this.reportError(Wr)}const Di=new Map,Gi=new Map;ie.forEach(Wr=>{const ni=Wr.element;m.has(ni)&&(Gi.set(ni,ni),this._beforeAnimationBuild(Wr.player.namespaceId,Wr.instruction,Di))}),R.forEach(Wr=>{const ni=Wr.element;this._getPreviousPlayers(ni,!1,Wr.namespaceId,Wr.triggerName,null).forEach(Ji=>{gs(Di,ni,[]).push(Ji),Ji.destroy()})});const ca=zn.filter(Wr=>Sd(Wr,ke,Re)),md=new Map;bc(md,this.driver,Hn,Re,$r.kp).forEach(Wr=>{Sd(Wr,ke,Re)&&ca.push(Wr)});const gd=new Map;kn.forEach((Wr,ni)=>{bc(gd,this.driver,new Set(Wr),ke,$r.FX)}),ca.forEach(Wr=>{const ni=md.get(Wr),mi=gd.get(Wr);md.set(Wr,new Map([...ni?.entries()??[],...mi?.entries()??[]]))});const nh=[],hg=[],fg={};ie.forEach(Wr=>{const{element:ni,player:mi,instruction:Ji}=Wr;if(m.has(ni)){if(Ot.has(ni))return mi.onDestroy(()=>ii(ni,Ji.toStyles)),mi.disabled=!0,mi.overrideTotalTime(Ji.totalTime),void R.push(mi);let wc=fg;if(Gi.size>1){let iu=ni;const Xu=[];for(;iu=iu.parentNode;){const Ho=Gi.get(iu);if(Ho){wc=Ho;break}Xu.push(iu)}Xu.forEach(Ho=>Gi.set(Ho,wc))}const Yu=this._buildAnimation(mi.namespaceId,Ji,Di,j,gd,md);if(mi.setRealPlayer(Yu),wc===fg)nh.push(mi);else{const iu=this.playersByElement.get(wc);iu&&iu.length&&(mi.parentPlayer=Wo(iu)),R.push(mi)}}else ka(ni,Ji.fromStyles),mi.onDestroy(()=>ii(ni,Ji.toStyles)),hg.push(mi),Ot.has(ni)&&R.push(mi)}),hg.forEach(Wr=>{const ni=j.get(Wr.element);if(ni&&ni.length){const mi=Wo(ni);Wr.setRealPlayer(mi)}}),R.forEach(Wr=>{Wr.parentPlayer?Wr.syncPlayerEvents(Wr.parentPlayer):Wr.destroy()});for(let Wr=0;Wr<zn.length;Wr++){const ni=zn[Wr],mi=ni[Ls];if($u(ni,Xl),mi&&mi.hasAnimation)continue;let Ji=[];if(fe.size){let Yu=fe.get(ni);Yu&&Yu.length&&Ji.push(...Yu);let iu=this.driver.query(ni,Aa,!0);for(let Xu=0;Xu<iu.length;Xu++){let Ho=fe.get(iu[Xu]);Ho&&Ho.length&&Ji.push(...Ho)}}const wc=Ji.filter(Yu=>!Yu.destroyed);wc.length?kh(this,ni,wc):this.processLeaveNode(ni)}return zn.length=0,nh.forEach(Wr=>{this.players.push(Wr),Wr.onDone(()=>{Wr.destroy();const ni=this.players.indexOf(Wr);this.players.splice(ni,1)}),Wr.play()}),nh}afterFlush(c){this._flushFns.push(c)}afterFlushAnimationsDone(c){this._whenQuietFns.push(c)}_getPreviousPlayers(c,a,m,R,j){let ie=[];if(a){const fe=this.playersByQueriedElement.get(c);fe&&(ie=fe)}else{const fe=this.playersByElement.get(c);if(fe){const ke=!j||j==ec;fe.forEach(Re=>{Re.queued||!ke&&Re.triggerName!=R||ie.push(Re)})}}return(m||R)&&(ie=ie.filter(fe=>!(m&&m!=fe.namespaceId||R&&R!=fe.triggerName))),ie}_beforeAnimationBuild(c,a,m){const j=a.element,ie=a.isRemovalTransition?void 0:c,fe=a.isRemovalTransition?void 0:a.triggerName;for(const ke of a.timelines){const Re=ke.element,Ot=Re!==j,Lt=gs(m,Re,[]);this._getPreviousPlayers(Re,Ot,ie,fe,a.toState).forEach(kn=>{const Pn=kn.getRealPlayer();Pn.beforeDestroy&&Pn.beforeDestroy(),kn.destroy(),Lt.push(kn)})}ka(j,a.fromStyles)}_buildAnimation(c,a,m,R,j,ie){const fe=a.triggerName,ke=a.element,Re=[],Ot=new Set,Lt=new Set,wn=a.timelines.map(Pn=>{const rr=Pn.element;Ot.add(rr);const zn=rr[Ls];if(zn&&zn.removedBeforeQueried)return new $r.sf(Pn.duration,Pn.delay);const Vn=rr!==ke,Hn=function Cd(_){const c=[];return hh(_,c),c}((m.get(rr)||Vr).map(Di=>Di.getRealPlayer())).filter(Di=>!!Di.element&&Di.element===rr),tr=j.get(rr),ur=ie.get(rr),Or=fc(this._normalizer,Pn.keyframes,tr,ur),Gr=this._buildPlayer(Pn,Or,Hn);if(Pn.subTimeline&&R&&Lt.add(rr),Vn){const Di=new Su(c,fe,rr);Di.setRealPlayer(Gr),Re.push(Di)}return Gr});Re.forEach(Pn=>{gs(this.playersByQueriedElement,Pn.element,[]).push(Pn),Pn.onDone(()=>function hd(_,c,a){let m=_.get(c);if(m){if(m.length){const R=m.indexOf(a);m.splice(R,1)}0==m.length&&_.delete(c)}return m}(this.playersByQueriedElement,Pn.element,Pn))}),Ot.forEach(Pn=>ji(Pn,Fu));const kn=Wo(wn);return kn.onDestroy(()=>{Ot.forEach(Pn=>$u(Pn,Fu)),ii(ke,a.toStyles)}),Lt.forEach(Pn=>{gs(R,Pn,[]).push(kn)}),kn}_buildPlayer(c,a,m){return a.length>0?this.driver.animate(c.element,a,c.duration,c.delay,c.easing,m):new $r.sf(c.duration,c.delay)}}class Su{constructor(c,a,m){this.namespaceId=c,this.triggerName=a,this.element=m,this._player=new $r.sf,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(c){this._containsRealPlayer||(this._player=c,this._queuedCallbacks.forEach((a,m)=>{a.forEach(R=>Ai(c,m,void 0,R))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(c.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(c){this.totalTime=c}syncPlayerEvents(c){const a=this._player;a.triggerCallback&&c.onStart(()=>a.triggerCallback("start")),c.onDone(()=>this.finish()),c.onDestroy(()=>this.destroy())}_queueEvent(c,a){gs(this._queuedCallbacks,c,[]).push(a)}onDone(c){this.queued&&this._queueEvent("done",c),this._player.onDone(c)}onStart(c){this.queued&&this._queueEvent("start",c),this._player.onStart(c)}onDestroy(c){this.queued&&this._queueEvent("destroy",c),this._player.onDestroy(c)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(c){this.queued||this._player.setPosition(c)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(c){const a=this._player;a.triggerCallback&&a.triggerCallback(c)}}function Ec(_){return _&&1===_.nodeType}function _l(_,c){const a=_.style.display;return _.style.display=c??"none",a}function bc(_,c,a,m,R){const j=[];a.forEach(ke=>j.push(_l(ke)));const ie=[];m.forEach((ke,Re)=>{const Ot=new Map;ke.forEach(Lt=>{const wn=c.computeStyle(Re,Lt,R);Ot.set(Lt,wn),(!wn||0==wn.length)&&(Re[Ls]=Xi,ie.push(Re))}),_.set(Re,Ot)});let fe=0;return a.forEach(ke=>_l(ke,j[fe++])),ie}function tc(_,c){const a=new Map;if(_.forEach(fe=>a.set(fe,[])),0==c.length)return a;const R=new Set(c),j=new Map;function ie(fe){if(!fe)return 1;let ke=j.get(fe);if(ke)return ke;const Re=fe.parentNode;return ke=a.has(Re)?Re:R.has(Re)?1:ie(Re),j.set(fe,ke),ke}return c.forEach(fe=>{const ke=ie(fe);1!==ke&&a.get(ke).push(fe)}),a}function ji(_,c){_.classList?.add(c)}function $u(_,c){_.classList?.remove(c)}function kh(_,c,a){Wo(a).onDone(()=>_.processLeaveNode(c))}function hh(_,c){for(let a=0;a<_.length;a++){const m=_[a];m instanceof $r.ui?hh(m.players,c):c.push(m)}}function Sd(_,c,a){const m=a.get(_);if(!m)return!1;let R=c.get(_);return R?m.forEach(j=>R.add(j)):c.set(_,m),a.delete(_),!0}class qd{constructor(c,a,m,R){this._driver=a,this._normalizer=m,this._triggerCache={},this.onRemovalComplete=(j,ie)=>{},this._transitionEngine=new wd(c.body,a,m,R),this._timelineEngine=new B(c.body,a,m),this._transitionEngine.onRemovalComplete=(j,ie)=>this.onRemovalComplete(j,ie)}registerTrigger(c,a,m,R,j){const ie=c+"-"+R;let fe=this._triggerCache[ie];if(!fe){const ke=[],Ot=ju(this._driver,j,ke,[]);if(ke.length)throw function Wd(_,c){return new K.wOt(3404,!1)}();fe=function kl(_,c,a){return new Ja(_,c,a)}(R,Ot,this._normalizer),this._triggerCache[ie]=fe}this._transitionEngine.registerTrigger(a,R,fe)}register(c,a){this._transitionEngine.register(c,a)}destroy(c,a){this._transitionEngine.destroy(c,a)}onInsert(c,a,m,R){this._transitionEngine.insertNode(c,a,m,R)}onRemove(c,a,m){this._transitionEngine.removeNode(c,a,m)}disableAnimations(c,a){this._transitionEngine.markElementAsDisabled(c,a)}process(c,a,m,R){if("@"==m.charAt(0)){const[j,ie]=ku(m);this._timelineEngine.command(j,a,ie,R)}else this._transitionEngine.trigger(c,a,m,R)}listen(c,a,m,R,j){if("@"==m.charAt(0)){const[ie,fe]=ku(m);return this._timelineEngine.listen(ie,a,fe,j)}return this._transitionEngine.listen(c,a,m,R,j)}flush(c=-1){this._transitionEngine.flush(c)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(c){this._transitionEngine.afterFlushAnimationsDone(c)}}class zu{static{this.initialStylesByElement=new WeakMap}constructor(c,a,m){this._element=c,this._startStyles=a,this._endStyles=m,this._state=0;let R=zu.initialStylesByElement.get(c);R||zu.initialStylesByElement.set(c,R=new Map),this._initialStyles=R}start(){this._state<1&&(this._startStyles&&ii(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(ii(this._element,this._initialStyles),this._endStyles&&(ii(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(zu.initialStylesByElement.delete(this._element),this._startStyles&&(ka(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(ka(this._element,this._endStyles),this._endStyles=null),ii(this._element,this._initialStyles),this._state=3)}}function Ru(_){let c=null;return _.forEach((a,m)=>{(function cf(_){return"display"===_||"position"===_})(m)&&(c=c||new Map,c.set(m,a))}),c}class fh{constructor(c,a,m,R){this.element=c,this.keyframes=a,this.options=m,this._specialStyles=R,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=m.duration,this._delay=m.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(c=>c()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const c=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,c,this.options),this._finalKeyframe=c.length?c[c.length-1]:new Map;const a=()=>this._onFinish();this.domPlayer.addEventListener("finish",a),this.onDestroy(()=>{this.domPlayer.removeEventListener("finish",a)})}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(c){const a=[];return c.forEach(m=>{a.push(Object.fromEntries(m))}),a}_triggerWebAnimation(c,a,m){return c.animate(this._convertKeyframesToObject(a),m)}onStart(c){this._originalOnStartFns.push(c),this._onStartFns.push(c)}onDone(c){this._originalOnDoneFns.push(c),this._onDoneFns.push(c)}onDestroy(c){this._onDestroyFns.push(c)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(c=>c()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(c=>c()),this._onDestroyFns=[])}setPosition(c){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=c*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const c=new Map;this.hasStarted()&&this._finalKeyframe.forEach((m,R)=>{"offset"!==R&&c.set(R,this._finished?m:yc(this.element,R))}),this.currentSnapshot=c}triggerCallback(c){const a="start"===c?this._onStartFns:this._onDoneFns;a.forEach(m=>m()),a.length=0}}class lf{validateStyleProperty(c){return!0}validateAnimatableStyleProperty(c){return!0}matchesElement(c,a){return!1}containsElement(c,a){return mu(c,a)}getParentElement(c){return Ya(c)}query(c,a,m){return Yl(c,a,m)}computeStyle(c,a,m){return yc(c,a)}animate(c,a,m,R,j,ie=[]){const ke={duration:m,delay:R,fill:0==R?"both":"forwards"};j&&(ke.easing=j);const Re=new Map,Ot=ie.filter(kn=>kn instanceof fh);(function Vu(_,c){return 0===_||0===c})(m,R)&&Ot.forEach(kn=>{kn.currentSnapshot.forEach((Pn,rr)=>Re.set(rr,Pn))});let Lt=function id(_){return _.length?_[0]instanceof Map?_:_.map(c=>new Map(Object.entries(c))):[]}(a).map(kn=>new Map(kn));Lt=function $c(_,c,a){if(a.size&&c.length){let m=c[0],R=[];if(a.forEach((j,ie)=>{m.has(ie)||R.push(ie),m.set(ie,j)}),R.length)for(let j=1;j<c.length;j++){let ie=c[j];R.forEach(fe=>ie.set(fe,yc(_,fe)))}}return c}(c,Lt,Re);const wn=function Wu(_,c){let a=null,m=null;return Array.isArray(c)&&c.length?(a=Ru(c[0]),c.length>1&&(m=Ru(c[c.length-1]))):c instanceof Map&&(a=Ru(c)),a||m?new zu(_,a,m):null}(c,Lt);return new fh(c,Lt,ke,wn)}}const Dd="@.disabled";class Ku{constructor(c,a,m,R){this.namespaceId=c,this.delegate=a,this.engine=m,this._onDestroy=R,this.\u0275type=0}get data(){return this.delegate.data}destroyNode(c){this.delegate.destroyNode?.(c)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(c,a){return this.delegate.createElement(c,a)}createComment(c){return this.delegate.createComment(c)}createText(c){return this.delegate.createText(c)}appendChild(c,a){this.delegate.appendChild(c,a),this.engine.onInsert(this.namespaceId,a,c,!1)}insertBefore(c,a,m,R=!0){this.delegate.insertBefore(c,a,m),this.engine.onInsert(this.namespaceId,a,c,R)}removeChild(c,a,m){this.engine.onRemove(this.namespaceId,a,this.delegate)}selectRootElement(c,a){return this.delegate.selectRootElement(c,a)}parentNode(c){return this.delegate.parentNode(c)}nextSibling(c){return this.delegate.nextSibling(c)}setAttribute(c,a,m,R){this.delegate.setAttribute(c,a,m,R)}removeAttribute(c,a,m){this.delegate.removeAttribute(c,a,m)}addClass(c,a){this.delegate.addClass(c,a)}removeClass(c,a){this.delegate.removeClass(c,a)}setStyle(c,a,m,R){this.delegate.setStyle(c,a,m,R)}removeStyle(c,a,m){this.delegate.removeStyle(c,a,m)}setProperty(c,a,m){"@"==a.charAt(0)&&a==Dd?this.disableAnimations(c,!!m):this.delegate.setProperty(c,a,m)}setValue(c,a){this.delegate.setValue(c,a)}listen(c,a,m){return this.delegate.listen(c,a,m)}disableAnimations(c,a){this.engine.disableAnimations(c,a)}}class df extends Ku{constructor(c,a,m,R,j){super(a,m,R,j),this.factory=c,this.namespaceId=a}setProperty(c,a,m){"@"==a.charAt(0)?"."==a.charAt(1)&&a==Dd?this.disableAnimations(c,m=void 0===m||!!m):this.engine.process(this.namespaceId,c,a.slice(1),m):this.delegate.setProperty(c,a,m)}listen(c,a,m){if("@"==a.charAt(0)){const R=function Bf(_){switch(_){case"body":return document.body;case"document":return document;case"window":return window;default:return _}}(c);let j=a.slice(1),ie="";return"@"!=j.charAt(0)&&([j,ie]=function jf(_){const c=_.indexOf(".");return[_.substring(0,c),_.slice(c+1)]}(j)),this.engine.listen(this.namespaceId,R,j,ie,fe=>{this.factory.scheduleListenerCallback(fe._data||-1,m,fe)})}return this.delegate.listen(c,a,m)}}class y{constructor(c,a,m){this.delegate=c,this.engine=a,this._zone=m,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,a.onRemovalComplete=(R,j)=>{const ie=j?.parentNode(R);ie&&j.removeChild(ie,R)}}createRenderer(c,a){const R=this.delegate.createRenderer(c,a);if(!c||!a?.data?.animation){const Re=this._rendererCache;let Ot=Re.get(R);return Ot||(Ot=new Ku("",R,this.engine,()=>Re.delete(R)),Re.set(R,Ot)),Ot}const j=a.id,ie=a.id+"-"+this._currentId;this._currentId++,this.engine.register(ie,c);const fe=Re=>{Array.isArray(Re)?Re.forEach(fe):this.engine.registerTrigger(j,ie,c,Re.name,Re)};return a.data.animation.forEach(fe),new df(this,ie,R,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(c,a,m){if(c>=0&&c<this._microtaskId)return void this._zone.run(()=>a(m));const R=this._animationCallbacksBuffer;0==R.length&&queueMicrotask(()=>{this._zone.run(()=>{R.forEach(j=>{const[ie,fe]=j;ie(fe)}),this._animationCallbacksBuffer=[]})}),R.push([a,m])}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}var h=x(177);const Z=[{provide:Io,useFactory:function T(){return new Ys}},{provide:qd,useClass:(()=>{class _ extends qd{constructor(a,m,R){super(a,m,R,(0,K.WQX)(K.An2,{optional:!0}))}ngOnDestroy(){this.flush()}static{this.\u0275fac=function(m){return new(m||_)(K.KVO(h.qQ),K.KVO(gc),K.KVO(Io))}}static{this.\u0275prov=K.jDH({token:_,factory:_.\u0275fac})}}return _})()},{provide:K._9s,useFactory:function V(_,c,a){return new y(_,c,a)},deps:[Vi.B7,qd,K.SKi]}],se=[{provide:gc,useFactory:()=>new lf},{provide:K.bc$,useValue:"BrowserAnimations"},...Z];var Ln=x(9030),Ir=x(8810),Hr=x(3726),di=x(8793),To=x(5343);const aa=new Gt.c(To.l);var ho=x(7786),Ll=x(17),hf=x(8071);const Pu={connector:()=>new hn.B};function ph(_,c=Pu){const{connector:a}=c;return(0,Et.N)((m,R)=>{const j=a();(0,Pt.Tg)(_(function ff(_){return new Gt.c(c=>_.subscribe(c))}(j))).subscribe(R),R.add(m.subscribe(j))})}var yl=x(6697),Tp=x(8141),D=x(3236);function g(){return(0,Et.N)((_,c)=>{_.subscribe((0,kt._)(c,To.l))})}var v=x(3703);function M(_,c){return c?a=>(0,di.x)(c.pipe((0,yl.s)(1),g()),a.pipe(M(_))):(0,Qe.Z)((a,m)=>(0,Pt.Tg)(_(a,m)).pipe((0,yl.s)(1),(0,v.u)(a)))}var te=x(1807);function be(_,c=D.E){const a=(0,te.O)(_,c);return M(()=>a)}const at="Service workers are disabled or not supported by this browser";class vn{constructor(c){if(this.serviceWorker=c,c){const m=(0,Hr.R)(c,"controllerchange").pipe((0,Ft.T)(()=>c.controller)),R=(0,Ln.v)(()=>(0,ot.of)(c.controller)),j=(0,di.x)(R,m);this.worker=j.pipe((0,tt.p)(Ot=>!!Ot)),this.registration=this.worker.pipe((0,Rt.n)(()=>c.getRegistration()));const Re=(0,Hr.R)(c,"message").pipe((0,Ft.T)(Ot=>Ot.data)).pipe((0,tt.p)(Ot=>Ot&&Ot.type)).pipe(function Yd(_){return _?c=>ph(_)(c):c=>function mh(_,c){const a=(0,hf.T)(_)?_:()=>_;return(0,hf.T)(c)?ph(c,{connector:a}):m=>new Ll.G(m,a)}(new hn.B)(c)}());Re.connect(),this.events=Re}else this.worker=this.events=this.registration=function Bt(_){return(0,Ln.v)(()=>(0,Ir.$)(new Error(_)))}(at)}postMessage(c,a){return this.worker.pipe((0,yl.s)(1),(0,Tp.M)(m=>{m.postMessage({action:c,...a})})).toPromise().then(()=>{})}postMessageWithOperation(c,a,m){const R=this.waitForOperationCompleted(m),j=this.postMessage(c,a);return Promise.all([j,R]).then(([,ie])=>ie)}generateNonce(){return Math.round(1e7*Math.random())}eventsOfType(c){let a;return a="string"==typeof c?m=>m.type===c:m=>c.includes(m.type),this.events.pipe((0,tt.p)(a))}nextEventOfType(c){return this.eventsOfType(c).pipe((0,yl.s)(1))}waitForOperationCompleted(c){return this.eventsOfType("OPERATION_COMPLETED").pipe((0,tt.p)(a=>a.nonce===c),(0,yl.s)(1),(0,Ft.T)(a=>{if(void 0!==a.result)return a.result;throw new Error(a.error)})).toPromise()}get isEnabled(){return!!this.serviceWorker}}let Tr=(()=>{class _{get isEnabled(){return this.sw.isEnabled}constructor(a){if(this.sw=a,this.pushManager=null,this.subscriptionChanges=new hn.B,!a.isEnabled)return this.messages=aa,this.notificationClicks=aa,void(this.subscription=aa);this.messages=this.sw.eventsOfType("PUSH").pipe((0,Ft.T)(R=>R.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe((0,Ft.T)(R=>R.data)),this.pushManager=this.sw.registration.pipe((0,Ft.T)(R=>R.pushManager));const m=this.pushManager.pipe((0,Rt.n)(R=>R.getSubscription()));this.subscription=(0,ho.h)(m,this.subscriptionChanges)}requestSubscription(a){if(!this.sw.isEnabled||null===this.pushManager)return Promise.reject(new Error(at));const m={userVisibleOnly:!0};let R=this.decodeBase64(a.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),j=new Uint8Array(new ArrayBuffer(R.length));for(let ie=0;ie<R.length;ie++)j[ie]=R.charCodeAt(ie);return m.applicationServerKey=j,this.pushManager.pipe((0,Rt.n)(ie=>ie.subscribe(m)),(0,yl.s)(1)).toPromise().then(ie=>(this.subscriptionChanges.next(ie),ie))}unsubscribe(){return this.sw.isEnabled?this.subscription.pipe((0,yl.s)(1),(0,Rt.n)(m=>{if(null===m)throw new Error("Not subscribed to push notifications.");return m.unsubscribe().then(R=>{if(!R)throw new Error("Unsubscribe failed!");this.subscriptionChanges.next(null)})})).toPromise():Promise.reject(new Error(at))}decodeBase64(a){return atob(a)}static{this.\u0275fac=function(m){return new(m||_)(K.KVO(vn))}}static{this.\u0275prov=K.jDH({token:_,factory:_.\u0275fac})}}return _})(),Mr=(()=>{class _{get isEnabled(){return this.sw.isEnabled}constructor(a){if(this.sw=a,!a.isEnabled)return this.versionUpdates=aa,void(this.unrecoverable=aa);this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY","NO_NEW_VERSION_DETECTED"]),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(at));const a=this.sw.generateNonce();return this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:a},a)}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(at));const a=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:a},a)}static{this.\u0275fac=function(m){return new(m||_)(K.KVO(vn))}}static{this.\u0275prov=K.jDH({token:_,factory:_.\u0275fac})}}return _})();const br=new K.nKC("");function Zi(_,c,a,m){return()=>{if(!(0,h.UE)(m)||!("serviceWorker"in navigator)||!1===a.enabled)return;let R;if(navigator.serviceWorker.addEventListener("controllerchange",()=>{null!==navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({action:"INITIALIZE"})}),"function"==typeof a.registrationStrategy)R=a.registrationStrategy();else{const[ie,...fe]=(a.registrationStrategy||"registerWhenStable:30000").split(":");switch(ie){case"registerImmediately":R=(0,ot.of)(null);break;case"registerWithDelay":R=Ic(+fe[0]||0);break;case"registerWhenStable":R=fe[0]?(0,ho.h)(No(_),Ic(+fe[0])):No(_);break;default:throw new Error(`Unknown ServiceWorker registration strategy: ${a.registrationStrategy}`)}}_.get(K.SKi).runOutsideAngular(()=>R.pipe((0,yl.s)(1)).subscribe(()=>navigator.serviceWorker.register(c,{scope:a.scope}).catch(ie=>console.error("Service worker registration failed with:",ie))))}}function Ic(_){return(0,ot.of)(null).pipe(be(_))}function No(_){return _.get(K.o8S).isStable.pipe((0,tt.p)(a=>a))}function Gu(_,c){return new vn((0,h.UE)(c)&&!1!==_.enabled?navigator.serviceWorker:void 0)}class Rd{}function $f(_,c={}){return(0,K.EmA)([Tr,Mr,{provide:br,useValue:_},{provide:Rd,useValue:c},{provide:vn,useFactory:Gu,deps:[Rd,K.Agw]},{provide:K.hnV,useFactory:Zi,deps:[K.zZn,br,Rd,K.Agw],multi:!0}])}let pf=(()=>{class _{static register(a,m={}){return{ngModule:_,providers:[$f(a,m)]}}static{this.\u0275fac=function(m){return new(m||_)}}static{this.\u0275mod=K.$C({type:_})}static{this.\u0275inj=K.G2t({providers:[Tr,Mr]})}}return _})();var Xd=x(2087),fd=x(9437),nc=x(4668),vl=x(3993),Lh=x(274);const{isArray:Wf}=Array;function mf(..._){return 1===(_=function zf(_){return 1===_.length&&Wf(_[0])?_[0]:_}(_)).length?(0,Pt.Tg)(_[0]):new Gt.c(function ey(_){return c=>{let a=[];for(let m=0;a&&!c.closed&&m<_.length;m++)a.push((0,Pt.Tg)(_[m]).subscribe((0,kt._)(c,R=>{if(a){for(let j=0;j<a.length;j++)j!==m&&a[j].unsubscribe();a=null}c.next(R)})))}}(_))}var xr=x(9640),Ei=function(_){return _[_.EntitiesOnly=0]="EntitiesOnly",_[_.Both=1]="Both",_[_.None=2]="None",_}(Ei||{});function ro(_){return function(a,m){const R={ids:[...m.ids],entities:{...m.entities}},j=_(a,R);return j===Ei.Both?Object.assign({},m,R):j===Ei.EntitiesOnly?{...m,entities:R.entities}:m}}function Pd(_,c){const a=c(_);return(0,K.naY)()&&void 0===a&&console.warn("@ngrx/entity: The entity passed to the `selectId` implementation returned undefined.","You should probably provide your own `selectId` implementation.","The entity that was passed:",_,"The `selectId` implementation:",c.toString()),a}function Kf(_){function c(zn,Vn){const Hn=Pd(zn,_);return Hn in Vn.entities?Ei.None:(Vn.ids.push(Hn),Vn.entities[Hn]=zn,Ei.Both)}function a(zn,Vn){let Hn=!1;for(const tr of zn)Hn=c(tr,Vn)!==Ei.None||Hn;return Hn?Ei.Both:Ei.None}function R(zn,Vn){const Hn=Pd(zn,_);return Hn in Vn.entities?(Vn.entities[Hn]=zn,Ei.EntitiesOnly):(Vn.ids.push(Hn),Vn.entities[Hn]=zn,Ei.Both)}function fe(zn,Vn){const tr=(zn instanceof Array?zn:Vn.ids.filter(ur=>zn(Vn.entities[ur]))).filter(ur=>ur in Vn.entities).map(ur=>delete Vn.entities[ur]).length>0;return tr&&(Vn.ids=Vn.ids.filter(ur=>ur in Vn.entities)),tr?Ei.Both:Ei.None}function Ot(zn,Vn){return Lt([zn],Vn)}function Lt(zn,Vn){const Hn={};return(zn=zn.filter(ur=>ur.id in Vn.entities)).length>0?zn.filter(Or=>function Re(zn,Vn,Hn){const ur=Object.assign({},Hn.entities[Vn.id],Vn.changes),Or=Pd(ur,_),Gr=Or!==Vn.id;return Gr&&(zn[Vn.id]=Or,delete Hn.entities[Vn.id]),Hn.entities[Or]=ur,Gr}(Hn,Or,Vn)).length>0?(Vn.ids=Vn.ids.map(Or=>Hn[Or]||Or),Ei.Both):Ei.EntitiesOnly:Ei.None}function rr(zn,Vn){const Hn=[],tr=[];for(const Gr of zn){const Di=Pd(Gr,_);Di in Vn.entities?tr.push({id:Di,changes:Gr}):Hn.push(Gr)}const ur=Lt(tr,Vn),Or=a(Hn,Vn);switch(!0){case Or===Ei.None&&ur===Ei.None:return Ei.None;case Or===Ei.Both||ur===Ei.Both:return Ei.Both;default:return Ei.EntitiesOnly}}return{removeAll:function ke(zn){return Object.assign({},zn,{ids:[],entities:{}})},addOne:ro(c),addMany:ro(a),setAll:ro(function m(zn,Vn){return Vn.ids=[],Vn.entities={},a(zn,Vn),Ei.Both}),setOne:ro(R),setMany:ro(function j(zn,Vn){const Hn=zn.map(tr=>R(tr,Vn));switch(!0){case Hn.some(tr=>tr===Ei.Both):return Ei.Both;case Hn.some(tr=>tr===Ei.EntitiesOnly):return Ei.EntitiesOnly;default:return Ei.None}}),updateOne:ro(Ot),updateMany:ro(Lt),upsertOne:ro(function Pn(zn,Vn){return rr([zn],Vn)}),upsertMany:ro(rr),removeOne:ro(function ie(zn,Vn){return fe([zn],Vn)}),removeMany:ro(fe),map:ro(function wn(zn,Vn){return Lt(Vn.ids.reduce((ur,Or)=>{const Gr=zn(Vn.entities[Or]);return Gr!==Vn.entities[Or]&&ur.push({id:Or,changes:Gr}),ur},[]).filter(({id:ur})=>ur in Vn.entities),Vn)}),mapOne:ro(function kn({map:zn,id:Vn},Hn){const tr=Hn.entities[Vn];return tr?Ot({id:Vn,changes:zn(tr)},Hn):Ei.None})}}function ty(_,c){const{removeOne:a,removeMany:m,removeAll:R}=Kf(_);function j(Hn,tr){return ie([Hn],tr)}function ie(Hn,tr){const ur=Hn.filter(Or=>!(Pd(Or,_)in tr.entities));return 0===ur.length?Ei.None:(Vn(ur,tr),Ei.Both)}function ke(Hn,tr){const ur=Pd(Hn,_);return ur in tr.entities?(tr.ids=tr.ids.filter(Or=>Or!==ur),Vn([Hn],tr),Ei.Both):j(Hn,tr)}function Ot(Hn,tr){return wn([Hn],tr)}function wn(Hn,tr){const ur=[],Or=Hn.filter(Gr=>function Lt(Hn,tr,ur){if(!(tr.id in ur.entities))return!1;const Gr=Object.assign({},ur.entities[tr.id],tr.changes),Di=Pd(Gr,_);return delete ur.entities[tr.id],Hn.push(Gr),Di!==tr.id}(ur,Gr,tr)).length>0;if(0===ur.length)return Ei.None;{const Gr=tr.ids,Di=[];return tr.ids=tr.ids.filter((Gi,ca)=>Gi in tr.entities||(Di.push(ca),!1)),Vn(ur,tr),!Or&&Di.every(Gi=>tr.ids[Gi]===Gr[Gi])?Ei.EntitiesOnly:Ei.Both}}function zn(Hn,tr){const ur=[],Or=[];for(const Gi of Hn){const ca=Pd(Gi,_);ca in tr.entities?Or.push({id:ca,changes:Gi}):ur.push(Gi)}const Gr=wn(Or,tr),Di=ie(ur,tr);switch(!0){case Di===Ei.None&&Gr===Ei.None:return Ei.None;case Di===Ei.Both||Gr===Ei.Both:return Ei.Both;default:return Ei.EntitiesOnly}}function Vn(Hn,tr){Hn.sort(c);const ur=[];let Or=0,Gr=0;for(;Or<Hn.length&&Gr<tr.ids.length;){const Di=Hn[Or],Gi=Pd(Di,_),ca=tr.ids[Gr];c(Di,tr.entities[ca])<=0?(ur.push(Gi),Or++):(ur.push(ca),Gr++)}tr.ids=ur.concat(Or<Hn.length?Hn.slice(Or).map(_):tr.ids.slice(Gr)),Hn.forEach((Di,Gi)=>{tr.entities[_(Di)]=Di})}return{removeOne:a,removeMany:m,removeAll:R,addOne:ro(j),updateOne:ro(Ot),upsertOne:ro(function rr(Hn,tr){return zn([Hn],tr)}),setAll:ro(function fe(Hn,tr){return tr.entities={},tr.ids=[],ie(Hn,tr),Ei.Both}),setOne:ro(ke),setMany:ro(function Re(Hn,tr){const ur=Hn.map(Or=>ke(Or,tr));switch(!0){case ur.some(Or=>Or===Ei.Both):return Ei.Both;case ur.some(Or=>Or===Ei.EntitiesOnly):return Ei.EntitiesOnly;default:return Ei.None}}),addMany:ro(ie),updateMany:ro(wn),upsertMany:ro(zn),map:ro(function kn(Hn,tr){return wn(tr.ids.reduce((Or,Gr)=>{const Di=Hn(tr.entities[Gr]);return Di!==tr.entities[Gr]&&Or.push({id:Gr,changes:Di}),Or},[]),tr)}),mapOne:ro(function Pn({map:Hn,id:tr},ur){const Or=ur.entities[tr];return Or?Ot({id:tr,changes:Hn(Or)},ur):Ei.None})}}var Rm=x(983);class Md{constructor(c,a,m){this.kind=c,this.value=a,this.error=m,this.hasValue="N"===c}observe(c){return wp(this,c)}do(c,a,m){const{kind:R,value:j,error:ie}=this;return"N"===R?c?.(j):"E"===R?a?.(ie):m?.()}accept(c,a,m){var R;return(0,hf.T)(null===(R=c)||void 0===R?void 0:R.next)?this.observe(c):this.do(c,a,m)}toObservable(){const{kind:c,value:a,error:m}=this,R="N"===c?(0,ot.of)(a):"E"===c?(0,Ir.$)(()=>m):"C"===c?Rm.w:0;if(!R)throw new TypeError(`Unexpected notification kind ${c}`);return R}static createNext(c){return new Md("N",c)}static createError(c){return new Md("E",void 0,c)}static createComplete(){return Md.completeNotification}}function wp(_,c){var a,m,R;const{kind:j,value:ie,error:fe}=_;if("string"!=typeof j)throw new TypeError('Invalid notification, missing "kind"');"N"===j?null===(a=c.next)||void 0===a||a.call(c,ie):"E"===j?null===(m=c.error)||void 0===m||m.call(c,fe):null===(R=c.complete)||void 0===R||R.call(c)}function Cp(_,c){return c?a=>a.pipe(Cp((m,R)=>(0,Pt.Tg)(_(m,R)).pipe((0,Ft.T)((j,ie)=>c(m,j,R,ie))))):(0,Et.N)((a,m)=>{let R=0,j=null,ie=!1;a.subscribe((0,kt._)(m,fe=>{j||(j=(0,kt._)(m,void 0,()=>{j=null,ie&&m.complete()}),(0,Pt.Tg)(_(fe,R++)).subscribe(j))},()=>{ie=!0,!j&&m.complete()}))})}Md.completeNotification=new Md("C");const Gf={dispatch:!0,functional:!1,useEffectsErrorHandler:!0},Sp="__@ngrx/effects_create__";function ru(_,c={}){const a=c.functional?_:_(),m={...Gf,...c};return Object.defineProperty(a,Sp,{value:m}),a}function Dp(_){return Object.getPrototypeOf(_)}function Pm(_){return"function"==typeof _}function Qf(_){return _.filter(Pm)}function Mm(_,c,a){const m=Dp(_),j=m&&"Object"!==m.constructor.name?m.constructor.name:null,ie=function qf(_){return function xg(_){return Object.getOwnPropertyNames(_).filter(m=>!(!_[m]||!_[m].hasOwnProperty(Sp))&&_[m][Sp].hasOwnProperty("dispatch")).map(m=>({propertyName:m,..._[m][Sp]}))}(_)}(_).map(({propertyName:fe,dispatch:ke,useEffectsErrorHandler:Re})=>{const Ot="function"==typeof _[fe]?_[fe]():_[fe],Lt=Re?a(Ot,c):Ot;return!1===ke?Lt.pipe(g()):Lt.pipe(function gv(){return(0,Et.N)((_,c)=>{_.subscribe((0,kt._)(c,a=>{c.next(Md.createNext(a))},()=>{c.next(Md.createComplete()),c.complete()},a=>{c.next(Md.createError(a)),c.complete()}))})}()).pipe((0,Ft.T)(kn=>({effect:_[fe],notification:kn,propertyName:fe,sourceName:j,sourceInstance:_})))});return(0,ho.h)(...ie)}function Rp(_,c,a=10){return _.pipe((0,fd.W)(m=>(c&&c.handleError(m),a<=1?_:Rp(_,c,a-1))))}let Zd=(()=>{class _ extends Gt.c{constructor(a){super(),a&&(this.source=a)}lift(a){const m=new _;return m.source=this,m.operator=a,m}static{this.\u0275fac=function(m){return new(m||_)(K.KVO(xr.sA))}}static{this.\u0275prov=K.jDH({token:_,factory:_.\u0275fac,providedIn:"root"})}}return _})();function Om(..._){return(0,tt.p)(c=>_.some(a=>"string"==typeof a?a===c.type:a.type===c.type))}const Pp=new K.nKC("@ngrx/effects Internal Root Guard"),gh=new K.nKC("@ngrx/effects User Provided Effects"),_h=new K.nKC("@ngrx/effects Internal Root Effects"),gf=new K.nKC("@ngrx/effects Internal Root Effects Instances"),Vh=new K.nKC("@ngrx/effects Internal Feature Effects"),yh=new K.nKC("@ngrx/effects Internal Feature Effects Instance Groups"),Mp=new K.nKC("@ngrx/effects Effects Error Handler",{providedIn:"root",factory:()=>Rp}),qu="@ngrx/effects/init";(0,xr.VP)(qu);function Jf(_){return _f(_,"ngrxOnInitEffects")}function _f(_,c){return _&&c in _&&"function"==typeof _[c]}let ep=(()=>{class _ extends hn.B{constructor(a,m){super(),this.errorHandler=a,this.effectsErrorHandler=m}addEffects(a){this.next(a)}toActions(){return this.pipe(Ke(a=>function Ng(_){return!!_.constructor&&"Object"!==_.constructor.name&&"Function"!==_.constructor.name}(a)?Dp(a):a),(0,Qe.Z)(a=>a.pipe(Ke(Nm))),(0,Qe.Z)(a=>{const m=a.pipe(Cp(j=>function Uh(_,c){return a=>{const m=Mm(a,_,c);return function iy(_){return _f(_,"ngrxOnRunEffects")}(a)?a.ngrxOnRunEffects(m):m}}(this.errorHandler,this.effectsErrorHandler)(j)),(0,Ft.T)(j=>(function Yf(_,c){if("N"===_.notification.kind){const a=_.notification.value;!function Xf(_){return"function"!=typeof _&&_&&_.type&&"string"==typeof _.type}(a)&&c.handleError(new Error(`Effect ${function Zf({propertyName:_,sourceInstance:c,sourceName:a}){const m="function"==typeof c[_];return a?`"${a}.${String(_)}${m?"()":""}"`:`"${String(_)}()"`}(_)} dispatched an invalid action: ${function Op(_){try{return JSON.stringify(_)}catch{return _}}(a)}`))}}(j,this.errorHandler),j.notification)),(0,tt.p)(j=>"N"===j.kind&&null!=j.value),function Od(){return(0,Et.N)((_,c)=>{_.subscribe((0,kt._)(c,a=>wp(a,c)))})}()),R=a.pipe((0,yl.s)(1),(0,tt.p)(Jf),(0,Ft.T)(j=>j.ngrxOnInitEffects()));return(0,ho.h)(m,R)}))}static{this.\u0275fac=function(m){return new(m||_)(K.KVO(K.zcH),K.KVO(Mp))}}static{this.\u0275prov=K.jDH({token:_,factory:_.\u0275fac,providedIn:"root"})}}return _})();function Nm(_){return function ry(_){return _f(_,"ngrxOnIdentifyEffects")}(_)?_.ngrxOnIdentifyEffects():""}let yf=(()=>{class _{get isStarted(){return!!this.effectsSubscription}constructor(a,m){this.effectSources=a,this.store=m,this.effectsSubscription=null}start(){this.effectsSubscription||(this.effectsSubscription=this.effectSources.toActions().subscribe(this.store))}ngOnDestroy(){this.effectsSubscription&&(this.effectsSubscription.unsubscribe(),this.effectsSubscription=null)}static{this.\u0275fac=function(m){return new(m||_)(K.KVO(ep),K.KVO(xr.il))}}static{this.\u0275prov=K.jDH({token:_,factory:_.\u0275fac,providedIn:"root"})}}return _})(),Bh=(()=>{class _{constructor(a,m,R,j,ie,fe,ke){this.sources=a,m.start();for(const Re of j)a.addEffects(Re);R.dispatch({type:qu})}addEffects(a){this.sources.addEffects(a)}static{this.\u0275fac=function(m){return new(m||_)(K.KVO(ep),K.KVO(yf),K.KVO(xr.il),K.KVO(gf),K.KVO(xr.wc,8),K.KVO(xr.ae,8),K.KVO(Pp,8))}}static{this.\u0275mod=K.$C({type:_})}static{this.\u0275inj=K.G2t({})}}return _})(),km=(()=>{class _{constructor(a,m,R,j){const ie=m.flat();for(const fe of ie)a.addEffects(fe)}static{this.\u0275fac=function(m){return new(m||_)(K.KVO(Bh),K.KVO(yh),K.KVO(xr.wc,8),K.KVO(xr.ae,8))}}static{this.\u0275mod=K.$C({type:_})}static{this.\u0275inj=K.G2t({})}}return _})(),oy=(()=>{class _{static forFeature(...a){const m=a.flat(),R=Qf(m);return{ngModule:km,providers:[R,{provide:Vh,multi:!0,useValue:m},{provide:gh,multi:!0,useValue:[]},{provide:yh,multi:!0,useFactory:vf,deps:[Vh,gh]}]}}static forRoot(...a){const m=a.flat(),R=Qf(m);return{ngModule:Bh,providers:[R,{provide:_h,useValue:[m]},{provide:Pp,useFactory:Ef},{provide:gh,multi:!0,useValue:[]},{provide:gf,useFactory:vf,deps:[_h,gh]}]}}static{this.\u0275fac=function(m){return new(m||_)}}static{this.\u0275mod=K.$C({type:_})}static{this.\u0275inj=K.G2t({})}}return _})();function vf(_,c){const a=[];for(const m of _)a.push(...m);for(const m of c)a.push(...m);return a.map(m=>function ny(_){return _ instanceof K.nKC||Pm(_)}(m)?(0,K.WQX)(m):m)}function Ef(){const _=(0,K.WQX)(yf,{optional:!0,skipSelf:!0}),c=(0,K.WQX)(_h,{self:!0});if((1!==c.length||0!==c[0].length)&&_)throw new TypeError("EffectsModule.forRoot() called twice. Feature modules should use EffectsModule.forFeature() instead.");return"guarded"}let $h=(()=>{class _{create(a,m,R,j){const ie="string"==typeof a?{...j||{},entityName:a,entityOp:m,data:R}:a;return this.createCore(ie)}createCore(a){const{entityName:m,entityOp:R,tag:j}=a;if(!m)throw new Error("Missing entity name for new action");if(null==R)throw new Error("Missing EntityOp for new action");return{type:this.formatActionType(R,j||m),payload:a}}createFromAction(a,m){return this.create({...a.payload,...m})}formatActionType(a,m){return`[${m}] ${a}`}static{this.\u0275fac=function(m){return new(m||_)}}static{this.\u0275prov=K.jDH({token:_,factory:_.\u0275fac})}}return _})();class Lm{constructor(c,a){this.entityName=c,this.selectId=a}mustBeEntity(c){const a=this.extractData(c);if(!a)return this.throwError(c,"should have a single entity.");const m=this.selectId(a);return this.isNotKeyType(m)&&this.throwError(c,"has a missing or invalid entity key (id)"),a}mustBeEntities(c){const a=this.extractData(c);return Array.isArray(a)?(a.forEach((m,R)=>{const j=this.selectId(m);this.isNotKeyType(j)&&this.throwError(c,`, item ${R+1}, does not have a valid entity key (id)`)}),a):this.throwError(c,"should be an array of entities")}mustBeKey(c){const a=this.extractData(c);if(void 0===a)throw new Error("should be a single entity key");if(this.isNotKeyType(a))throw new Error("is not a valid key (id)");return a}mustBeKeys(c){const a=this.extractData(c);return Array.isArray(a)?(a.forEach((m,R)=>{this.isNotKeyType(m)&&this.throwError(c,`${this.entityName} ', item ${R+1}, is not a valid entity key (id)`)}),a):this.throwError(c,"should be an array of entity keys (id)")}mustBeUpdate(c){const a=this.extractData(c);if(!a)return this.throwError(c,"should be a single entity update");const{id:m,changes:R}=a,j=this.selectId(R);return(this.isNotKeyType(m)||this.isNotKeyType(j))&&this.throwError(c,"has a missing or invalid entity key (id)"),a}mustBeUpdates(c){const a=this.extractData(c);return Array.isArray(a)?(a.forEach((m,R)=>{const{id:j,changes:ie}=m,fe=this.selectId(ie);(this.isNotKeyType(j)||this.isNotKeyType(fe))&&this.throwError(c,`, item ${R+1}, has a missing or invalid entity key (id)`)}),a):this.throwError(c,"should be an array of entity updates")}mustBeUpdateResponse(c){const a=this.extractData(c);if(!a)return this.throwError(c,"should be a single entity update");const{id:m,changes:R}=a,j=this.selectId(R);return(this.isNotKeyType(m)||this.isNotKeyType(j))&&this.throwError(c,"has a missing or invalid entity key (id)"),a}mustBeUpdateResponses(c){const a=this.extractData(c);return Array.isArray(a)?(a.forEach((m,R)=>{const{id:j,changes:ie}=m,fe=this.selectId(ie);(this.isNotKeyType(j)||this.isNotKeyType(fe))&&this.throwError(c,`, item ${R+1}, has a missing or invalid entity key (id)`)}),a):this.throwError(c,"should be an array of entity updates")}extractData(c){return c.payload&&c.payload.data}isNotKeyType(c){return"string"!=typeof c&&"number"!=typeof c}throwError(c,a){throw new Error(`${this.entityName} EntityAction guard for "${c.type}": payload ${a}`)}}function Wh(_){return _?.id}function tp(_){if(null==_)return[];if(Array.isArray(_[0])){const[c,...a]=_;_=[...c,...a]}return _}function bf(_){return _=_||Wh,function(a){const m=_(a);if(null==m)throw new Error("Primary key may not be null/undefined.");return a&&{id:m,changes:a}}}function Fm(..._){const c=tp(_);switch(c.length){case 0:return(0,tt.p)(m=>m.payload&&null!=m.payload.entityOp);case 1:const a=c[0];return(0,tt.p)(m=>m.payload&&a===m.payload.entityOp);default:return(0,tt.p)(m=>{const R=m.payload&&m.payload.entityOp;return R&&c.some(j=>j===R)})}}function Np(..._){const c=tp(_);switch(c.length){case 0:return(0,tt.p)(m=>m.payload&&null!=m.payload.entityName);case 1:const a=c[0];return(0,tt.p)(m=>m.payload&&a===m.payload.entityName);default:return(0,tt.p)(m=>{const R=m.payload&&m.payload.entityName;return!!R&&c.some(j=>j===R)})}}var Fl=function(_){return _.Add="Add",_.Delete="Delete",_.Update="Update",_.Upsert="Upsert",_}(Fl||{});function zh(_){const c=(_=_&&_.changes?_:{changes:[]}).changes.filter(a=>null!=a&&a.entities&&a.entities.length>0);return{..._,changes:c}}new class kp{add(c,a){return a=Array.isArray(a)?a:a?[a]:[],{entityName:c,op:Fl.Add,entities:a}}delete(c,a){const m=Array.isArray(a)?a:a?[a]:[];return{entityName:c,op:Fl.Delete,entities:m}}update(c,a){return a=Array.isArray(a)?a:a?[a]:[],{entityName:c,op:Fl.Update,entities:a}}upsert(c,a){return a=Array.isArray(a)?a:a?[a]:[],{entityName:c,op:Fl.Upsert,entities:a}}};var Va=function(_){return _[_.IgnoreChanges=0]="IgnoreChanges",_[_.PreserveChanges=1]="PreserveChanges",_[_.OverwriteChanges=2]="OverwriteChanges",_}(Va||{}),Ao=function(_){return _.CLEAR_COLLECTIONS="@ngrx/data/entity-cache/clear-collections",_.LOAD_COLLECTIONS="@ngrx/data/entity-cache/load-collections",_.MERGE_QUERY_SET="@ngrx/data/entity-cache/merge-query-set",_.SET_ENTITY_CACHE="@ngrx/data/entity-cache/set-cache",_.SAVE_ENTITIES="@ngrx/data/entity-cache/save-entities",_.SAVE_ENTITIES_CANCEL="@ngrx/data/entity-cache/save-entities-cancel",_.SAVE_ENTITIES_CANCELED="@ngrx/data/entity-cache/save-entities-canceled",_.SAVE_ENTITIES_ERROR="@ngrx/data/entity-cache/save-entities-error",_.SAVE_ENTITIES_SUCCESS="@ngrx/data/entity-cache/save-entities-success",_}(Ao||{});class yv{constructor(c,a){this.type=Ao.CLEAR_COLLECTIONS,this.payload={collections:c,tag:a}}}class np{constructor(c,a){this.type=Ao.LOAD_COLLECTIONS,this.payload={collections:c,tag:a}}}class Lp{constructor(c,a,m){this.type=Ao.MERGE_QUERY_SET,this.payload={querySet:c,mergeStrategy:null===a?Va.PreserveChanges:a,tag:m}}}class Fp{constructor(c,a){this.cache=c,this.type=Ao.SET_ENTITY_CACHE,this.payload={cache:c,tag:a}}}class Vm{constructor(c,a,m){this.type=Ao.SAVE_ENTITIES,m=m||{},c&&(c.tag=c.tag||m.tag),this.payload={changeSet:c,url:a,...m,tag:c.tag}}}class Um{constructor(c,a,m,R){this.type=Ao.SAVE_ENTITIES_CANCEL,this.payload={correlationId:c,reason:a,entityNames:m,tag:R}}}class Eh{constructor(c,a,m){this.type=Ao.SAVE_ENTITIES_CANCELED,this.payload={correlationId:c,reason:a,tag:m}}}class Vp{constructor(c,a){this.type=Ao.SAVE_ENTITIES_ERROR,this.payload={error:c,originalAction:a,correlationId:a.payload.correlationId}}}class Ki{constructor(c,a,m){this.type=Ao.SAVE_ENTITIES_SUCCESS,m=m||{},c&&(c.tag=c.tag||m.tag),this.payload={changeSet:c,url:a,...m,tag:c.tag}}}var Wn=function(_){return _.CANCEL_PERSIST="@ngrx/data/cancel-persist",_.CANCELED_PERSIST="@ngrx/data/canceled-persist",_.QUERY_ALL="@ngrx/data/query-all",_.QUERY_ALL_SUCCESS="@ngrx/data/query-all/success",_.QUERY_ALL_ERROR="@ngrx/data/query-all/error",_.QUERY_LOAD="@ngrx/data/query-load",_.QUERY_LOAD_SUCCESS="@ngrx/data/query-load/success",_.QUERY_LOAD_ERROR="@ngrx/data/query-load/error",_.QUERY_MANY="@ngrx/data/query-many",_.QUERY_MANY_SUCCESS="@ngrx/data/query-many/success",_.QUERY_MANY_ERROR="@ngrx/data/query-many/error",_.QUERY_BY_KEY="@ngrx/data/query-by-key",_.QUERY_BY_KEY_SUCCESS="@ngrx/data/query-by-key/success",_.QUERY_BY_KEY_ERROR="@ngrx/data/query-by-key/error",_.SAVE_ADD_MANY="@ngrx/data/save/add-many",_.SAVE_ADD_MANY_ERROR="@ngrx/data/save/add-many/error",_.SAVE_ADD_MANY_SUCCESS="@ngrx/data/save/add-many/success",_.SAVE_ADD_ONE="@ngrx/data/save/add-one",_.SAVE_ADD_ONE_ERROR="@ngrx/data/save/add-one/error",_.SAVE_ADD_ONE_SUCCESS="@ngrx/data/save/add-one/success",_.SAVE_DELETE_MANY="@ngrx/data/save/delete-many",_.SAVE_DELETE_MANY_SUCCESS="@ngrx/data/save/delete-many/success",_.SAVE_DELETE_MANY_ERROR="@ngrx/data/save/delete-many/error",_.SAVE_DELETE_ONE="@ngrx/data/save/delete-one",_.SAVE_DELETE_ONE_SUCCESS="@ngrx/data/save/delete-one/success",_.SAVE_DELETE_ONE_ERROR="@ngrx/data/save/delete-one/error",_.SAVE_UPDATE_MANY="@ngrx/data/save/update-many",_.SAVE_UPDATE_MANY_SUCCESS="@ngrx/data/save/update-many/success",_.SAVE_UPDATE_MANY_ERROR="@ngrx/data/save/update-many/error",_.SAVE_UPDATE_ONE="@ngrx/data/save/update-one",_.SAVE_UPDATE_ONE_SUCCESS="@ngrx/data/save/update-one/success",_.SAVE_UPDATE_ONE_ERROR="@ngrx/data/save/update-one/error",_.SAVE_UPSERT_MANY="@ngrx/data/save/upsert-many",_.SAVE_UPSERT_MANY_SUCCESS="@ngrx/data/save/upsert-many/success",_.SAVE_UPSERT_MANY_ERROR="@ngrx/data/save/upsert-many/error",_.SAVE_UPSERT_ONE="@ngrx/data/save/upsert-one",_.SAVE_UPSERT_ONE_SUCCESS="@ngrx/data/save/upsert-one/success",_.SAVE_UPSERT_ONE_ERROR="@ngrx/data/save/upsert-one/error",_.ADD_ALL="@ngrx/data/add-all",_.ADD_MANY="@ngrx/data/add-many",_.ADD_ONE="@ngrx/data/add-one",_.REMOVE_ALL="@ngrx/data/remove-all",_.REMOVE_MANY="@ngrx/data/remove-many",_.REMOVE_ONE="@ngrx/data/remove-one",_.UPDATE_MANY="@ngrx/data/update-many",_.UPDATE_ONE="@ngrx/data/update-one",_.UPSERT_MANY="@ngrx/data/upsert-many",_.UPSERT_ONE="@ngrx/data/upsert-one",_.COMMIT_ALL="@ngrx/data/commit-all",_.COMMIT_MANY="@ngrx/data/commit-many",_.COMMIT_ONE="@ngrx/data/commit-one",_.UNDO_ALL="@ngrx/data/undo-all",_.UNDO_MANY="@ngrx/data/undo-many",_.UNDO_ONE="@ngrx/data/undo-one",_.SET_CHANGE_STATE="@ngrx/data/set-change-state",_.SET_COLLECTION="@ngrx/data/set-collection",_.SET_FILTER="@ngrx/data/set-filter",_.SET_LOADED="@ngrx/data/set-loaded",_.SET_LOADING="@ngrx/data/set-loading",_}(Wn||{});const Up="/success",Hh="/error";function zo(_){return _+Up}class io extends Error{constructor(c,a){super("string"==typeof c?c:function Nd(_){const{error:c,body:a,message:m}=_;let R=null;return c?R="string"==typeof c?c:c.message:m?R=m:a&&(R="string"==typeof a?a:a.error),"string"==typeof R?R:R?JSON.stringify(R):null}(c)??void 0),this.error=c,this.requestData=a,this.name=this.constructor.name}}class Ug{}class Bp{}const Bm=new K.nKC("@ngrx/data Plural Names");class Bg{}class $m{}let Wm=(()=>{class _{constructor(a){this.pluralizer=a,this.knownHttpResourceUrls={}}getResourceUrls(a,m,R=!1){let j=this.knownHttpResourceUrls[a];if(!j){const ie=R?m:function ay(_){return _.replace(/^[/\s]+|[/\s]+$/g,"")}(m);j={entityResourceUrl:`${ie}/${a}/`.toLowerCase(),collectionResourceUrl:`${ie}/${this.pluralizer.pluralize(a)}/`.toLowerCase()},this.registerHttpResourceUrls({[a]:j})}return j}entityResource(a,m,R){return this.getResourceUrls(a,m,R).entityResourceUrl}collectionResource(a,m){return this.getResourceUrls(a,m).collectionResourceUrl}registerHttpResourceUrls(a){this.knownHttpResourceUrls={...this.knownHttpResourceUrls,...a||{}}}static{this.\u0275fac=function(m){return new(m||_)(K.KVO(Bg))}}static{this.\u0275prov=K.jDH({token:_,factory:_.\u0275fac})}}return _})();class cy{get name(){return this._name}constructor(c,a,m,R){this.http=a,this.httpUrlGenerator=m,this.getDelay=0,this.saveDelay=0,this.timeout=0,this.trailingSlashEndpoints=!1,this._name=`${c} DefaultDataService`,this.entityName=c;const{root:j="api",delete404OK:ie=!0,getDelay:fe=0,saveDelay:ke=0,timeout:Re=0,trailingSlashEndpoints:Ot=!1}=R||{};this.delete404OK=ie,this.entityUrl=m.entityResource(c,j,Ot),this.entitiesUrl=m.collectionResource(c,j),this.getDelay=fe,this.saveDelay=ke,this.timeout=Re}add(c,a){const m=c||new Error(`No "${this.entityName}" entity to add`);return this.execute("POST",this.entityUrl,m,null,a)}delete(c,a){let m;return null==c&&(m=new Error(`No "${this.entityName}" key to delete`)),this.execute("DELETE",this.entityUrl+c,m,null,a).pipe((0,Ft.T)(R=>c))}getAll(c){return this.execute("GET",this.entitiesUrl,null,null,c)}getById(c,a){let m;return null==c&&(m=new Error(`No "${this.entityName}" key to get`)),this.execute("GET",this.entityUrl+c,m,null,a)}getWithQuery(c,a){const R=new Pe.Nl("string"==typeof c?{fromString:c}:{fromObject:c});return this.execute("GET",this.entitiesUrl,void 0,{params:R},a)}update(c,a){const m=c&&c.id,R=null==m?new Error(`No "${this.entityName}" update data or id`):c.changes;return this.execute("PUT",this.entityUrl+m,R,null,a)}upsert(c,a){const m=c||new Error(`No "${this.entityName}" entity to upsert`);return this.execute("POST",this.entityUrl,m,null,a)}execute(c,a,m,R,j){let ie,fe;j&&(ie={headers:j?.httpHeaders?new Pe.Lr(j?.httpHeaders):void 0,params:j?.httpParams?new Pe.Nl(j?.httpParams):void 0}),(R||ie)&&((0,K.naY)()&&R&&ie&&console.warn("@ngrx/data: options.httpParams will be merged with queryParams when both are are provided to getWithQuery(). In the event of a conflict HttpOptions.httpParams will override queryParams`. The queryParams parameter of getWithQuery() will be removed in next major release."),fe={...R,headers:ie?.headers??R?.headers,params:ie?.params??R?.params});const ke={method:c,url:a,data:m,options:fe};if(m instanceof Error)return this.handleError(ke)(m);let Re;switch(c){case"DELETE":Re=this.http.delete(a,fe),this.saveDelay&&(Re=Re.pipe(be(this.saveDelay)));break;case"GET":Re=this.http.get(a,fe),this.getDelay&&(Re=Re.pipe(be(this.getDelay)));break;case"POST":Re=this.http.post(a,m,fe),this.saveDelay&&(Re=Re.pipe(be(this.saveDelay)));break;case"PUT":Re=this.http.put(a,m,fe),this.saveDelay&&(Re=Re.pipe(be(this.saveDelay)));break;default:{const Ot=new Error("Unimplemented HTTP method, "+c);Re=(0,Ir.$)(Ot)}}return this.timeout&&(Re=Re.pipe((0,Xd.w)(this.timeout+this.saveDelay))),Re.pipe((0,fd.W)(this.handleError(ke)))}handleError(c){return a=>{const m=this.handleDelete404(a,c);if(m)return m;const R=new io(a,c);return(0,Ir.$)(R)}}handleDelete404(c,a){if(404===c.status&&"DELETE"===a.method&&this.delete404OK)return(0,ot.of)({})}}let Fs=(()=>{class _{constructor(a,m,R){this.http=a,this.httpUrlGenerator=m,this.config=R,m.registerHttpResourceUrls((R=R||{}).entityHttpResourceUrls)}create(a){return new cy(a,this.http,this.httpUrlGenerator,this.config)}static{this.\u0275fac=function(m){return new(m||_)(K.KVO(Pe.Qq),K.KVO($m),K.KVO(Ug,8))}}static{this.\u0275prov=K.jDH({token:_,factory:_.\u0275fac})}}return _})();const If=new K.nKC("@ngrx/data Entity Metadata");let Hs=(()=>{class _{constructor(a){this.definitions={},a&&a.forEach(m=>this.registerMetadataMap(m))}getDefinition(a,m=!0){a=a.trim();const R=this.definitions[a];if(!R&&m)throw new Error(`No EntityDefinition for entity type "${a}".`);return R}registerMetadata(a){if(a){const m=function bh(_){let c=_.entityName;if(!c)throw new Error("Missing required entityName");_.entityName=c=c.trim();const a=_.selectId||Wh,m=_.sortComparer=_.sortComparer||!1,R=function Cm(_={}){const{selectId:c,sortComparer:a}={selectId:_.selectId??(ie=>ie.id),sortComparer:_.sortComparer??!1},m=function Ap(){return{getInitialState:function _(c={}){return Object.assign({ids:[],entities:{}},c)}}}(),R=function Hf(){return{getSelectors:function _(c){const a=ie=>ie.ids,m=ie=>ie.entities,R=(0,xr.Mz)(a,m,(ie,fe)=>ie.map(ke=>fe[ke])),j=(0,xr.Mz)(a,ie=>ie.length);return c?{selectIds:(0,xr.Mz)(c,a),selectEntities:(0,xr.Mz)(c,m),selectAll:(0,xr.Mz)(c,R),selectTotal:(0,xr.Mz)(c,j)}:{selectIds:a,selectEntities:m,selectAll:R,selectTotal:j}}}}();return{selectId:c,sortComparer:a,...m,...R,...a?ty(c,a):Kf(c)}}({selectId:a,sortComparer:m}),j=_.entityDispatcherOptions||{},ie=R.getInitialState({entityName:c,filter:"",loaded:!1,loading:!1,changeState:{},..._.additionalCollectionState||{}});return{entityName:c,entityAdapter:R,entityDispatcherOptions:j,initialState:ie,metadata:_,noChangeTracking:!0===_.noChangeTracking,selectId:a,sortComparer:m}}(a);this.registerDefinition(m)}}registerMetadataMap(a={}){Object.keys(a||{}).forEach(m=>this.registerMetadata({entityName:m,...a[m]}))}registerDefinition(a){this.definitions[a.entityName]=a}registerDefinitions(a){Object.assign(this.definitions,a)}static{this.\u0275fac=function(m){return new(m||_)(K.KVO(If,8))}}static{this.\u0275prov=K.jDH({token:_,factory:_.\u0275fac})}}return _})();const jp=Fl.Update;let zm=(()=>{class _{constructor(a,m,R){this.entityDefinitionService=a,this.http=m,this.idSelectors={},this.saveDelay=0,this.timeout=0;const{saveDelay:j=0,timeout:ie=0}=R||{};this.saveDelay=j,this.timeout=ie}saveEntities(a,m){a=this.filterChangeSet(a),a=this.flattenUpdates(a);let R=this.http.post(m,a).pipe((0,Ft.T)(j=>this.restoreUpdates(j)),(0,fd.W)(this.handleError({method:"POST",url:m,data:a})));return this.timeout&&(R=R.pipe((0,Xd.w)(this.timeout))),this.saveDelay&&(R=R.pipe(be(this.saveDelay))),R}handleError(a){return m=>{const R=new io(m,a);return(0,Ir.$)(R)}}filterChangeSet(a){return zh(a)}flattenUpdates(a){let m=a.changes;if(0===m.length)return a;let R=!1;return m=m.map(j=>j.op===jp&&j.entities.length>0?(R=!0,{...j,entities:j.entities.map(ie=>ie.changes)}):j),R?{...a,changes:m}:a}restoreUpdates(a){if(null==a)return a;let m=a.changes;if(0===m.length)return a;let R=!1;return m=m.map(j=>{if(j.op===jp){R=!0;const ie=this.getIdSelector(j.entityName);return{...j,entities:j.entities.map(fe=>({id:ie(fe),changes:fe}))}}return j}),R?{...a,changes:m}:a}getIdSelector(a){let m=this.idSelectors[a];return m||(m=this.entityDefinitionService.getDefinition(a).selectId,this.idSelectors[a]=m),m}static{this.\u0275fac=function(m){return new(m||_)(K.KVO(Hs),K.KVO(Pe.Qq),K.KVO(Ug,8))}}static{this.\u0275prov=K.jDH({token:_,factory:_.\u0275fac})}}return _})(),ly=(()=>{class _{constructor(a){this.defaultDataServiceFactory=a,this.services={}}getService(a){a=a.trim();let m=this.services[a];return m||(m=this.defaultDataServiceFactory.create(a),this.services[a]=m),m}registerService(a,m){this.services[a.trim()]=m}registerServices(a){this.services={...this.services,...a}}static{this.\u0275fac=function(m){return new(m||_)(K.KVO(Fs))}}static{this.\u0275prov=K.jDH({token:_,factory:_.\u0275fac})}}return _})();class Hm{}let uy=(()=>{class _{constructor(a,m){this.logger=a,this.entityActionFactory=m}handleSuccess(a){const m=zo(a.payload.entityOp);return R=>this.entityActionFactory.createFromAction(a,{entityOp:m,data:R})}handleError(a){const m=function xd(_){return _+Hh}(a.payload.entityOp);return R=>{const ie={error:R instanceof io?R:new io(R,null),originalAction:a};return this.logger.error(ie),this.entityActionFactory.createFromAction(a,{entityOp:m,data:ie})}}static{this.\u0275fac=function(m){return new(m||_)(K.KVO(Bp),K.KVO($h))}}static{this.\u0275prov=K.jDH({token:_,factory:_.\u0275fac})}}return _})();class $p{constructor(c){this.message=c,this.message=c||"Canceled by user"}}let rp=(()=>{class _{constructor(){this.seed=0,this.prefix="CRID"}next(){return this.seed+=1,this.prefix+this.seed}static{this.\u0275fac=function(m){return new(m||_)}}static{this.\u0275prov=K.jDH({token:_,factory:_.\u0275fac})}}return _})(),jg=(()=>{class _{constructor(){this.optimisticAdd=!1,this.optimisticDelete=!0,this.optimisticUpdate=!1,this.optimisticUpsert=!1,this.optimisticSaveEntities=!1}static{this.\u0275fac=function(m){return new(m||_)}}static{this.\u0275prov=K.jDH({token:_,factory:_.\u0275fac})}}return _})(),vv=(()=>{class _{constructor(a,m,R,j){this.correlationIdGenerator=a,this.defaultDispatcherOptions=m,this.store=j,this.reducedActions$=R.pipe((0,nc.t)(1)),this.raSubscription=this.reducedActions$.subscribe()}dispatch(a){return this.store.dispatch(a),a}cancelSaveEntities(a,m,R,j){if(!a)throw new Error("Missing correlationId");const ie=new Um(a,m,R,j);this.dispatch(ie)}clearCollections(a,m){this.dispatch(new yv(a,m))}loadCollections(a,m){this.dispatch(new np(a,m))}mergeQuerySet(a,m,R){this.dispatch(new Lp(a,m,R))}setEntityCache(a,m){this.dispatch(new Fp(a,m))}saveEntities(a,m,R){const j=Array.isArray(a)?{changes:a}:a,ie=null==(R=R||{}).correlationId?this.correlationIdGenerator.next():R.correlationId,fe=null==R.isOptimistic?this.defaultDispatcherOptions.optimisticSaveEntities||!1:!0===R.isOptimistic,ke=R.tag||"Save Entities";R={...R,correlationId:ie,isOptimistic:fe,tag:ke};const Re=new Vm(j,m,R);return this.dispatch(Re),this.getSaveEntitiesResponseData$(R.correlationId).pipe((0,nc.t)(1))}getSaveEntitiesResponseData$(a){return this.reducedActions$.pipe((0,tt.p)(m=>m.type===Ao.SAVE_ENTITIES_SUCCESS||m.type===Ao.SAVE_ENTITIES_ERROR||m.type===Ao.SAVE_ENTITIES_CANCEL),(0,tt.p)(m=>a===m.payload.correlationId),(0,yl.s)(1),(0,Qe.Z)(m=>m.type===Ao.SAVE_ENTITIES_CANCEL?(0,Ir.$)(new $p(m.payload.reason)):m.type===Ao.SAVE_ENTITIES_SUCCESS?(0,ot.of)(m.payload.changeSet):(0,Ir.$)(m.payload)))}static{this.\u0275fac=function(m){return new(m||_)(K.KVO(rp),K.KVO(jg),K.KVO(xr.sA),K.KVO(xr.il))}}static{this.\u0275prov=K.jDH({token:_,factory:_.\u0275fac})}}return _})();class dy{constructor(c,a,m,R=Wh,j,ie,fe,ke){this.entityName=c,this.entityActionFactory=a,this.store=m,this.selectId=R,this.defaultDispatcherOptions=j,this.reducedActions$=ie,this.correlationIdGenerator=ke,this.guard=new Lm(c,R),this.toUpdate=bf(R);const Re=(0,xr.Mz)(fe,Ot=>Ot[c]);this.entityCollection$=m.select(Re)}createEntityAction(c,a,m){return this.entityActionFactory.create({entityName:this.entityName,entityOp:c,data:a,...m})}createAndDispatch(c,a,m){const R=this.createEntityAction(c,a,m);return this.dispatch(R),R}dispatch(c){return this.store.dispatch(c),c}add(c,a){a=this.setSaveEntityActionOptions(a,this.defaultDispatcherOptions.optimisticAdd);const m=this.createEntityAction(Wn.SAVE_ADD_ONE,c,a);return a.isOptimistic&&this.guard.mustBeEntity(m),this.dispatch(m),this.getResponseData$(a.correlationId).pipe((0,vl.E)(this.entityCollection$),(0,Ft.T)(([R,j])=>j.entities[this.selectId(R)]),(0,nc.t)(1))}cancel(c,a,m){if(!c)throw new Error("Missing correlationId");this.createAndDispatch(Wn.CANCEL_PERSIST,a,{correlationId:c})}delete(c,a){a=this.setSaveEntityActionOptions(a,this.defaultDispatcherOptions.optimisticDelete);const m=this.getKey(c),R=this.createEntityAction(Wn.SAVE_DELETE_ONE,m,a);return this.guard.mustBeKey(R),this.dispatch(R),this.getResponseData$(a.correlationId).pipe((0,Ft.T)(()=>m),(0,nc.t)(1))}getAll(c){c=this.setQueryEntityActionOptions(c);const a=this.createEntityAction(Wn.QUERY_ALL,null,c);return this.dispatch(a),this.getResponseData$(c.correlationId).pipe((0,vl.E)(this.entityCollection$),(0,Ft.T)(([m,R])=>m.reduce((j,ie)=>{const fe=R.entities[this.selectId(ie)];return fe&&j.push(fe),j},[])),(0,nc.t)(1))}getByKey(c,a){a=this.setQueryEntityActionOptions(a);const m=this.createEntityAction(Wn.QUERY_BY_KEY,c,a);return this.dispatch(m),this.getResponseData$(a.correlationId).pipe((0,vl.E)(this.entityCollection$),(0,Ft.T)(([R,j])=>j.entities[this.selectId(R)]),(0,nc.t)(1))}getWithQuery(c,a){a=this.setQueryEntityActionOptions(a);const m=this.createEntityAction(Wn.QUERY_MANY,c,a);return this.dispatch(m),this.getResponseData$(a.correlationId).pipe((0,vl.E)(this.entityCollection$),(0,Ft.T)(([R,j])=>R.reduce((ie,fe)=>{const ke=j.entities[this.selectId(fe)];return ke&&ie.push(ke),ie},[])),(0,nc.t)(1))}load(c){c=this.setQueryEntityActionOptions(c);const a=this.createEntityAction(Wn.QUERY_LOAD,null,c);return this.dispatch(a),this.getResponseData$(c.correlationId).pipe((0,nc.t)(1))}loadWithQuery(c,a){a=this.setQueryEntityActionOptions(a);const m=this.createEntityAction(Wn.QUERY_MANY,c,a);return this.dispatch(m),this.getResponseData$(a.correlationId).pipe((0,nc.t)(1))}update(c,a){const m=this.toUpdate(c);a=this.setSaveEntityActionOptions(a,this.defaultDispatcherOptions.optimisticUpdate);const R=this.createEntityAction(Wn.SAVE_UPDATE_ONE,m,a);return a.isOptimistic&&this.guard.mustBeUpdate(R),this.dispatch(R),this.getResponseData$(a.correlationId).pipe((0,Ft.T)(j=>j.changes),(0,vl.E)(this.entityCollection$),(0,Ft.T)(([j,ie])=>ie.entities[this.selectId(j)]),(0,nc.t)(1))}upsert(c,a){a=this.setSaveEntityActionOptions(a,this.defaultDispatcherOptions.optimisticUpsert);const m=this.createEntityAction(Wn.SAVE_UPSERT_ONE,c,a);return a.isOptimistic&&this.guard.mustBeEntity(m),this.dispatch(m),this.getResponseData$(a.correlationId).pipe((0,vl.E)(this.entityCollection$),(0,Ft.T)(([R,j])=>j.entities[this.selectId(R)]),(0,nc.t)(1))}addAllToCache(c,a){this.createAndDispatch(Wn.ADD_ALL,c,a)}addOneToCache(c,a){this.createAndDispatch(Wn.ADD_ONE,c,a)}addManyToCache(c,a){this.createAndDispatch(Wn.ADD_MANY,c,a)}clearCache(c){this.createAndDispatch(Wn.REMOVE_ALL,void 0,c)}removeOneFromCache(c,a){this.createAndDispatch(Wn.REMOVE_ONE,this.getKey(c),a)}removeManyFromCache(c,a){if(!c||0===c.length)return;const m="object"==typeof c[0]?c.map(R=>this.getKey(R)):c;this.createAndDispatch(Wn.REMOVE_MANY,m,a)}updateOneInCache(c,a){const m=this.toUpdate(c);this.createAndDispatch(Wn.UPDATE_ONE,m,a)}updateManyInCache(c,a){if(!c||0===c.length)return;const m=c.map(R=>this.toUpdate(R));this.createAndDispatch(Wn.UPDATE_MANY,m,a)}upsertOneInCache(c,a){this.createAndDispatch(Wn.UPSERT_ONE,c,a)}upsertManyInCache(c,a){!c||0===c.length||this.createAndDispatch(Wn.UPSERT_MANY,c,a)}setFilter(c){this.createAndDispatch(Wn.SET_FILTER,c)}setLoaded(c){this.createAndDispatch(Wn.SET_LOADED,!!c)}setLoading(c){this.createAndDispatch(Wn.SET_LOADING,!!c)}getKey(c){return"object"==typeof c?this.selectId(c):c}getResponseData$(c){return this.reducedActions$.pipe((0,tt.p)(a=>!!a.payload),(0,tt.p)(a=>{const{correlationId:m,entityName:R,entityOp:j}=a.payload;return R===this.entityName&&m===c&&(j.endsWith(Up)||j.endsWith(Hh)||j===Wn.CANCEL_PERSIST)}),(0,yl.s)(1),(0,Qe.Z)(a=>{const{entityOp:m}=a.payload;return m===Wn.CANCEL_PERSIST?(0,Ir.$)(new $p(a.payload.data)):m.endsWith(Up)?(0,ot.of)(a.payload.data):(0,Ir.$)(a.payload.data.error)}))}setQueryEntityActionOptions(c){const a=null==(c=c||{}).correlationId?this.correlationIdGenerator.next():c.correlationId;return{...c,correlationId:a}}setSaveEntityActionOptions(c,a){const m=null==(c=c||{}).correlationId?this.correlationIdGenerator.next():c.correlationId,R=null==c.isOptimistic?a||!1:!0===c.isOptimistic;return{...c,correlationId:m,isOptimistic:R}}}const Wp="entityCache",Km=new K.nKC("@ngrx/data Entity Cache Name"),Tf=new K.nKC("@ngrx/data Entity Cache Meta Reducers"),$g=new K.nKC("@ngrx/data Entity Collection Meta Reducers"),Ih=new K.nKC("@ngrx/data Initial Entity Cache State"),Qu=new K.nKC("@ngrx/data Entity Cache Selector"),hy={provide:Qu,useFactory:Th,deps:[[new K.Xx1,Km]]};function Th(_){return(0,xr.UX)(_=_||Wp)}let Af=(()=>{class _{constructor(a,m,R,j,ie,fe){this.entityActionFactory=a,this.store=m,this.entityDispatcherDefaultOptions=R,this.entityCacheSelector=ie,this.correlationIdGenerator=fe,this.reducedActions$=j.pipe((0,nc.t)(1)),this.raSubscription=this.reducedActions$.subscribe()}create(a,m=Wh,R={}){const j={...this.entityDispatcherDefaultOptions,...R};return new dy(a,this.entityActionFactory,this.store,m,j,this.reducedActions$,this.entityCacheSelector,this.correlationIdGenerator)}ngOnDestroy(){this.raSubscription.unsubscribe()}static{this.\u0275fac=function(m){return new(m||_)(K.KVO($h),K.KVO(xr.il),K.KVO(jg),K.KVO(xr.sA),K.KVO(Qu),K.KVO(rp))}}static{this.\u0275prov=K.jDH({token:_,factory:_.\u0275fac})}}return _})();const wf=new K.nKC("@ngrx/data Entity Effects Scheduler");let ip=(()=>{class _{constructor(a,m,R,j,ie){this.actions=a,this.dataService=m,this.entityActionFactory=R,this.logger=j,this.scheduler=ie,this.responseDelay=10,this.saveEntitiesCancel$=ru(()=>this.actions.pipe(Om(Ao.SAVE_ENTITIES_CANCEL),(0,tt.p)(fe=>null!=fe.payload.correlationId)),{dispatch:!1}),this.saveEntities$=ru(()=>this.actions.pipe(Om(Ao.SAVE_ENTITIES),(0,Qe.Z)(fe=>this.saveEntities(fe))))}saveEntities(a){const m=a.payload.error;if(m)return this.handleSaveEntitiesError$(a)(m);try{const R=zh(a.payload.changeSet),{correlationId:j,mergeStrategy:ie,tag:fe,url:ke}=a.payload;if(0===R.changes.length)return(0,ot.of)(new Ki(R,ke,{correlationId:j,mergeStrategy:ie,tag:fe}));return mf(this.saveEntitiesCancel$.pipe((0,tt.p)(wn=>j===wn.payload.correlationId),(0,Ft.T)(wn=>new Eh(j,wn.payload.reason,wn.payload.tag))),this.dataService.saveEntities(R,ke).pipe((0,Lh.H)(wn=>this.handleSaveEntitiesSuccess$(a,this.entityActionFactory)(wn)),(0,fd.W)(this.handleSaveEntitiesError$(a))))}catch(R){return this.handleSaveEntitiesError$(a)(R)}}handleSaveEntitiesError$(a){return m=>{const R=m instanceof io?m:new io(m,null);return(0,ot.of)(new Vp(R,a)).pipe(be(this.responseDelay,this.scheduler||D.E))}}handleSaveEntitiesSuccess$(a,m){const{url:R,correlationId:j,mergeStrategy:ie,tag:fe}=a.payload,ke={correlationId:j,mergeStrategy:ie,tag:fe};return Re=>{if(Re)return(0,ot.of)(new Ki(Re,R,ke));if(Re=a.payload.changeSet,!a.payload.isOptimistic)return(0,ot.of)(new Ki(Re,R,ke));const Ot=Re.changes.reduce((Lt,wn)=>-1===Lt.indexOf(wn.entityName)?Lt.concat(wn.entityName):Lt,[]);return(0,ho.h)(Ot.map(Lt=>m.create(Lt,Wn.SET_LOADING,!1)))}}static{this.\u0275fac=function(m){return new(m||_)(K.KVO(Zd),K.KVO(zm),K.KVO($h),K.KVO(Bp),K.KVO(wf,8))}}static{this.\u0275prov=K.jDH({token:_,factory:_.\u0275fac})}}return _})();const Wg=[Wn.QUERY_ALL,Wn.QUERY_LOAD,Wn.QUERY_BY_KEY,Wn.QUERY_MANY,Wn.SAVE_ADD_ONE,Wn.SAVE_DELETE_ONE,Wn.SAVE_UPDATE_ONE,Wn.SAVE_UPSERT_ONE];let sp=(()=>{class _{constructor(a,m,R,j,ie){this.actions=a,this.dataService=m,this.entityActionFactory=R,this.resultHandler=j,this.scheduler=ie,this.responseDelay=10,this.cancel$=ru(()=>this.actions.pipe(Fm(Wn.CANCEL_PERSIST),(0,Ft.T)(fe=>fe.payload.correlationId),(0,tt.p)(fe=>null!=fe)),{dispatch:!1}),this.persist$=ru(()=>this.actions.pipe(Fm(Wg),(0,Qe.Z)(fe=>this.persist(fe))))}persist(a){if(a.payload.skip)return this.handleSkipSuccess$(a);if(a.payload.error)return this.handleError$(a)(a.payload.error);try{return mf(this.cancel$.pipe((0,tt.p)(j=>a.payload.correlationId===j),(0,Ft.T)(j=>this.entityActionFactory.createFromAction(a,{entityOp:Wn.CANCELED_PERSIST}))),this.callDataService(a).pipe((0,Ft.T)(this.resultHandler.handleSuccess(a)),(0,fd.W)(this.handleError$(a))))}catch(m){return this.handleError$(a)(m)}}callDataService(a){const{entityName:m,entityOp:R,data:j,httpOptions:ie}=a.payload,fe=this.dataService.getService(m);switch(R){case Wn.QUERY_ALL:case Wn.QUERY_LOAD:return fe.getAll(ie);case Wn.QUERY_BY_KEY:return fe.getById(j,ie);case Wn.QUERY_MANY:return fe.getWithQuery(j,ie);case Wn.SAVE_ADD_ONE:return fe.add(j,ie);case Wn.SAVE_DELETE_ONE:return fe.delete(j,ie);case Wn.SAVE_UPDATE_ONE:const{id:ke,changes:Re}=j;return fe.update(j,ie).pipe((0,Ft.T)(Ot=>Ot&&Object.keys(Ot).length>0?{id:ke,changes:{...Re,...Ot},changed:!0}:{id:ke,changes:Re,changed:!1}));case Wn.SAVE_UPSERT_ONE:return fe.upsert(j,ie).pipe((0,Ft.T)(Ot=>Ot&&Object.keys(Ot).length>0?Ot:j));default:throw new Error(`Persistence action "${R}" is not implemented.`)}}handleError$(a){return m=>(0,ot.of)(this.resultHandler.handleError(a)(m)).pipe(be(this.responseDelay,this.scheduler||D.E))}handleSkipSuccess$(a){const m=zo(a.payload.entityOp),R=this.entityActionFactory.createFromAction(a,{entityOp:m});return(0,ot.of)(R).pipe(be(this.responseDelay,this.scheduler||D.E))}static{this.\u0275fac=function(m){return new(m||_)(K.KVO(Zd),K.KVO(ly),K.KVO($h),K.KVO(Hm),K.KVO(wf,8))}}static{this.\u0275prov=K.jDH({token:_,factory:_.\u0275fac})}}return _})();class kd{constructor(c,a){this.entityName=c,c=c.trim();const{dispatcher:m,selectors:R,selectors$:j}=a.create(c);this.entityName=c,this.dispatcher=m,this.guard=m.guard,this.selectId=m.selectId,this.toUpdate=m.toUpdate,this.selectors=R,this.selectors$=j,this.collection$=j.collection$,this.count$=j.count$,this.entities$=j.entities$,this.entityActions$=j.entityActions$,this.entityMap$=j.entityMap$,this.errors$=j.errors$,this.filter$=j.filter$,this.filteredEntities$=j.filteredEntities$,this.keys$=j.keys$,this.loaded$=j.loaded$,this.loading$=j.loading$,this.changeState$=j.changeState$}createEntityAction(c,a,m){return this.dispatcher.createEntityAction(c,a,m)}createAndDispatch(c,a,m){return this.dispatcher.createAndDispatch(c,a,m)}dispatch(c){return this.dispatcher.dispatch(c)}get store(){return this.dispatcher.store}add(c,a){return this.dispatcher.add(c,a)}cancel(c,a,m){this.dispatcher.cancel(c,a,m)}delete(c,a){return this.dispatcher.delete(c,a)}getAll(c){return this.dispatcher.getAll(c)}getByKey(c,a){return this.dispatcher.getByKey(c,a)}getWithQuery(c,a){return this.dispatcher.getWithQuery(c,a)}load(c){return this.dispatcher.load(c)}loadWithQuery(c,a){return this.dispatcher.loadWithQuery(c,a)}update(c,a){return this.dispatcher.update(c,a)}upsert(c,a){return this.dispatcher.upsert(c,a)}addAllToCache(c,a){this.dispatcher.addAllToCache(c,a)}addOneToCache(c,a){this.dispatcher.addOneToCache(c,a)}addManyToCache(c,a){this.dispatcher.addManyToCache(c,a)}clearCache(){this.dispatcher.clearCache()}removeOneFromCache(c,a){this.dispatcher.removeOneFromCache(c,a)}removeManyFromCache(c,a){this.dispatcher.removeManyFromCache(c,a)}updateOneInCache(c,a){this.dispatcher.updateOneInCache(c,a)}updateManyInCache(c,a){this.dispatcher.updateManyInCache(c,a)}upsertOneInCache(c,a){this.dispatcher.upsertOneInCache(c,a)}upsertManyInCache(c,a){this.dispatcher.upsertManyInCache(c,a)}setFilter(c){this.dispatcher.setFilter(c)}setLoaded(c){this.dispatcher.setLoaded(!!c)}setLoading(c){this.dispatcher.setLoading(!!c)}}let zp=(()=>{class _{constructor(a){this.entityDefinitionService=a}create(a){const m=this.entityDefinitionService&&this.entityDefinitionService.getDefinition(a,!1);return m&&m.initialState||function Kh(_){return{entityName:_,ids:[],entities:{},filter:void 0,loaded:!1,loading:!1,changeState:{}}}(a)}static{this.\u0275fac=function(m){return new(m||_)(K.KVO(Hs,8))}}static{this.\u0275prov=K.jDH({token:_,factory:_.\u0275fac})}}return _})(),Gh=(()=>{class _{constructor(a,m){this.entityCollectionCreator=a||new zp,this.selectEntityCache=m||Th(Wp)}createCollectionSelector(a){return(0,xr.Mz)(this.selectEntityCache,(R={})=>R[a]||this.entityCollectionCreator.create(a))}createCollectionSelectors(a){const m="string"==typeof a?{entityName:a}:a,R=zn=>zn.ids,j=zn=>zn.entities,ie=(0,xr.Mz)(R,j,(zn,Vn)=>zn.map(Hn=>Vn[Hn])),fe=(0,xr.Mz)(R,zn=>zn.length),ke=zn=>zn.filter,Re=m.filterFn,Ot=Re?(0,xr.Mz)(ie,ke,(zn,Vn)=>Re(zn,Vn)):ie,rr={};return Object.keys(m.additionalCollectionState||{}).forEach(zn=>{rr["select"+zn[0].toUpperCase()+zn.slice(1)]=Vn=>Vn[zn]}),{selectCount:fe,selectEntities:ie,selectEntityMap:j,selectFilter:ke,selectFilteredEntities:Ot,selectKeys:R,selectLoaded:zn=>zn.loaded,selectLoading:zn=>zn.loading,selectChangeState:zn=>zn.changeState,...rr}}create(a){const m="string"==typeof a?{entityName:a}:a,R=m.entityName,j=this.createCollectionSelector(R),ie=this.createCollectionSelectors(m),fe={};return Object.keys(ie).forEach(ke=>{fe[ke]=(0,xr.Mz)(j,ie[ke])}),{entityName:R,selectCollection:j,selectEntityCache:this.selectEntityCache,...fe}}static{this.\u0275fac=function(m){return new(m||_)(K.KVO(zp,8),K.KVO(Qu,8))}}static{this.\u0275prov=K.jDH({token:_,factory:_.\u0275fac})}}return _})(),Ah=(()=>{class _{constructor(a,m,R){this.store=a,this.actions=m,this.selectEntityCache=R,this.entityCache$=this.store.select(this.selectEntityCache),this.entityActionErrors$=m.pipe((0,tt.p)(j=>j.payload&&j.payload.entityOp&&j.payload.entityOp.endsWith(Hh)),(0,nc.t)(1))}create(a,m){const R={entityName:a};return Object.keys(m).forEach(j=>{if(j.startsWith("select")){const ie=j[6].toLowerCase()+j.substring(7)+"$";R[ie]=this.store.select(m[j])}}),R.entityActions$=this.actions.pipe(Np(a)),R.errors$=this.entityActionErrors$.pipe(Np(a)),R}static{this.\u0275fac=function(m){return new(m||_)(K.KVO(xr.il),K.KVO(Zd),K.KVO(Qu))}}static{this.\u0275prov=K.jDH({token:_,factory:_.\u0275fac})}}return _})(),Gm=(()=>{class _{constructor(a,m,R,j){this.entityDispatcherFactory=a,this.entityDefinitionService=m,this.entitySelectorsFactory=R,this.entitySelectors$Factory=j}create(a){a=a.trim();const m=this.entityDefinitionService.getDefinition(a),R=this.entityDispatcherFactory.create(a,m.selectId,m.entityDispatcherOptions),j=this.entitySelectorsFactory.create(m.metadata);return{dispatcher:R,entityName:a,selectors:j,selectors$:this.entitySelectors$Factory.create(a,j)}}static{this.\u0275fac=function(m){return new(m||_)(K.KVO(Af),K.KVO(Hs),K.KVO(Gh),K.KVO(Ah))}}static{this.\u0275prov=K.jDH({token:_,factory:_.\u0275fac})}}return _})(),Hp=(()=>{class _{constructor(a){this.entityCollectionServiceElementsFactory=a}create(a){return new kd(a,this.entityCollectionServiceElementsFactory)}static{this.\u0275fac=function(m){return new(m||_)(K.KVO(Gm))}}static{this.\u0275prov=K.jDH({token:_,factory:_.\u0275fac})}}return _})(),Kp=(()=>{class _{constructor(a,m,R,j){this.entityCollectionServiceFactory=a,this.store=j,this.entityActionErrors$=R.entityActionErrors$,this.entityCache$=R.entityCache$,this.reducedActions$=m.reducedActions$}static{this.\u0275fac=function(m){return new(m||_)(K.KVO(Hp),K.KVO(Af),K.KVO(Ah),K.KVO(xr.il))}}static{this.\u0275prov=K.jDH({token:_,factory:_.\u0275fac})}}return _})(),qm=(()=>{class _{constructor(a){this.entityServicesElements=a,this.EntityCollectionServices={}}get entityActionErrors$(){return this.entityServicesElements.entityActionErrors$}get entityCache$(){return this.entityServicesElements.entityCache$}get entityCollectionServiceFactory(){return this.entityServicesElements.entityCollectionServiceFactory}get reducedActions$(){return this.entityServicesElements.reducedActions$}get store(){return this.entityServicesElements.store}dispatch(a){this.store.dispatch(a)}createEntityCollectionService(a){return this.entityCollectionServiceFactory.create(a)}getEntityCollectionService(a){let m=this.EntityCollectionServices[a];return m||(m=this.createEntityCollectionService(a),this.EntityCollectionServices[a]=m),m}registerEntityCollectionService(a,m){this.EntityCollectionServices[m||a.entityName]=a}registerEntityCollectionServices(a){Array.isArray(a)?a.forEach(m=>this.registerEntityCollectionService(m)):Object.keys(a||{}).forEach(m=>{this.registerEntityCollectionService(a[m],m)})}static{this.\u0275fac=function(m){return new(m||_)(K.KVO(Kp))}}static{this.\u0275prov=K.jDH({token:_,factory:_.\u0275fac})}}return _})();var Tc=function(_){return _[_.Unchanged=0]="Unchanged",_[_.Added=1]="Added",_[_.Deleted=2]="Deleted",_[_.Updated=3]="Updated",_}(Tc||{});class zg{constructor(c,a){this.adapter=c,this.selectId=a,this.selectId=a||Wh}commitAll(c){return 0===Object.keys(c.changeState).length?c:{...c,changeState:{}}}commitMany(c,a){if(null==c||0===c.length)return a;let m=!1;const R=c.reduce((j,ie)=>{const fe="object"==typeof ie?this.selectId(ie):ie;return j[fe]&&(m||(j={...j},m=!0),delete j[fe]),j},a.changeState);return m?{...a,changeState:R}:a}commitOne(c,a){return null==c?a:this.commitMany([c],a)}mergeQueryResults(c,a,m){return this.mergeServerUpserts(c,a,Va.PreserveChanges,m)}mergeSaveAdds(c,a,m){return this.mergeServerUpserts(c,a,Va.OverwriteChanges,m)}mergeSaveDeletes(c,a,m){const R=c;return a=(m=m??Va.OverwriteChanges)===Va.IgnoreChanges?a:this.commitMany(R,a),this.adapter.removeMany(R,a)}mergeSaveUpdates(c,a,m,R=!1){if(null==c||0===c.length)return a;let fe,j=!1,ie=a.changeState;switch(m=m??Va.OverwriteChanges){case Va.IgnoreChanges:return fe=ke(c),this.adapter.updateMany(fe,a);case Va.OverwriteChanges:return ie=c.reduce((Re,Ot)=>{const Lt=Ot.id;return Re[Lt]&&(j||(Re={...Re},j=!0),delete Re[Lt]),Re},a.changeState),a=j?{...a,changeState:ie}:a,fe=ke(c),this.adapter.updateMany(fe,a);case Va.PreserveChanges:{const Re=[];return ie=c.reduce((Ot,Lt)=>{const wn=Lt.id,kn=Ot[wn];if(kn){j||(Ot={...Ot},j=!0);const Pn=this.selectId(Lt.changes),rr=kn;Pn!==wn&&delete Ot[wn];const zn={...rr.originalValue,...Lt.changes};Ot[Pn]={...rr,originalValue:zn}}else Re.push(Lt);return Ot},a.changeState),a=j?{...a,changeState:ie}:a,fe=ke(Re),this.adapter.updateMany(fe,a)}}function ke(Re){return!0===R&&(Re=Re.filter(Ot=>!0===Ot.changed)),Re.map(Ot=>({id:Ot.id,changes:Ot.changes}))}}mergeSaveUpserts(c,a,m){return this.mergeServerUpserts(c,a,Va.OverwriteChanges,m)}mergeServerUpserts(c,a,m,R){if(null==c||0===c.length)return a;let j=!1,ie=a.changeState;switch(R=R??m){case Va.IgnoreChanges:return this.adapter.upsertMany(c,a);case Va.OverwriteChanges:return a=this.adapter.upsertMany(c,a),ie=c.reduce((fe,ke)=>{const Re=this.selectId(ke);return fe[Re]&&(j||(fe={...fe},j=!0),delete fe[Re]),fe},a.changeState),j?{...a,changeState:ie}:a;case Va.PreserveChanges:{const fe=[];return ie=c.reduce((ke,Re)=>{const Ot=this.selectId(Re);return ke[Ot]?j||(ke={...ke,[Ot]:{...ke[Ot],originalValue:Re}},j=!0):fe.push(Re),ke},a.changeState),a=this.adapter.upsertMany(fe,a),j?{...a,changeState:ie}:a}}}trackAddMany(c,a,m){if(m===Va.IgnoreChanges||null==c||0===c.length)return a;let R=!1;const j=c.reduce((ie,fe)=>{const ke=this.selectId(fe);if(null==ke||""===ke)throw new Error(`${a.entityName} entity add requires a key to be tracked`);return ie[ke]||(R||(R=!0,ie={...ie}),ie[ke]={changeType:Tc.Added}),ie},a.changeState);return R?{...a,changeState:j}:a}trackAddOne(c,a,m){return null==c?a:this.trackAddMany([c],a,m)}trackDeleteMany(c,a,m){if(m===Va.IgnoreChanges||null==c||0===c.length)return a;let R=!1;const j=a.entities,ie=c.reduce((fe,ke)=>{const Re=j[ke];if(Re){const Lt=fe[ke];Lt?Lt.changeType===Tc.Added?(Ot(),delete fe[ke]):Lt.changeType===Tc.Updated&&(Ot(),fe[ke]={...fe[ke],changeType:Tc.Deleted}):(Ot(),fe[ke]={changeType:Tc.Deleted,originalValue:Re})}return fe;function Ot(){R||(R=!0,fe={...fe})}},a.changeState);return R?{...a,changeState:ie}:a}trackDeleteOne(c,a,m){return null==c?a:this.trackDeleteMany([c],a,m)}trackUpdateMany(c,a,m){if(m===Va.IgnoreChanges||null==c||0===c.length)return a;let R=!1;const j=a.entities,ie=c.reduce((fe,ke)=>{const{id:Re}=ke;if(null==Re||""===Re)throw new Error(`${a.entityName} entity update requires a key to be tracked`);const Lt=j[Re];return Lt&&(fe[Re]||(R||(R=!0,fe={...fe}),fe[Re]={changeType:Tc.Updated,originalValue:Lt})),fe},a.changeState);return R?{...a,changeState:ie}:a}trackUpdateOne(c,a,m){return null==c?a:this.trackUpdateMany([c],a,m)}trackUpsertMany(c,a,m){if(m===Va.IgnoreChanges||null==c||0===c.length)return a;let R=!1;const j=a.entities,ie=c.reduce((fe,ke)=>{const Re=this.selectId(ke);if(null==Re||""===Re)throw new Error(`${a.entityName} entity upsert requires a key to be tracked`);if(!fe[Re]){R||(R=!0,fe={...fe});const Lt=j[Re];fe[Re]=null==Lt?{changeType:Tc.Added}:{changeType:Tc.Updated,originalValue:Lt}}return fe},a.changeState);return R?{...a,changeState:ie}:a}trackUpsertOne(c,a,m){return null==c?a:this.trackUpsertMany([c],a,m)}undoAll(c){const a=Object.keys(c.changeState),{remove:m,upsert:R}=a.reduce((j,ie)=>{const fe=j.chgState[ie];switch(fe.changeType){case Tc.Added:j.remove.push(ie);break;case Tc.Deleted:const ke=fe.originalValue;ke&&j.upsert.push(ke);break;case Tc.Updated:j.upsert.push(fe.originalValue)}return j},{remove:[],upsert:[],chgState:c.changeState});return c=this.adapter.removeMany(m,c),c=this.adapter.upsertMany(R,c),{...c,changeState:{}}}undoMany(c,a){if(null==c||0===c.length)return a;let m=!1;const{changeState:R,remove:j,upsert:ie}=c.reduce((fe,ke)=>{let Re=fe.changeState;const Ot="object"==typeof ke?this.selectId(ke):ke,Lt=Re[Ot];if(Lt)switch(m||(Re={...Re},m=!0),delete Re[Ot],fe.changeState=Re,Lt.changeType){case Tc.Added:fe.remove.push(Ot);break;case Tc.Deleted:const wn=Lt.originalValue;wn&&fe.upsert.push(wn);break;case Tc.Updated:fe.upsert.push(Lt.originalValue)}return fe},{remove:[],upsert:[],changeState:a.changeState});return a=this.adapter.removeMany(j,a),a=this.adapter.upsertMany(ie,a),m?{...a,changeState:R}:a}undoOne(c,a){return null==c?a:this.undoMany([c],a)}}class Cf{constructor(c,a,m){this.entityName=c,this.definition=a,this.methods={[Wn.CANCEL_PERSIST]:this.cancelPersist.bind(this),[Wn.QUERY_ALL]:this.queryAll.bind(this),[Wn.QUERY_ALL_ERROR]:this.queryAllError.bind(this),[Wn.QUERY_ALL_SUCCESS]:this.queryAllSuccess.bind(this),[Wn.QUERY_BY_KEY]:this.queryByKey.bind(this),[Wn.QUERY_BY_KEY_ERROR]:this.queryByKeyError.bind(this),[Wn.QUERY_BY_KEY_SUCCESS]:this.queryByKeySuccess.bind(this),[Wn.QUERY_LOAD]:this.queryLoad.bind(this),[Wn.QUERY_LOAD_ERROR]:this.queryLoadError.bind(this),[Wn.QUERY_LOAD_SUCCESS]:this.queryLoadSuccess.bind(this),[Wn.QUERY_MANY]:this.queryMany.bind(this),[Wn.QUERY_MANY_ERROR]:this.queryManyError.bind(this),[Wn.QUERY_MANY_SUCCESS]:this.queryManySuccess.bind(this),[Wn.SAVE_ADD_MANY]:this.saveAddMany.bind(this),[Wn.SAVE_ADD_MANY_ERROR]:this.saveAddManyError.bind(this),[Wn.SAVE_ADD_MANY_SUCCESS]:this.saveAddManySuccess.bind(this),[Wn.SAVE_ADD_ONE]:this.saveAddOne.bind(this),[Wn.SAVE_ADD_ONE_ERROR]:this.saveAddOneError.bind(this),[Wn.SAVE_ADD_ONE_SUCCESS]:this.saveAddOneSuccess.bind(this),[Wn.SAVE_DELETE_MANY]:this.saveDeleteMany.bind(this),[Wn.SAVE_DELETE_MANY_ERROR]:this.saveDeleteManyError.bind(this),[Wn.SAVE_DELETE_MANY_SUCCESS]:this.saveDeleteManySuccess.bind(this),[Wn.SAVE_DELETE_ONE]:this.saveDeleteOne.bind(this),[Wn.SAVE_DELETE_ONE_ERROR]:this.saveDeleteOneError.bind(this),[Wn.SAVE_DELETE_ONE_SUCCESS]:this.saveDeleteOneSuccess.bind(this),[Wn.SAVE_UPDATE_MANY]:this.saveUpdateMany.bind(this),[Wn.SAVE_UPDATE_MANY_ERROR]:this.saveUpdateManyError.bind(this),[Wn.SAVE_UPDATE_MANY_SUCCESS]:this.saveUpdateManySuccess.bind(this),[Wn.SAVE_UPDATE_ONE]:this.saveUpdateOne.bind(this),[Wn.SAVE_UPDATE_ONE_ERROR]:this.saveUpdateOneError.bind(this),[Wn.SAVE_UPDATE_ONE_SUCCESS]:this.saveUpdateOneSuccess.bind(this),[Wn.SAVE_UPSERT_MANY]:this.saveUpsertMany.bind(this),[Wn.SAVE_UPSERT_MANY_ERROR]:this.saveUpsertManyError.bind(this),[Wn.SAVE_UPSERT_MANY_SUCCESS]:this.saveUpsertManySuccess.bind(this),[Wn.SAVE_UPSERT_ONE]:this.saveUpsertOne.bind(this),[Wn.SAVE_UPSERT_ONE_ERROR]:this.saveUpsertOneError.bind(this),[Wn.SAVE_UPSERT_ONE_SUCCESS]:this.saveUpsertOneSuccess.bind(this),[Wn.ADD_ALL]:this.addAll.bind(this),[Wn.ADD_MANY]:this.addMany.bind(this),[Wn.ADD_ONE]:this.addOne.bind(this),[Wn.REMOVE_ALL]:this.removeAll.bind(this),[Wn.REMOVE_MANY]:this.removeMany.bind(this),[Wn.REMOVE_ONE]:this.removeOne.bind(this),[Wn.UPDATE_MANY]:this.updateMany.bind(this),[Wn.UPDATE_ONE]:this.updateOne.bind(this),[Wn.UPSERT_MANY]:this.upsertMany.bind(this),[Wn.UPSERT_ONE]:this.upsertOne.bind(this),[Wn.COMMIT_ALL]:this.commitAll.bind(this),[Wn.COMMIT_MANY]:this.commitMany.bind(this),[Wn.COMMIT_ONE]:this.commitOne.bind(this),[Wn.UNDO_ALL]:this.undoAll.bind(this),[Wn.UNDO_MANY]:this.undoMany.bind(this),[Wn.UNDO_ONE]:this.undoOne.bind(this),[Wn.SET_CHANGE_STATE]:this.setChangeState.bind(this),[Wn.SET_COLLECTION]:this.setCollection.bind(this),[Wn.SET_FILTER]:this.setFilter.bind(this),[Wn.SET_LOADED]:this.setLoaded.bind(this),[Wn.SET_LOADING]:this.setLoading.bind(this)},this.adapter=a.entityAdapter,this.isChangeTracking=!0!==a.noChangeTracking,this.selectId=a.selectId,this.guard=new Lm(c,this.selectId),this.toUpdate=bf(this.selectId),this.entityChangeTracker=m||new zg(this.adapter,this.selectId)}cancelPersist(c){return this.setLoadingFalse(c)}queryAll(c){return this.setLoadingTrue(c)}queryAllError(c,a){return this.setLoadingFalse(c)}queryAllSuccess(c,a){const m=this.extractData(a),R=this.extractMergeStrategy(a);return{...this.entityChangeTracker.mergeQueryResults(m,c,R),loaded:!0,loading:!1}}queryByKey(c,a){return this.setLoadingTrue(c)}queryByKeyError(c,a){return this.setLoadingFalse(c)}queryByKeySuccess(c,a){const m=this.extractData(a),R=this.extractMergeStrategy(a);return c=null==m?c:this.entityChangeTracker.mergeQueryResults([m],c,R),this.setLoadingFalse(c)}queryLoad(c){return this.setLoadingTrue(c)}queryLoadError(c,a){return this.setLoadingFalse(c)}queryLoadSuccess(c,a){const m=this.extractData(a);return{...this.adapter.setAll(m,c),loading:!1,loaded:!0,changeState:{}}}queryMany(c,a){return this.setLoadingTrue(c)}queryManyError(c,a){return this.setLoadingFalse(c)}queryManySuccess(c,a){const m=this.extractData(a),R=this.extractMergeStrategy(a);return{...this.entityChangeTracker.mergeQueryResults(m,c,R),loaded:!0,loading:!1}}saveAddMany(c,a){if(this.isOptimistic(a)){const m=this.guard.mustBeEntities(a),R=this.extractMergeStrategy(a);c=this.entityChangeTracker.trackAddMany(m,c,R),c=this.adapter.addMany(m,c)}return this.setLoadingTrue(c)}saveAddManyError(c,a){return this.setLoadingFalse(c)}saveAddManySuccess(c,a){const m=this.guard.mustBeEntities(a),R=this.extractMergeStrategy(a);return c=this.isOptimistic(a)?this.entityChangeTracker.mergeSaveUpserts(m,c,R):this.entityChangeTracker.mergeSaveAdds(m,c,R),this.setLoadingFalse(c)}saveAddOne(c,a){if(this.isOptimistic(a)){const m=this.guard.mustBeEntity(a),R=this.extractMergeStrategy(a);c=this.entityChangeTracker.trackAddOne(m,c,R),c=this.adapter.addOne(m,c)}return this.setLoadingTrue(c)}saveAddOneError(c,a){return this.setLoadingFalse(c)}saveAddOneSuccess(c,a){const m=this.guard.mustBeEntity(a),R=this.extractMergeStrategy(a);if(this.isOptimistic(a)){const j=this.toUpdate(m);c=this.entityChangeTracker.mergeSaveUpdates([j],c,R,!1)}else c=this.entityChangeTracker.mergeSaveAdds([m],c,R);return this.setLoadingFalse(c)}saveDeleteOne(c,a){const m=this.extractData(a),R="object"==typeof m?this.selectId(m):m,j=c.changeState[R];if(j&&(j.changeType===Tc.Added?(c=this.adapter.removeOne(R,c),c=this.entityChangeTracker.commitOne(R,c),a.payload.skip=!0):c=this.entityChangeTracker.trackDeleteOne(R,c)),this.isOptimistic(a)){const ie=this.extractMergeStrategy(a);c=this.entityChangeTracker.trackDeleteOne(R,c,ie),c=this.adapter.removeOne(R,c)}return this.setLoadingTrue(c)}saveDeleteOneError(c,a){return this.setLoadingFalse(c)}saveDeleteOneSuccess(c,a){const m=this.extractData(a);if(this.isOptimistic(a)){const R=this.extractMergeStrategy(a);c=this.entityChangeTracker.mergeSaveDeletes([m],c,R)}else c=this.adapter.removeOne(m,c),c=this.entityChangeTracker.commitOne(m,c);return this.setLoadingFalse(c)}saveDeleteMany(c,a){const m=this.extractData(a).map(R=>"object"==typeof R?this.selectId(R):R);if(m.forEach(R=>{const j=c.changeState[R];j&&(j.changeType===Tc.Added?(c=this.adapter.removeOne(R,c),c=this.entityChangeTracker.commitOne(R,c),a.payload.skip=!0):c=this.entityChangeTracker.trackDeleteOne(R,c))}),this.isOptimistic(a)){const R=this.extractMergeStrategy(a);c=this.entityChangeTracker.trackDeleteMany(m,c,R),c=this.adapter.removeMany(m,c)}return this.setLoadingTrue(c)}saveDeleteManyError(c,a){return this.setLoadingFalse(c)}saveDeleteManySuccess(c,a){const m=this.extractData(a);if(this.isOptimistic(a)){const R=this.extractMergeStrategy(a);c=this.entityChangeTracker.mergeSaveDeletes(m,c,R)}else c=this.adapter.removeMany(m,c),c=this.entityChangeTracker.commitMany(m,c);return this.setLoadingFalse(c)}saveUpdateOne(c,a){const m=this.guard.mustBeUpdate(a);if(this.isOptimistic(a)){const R=this.extractMergeStrategy(a);c=this.entityChangeTracker.trackUpdateOne(m,c,R),c=this.adapter.updateOne(m,c)}return this.setLoadingTrue(c)}saveUpdateOneError(c,a){return this.setLoadingFalse(c)}saveUpdateOneSuccess(c,a){const m=this.guard.mustBeUpdateResponse(a),R=this.isOptimistic(a),j=this.extractMergeStrategy(a);return c=this.entityChangeTracker.mergeSaveUpdates([m],c,j,R),this.setLoadingFalse(c)}saveUpdateMany(c,a){const m=this.guard.mustBeUpdates(a);if(this.isOptimistic(a)){const R=this.extractMergeStrategy(a);c=this.entityChangeTracker.trackUpdateMany(m,c,R),c=this.adapter.updateMany(m,c)}return this.setLoadingTrue(c)}saveUpdateManyError(c,a){return this.setLoadingFalse(c)}saveUpdateManySuccess(c,a){const m=this.guard.mustBeUpdateResponses(a),j=(this.isOptimistic(a),this.extractMergeStrategy(a));return c=this.entityChangeTracker.mergeSaveUpdates(m,c,j,!1),this.setLoadingFalse(c)}saveUpsertOne(c,a){if(this.isOptimistic(a)){const m=this.guard.mustBeEntity(a),R=this.extractMergeStrategy(a);c=this.entityChangeTracker.trackUpsertOne(m,c,R),c=this.adapter.upsertOne(m,c)}return this.setLoadingTrue(c)}saveUpsertOneError(c,a){return this.setLoadingFalse(c)}saveUpsertOneSuccess(c,a){const m=this.guard.mustBeEntity(a),R=this.extractMergeStrategy(a);return c=this.entityChangeTracker.mergeSaveUpserts([m],c,R),this.setLoadingFalse(c)}saveUpsertMany(c,a){if(this.isOptimistic(a)){const m=this.guard.mustBeEntities(a),R=this.extractMergeStrategy(a);c=this.entityChangeTracker.trackUpsertMany(m,c,R),c=this.adapter.upsertMany(m,c)}return this.setLoadingTrue(c)}saveUpsertManyError(c,a){return this.setLoadingFalse(c)}saveUpsertManySuccess(c,a){const m=this.guard.mustBeEntities(a),R=this.extractMergeStrategy(a);return c=this.entityChangeTracker.mergeSaveUpserts(m,c,R),this.setLoadingFalse(c)}addAll(c,a){const m=this.guard.mustBeEntities(a);return{...this.adapter.setAll(m,c),loading:!1,loaded:!0,changeState:{}}}addMany(c,a){const m=this.guard.mustBeEntities(a),R=this.extractMergeStrategy(a);return c=this.entityChangeTracker.trackAddMany(m,c,R),this.adapter.addMany(m,c)}addOne(c,a){const m=this.guard.mustBeEntity(a),R=this.extractMergeStrategy(a);return c=this.entityChangeTracker.trackAddOne(m,c,R),this.adapter.addOne(m,c)}removeMany(c,a){const m=this.guard.mustBeKeys(a),R=this.extractMergeStrategy(a);return c=this.entityChangeTracker.trackDeleteMany(m,c,R),this.adapter.removeMany(m,c)}removeOne(c,a){const m=this.guard.mustBeKey(a),R=this.extractMergeStrategy(a);return c=this.entityChangeTracker.trackDeleteOne(m,c,R),this.adapter.removeOne(m,c)}removeAll(c,a){return{...this.adapter.removeAll(c),loaded:!1,loading:!1,changeState:{}}}updateMany(c,a){const m=this.guard.mustBeUpdates(a),R=this.extractMergeStrategy(a);return c=this.entityChangeTracker.trackUpdateMany(m,c,R),this.adapter.updateMany(m,c)}updateOne(c,a){const m=this.guard.mustBeUpdate(a),R=this.extractMergeStrategy(a);return c=this.entityChangeTracker.trackUpdateOne(m,c,R),this.adapter.updateOne(m,c)}upsertMany(c,a){const m=this.guard.mustBeEntities(a),R=this.extractMergeStrategy(a);return c=this.entityChangeTracker.trackUpsertMany(m,c,R),this.adapter.upsertMany(m,c)}upsertOne(c,a){const m=this.guard.mustBeEntity(a),R=this.extractMergeStrategy(a);return c=this.entityChangeTracker.trackUpsertOne(m,c,R),this.adapter.upsertOne(m,c)}commitAll(c){return this.entityChangeTracker.commitAll(c)}commitMany(c,a){return this.entityChangeTracker.commitMany(this.extractData(a),c)}commitOne(c,a){return this.entityChangeTracker.commitOne(this.extractData(a),c)}undoAll(c){return this.entityChangeTracker.undoAll(c)}undoMany(c,a){return this.entityChangeTracker.undoMany(this.extractData(a),c)}undoOne(c,a){return this.entityChangeTracker.undoOne(this.extractData(a),c)}setChangeState(c,a){const m=this.extractData(a);return c.changeState===m?c:{...c,changeState:m}}setCollection(c,a){const m=this.extractData(a);return c===m?c:m}setFilter(c,a){const m=this.extractData(a);return c.filter===m?c:{...c,filter:m}}setLoaded(c,a){const m=!0===this.extractData(a)||!1;return c.loaded===m?c:{...c,loaded:m}}setLoading(c,a){return this.setLoadingFlag(c,this.extractData(a))}setLoadingFalse(c){return this.setLoadingFlag(c,!1)}setLoadingTrue(c){return this.setLoadingFlag(c,!0)}setLoadingFlag(c,a){return c.loading===(a=!0===a)?c:{...c,loading:a}}extractData(c){return c.payload&&c.payload.data}extractMergeStrategy(c){return this.isChangeTracking?c.payload&&c.payload.mergeStrategy:Va.IgnoreChanges}isOptimistic(c){return c.payload&&!0===c.payload.isOptimistic}}let wh=(()=>{class _{constructor(a){this.entityDefinitionService=a}create(a){const m=this.entityDefinitionService.getDefinition(a);return new Cf(a,m).methods}static{this.\u0275fac=function(m){return new(m||_)(K.KVO(Hs))}}static{this.\u0275prov=K.jDH({token:_,factory:_.\u0275fac})}}return _})(),Qm=(()=>{class _{constructor(a){this.methodsFactory=a}create(a){const m=this.methodsFactory.create(a);return function(j,ie){const fe=m[ie.payload.entityOp];return fe?fe(j,ie):j}}static{this.\u0275fac=function(m){return new(m||_)(K.KVO(wh))}}static{this.\u0275prov=K.jDH({token:_,factory:_.\u0275fac})}}return _})(),Ym=(()=>{class _{constructor(a,m){this.entityCollectionReducerFactory=a,this.entityCollectionReducers={},this.entityCollectionMetaReducer=xr.qX.apply(null,m||[])}getOrCreateReducer(a){let m=this.entityCollectionReducers[a];return m||(m=this.entityCollectionReducerFactory.create(a),m=this.registerReducer(a,m),this.entityCollectionReducers[a]=m),m}registerReducer(a,m){return m=this.entityCollectionMetaReducer(m),this.entityCollectionReducers[a.trim()]=m}registerReducers(a){(a?Object.keys(a):[]).forEach(R=>this.registerReducer(R,a[R]))}static{this.\u0275fac=function(m){return new(m||_)(K.KVO(Qm),K.KVO($g,8))}}static{this.\u0275prov=K.jDH({token:_,factory:_.\u0275fac})}}return _})(),op=(()=>{class _{constructor(a,m,R){this.entityCollectionCreator=a,this.entityCollectionReducerRegistry=m,this.logger=R}create(){return function a(m={},R){switch(R.type){case Ao.CLEAR_COLLECTIONS:return this.clearCollectionsReducer(m,R);case Ao.LOAD_COLLECTIONS:return this.loadCollectionsReducer(m,R);case Ao.MERGE_QUERY_SET:return this.mergeQuerySetReducer(m,R);case Ao.SAVE_ENTITIES:return this.saveEntitiesReducer(m,R);case Ao.SAVE_ENTITIES_CANCEL:return this.saveEntitiesCancelReducer(m,R);case Ao.SAVE_ENTITIES_ERROR:return this.saveEntitiesErrorReducer(m,R);case Ao.SAVE_ENTITIES_SUCCESS:return this.saveEntitiesSuccessReducer(m,R);case Ao.SET_ENTITY_CACHE:return R.payload.cache}const j=R.payload;return j&&j.entityName&&j.entityOp&&!j.error?this.applyCollectionReducer(m,R):m}.bind(this)}clearCollectionsReducer(a,m){let{collections:R}=m.payload;const ie=Wn.REMOVE_ALL;return R||(R=Object.keys(a)),R.reduce((fe,ke)=>this.applyCollectionReducer(fe,{type:`[${ke}] ${m.type}`,payload:{entityName:ke,entityOp:ie}}),a)}loadCollectionsReducer(a,m){const{collections:R}=m.payload,ie=Wn.ADD_ALL;return Object.keys(R).reduce((ke,Re)=>this.applyCollectionReducer(ke,{type:`[${Re}] ${m.type}`,payload:{entityName:Re,entityOp:ie,data:R[Re]}}),a)}mergeQuerySetReducer(a,m){let{mergeStrategy:R,querySet:j}=m.payload;R=null===R?Va.PreserveChanges:R;const fe=Wn.QUERY_MANY_SUCCESS;return Object.keys(j).reduce((Re,Ot)=>this.applyCollectionReducer(Re,{type:`[${Ot}] ${m.type}`,payload:{entityName:Ot,entityOp:fe,data:j[Ot],mergeStrategy:R}}),a)}saveEntitiesReducer(a,m){const{changeSet:R,correlationId:j,isOptimistic:ie,mergeStrategy:fe,tag:ke}=m.payload;try{R.changes.forEach(Ot=>{const Lt=Ot.entityName,wn={entityName:Lt,entityOp:Re(Ot),data:Ot.entities,correlationId:j,isOptimistic:ie,mergeStrategy:fe,tag:ke},kn={type:`[${Lt}] ${m.type}`,payload:wn};if(a=this.applyCollectionReducer(a,kn),kn.payload.error)throw kn.payload.error})}catch(Ot){m.payload.error=Ot}return a;function Re(Ot){switch(Ot.op){case Fl.Add:return Wn.SAVE_ADD_MANY;case Fl.Delete:return Wn.SAVE_DELETE_MANY;case Fl.Update:return Wn.SAVE_UPDATE_MANY;case Fl.Upsert:return Wn.SAVE_UPSERT_MANY}}}saveEntitiesCancelReducer(a,m){return this.clearLoadingFlags(a,m.payload.entityNames||[])}saveEntitiesErrorReducer(a,m){const ie=m.payload.originalAction.payload.changeSet.changes.map(fe=>fe.entityName);return this.clearLoadingFlags(a,ie)}saveEntitiesSuccessReducer(a,m){const{changeSet:R,correlationId:j,isOptimistic:ie,mergeStrategy:fe,tag:ke}=m.payload;return R.changes.forEach(Ot=>{const Lt=Ot.entityName,wn={entityName:Lt,entityOp:Re(Ot),data:Ot.entities,correlationId:j,isOptimistic:ie,mergeStrategy:fe,tag:ke};a=this.applyCollectionReducer(a,{type:`[${Lt}] ${m.type}`,payload:wn})}),a;function Re(Ot){switch(Ot.op){case Fl.Add:return Wn.SAVE_ADD_MANY_SUCCESS;case Fl.Delete:return Wn.SAVE_DELETE_MANY_SUCCESS;case Fl.Update:return Wn.SAVE_UPDATE_MANY_SUCCESS;case Fl.Upsert:return Wn.SAVE_UPSERT_MANY_SUCCESS}}}applyCollectionReducer(a={},m){const R=m.payload.entityName,j=a[R],ie=this.entityCollectionReducerRegistry.getOrCreateReducer(R);let fe;try{fe=ie(j||this.entityCollectionCreator.create(R),m)}catch(ke){this.logger.error(ke),m.payload.error=ke}return m.payload.error||j===fe?a:{...a,[R]:fe}}clearLoadingFlags(a,m){let R=!1;return m.forEach(j=>{const ie=a[j];ie.loading&&(R||(a={...a},R=!0),a[j]={...ie,loading:!1})}),a}static{this.\u0275fac=function(m){return new(m||_)(K.KVO(zp),K.KVO(Ym),K.KVO(Bp))}}static{this.\u0275prov=K.jDH({token:_,factory:_.\u0275fac})}}return _})(),ap=(()=>{class _{error(a,m){a&&(m?console.error(a,m):console.error(a))}log(a,m){a&&(m?console.log(a,m):console.log(a))}warn(a,m){a&&(m?console.warn(a,m):console.warn(a))}static{this.\u0275fac=function(m){return new(m||_)}}static{this.\u0275prov=K.jDH({token:_,factory:_.\u0275fac})}}return _})();const py=["equipment","information","money","series"];let qp=(()=>{class _{constructor(a){this.pluralNames={},a&&a.forEach(m=>this.registerPluralNames(m))}pluralize(a){return this.pluralNames[a]||(py.indexOf(a.toLowerCase())>=0?a:/[aeiou]y$/.test(a)?a+"s":a.endsWith("y")?a.substring(0,a.length-1)+"ies":/[s|ss|sh|ch|x|z]$/.test(a)?a+"es":a+"s")}registerPluralNames(a){this.pluralNames={...this.pluralNames,...a||{}}}static{this.\u0275fac=function(m){return new(m||_)(K.KVO(Bm,8))}}static{this.\u0275prov=K.jDH({token:_,factory:_.\u0275fac})}}return _})();const Xp=[rp,jg,$h,vv,op,hy,zp,Qm,wh,Ym,Gm,Hp,Hs,Af,Gh,Ah,Kp,{provide:Km,useValue:Wp},{provide:class Gp{},useClass:qm},{provide:Bp,useClass:ap},{provide:K.Z63,multi:!0,useValue:()=>function gy(){const _=(0,K.WQX)(xr.CP),c=(0,K.WQX)(op),a=(0,K.WQX)(Km,{optional:!0}),m=(0,K.WQX)(Ih,{optional:!0}),R=(0,K.WQX)(Tf,{optional:!0}),j=a||Wp,ie=(R||[]).map(Re=>Re instanceof K.nKC?(0,K.WQX)(Re):Re),fe="function"==typeof m?m():m,ke={key:j,reducers:c.create(),reducerFactory:xr.HY,initialState:fe||{},metaReducers:ie};_.addFeature(ke)}()}],Sf=[Fs,zm,ly,ip,sp,{provide:$m,useClass:Wm},{provide:Hm,useClass:uy},{provide:Bg,useClass:qp},{provide:K.Z63,multi:!0,useValue:()=>function Zp(){const _=(0,K.WQX)(ep),c=(0,K.WQX)(ip),a=(0,K.WQX)(sp);_.addEffects(c),_.addEffects(a)}()}];function Kg(_){return[{provide:Tf,useValue:_.entityCacheMetaReducers?_.entityCacheMetaReducers:[]},{provide:$g,useValue:_.entityCollectionMetaReducers?_.entityCollectionMetaReducers:[]},{provide:Bm,multi:!0,useValue:_.pluralNames?_.pluralNames:{}},{provide:If,multi:!0,useValue:_.entityMetadata?_.entityMetadata:[]}]}let Ev=(()=>{class _{static forRoot(a){return{ngModule:_,providers:[Kg(a)]}}static{this.\u0275fac=function(m){return new(m||_)}}static{this.\u0275mod=K.$C({type:_})}static{this.\u0275inj=K.G2t({providers:[Xp]})}}return _})(),Zm=(()=>{class _{static forRoot(a){return{ngModule:_,providers:[Kg(a)]}}static{this.\u0275fac=function(m){return new(m||_)}}static{this.\u0275mod=K.$C({type:_})}static{this.\u0275inj=K.G2t({providers:[Sf],imports:[Ev]})}}return _})();const qh="@ngrx/router-store/request",Qh=((0,xr.VP)(qh,(0,xr.xk)()),"@ngrx/router-store/navigation"),Jm=((0,xr.VP)(Qh,(0,xr.xk)()),"@ngrx/router-store/cancel"),tm=((0,xr.VP)(Jm,(0,xr.xk)()),"@ngrx/router-store/error"),Yc=((0,xr.VP)(tm,(0,xr.xk)()),"@ngrx/router-store/navigated");(0,xr.VP)(Yc,(0,xr.xk)());class Qg{serialize(c){return{root:this.serializeRoute(c.root),url:c.url}}serializeRoute(c){const a=c.children.map(m=>this.serializeRoute(m));return{params:c.params,data:c.data,url:c.url,outlet:c.outlet,title:c.title,routeConfig:c.routeConfig?{path:c.routeConfig.path,pathMatch:c.routeConfig.pathMatch,redirectTo:c.routeConfig.redirectTo,outlet:c.routeConfig.outlet,title:"string"==typeof c.routeConfig.title?c.routeConfig.title:void 0}:null,queryParams:c.queryParams,fragment:c.fragment,firstChild:a[0],children:a}}}var nm=function(_){return _[_.PreActivation=1]="PreActivation",_[_.PostActivation=2]="PostActivation",_}(nm||{});const Yg="router",Xg=new K.nKC("@ngrx/router-store Internal Configuration"),rm=new K.nKC("@ngrx/router-store Configuration");function im(_){return{stateKey:Yg,serializer:Qg,navigationActionTiming:nm.PreActivation,..._}}class sm{serialize(c){return{root:this.serializeRoute(c.root),url:c.url}}serializeRoute(c){const a=c.children.map(m=>this.serializeRoute(m));return{params:c.params,paramMap:c.paramMap,data:c.data,url:c.url,outlet:c.outlet,title:c.title,routeConfig:c.routeConfig?{component:c.routeConfig.component,path:c.routeConfig.path,pathMatch:c.routeConfig.pathMatch,redirectTo:c.routeConfig.redirectTo,outlet:c.routeConfig.outlet,title:c.routeConfig.title}:null,queryParams:c.queryParams,queryParamMap:c.queryParamMap,fragment:c.fragment,component:c.routeConfig?c.routeConfig.component:void 0,root:void 0,parent:void 0,firstChild:a[0],pathFromRoot:void 0,children:a}}}class lp{}var pd=function(_){return _[_.NONE=1]="NONE",_[_.ROUTER=2]="ROUTER",_[_.STORE=3]="STORE",_}(pd||{});let eg=(()=>{class _{constructor(a,m,R,j,ie,fe){this.store=a,this.router=m,this.serializer=R,this.errorHandler=j,this.config=ie,this.activeRuntimeChecks=fe,this.lastEvent=null,this.routerState=null,this.trigger=pd.NONE,this.stateKey=this.config.stateKey,!(0,xr.Lg)()&&(0,K.naY)()&&(fe?.strictActionSerializability||fe?.strictStateSerializability)&&this.serializer instanceof sm&&console.warn("@ngrx/router-store: The serializability runtime checks cannot be enabled with the FullRouterStateSerializer. The FullRouterStateSerializer has an unserializable router state and actions that are not serializable. To use the serializability runtime checks either use the MinimalRouterStateSerializer or implement a custom router state serializer."),this.setUpStoreStateListener(),this.setUpRouterEventsListener()}setUpStoreStateListener(){this.store.pipe((0,xr.Lt)(this.stateKey),(0,vl.E)(this.store)).subscribe(([a,m])=>{this.navigateIfNeeded(a,m)})}navigateIfNeeded(a,m){if(!a||!a.state||this.trigger===pd.ROUTER||this.lastEvent instanceof Qi.Z)return;const R=a.state.url;(function vy(_,c){return Df(_)===Df(c)})(this.router.url,R)||(this.storeState=m,this.trigger=pd.STORE,this.router.navigateByUrl(R).catch(j=>{this.errorHandler.handleError(j)}))}setUpRouterEventsListener(){const a=this.config.navigationActionTiming===nm.PostActivation;let m;this.router.events.pipe((0,vl.E)(this.store)).subscribe(([R,j])=>{this.lastEvent=R,R instanceof Qi.Z?(this.routerState=this.serializer.serialize(this.router.routerState.snapshot),this.trigger!==pd.STORE&&(this.storeState=j,this.dispatchRouterRequest(R))):R instanceof Qi.ld?(m=R,!a&&this.trigger!==pd.STORE&&this.dispatchRouterNavigation(R)):R instanceof Qi.j5?(this.dispatchRouterCancel(R),this.reset()):R instanceof Qi.L6?(this.dispatchRouterError(R),this.reset()):R instanceof Qi.wF&&(this.trigger!==pd.STORE&&(a&&this.dispatchRouterNavigation(m),this.dispatchRouterNavigated(R)),this.reset())})}dispatchRouterRequest(a){this.dispatchRouterAction(qh,{event:a})}dispatchRouterNavigation(a){const m=this.serializer.serialize(a.state);this.dispatchRouterAction(Qh,{routerState:m,event:new Qi.ld(a.id,a.url,a.urlAfterRedirects,m)})}dispatchRouterCancel(a){this.dispatchRouterAction(Jm,{storeState:this.storeState,event:a})}dispatchRouterError(a){this.dispatchRouterAction(tm,{storeState:this.storeState,event:new Qi.L6(a.id,a.url,`${a}`)})}dispatchRouterNavigated(a){const m=this.serializer.serialize(this.router.routerState.snapshot);this.dispatchRouterAction(Yc,{event:a,routerState:m})}dispatchRouterAction(a,m){this.trigger=pd.ROUTER;try{this.store.dispatch({type:a,payload:{routerState:this.routerState,...m,event:0===this.config.routerState?m.event:{id:m.event.id,url:m.event.url,urlAfterRedirects:m.event.urlAfterRedirects}}})}finally{this.trigger=pd.NONE}}reset(){this.trigger=pd.NONE,this.storeState=null,this.routerState=null}static{this.\u0275fac=function(m){return new(m||_)(K.KVO(xr.il),K.KVO(Qi.Ix),K.KVO(lp),K.KVO(K.zcH),K.KVO(rm),K.KVO(xr.A5))}}static{this.\u0275prov=K.jDH({token:_,factory:_.\u0275fac})}}return _})();function Df(_){return _?.length>0&&"/"===_[_.length-1]?_.substring(0,_.length-1):_}function tg(_={}){return(0,K.EmA)([{provide:Xg,useValue:_},{provide:rm,useFactory:im,deps:[Xg]},{provide:lp,useClass:_.serializer?_.serializer:0===_.routerState?sm:Qg},{provide:K.Z63,multi:!0,useFactory:()=>()=>(0,K.WQX)(eg)},eg])}let Ch=(()=>{class _{static forRoot(a={}){return{ngModule:_,providers:[tg(a)]}}static{this.\u0275fac=function(m){return new(m||_)}}static{this.\u0275mod=K.$C({type:_})}static{this.\u0275inj=K.G2t({})}}return _})();var Xh=x(7242),Ey=x(2771),Zg=x(7647),by=x(152),Fd=x(6977),Iy=x(5245),Jg=x(941),up=x(2816),om=x(9079);const Zh="PERFORM_ACTION",am="ROLLBACK",rg="TOGGLE_ACTION",cm="JUMP_TO_STATE",bv="JUMP_TO_ACTION",Rf="IMPORT_STATE",t_="LOCK_CHANGES",ig="PAUSE_RECORDING";class dp{constructor(c,a){if(this.action=c,this.timestamp=a,this.type=Zh,typeof c.type>"u")throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?')}}class n_{constructor(){this.type="REFRESH"}}class r_{constructor(c){this.timestamp=c,this.type="RESET"}}class Ay{constructor(c){this.timestamp=c,this.type=am}}class sg{constructor(c){this.timestamp=c,this.type="COMMIT"}}class lm{constructor(){this.type="SWEEP"}}class i_{constructor(c){this.id=c,this.type=rg}}class hp{constructor(c){this.index=c,this.type=cm}}class wy{constructor(c){this.actionId=c,this.type=bv}}class og{constructor(c){this.nextLiftedState=c,this.type=Rf}}class fp{constructor(c){this.status=c,this.type=t_}}class Rh{constructor(c){this.status=c,this.type=ig}}const um=new K.nKC("@ngrx/store-devtools Options"),o_=new K.nKC("@ngrx/store-devtools Initial Config");function a_(){return null}function l_(_){const c={maxAge:!1,monitor:a_,actionSanitizer:void 0,stateSanitizer:void 0,name:"NgRx Store DevTools",serialize:!1,logOnly:!1,autoPause:!1,trace:!1,traceLimit:75,features:{pause:!0,lock:!0,persist:!0,export:!0,import:"custom",jump:!0,skip:!0,reorder:!0,dispatch:!0,test:!0},connectInZone:!1},a="function"==typeof _?_():_,R=a.features||!!a.logOnly&&{pause:!0,export:!0,test:!0}||c.features;!0===R.import&&(R.import="custom");const j=Object.assign({},c,{features:R},a);if(j.maxAge&&j.maxAge<2)throw new Error(`Devtools 'maxAge' cannot be less than 2, got ${j.maxAge}`);return j}function Ni(_,c){return _.filter(a=>c.indexOf(a)<0)}function u_(_){const{computedStates:c,currentStateIndex:a}=_;if(a>=c.length){const{state:R}=c[c.length-1];return R}const{state:m}=c[a];return m}function eh(_){return new dp(_,+Date.now())}function ag(_,c){return Object.keys(c).reduce((a,m)=>{const R=Number(m);return a[R]=cg(_,c[R],R),a},{})}function cg(_,c,a){return{...c,action:_(c.action,a)}}function Tv(_,c){return c.map((a,m)=>({state:dm(_,a.state,m),error:a.error}))}function dm(_,c,a){return _(c,a)}function Pf(_){return _.predicate||_.actionsSafelist||_.actionsBlocklist}function Ph(_,c,a,m,R){const j=a&&!a(_,c.action),ie=m&&!c.action.type.match(m.map(ke=>hm(ke)).join("|")),fe=R&&c.action.type.match(R.map(ke=>hm(ke)).join("|"));return j||ie||fe}function hm(_){return _.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function lg(_){return{ngZone:_?(0,K.WQX)(K.SKi):null,connectInZone:_}}let pp=(()=>{class _ extends xr.SS{static{this.\u0275fac=(()=>{let a;return function(R){return(a||(a=K.xGo(_)))(R||_)}})()}static{this.\u0275prov=K.jDH({token:_,factory:_.\u0275fac})}}return _})();const Mf=new K.nKC("@ngrx/store-devtools Redux Devtools Extension");let Jh=(()=>{class _{constructor(a,m,R){this.config=m,this.dispatcher=R,this.zoneConfig=lg(this.config.connectInZone),this.devtoolsExtension=a,this.createActionStreams()}notify(a,m){if(this.devtoolsExtension)if(a.type===Zh){if(m.isLocked||m.isPaused)return;const R=u_(m);if(Pf(this.config)&&Ph(R,a,this.config.predicate,this.config.actionsSafelist,this.config.actionsBlocklist))return;const j=this.config.stateSanitizer?dm(this.config.stateSanitizer,R,m.currentStateIndex):R,ie=this.config.actionSanitizer?cg(this.config.actionSanitizer,a,m.nextActionId):a;this.sendToReduxDevtools(()=>this.extensionConnection.send(ie,j))}else{const R={...m,stagedActionIds:m.stagedActionIds,actionsById:this.config.actionSanitizer?ag(this.config.actionSanitizer,m.actionsById):m.actionsById,computedStates:this.config.stateSanitizer?Tv(this.config.stateSanitizer,m.computedStates):m.computedStates};this.sendToReduxDevtools(()=>this.devtoolsExtension.send(null,R,this.getExtensionConfig(this.config)))}}createChangesObservable(){return this.devtoolsExtension?new Gt.c(a=>{const m=this.zoneConfig.connectInZone?this.zoneConfig.ngZone.runOutsideAngular(()=>this.devtoolsExtension.connect(this.getExtensionConfig(this.config))):this.devtoolsExtension.connect(this.getExtensionConfig(this.config));return this.extensionConnection=m,m.init(),m.subscribe(R=>a.next(R)),m.unsubscribe}):Rm.w}createActionStreams(){const a=this.createChangesObservable().pipe((0,Zg.u)()),m=a.pipe((0,tt.p)(Re=>"START"===Re.type)),R=a.pipe((0,tt.p)(Re=>"STOP"===Re.type)),j=a.pipe((0,tt.p)(Re=>"DISPATCH"===Re.type),(0,Ft.T)(Re=>this.unwrapAction(Re.payload)),(0,Lh.H)(Re=>Re.type===Rf?this.dispatcher.pipe((0,tt.p)(Ot=>Ot.type===xr.q6),(0,Xd.w)(1e3),(0,by.B)(1e3),(0,Ft.T)(()=>Re),(0,fd.W)(()=>(0,ot.of)(Re)),(0,yl.s)(1)):(0,ot.of)(Re))),fe=a.pipe((0,tt.p)(Re=>"ACTION"===Re.type),(0,Ft.T)(Re=>this.unwrapAction(Re.payload))).pipe((0,Fd.Q)(R)),ke=j.pipe((0,Fd.Q)(R));this.start$=m.pipe((0,Fd.Q)(R)),this.actions$=this.start$.pipe((0,Rt.n)(()=>fe)),this.liftedActions$=this.start$.pipe((0,Rt.n)(()=>ke))}unwrapAction(a){return"string"==typeof a?(0,eval)(`(${a})`):a}getExtensionConfig(a){const m={name:a.name,features:a.features,serialize:a.serialize,autoPause:a.autoPause??!1,trace:a.trace??!1,traceLimit:a.traceLimit??75};return!1!==a.maxAge&&(m.maxAge=a.maxAge),m}sendToReduxDevtools(a){try{a()}catch(m){console.warn("@ngrx/store-devtools: something went wrong inside the redux devtools",m)}}static{this.\u0275fac=function(m){return new(m||_)(K.KVO(Mf),K.KVO(um),K.KVO(pp))}}static{this.\u0275prov=K.jDH({token:_,factory:_.\u0275fac})}}return _})();const u={type:xr.Zz},i={type:"@ngrx/store-devtools/recompute"};function o(_,c,a,m,R){if(m)return{state:a,error:"Interrupted by an error up the chain"};let ie,j=a;try{j=_(a,c)}catch(fe){ie=fe.toString(),R.handleError(fe)}return{state:j,error:ie}}function d(_,c,a,m,R,j,ie,fe,ke){if(c>=_.length&&_.length===j.length)return _;const Re=_.slice(0,c),Ot=j.length-(ke?1:0);for(let Lt=c;Lt<Ot;Lt++){const wn=j[Lt],kn=R[wn].action,Pn=Re[Lt-1],rr=Pn?Pn.state:m,zn=Pn?Pn.error:void 0,Hn=ie.indexOf(wn)>-1?Pn:o(a,kn,rr,zn,fe);Re.push(Hn)}return ke&&Re.push(_[_.length-1]),Re}let U=(()=>{class _{constructor(a,m,R,j,ie,fe,ke,Re){const Ot=function I(_,c){return{monitorState:c(void 0,{}),nextActionId:1,actionsById:{0:eh(u)},stagedActionIds:[0],skippedActionIds:[],committedState:_,currentStateIndex:0,computedStates:[],isLocked:!1,isPaused:!1}}(ke,Re.monitor),Lt=function S(_,c,a,m,R={}){return j=>(ie,fe)=>{let{monitorState:ke,actionsById:Re,nextActionId:Ot,stagedActionIds:Lt,skippedActionIds:wn,committedState:kn,currentStateIndex:Pn,computedStates:rr,isLocked:zn,isPaused:Vn}=ie||c;function Hn(Or){let Gr=Or,Di=Lt.slice(1,Gr+1);for(let Gi=0;Gi<Di.length;Gi++){if(rr[Gi+1].error){Gr=Gi,Di=Lt.slice(1,Gr+1);break}delete Re[Di[Gi]]}wn=wn.filter(Gi=>-1===Di.indexOf(Gi)),Lt=[0,...Lt.slice(Gr+1)],kn=rr[Gr].state,rr=rr.slice(Gr),Pn=Pn>Gr?Pn-Gr:0}function tr(){Re={0:eh(u)},Ot=1,Lt=[0],wn=[],kn=rr[Pn].state,Pn=0,rr=[]}ie||(Re=Object.create(Re));let ur=0;switch(fe.type){case t_:zn=fe.status,ur=1/0;break;case ig:Vn=fe.status,Vn?(Lt=[...Lt,Ot],Re[Ot]=new dp({type:"@ngrx/devtools/pause"},+Date.now()),Ot++,ur=Lt.length-1,rr=rr.concat(rr[rr.length-1]),Pn===Lt.length-2&&Pn++,ur=1/0):tr();break;case"RESET":Re={0:eh(u)},Ot=1,Lt=[0],wn=[],kn=_,Pn=0,rr=[];break;case"COMMIT":tr();break;case am:Re={0:eh(u)},Ot=1,Lt=[0],wn=[],Pn=0,rr=[];break;case rg:{const{id:Or}=fe;wn=-1===wn.indexOf(Or)?[Or,...wn]:wn.filter(Di=>Di!==Or),ur=Lt.indexOf(Or);break}case"SET_ACTIONS_ACTIVE":{const{start:Or,end:Gr,active:Di}=fe,Gi=[];for(let ca=Or;ca<Gr;ca++)Gi.push(ca);wn=Di?Ni(wn,Gi):[...wn,...Gi],ur=Lt.indexOf(Or);break}case cm:Pn=fe.index,ur=1/0;break;case bv:{const Or=Lt.indexOf(fe.actionId);-1!==Or&&(Pn=Or),ur=1/0;break}case"SWEEP":Lt=Ni(Lt,wn),wn=[],Pn=Math.min(Pn,Lt.length-1);break;case Zh:{if(zn)return ie||c;if(Vn||ie&&Ph(ie.computedStates[Pn],fe,R.predicate,R.actionsSafelist,R.actionsBlocklist)){const Gr=rr[rr.length-1];rr=[...rr.slice(0,-1),o(j,fe.action,Gr.state,Gr.error,a)],ur=1/0;break}R.maxAge&&Lt.length===R.maxAge&&Hn(1),Pn===Lt.length-1&&Pn++;const Or=Ot++;Re[Or]=fe,Lt=[...Lt,Or],ur=Lt.length-1;break}case Rf:({monitorState:ke,actionsById:Re,nextActionId:Ot,stagedActionIds:Lt,skippedActionIds:wn,committedState:kn,currentStateIndex:Pn,computedStates:rr,isLocked:zn,isPaused:Vn}=fe.nextLiftedState);break;case xr.Zz:ur=0,R.maxAge&&Lt.length>R.maxAge&&(rr=d(rr,ur,j,kn,Re,Lt,wn,a,Vn),Hn(Lt.length-R.maxAge),ur=1/0);break;case xr.q6:if(rr.filter(Gr=>Gr.error).length>0)ur=0,R.maxAge&&Lt.length>R.maxAge&&(rr=d(rr,ur,j,kn,Re,Lt,wn,a,Vn),Hn(Lt.length-R.maxAge),ur=1/0);else{if(!Vn&&!zn){Pn===Lt.length-1&&Pn++;const Gr=Ot++;Re[Gr]=new dp(fe,+Date.now()),Lt=[...Lt,Gr],ur=Lt.length-1,rr=d(rr,ur,j,kn,Re,Lt,wn,a,Vn)}rr=rr.map(Gr=>({...Gr,state:j(Gr.state,i)})),Pn=Lt.length-1,R.maxAge&&Lt.length>R.maxAge&&Hn(Lt.length-R.maxAge),ur=1/0}break;default:ur=1/0}return rr=d(rr,ur,j,kn,Re,Lt,wn,a,Vn),ke=m(ke,fe),{monitorState:ke,actionsById:Re,nextActionId:Ot,stagedActionIds:Lt,skippedActionIds:wn,committedState:kn,currentStateIndex:Pn,computedStates:rr,isLocked:zn,isPaused:Vn}}}(ke,Ot,fe,Re.monitor,Re),wn=(0,ho.h)((0,ho.h)(m.asObservable().pipe((0,Iy.i)(1)),j.actions$).pipe((0,Ft.T)(eh)),a,j.liftedActions$).pipe((0,Jg.Q)(Xh.T)),kn=R.pipe((0,Ft.T)(Lt)),Pn=lg(Re.connectInZone),rr=new Ey.m(1);this.liftedStateSubscription=wn.pipe((0,vl.E)(kn),G(Pn),(0,up.S)(({state:Hn},[tr,ur])=>{let Or=ur(Hn,tr);return tr.type!==Zh&&Pf(Re)&&(Or=function d_(_,c,a,m){const R=[],j={},ie=[];return _.stagedActionIds.forEach((fe,ke)=>{const Re=_.actionsById[fe];Re&&(ke&&Ph(_.computedStates[ke],Re,c,a,m)||(j[fe]=Re,R.push(fe),ie.push(_.computedStates[ke])))}),{..._,stagedActionIds:R,actionsById:j,computedStates:ie}}(Or,Re.predicate,Re.actionsSafelist,Re.actionsBlocklist)),j.notify(tr,Or),{state:Or,action:tr}},{state:Ot,action:null})).subscribe(({state:Hn,action:tr})=>{rr.next(Hn),tr.type===Zh&&ie.next(tr.action)}),this.extensionStartSubscription=j.start$.pipe(G(Pn)).subscribe(()=>{this.refresh()});const zn=rr.asObservable(),Vn=zn.pipe((0,Ft.T)(u_));Object.defineProperty(Vn,"state",{value:(0,om.ot)(Vn,{manualCleanup:!0,requireSync:!0})}),this.dispatcher=a,this.liftedState=zn,this.state=Vn}ngOnDestroy(){this.liftedStateSubscription.unsubscribe(),this.extensionStartSubscription.unsubscribe()}dispatch(a){this.dispatcher.next(a)}next(a){this.dispatcher.next(a)}error(a){}complete(){}performAction(a){this.dispatch(new dp(a,+Date.now()))}refresh(){this.dispatch(new n_)}reset(){this.dispatch(new r_(+Date.now()))}rollback(){this.dispatch(new Ay(+Date.now()))}commit(){this.dispatch(new sg(+Date.now()))}sweep(){this.dispatch(new lm)}toggleAction(a){this.dispatch(new i_(a))}jumpToAction(a){this.dispatch(new wy(a))}jumpToState(a){this.dispatch(new hp(a))}importState(a){this.dispatch(new og(a))}lockChanges(a){this.dispatch(new fp(a))}pauseRecording(a){this.dispatch(new Rh(a))}static{this.\u0275fac=function(m){return new(m||_)(K.KVO(pp),K.KVO(xr.SS),K.KVO(xr.QU),K.KVO(Jh),K.KVO(xr.sA),K.KVO(K.zcH),K.KVO(xr.N_),K.KVO(um))}}static{this.\u0275prov=K.jDH({token:_,factory:_.\u0275fac})}}return _})();function G({ngZone:_,connectInZone:c}){return a=>c?new Gt.c(m=>a.subscribe({next:R=>_.run(()=>m.next(R)),error:R=>_.run(()=>m.error(R)),complete:()=>_.run(()=>m.complete())})):a}const ce=new K.nKC("@ngrx/store-devtools Is Devtools Extension or Monitor Present");function we(_,c){return!!_||c.monitor!==a_}function ze(){const _="__REDUX_DEVTOOLS_EXTENSION__";return"object"==typeof window&&typeof window[_]<"u"?window[_]:null}function nn(_){return _.state}var lr=x(13);const Kr=(0,xr.vy)({isSpinnerOn:!1},(0,xr.on)(lr.x,_=>({..._,isSpinnerOn:!0})),(0,xr.on)(lr.W,_=>({..._,isSpinnerOn:!1})));var si=x(3269);let Qr=(()=>{class _{constructor(a){this.httpClient=a}getGithubRepos(){return this.httpClient.get("https://api.github.com/users/CherkasIvan/repos").pipe((0,Ft.T)(a=>a.map(m=>({name:m.name,stars:m.stargazers_count,htmlUrl:m.html_url,forks:m.forks,description:m.description}))))}static{this.\u0275fac=function(m){return new(m||_)(K.KVO(Pe.Qq))}}static{this.\u0275prov=K.jDH({token:_,factory:_.\u0275fac,providedIn:"root"})}}return _})(),ki=(()=>{class _{constructor(a,m){this.actions$=a,this.githubService=m,this.loadUserRepos$=ru(()=>this.actions$.pipe(Om(si.d),(0,Qe.Z)(()=>this.githubService.getGithubRepos().pipe((0,Ft.T)(R=>si.o({githubRepos:R}))))))}static{this.\u0275fac=function(m){return new(m||_)(K.KVO(Zd),K.KVO(Qr))}}static{this.\u0275prov=K.jDH({token:_,factory:_.\u0275fac})}}return _})();var Is=x(9029);const $i={apiKey:"AIzaSyCneI-9WPco0wH8zERGyqowI0sXaWeM1IQ",authDomain:"cv-cherkas.firebaseapp.com",databaseURL:"https://cv-cherkas-default-rtdb.europe-west1.firebasedatabase.app",projectId:"cv-cherkas",storageBucket:"cv-cherkas.appspot.com",messagingSenderId:"730620484477",appId:"1:730620484477:web:b4f712078442af97da0a14",measurementId:"G-H99D40549Z"},Dt_production=(function to(_=(0,ve.getApp)()){_=(0,Jt.Ku)(_);const c=(0,ve._getProvider)(_,oi);c.isInitialized()?c.getImmediate():function Vs(_,c={}){const a=(0,ve._getProvider)(_,oi);if(a.isInitialized()){const R=a.getImmediate();if((0,Jt.bD)(c,a.getOptions()))return R;throw Rn.create("already-initialized")}a.initialize({options:c})}(_)}((0,Fe.Wp)($i)),!1),Dt_firebase=$i;var zt=x(7696),Xt=x(4468);const St=[{path:"",pathMatch:"full",redirectTo:`/${zt.w.AUTH}`},{path:zt.w.AUTH,loadComponent:()=>x.e(360).then(x.bind(x,3360)).then(_=>_.AuthComponent)},{path:zt.w.LAYOUT,canActivate:[(()=>{class _{constructor(a,m){this.authService=a,this.router=m}canActivate(){return!!this.authService.isAuth$.value||(this.router.navigate([zt.w.AUTH]),!1)}static{this.\u0275fac=function(m){return new(m||_)(K.KVO(Xt.u),K.KVO(Qi.Ix))}}static{this.\u0275prov=K.jDH({token:_,factory:_.\u0275fac,providedIn:"root"})}}return _})()],loadChildren:()=>x.e(283).then(x.bind(x,1283)).then(_=>_.LAYOUT_ROUTES)}];let Ac=(()=>{class _{static{this.\u0275fac=function(m){return new(m||_)}}static{this.\u0275cmp=K.VBU({type:_,selectors:[["cv-root"]],standalone:!0,features:[K.aNF],decls:1,vars:0,template:function(m,R){1&m&&K.nrm(0,"router-outlet")},dependencies:[Qi.n3,Qi.iI],encapsulation:2,changeDetection:0})}}return _})();var ef=x(2815),Sy=x(9113);const Of=(0,xr.vy)({isDark:!1},(0,xr.on)(Sy.p,(_,{isDark:c})=>({..._,isDark:c})));var fm=x(573);const ug=(0,xr.vy)({language:"ru"},(0,xr.on)(fm.e,(_,{language:c})=>({..._,language:c})));var tf=x(6885);const h_=(0,xr.vy)({isLogout:!1},(0,xr.on)(tf.G,(_,{isLogout:c})=>({..._,isLogout:c})));var th=x(9253);(0,Vi.B8)(Ac,{providers:[(0,me.MW)(()=>(0,Fe.Wp)(Dt_firebase)),(0,Xo._q)(()=>(0,Le.xI)()),(0,Na.hV)(()=>(0,Ne.aU)()),function Nn(_,...c){return(0,Fe.KO)("angularfire",He.xv.full,"rtdb"),(0,K.EmA)([qe,ue,{provide:L,useFactory:X(_),multi:!0,deps:[K.SKi,K.zZn,He.u0,me.gL,[new K.Xx1,Xo.DF],[new K.Xx1,He.Jv],...c]}])}(()=>Es()),(0,K.oKB)(th.bf.initializeApp(Dt_firebase),b.h.forRoot({loader:{provide:b.Wr,useFactory:function Dy(_){return new $(_,"./assets/i18n/",".json")},deps:[Pe.Qq]},defaultLanguage:"ru"}),xr.md.forRoot({}),xr.md.forFeature(Is._F,Is.a$),xr.md.forFeature("darkMode",Of),xr.md.forFeature("language",ug),xr.md.forFeature("isLogout",h_),xr.md.forFeature("spinner",Kr),oy.forRoot([ki]),Ch.forRoot(),Zm.forRoot({entityMetadata:{},pluralNames:{}}),pf.register("ngsw-worker.js",{enabled:Dt_production,registrationStrategy:"registerWhenStable:30000"})),{provide:Pe.a7,useClass:ef.M,multi:!0},Xt.u,Oi,zi,function pt(){return(0,K.ngT)("NgEagerAnimations"),[...se]}(),tg({serializer:class q{constructor(){this.serialize=c=>({url:c.url,params:H(c.root,({params:a})=>a),queryParams:H(c.root,({queryParams:a})=>a),data:Ee(c.root)})}}}),(0,xr.NT)({router:function qg(_,c){const a=c;switch(a.type){case Qh:case tm:case Jm:return{state:a.payload.routerState,navigationId:a.payload.event.id};default:return _}}}),(0,Pe.$R)((0,Pe.Sx)()),(0,Qi.lh)(St),function ht(_={}){return(0,K.EmA)([Jh,pp,U,{provide:o_,useValue:_},{provide:ce,deps:[Mf,um],useFactory:we},{provide:Mf,useFactory:ze},{provide:um,deps:[o_],useFactory:l_},{provide:xr.h1,deps:[U],useFactory:nn},{provide:xr.Bh,useExisting:pp}])}({maxAge:25,logOnly:!(0,K.naY)(),autoPause:!0,trace:!1,traceLimit:75}),(0,Vi.$x)()]}).then(()=>{"serviceWorker"in navigator&&Dt_production&&navigator.serviceWorker.register("/ngsw-worker.js")}).catch(_=>console.log(_))},7696:(Cn,nt,x)=>{x.d(nt,{w:()=>b});var b=function($){return $.AUTH="auth",$.LAYOUT="layout",$.ABOUT_ME="about-me",$.EDUCATION="education",$.PROJECTS="projects",$.TECHNOLOGIES="technologies",$.WORK_EXPERIENCE="work-experience",$.CV="cv",$}(b||{})},4412:(Cn,nt,x)=>{x.d(nt,{t:()=>$});var b=x(1413);class $ extends b.B{constructor(H){super(),this._value=H}get value(){return this.getValue()}_subscribe(H){const Ee=super._subscribe(H);return!Ee.closed&&H.next(this._value),Ee}getValue(){const{hasError:H,thrownError:Ee,_value:Fe}=this;if(H)throw Ee;return this._throwIfClosed(),Fe}next(H){super.next(this._value=H)}}},1985:(Cn,nt,x)=>{x.d(nt,{c:()=>Ne});var b=x(7707),$=x(8359),q=x(3494),H=x(1203),Ee=x(1026),Fe=x(8071),Le=x(9786);let Ne=(()=>{class He{constructor(tt){tt&&(this._subscribe=tt)}lift(tt){const Rt=new He;return Rt.source=this,Rt.operator=tt,Rt}subscribe(tt,Rt,Ft){const Gt=function Ae(He){return He&&He instanceof b.vU||function K(He){return He&&(0,Fe.T)(He.next)&&(0,Fe.T)(He.error)&&(0,Fe.T)(He.complete)}(He)&&(0,$.Uv)(He)}(tt)?tt:new b.Ms(tt,Rt,Ft);return(0,Le.Y)(()=>{const{operator:Pt,source:hn}=this;Gt.add(Pt?Pt.call(Gt,hn):hn?this._subscribe(Gt):this._trySubscribe(Gt))}),Gt}_trySubscribe(tt){try{return this._subscribe(tt)}catch(Rt){tt.error(Rt)}}forEach(tt,Rt){return new(Rt=Pe(Rt))((Ft,Gt)=>{const Pt=new b.Ms({next:hn=>{try{tt(hn)}catch(Et){Gt(Et),Pt.unsubscribe()}},error:Gt,complete:Ft});this.subscribe(Pt)})}_subscribe(tt){var Rt;return null===(Rt=this.source)||void 0===Rt?void 0:Rt.subscribe(tt)}[q.s](){return this}pipe(...tt){return(0,H.m)(tt)(this)}toPromise(tt){return new(tt=Pe(tt))((Rt,Ft)=>{let Gt;this.subscribe(Pt=>Gt=Pt,Pt=>Ft(Pt),()=>Rt(Gt))})}}return He.create=ot=>new He(ot),He})();function Pe(He){var ot;return null!==(ot=He??Ee.$.Promise)&&void 0!==ot?ot:Promise}},2771:(Cn,nt,x)=>{x.d(nt,{m:()=>q});var b=x(1413),$=x(6129);class q extends b.B{constructor(Ee=1/0,Fe=1/0,Le=$.U){super(),this._bufferSize=Ee,this._windowTime=Fe,this._timestampProvider=Le,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=Fe===1/0,this._bufferSize=Math.max(1,Ee),this._windowTime=Math.max(1,Fe)}next(Ee){const{isStopped:Fe,_buffer:Le,_infiniteTimeWindow:Ne,_timestampProvider:Pe,_windowTime:K}=this;Fe||(Le.push(Ee),!Ne&&Le.push(Pe.now()+K)),this._trimBuffer(),super.next(Ee)}_subscribe(Ee){this._throwIfClosed(),this._trimBuffer();const Fe=this._innerSubscribe(Ee),{_infiniteTimeWindow:Le,_buffer:Ne}=this,Pe=Ne.slice();for(let K=0;K<Pe.length&&!Ee.closed;K+=Le?1:2)Ee.next(Pe[K]);return this._checkFinalizedStatuses(Ee),Fe}_trimBuffer(){const{_bufferSize:Ee,_timestampProvider:Fe,_buffer:Le,_infiniteTimeWindow:Ne}=this,Pe=(Ne?1:2)*Ee;if(Ee<1/0&&Pe<Le.length&&Le.splice(0,Le.length-Pe),!Ne){const K=Fe.now();let Ae=0;for(let He=1;He<Le.length&&Le[He]<=K;He+=2)Ae=He;Ae&&Le.splice(0,Ae+1)}}}},1413:(Cn,nt,x)=>{x.d(nt,{B:()=>Le});var b=x(1985),$=x(8359);const H=(0,x(1853).L)(Pe=>function(){Pe(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Ee=x(7908),Fe=x(9786);let Le=(()=>{class Pe extends b.c{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(Ae){const He=new Ne(this,this);return He.operator=Ae,He}_throwIfClosed(){if(this.closed)throw new H}next(Ae){(0,Fe.Y)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const He of this.currentObservers)He.next(Ae)}})}error(Ae){(0,Fe.Y)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=Ae;const{observers:He}=this;for(;He.length;)He.shift().error(Ae)}})}complete(){(0,Fe.Y)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:Ae}=this;for(;Ae.length;)Ae.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var Ae;return(null===(Ae=this.observers)||void 0===Ae?void 0:Ae.length)>0}_trySubscribe(Ae){return this._throwIfClosed(),super._trySubscribe(Ae)}_subscribe(Ae){return this._throwIfClosed(),this._checkFinalizedStatuses(Ae),this._innerSubscribe(Ae)}_innerSubscribe(Ae){const{hasError:He,isStopped:ot,observers:tt}=this;return He||ot?$.Kn:(this.currentObservers=null,tt.push(Ae),new $.yU(()=>{this.currentObservers=null,(0,Ee.o)(tt,Ae)}))}_checkFinalizedStatuses(Ae){const{hasError:He,thrownError:ot,isStopped:tt}=this;He?Ae.error(ot):tt&&Ae.complete()}asObservable(){const Ae=new b.c;return Ae.source=this,Ae}}return Pe.create=(K,Ae)=>new Ne(K,Ae),Pe})();class Ne extends Le{constructor(K,Ae){super(),this.destination=K,this.source=Ae}next(K){var Ae,He;null===(He=null===(Ae=this.destination)||void 0===Ae?void 0:Ae.next)||void 0===He||He.call(Ae,K)}error(K){var Ae,He;null===(He=null===(Ae=this.destination)||void 0===Ae?void 0:Ae.error)||void 0===He||He.call(Ae,K)}complete(){var K,Ae;null===(Ae=null===(K=this.destination)||void 0===K?void 0:K.complete)||void 0===Ae||Ae.call(K)}_subscribe(K){var Ae,He;return null!==(He=null===(Ae=this.source)||void 0===Ae?void 0:Ae.subscribe(K))&&void 0!==He?He:$.Kn}}},7707:(Cn,nt,x)=>{x.d(nt,{Ms:()=>Ft,vU:()=>He});var b=x(8071),$=x(8359),q=x(1026),H=x(5334),Ee=x(5343);const Fe=Pe("C",void 0,void 0);function Pe(kt,Ke,Qe){return{kind:kt,value:Ke,error:Qe}}var K=x(9270),Ae=x(9786);class He extends $.yU{constructor(Ke){super(),this.isStopped=!1,Ke?(this.destination=Ke,(0,$.Uv)(Ke)&&Ke.add(this)):this.destination=Et}static create(Ke,Qe,ct){return new Ft(Ke,Qe,ct)}next(Ke){this.isStopped?hn(function Ne(kt){return Pe("N",kt,void 0)}(Ke),this):this._next(Ke)}error(Ke){this.isStopped?hn(function Le(kt){return Pe("E",void 0,kt)}(Ke),this):(this.isStopped=!0,this._error(Ke))}complete(){this.isStopped?hn(Fe,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Ke){this.destination.next(Ke)}_error(Ke){try{this.destination.error(Ke)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const ot=Function.prototype.bind;function tt(kt,Ke){return ot.call(kt,Ke)}class Rt{constructor(Ke){this.partialObserver=Ke}next(Ke){const{partialObserver:Qe}=this;if(Qe.next)try{Qe.next(Ke)}catch(ct){Gt(ct)}}error(Ke){const{partialObserver:Qe}=this;if(Qe.error)try{Qe.error(Ke)}catch(ct){Gt(ct)}else Gt(Ke)}complete(){const{partialObserver:Ke}=this;if(Ke.complete)try{Ke.complete()}catch(Qe){Gt(Qe)}}}class Ft extends He{constructor(Ke,Qe,ct){let Ze;if(super(),(0,b.T)(Ke)||!Ke)Ze={next:Ke??void 0,error:Qe??void 0,complete:ct??void 0};else{let Ge;this&&q.$.useDeprecatedNextContext?(Ge=Object.create(Ke),Ge.unsubscribe=()=>this.unsubscribe(),Ze={next:Ke.next&&tt(Ke.next,Ge),error:Ke.error&&tt(Ke.error,Ge),complete:Ke.complete&&tt(Ke.complete,Ge)}):Ze=Ke}this.destination=new Rt(Ze)}}function Gt(kt){q.$.useDeprecatedSynchronousErrorHandling?(0,Ae.l)(kt):(0,H.m)(kt)}function hn(kt,Ke){const{onStoppedNotification:Qe}=q.$;Qe&&K.f.setTimeout(()=>Qe(kt,Ke))}const Et={closed:!0,next:Ee.l,error:function Pt(kt){throw kt},complete:Ee.l}},8359:(Cn,nt,x)=>{x.d(nt,{Kn:()=>Fe,yU:()=>Ee,Uv:()=>Le});var b=x(8071);const q=(0,x(1853).L)(Pe=>function(Ae){Pe(this),this.message=Ae?`${Ae.length} errors occurred during unsubscription:\n${Ae.map((He,ot)=>`${ot+1}) ${He.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=Ae});var H=x(7908);class Ee{constructor(K){this.initialTeardown=K,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let K;if(!this.closed){this.closed=!0;const{_parentage:Ae}=this;if(Ae)if(this._parentage=null,Array.isArray(Ae))for(const tt of Ae)tt.remove(this);else Ae.remove(this);const{initialTeardown:He}=this;if((0,b.T)(He))try{He()}catch(tt){K=tt instanceof q?tt.errors:[tt]}const{_finalizers:ot}=this;if(ot){this._finalizers=null;for(const tt of ot)try{Ne(tt)}catch(Rt){K=K??[],Rt instanceof q?K=[...K,...Rt.errors]:K.push(Rt)}}if(K)throw new q(K)}}add(K){var Ae;if(K&&K!==this)if(this.closed)Ne(K);else{if(K instanceof Ee){if(K.closed||K._hasParent(this))return;K._addParent(this)}(this._finalizers=null!==(Ae=this._finalizers)&&void 0!==Ae?Ae:[]).push(K)}}_hasParent(K){const{_parentage:Ae}=this;return Ae===K||Array.isArray(Ae)&&Ae.includes(K)}_addParent(K){const{_parentage:Ae}=this;this._parentage=Array.isArray(Ae)?(Ae.push(K),Ae):Ae?[Ae,K]:K}_removeParent(K){const{_parentage:Ae}=this;Ae===K?this._parentage=null:Array.isArray(Ae)&&(0,H.o)(Ae,K)}remove(K){const{_finalizers:Ae}=this;Ae&&(0,H.o)(Ae,K),K instanceof Ee&&K._removeParent(this)}}Ee.EMPTY=(()=>{const Pe=new Ee;return Pe.closed=!0,Pe})();const Fe=Ee.EMPTY;function Le(Pe){return Pe instanceof Ee||Pe&&"closed"in Pe&&(0,b.T)(Pe.remove)&&(0,b.T)(Pe.add)&&(0,b.T)(Pe.unsubscribe)}function Ne(Pe){(0,b.T)(Pe)?Pe():Pe.unsubscribe()}},1026:(Cn,nt,x)=>{x.d(nt,{$:()=>b});const b={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},17:(Cn,nt,x)=>{x.d(nt,{G:()=>Fe});var b=x(1985),$=x(8359),q=x(9898),H=x(4360),Ee=x(9974);class Fe extends b.c{constructor(Ne,Pe){super(),this.source=Ne,this.subjectFactory=Pe,this._subject=null,this._refCount=0,this._connection=null,(0,Ee.S)(Ne)&&(this.lift=Ne.lift)}_subscribe(Ne){return this.getSubject().subscribe(Ne)}getSubject(){const Ne=this._subject;return(!Ne||Ne.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:Ne}=this;this._subject=this._connection=null,Ne?.unsubscribe()}connect(){let Ne=this._connection;if(!Ne){Ne=this._connection=new $.yU;const Pe=this.getSubject();Ne.add(this.source.subscribe((0,H._)(Pe,void 0,()=>{this._teardown(),Pe.complete()},K=>{this._teardown(),Pe.error(K)},()=>this._teardown()))),Ne.closed&&(this._connection=null,Ne=$.yU.EMPTY)}return Ne}refCount(){return(0,q.B)()(this)}}},4572:(Cn,nt,x)=>{x.d(nt,{z:()=>K});var b=x(1985),$=x(3073),q=x(8455),H=x(3669),Ee=x(6450),Fe=x(9326),Le=x(8496),Ne=x(4360),Pe=x(5225);function K(...ot){const tt=(0,Fe.lI)(ot),Rt=(0,Fe.ms)(ot),{args:Ft,keys:Gt}=(0,$.D)(ot);if(0===Ft.length)return(0,q.H)([],tt);const Pt=new b.c(function Ae(ot,tt,Rt=H.D){return Ft=>{He(tt,()=>{const{length:Gt}=ot,Pt=new Array(Gt);let hn=Gt,Et=Gt;for(let kt=0;kt<Gt;kt++)He(tt,()=>{const Ke=(0,q.H)(ot[kt],tt);let Qe=!1;Ke.subscribe((0,Ne._)(Ft,ct=>{Pt[kt]=ct,Qe||(Qe=!0,Et--),Et||Ft.next(Rt(Pt.slice()))},()=>{--hn||Ft.complete()}))},Ft)},Ft)}}(Ft,tt,Gt?hn=>(0,Le.e)(Gt,hn):H.D));return Rt?Pt.pipe((0,Ee.I)(Rt)):Pt}function He(ot,tt,Rt){ot?(0,Pe.N)(Rt,ot,tt):tt()}},8793:(Cn,nt,x)=>{x.d(nt,{x:()=>Ee});var b=x(6365),q=x(9326),H=x(8455);function Ee(...Fe){return function $(){return(0,b.U)(1)}()((0,H.H)(Fe,(0,q.lI)(Fe)))}},9030:(Cn,nt,x)=>{x.d(nt,{v:()=>q});var b=x(1985),$=x(8750);function q(H){return new b.c(Ee=>{(0,$.Tg)(H()).subscribe(Ee)})}},983:(Cn,nt,x)=>{x.d(nt,{w:()=>$});const $=new(x(1985).c)(Ee=>Ee.complete())},7468:(Cn,nt,x)=>{x.d(nt,{p:()=>Ne});var b=x(1985),$=x(3073),q=x(8750),H=x(9326),Ee=x(4360),Fe=x(6450),Le=x(8496);function Ne(...Pe){const K=(0,H.ms)(Pe),{args:Ae,keys:He}=(0,$.D)(Pe),ot=new b.c(tt=>{const{length:Rt}=Ae;if(!Rt)return void tt.complete();const Ft=new Array(Rt);let Gt=Rt,Pt=Rt;for(let hn=0;hn<Rt;hn++){let Et=!1;(0,q.Tg)(Ae[hn]).subscribe((0,Ee._)(tt,kt=>{Et||(Et=!0,Pt--),Ft[hn]=kt},()=>Gt--,void 0,()=>{(!Gt||!Et)&&(Pt||tt.next(He?(0,Le.e)(He,Ft):Ft),tt.complete())}))}});return K?ot.pipe((0,Fe.I)(K)):ot}},8455:(Cn,nt,x)=>{x.d(nt,{H:()=>Ke});var b=x(8750),$=x(941),q=x(6745),Fe=x(1985),Ne=x(4761),Pe=x(8071),K=x(5225);function He(Qe,ct){if(!Qe)throw new Error("Iterable cannot be null");return new Fe.c(Ze=>{(0,K.N)(Ze,ct,()=>{const Ge=Qe[Symbol.asyncIterator]();(0,K.N)(Ze,ct,()=>{Ge.next().then(me=>{me.done?Ze.complete():Ze.next(me.value)})},0,!0)})})}var ot=x(5055),tt=x(9858),Rt=x(7441),Ft=x(5397),Gt=x(7953),Pt=x(591),hn=x(5196);function Ke(Qe,ct){return ct?function kt(Qe,ct){if(null!=Qe){if((0,ot.l)(Qe))return function H(Qe,ct){return(0,b.Tg)(Qe).pipe((0,q._)(ct),(0,$.Q)(ct))}(Qe,ct);if((0,Rt.X)(Qe))return function Le(Qe,ct){return new Fe.c(Ze=>{let Ge=0;return ct.schedule(function(){Ge===Qe.length?Ze.complete():(Ze.next(Qe[Ge++]),Ze.closed||this.schedule())})})}(Qe,ct);if((0,tt.y)(Qe))return function Ee(Qe,ct){return(0,b.Tg)(Qe).pipe((0,q._)(ct),(0,$.Q)(ct))}(Qe,ct);if((0,Gt.T)(Qe))return He(Qe,ct);if((0,Ft.x)(Qe))return function Ae(Qe,ct){return new Fe.c(Ze=>{let Ge;return(0,K.N)(Ze,ct,()=>{Ge=Qe[Ne.l](),(0,K.N)(Ze,ct,()=>{let me,ve;try{({value:me,done:ve}=Ge.next())}catch(At){return void Ze.error(At)}ve?Ze.complete():Ze.next(me)},0,!0)}),()=>(0,Pe.T)(Ge?.return)&&Ge.return()})}(Qe,ct);if((0,hn.U)(Qe))return function Et(Qe,ct){return He((0,hn.C)(Qe),ct)}(Qe,ct)}throw(0,Pt.L)(Qe)}(Qe,ct):(0,b.Tg)(Qe)}},3726:(Cn,nt,x)=>{x.d(nt,{R:()=>K});var b=x(8750),$=x(1985),q=x(1397),H=x(7441),Ee=x(8071),Fe=x(6450);const Le=["addListener","removeListener"],Ne=["addEventListener","removeEventListener"],Pe=["on","off"];function K(Rt,Ft,Gt,Pt){if((0,Ee.T)(Gt)&&(Pt=Gt,Gt=void 0),Pt)return K(Rt,Ft,Gt).pipe((0,Fe.I)(Pt));const[hn,Et]=function tt(Rt){return(0,Ee.T)(Rt.addEventListener)&&(0,Ee.T)(Rt.removeEventListener)}(Rt)?Ne.map(kt=>Ke=>Rt[kt](Ft,Ke,Gt)):function He(Rt){return(0,Ee.T)(Rt.addListener)&&(0,Ee.T)(Rt.removeListener)}(Rt)?Le.map(Ae(Rt,Ft)):function ot(Rt){return(0,Ee.T)(Rt.on)&&(0,Ee.T)(Rt.off)}(Rt)?Pe.map(Ae(Rt,Ft)):[];if(!hn&&(0,H.X)(Rt))return(0,q.Z)(kt=>K(kt,Ft,Gt))((0,b.Tg)(Rt));if(!hn)throw new TypeError("Invalid event target");return new $.c(kt=>{const Ke=(...Qe)=>kt.next(1<Qe.length?Qe:Qe[0]);return hn(Ke),()=>Et(Ke)})}function Ae(Rt,Ft){return Gt=>Pt=>Rt[Gt](Ft,Pt)}},8750:(Cn,nt,x)=>{x.d(nt,{Tg:()=>ot});var b=x(1635),$=x(7441),q=x(9858),H=x(1985),Ee=x(5055),Fe=x(7953),Le=x(591),Ne=x(5397),Pe=x(5196),K=x(8071),Ae=x(5334),He=x(3494);function ot(kt){if(kt instanceof H.c)return kt;if(null!=kt){if((0,Ee.l)(kt))return function tt(kt){return new H.c(Ke=>{const Qe=kt[He.s]();if((0,K.T)(Qe.subscribe))return Qe.subscribe(Ke);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(kt);if((0,$.X)(kt))return function Rt(kt){return new H.c(Ke=>{for(let Qe=0;Qe<kt.length&&!Ke.closed;Qe++)Ke.next(kt[Qe]);Ke.complete()})}(kt);if((0,q.y)(kt))return function Ft(kt){return new H.c(Ke=>{kt.then(Qe=>{Ke.closed||(Ke.next(Qe),Ke.complete())},Qe=>Ke.error(Qe)).then(null,Ae.m)})}(kt);if((0,Fe.T)(kt))return Pt(kt);if((0,Ne.x)(kt))return function Gt(kt){return new H.c(Ke=>{for(const Qe of kt)if(Ke.next(Qe),Ke.closed)return;Ke.complete()})}(kt);if((0,Pe.U)(kt))return function hn(kt){return Pt((0,Pe.C)(kt))}(kt)}throw(0,Le.L)(kt)}function Pt(kt){return new H.c(Ke=>{(function Et(kt,Ke){var Qe,ct,Ze,Ge;return(0,b.sH)(this,void 0,void 0,function*(){try{for(Qe=(0,b.xN)(kt);!(ct=yield Qe.next()).done;)if(Ke.next(ct.value),Ke.closed)return}catch(me){Ze={error:me}}finally{try{ct&&!ct.done&&(Ge=Qe.return)&&(yield Ge.call(Qe))}finally{if(Ze)throw Ze.error}}Ke.complete()})})(kt,Ke).catch(Qe=>Ke.error(Qe))})}},7786:(Cn,nt,x)=>{x.d(nt,{h:()=>Fe});var b=x(6365),$=x(8750),q=x(983),H=x(9326),Ee=x(8455);function Fe(...Le){const Ne=(0,H.lI)(Le),Pe=(0,H.R0)(Le,1/0),K=Le;return K.length?1===K.length?(0,$.Tg)(K[0]):(0,b.U)(Pe)((0,Ee.H)(K,Ne)):q.w}},7673:(Cn,nt,x)=>{x.d(nt,{of:()=>q});var b=x(9326),$=x(8455);function q(...H){const Ee=(0,b.lI)(H);return(0,$.H)(H,Ee)}},8810:(Cn,nt,x)=>{x.d(nt,{$:()=>q});var b=x(1985),$=x(8071);function q(H,Ee){const Fe=(0,$.T)(H)?H:()=>H,Le=Ne=>Ne.error(Fe());return new b.c(Ee?Ne=>Ee.schedule(Le,0,Ne):Le)}},1807:(Cn,nt,x)=>{x.d(nt,{O:()=>Ee});var b=x(1985),$=x(3236),q=x(9470),H=x(8211);function Ee(Fe=0,Le,Ne=$.b){let Pe=-1;return null!=Le&&((0,q.m)(Le)?Ne=Le:Pe=Le),new b.c(K=>{let Ae=(0,H.v)(Fe)?+Fe-Ne.now():Fe;Ae<0&&(Ae=0);let He=0;return Ne.schedule(function(){K.closed||(K.next(He++),0<=Pe?this.schedule(void 0,Pe):K.complete())},Ae)})}},4360:(Cn,nt,x)=>{x.d(nt,{H:()=>q,_:()=>$});var b=x(7707);function $(H,Ee,Fe,Le,Ne){return new q(H,Ee,Fe,Le,Ne)}class q extends b.vU{constructor(Ee,Fe,Le,Ne,Pe,K){super(Ee),this.onFinalize=Pe,this.shouldUnsubscribe=K,this._next=Fe?function(Ae){try{Fe(Ae)}catch(He){Ee.error(He)}}:super._next,this._error=Ne?function(Ae){try{Ne(Ae)}catch(He){Ee.error(He)}finally{this.unsubscribe()}}:super._error,this._complete=Le?function(){try{Le()}catch(Ae){Ee.error(Ae)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var Ee;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:Fe}=this;super.unsubscribe(),!Fe&&(null===(Ee=this.onFinalize)||void 0===Ee||Ee.call(this))}}}},9437:(Cn,nt,x)=>{x.d(nt,{W:()=>H});var b=x(8750),$=x(4360),q=x(9974);function H(Ee){return(0,q.N)((Fe,Le)=>{let K,Ne=null,Pe=!1;Ne=Fe.subscribe((0,$._)(Le,void 0,void 0,Ae=>{K=(0,b.Tg)(Ee(Ae,H(Ee)(Fe))),Ne?(Ne.unsubscribe(),Ne=null,K.subscribe(Le)):Pe=!0})),Pe&&(Ne.unsubscribe(),Ne=null,K.subscribe(Le))})}},274:(Cn,nt,x)=>{x.d(nt,{H:()=>q});var b=x(1397),$=x(8071);function q(H,Ee){return(0,$.T)(Ee)?(0,b.Z)(H,Ee,1):(0,b.Z)(H,1)}},152:(Cn,nt,x)=>{x.d(nt,{B:()=>H});var b=x(3236),$=x(9974),q=x(4360);function H(Ee,Fe=b.E){return(0,$.N)((Le,Ne)=>{let Pe=null,K=null,Ae=null;const He=()=>{if(Pe){Pe.unsubscribe(),Pe=null;const tt=K;K=null,Ne.next(tt)}};function ot(){const tt=Ae+Ee,Rt=Fe.now();if(Rt<tt)return Pe=this.schedule(void 0,tt-Rt),void Ne.add(Pe);He()}Le.subscribe((0,q._)(Ne,tt=>{K=tt,Ae=Fe.now(),Pe||(Pe=Fe.schedule(ot,Ee),Ne.add(Pe))},()=>{He(),Ne.complete()},void 0,()=>{K=Pe=null}))})}},9901:(Cn,nt,x)=>{x.d(nt,{U:()=>q});var b=x(9974),$=x(4360);function q(H){return(0,b.N)((Ee,Fe)=>{let Le=!1;Ee.subscribe((0,$._)(Fe,Ne=>{Le=!0,Fe.next(Ne)},()=>{Le||Fe.next(H),Fe.complete()}))})}},3294:(Cn,nt,x)=>{x.d(nt,{F:()=>H});var b=x(3669),$=x(9974),q=x(4360);function H(Fe,Le=b.D){return Fe=Fe??Ee,(0,$.N)((Ne,Pe)=>{let K,Ae=!0;Ne.subscribe((0,q._)(Pe,He=>{const ot=Le(He);(Ae||!Fe(K,ot))&&(Ae=!1,K=ot,Pe.next(He))}))})}function Ee(Fe,Le){return Fe===Le}},5964:(Cn,nt,x)=>{x.d(nt,{p:()=>q});var b=x(9974),$=x(4360);function q(H,Ee){return(0,b.N)((Fe,Le)=>{let Ne=0;Fe.subscribe((0,$._)(Le,Pe=>H.call(Ee,Pe,Ne++)&&Le.next(Pe)))})}},980:(Cn,nt,x)=>{x.d(nt,{j:()=>$});var b=x(9974);function $(q){return(0,b.N)((H,Ee)=>{try{H.subscribe(Ee)}finally{Ee.add(q)}})}},1594:(Cn,nt,x)=>{x.d(nt,{$:()=>Le});var b=x(9350),$=x(5964),q=x(6697),H=x(9901),Ee=x(3774),Fe=x(3669);function Le(Ne,Pe){const K=arguments.length>=2;return Ae=>Ae.pipe(Ne?(0,$.p)((He,ot)=>Ne(He,ot,Ae)):Fe.D,(0,q.s)(1),K?(0,H.U)(Pe):(0,Ee.v)(()=>new b.G))}},6354:(Cn,nt,x)=>{x.d(nt,{T:()=>q});var b=x(9974),$=x(4360);function q(H,Ee){return(0,b.N)((Fe,Le)=>{let Ne=0;Fe.subscribe((0,$._)(Le,Pe=>{Le.next(H.call(Ee,Pe,Ne++))}))})}},3703:(Cn,nt,x)=>{x.d(nt,{u:()=>$});var b=x(6354);function $(q){return(0,b.T)(()=>q)}},6365:(Cn,nt,x)=>{x.d(nt,{U:()=>q});var b=x(1397),$=x(3669);function q(H=1/0){return(0,b.Z)($.D,H)}},1397:(Cn,nt,x)=>{x.d(nt,{Z:()=>Ne});var b=x(6354),$=x(8750),q=x(9974),H=x(5225),Ee=x(4360),Le=x(8071);function Ne(Pe,K,Ae=1/0){return(0,Le.T)(K)?Ne((He,ot)=>(0,b.T)((tt,Rt)=>K(He,tt,ot,Rt))((0,$.Tg)(Pe(He,ot))),Ae):("number"==typeof K&&(Ae=K),(0,q.N)((He,ot)=>function Fe(Pe,K,Ae,He,ot,tt,Rt,Ft){const Gt=[];let Pt=0,hn=0,Et=!1;const kt=()=>{Et&&!Gt.length&&!Pt&&K.complete()},Ke=ct=>Pt<He?Qe(ct):Gt.push(ct),Qe=ct=>{tt&&K.next(ct),Pt++;let Ze=!1;(0,$.Tg)(Ae(ct,hn++)).subscribe((0,Ee._)(K,Ge=>{ot?.(Ge),tt?Ke(Ge):K.next(Ge)},()=>{Ze=!0},void 0,()=>{if(Ze)try{for(Pt--;Gt.length&&Pt<He;){const Ge=Gt.shift();Rt?(0,H.N)(K,Rt,()=>Qe(Ge)):Qe(Ge)}kt()}catch(Ge){K.error(Ge)}}))};return Pe.subscribe((0,Ee._)(K,Ke,()=>{Et=!0,kt()})),()=>{Ft?.()}}(He,ot,Pe,Ae)))}},941:(Cn,nt,x)=>{x.d(nt,{Q:()=>H});var b=x(5225),$=x(9974),q=x(4360);function H(Ee,Fe=0){return(0,$.N)((Le,Ne)=>{Le.subscribe((0,q._)(Ne,Pe=>(0,b.N)(Ne,Ee,()=>Ne.next(Pe),Fe),()=>(0,b.N)(Ne,Ee,()=>Ne.complete(),Fe),Pe=>(0,b.N)(Ne,Ee,()=>Ne.error(Pe),Fe)))})}},3946:(Cn,nt,x)=>{x.d(nt,{J:()=>q});var b=x(9974),$=x(4360);function q(){return(0,b.N)((H,Ee)=>{let Fe,Le=!1;H.subscribe((0,$._)(Ee,Ne=>{const Pe=Fe;Fe=Ne,Le&&Ee.next([Pe,Ne]),Le=!0}))})}},9898:(Cn,nt,x)=>{x.d(nt,{B:()=>q});var b=x(9974),$=x(4360);function q(){return(0,b.N)((H,Ee)=>{let Fe=null;H._refCount++;const Le=(0,$._)(Ee,void 0,void 0,void 0,()=>{if(!H||H._refCount<=0||0<--H._refCount)return void(Fe=null);const Ne=H._connection,Pe=Fe;Fe=null,Ne&&(!Pe||Ne===Pe)&&Ne.unsubscribe(),Ee.unsubscribe()});H.subscribe(Le),Le.closed||(Fe=H.connect())})}},2816:(Cn,nt,x)=>{x.d(nt,{S:()=>H});var b=x(9974),$=x(4360);function H(Ee,Fe){return(0,b.N)(function q(Ee,Fe,Le,Ne,Pe){return(K,Ae)=>{let He=Le,ot=Fe,tt=0;K.subscribe((0,$._)(Ae,Rt=>{const Ft=tt++;ot=He?Ee(ot,Rt,Ft):(He=!0,Rt),Ne&&Ae.next(ot)},Pe&&(()=>{He&&Ae.next(ot),Ae.complete()})))}}(Ee,Fe,arguments.length>=2,!0))}},7647:(Cn,nt,x)=>{x.d(nt,{u:()=>Ee});var b=x(8750),$=x(1413),q=x(7707),H=x(9974);function Ee(Le={}){const{connector:Ne=(()=>new $.B),resetOnError:Pe=!0,resetOnComplete:K=!0,resetOnRefCountZero:Ae=!0}=Le;return He=>{let ot,tt,Rt,Ft=0,Gt=!1,Pt=!1;const hn=()=>{tt?.unsubscribe(),tt=void 0},Et=()=>{hn(),ot=Rt=void 0,Gt=Pt=!1},kt=()=>{const Ke=ot;Et(),Ke?.unsubscribe()};return(0,H.N)((Ke,Qe)=>{Ft++,!Pt&&!Gt&&hn();const ct=Rt=Rt??Ne();Qe.add(()=>{Ft--,0===Ft&&!Pt&&!Gt&&(tt=Fe(kt,Ae))}),ct.subscribe(Qe),!ot&&Ft>0&&(ot=new q.Ms({next:Ze=>ct.next(Ze),error:Ze=>{Pt=!0,hn(),tt=Fe(Et,Pe,Ze),ct.error(Ze)},complete:()=>{Gt=!0,hn(),tt=Fe(Et,K),ct.complete()}}),(0,b.Tg)(Ke).subscribe(ot))})(He)}}function Fe(Le,Ne,...Pe){if(!0===Ne)return void Le();if(!1===Ne)return;const K=new q.Ms({next:()=>{K.unsubscribe(),Le()}});return(0,b.Tg)(Ne(...Pe)).subscribe(K)}},4668:(Cn,nt,x)=>{x.d(nt,{t:()=>q});var b=x(2771),$=x(7647);function q(H,Ee,Fe){let Le,Ne=!1;return H&&"object"==typeof H?({bufferSize:Le=1/0,windowTime:Ee=1/0,refCount:Ne=!1,scheduler:Fe}=H):Le=H??1/0,(0,$.u)({connector:()=>new b.m(Le,Ee,Fe),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:Ne})}},5245:(Cn,nt,x)=>{x.d(nt,{i:()=>$});var b=x(5964);function $(q){return(0,b.p)((H,Ee)=>q<=Ee)}},9172:(Cn,nt,x)=>{x.d(nt,{Z:()=>H});var b=x(8793),$=x(9326),q=x(9974);function H(...Ee){const Fe=(0,$.lI)(Ee);return(0,q.N)((Le,Ne)=>{(Fe?(0,b.x)(Ee,Le,Fe):(0,b.x)(Ee,Le)).subscribe(Ne)})}},6745:(Cn,nt,x)=>{x.d(nt,{_:()=>$});var b=x(9974);function $(q,H=0){return(0,b.N)((Ee,Fe)=>{Fe.add(q.schedule(()=>Ee.subscribe(Fe),H))})}},5558:(Cn,nt,x)=>{x.d(nt,{n:()=>H});var b=x(8750),$=x(9974),q=x(4360);function H(Ee,Fe){return(0,$.N)((Le,Ne)=>{let Pe=null,K=0,Ae=!1;const He=()=>Ae&&!Pe&&Ne.complete();Le.subscribe((0,q._)(Ne,ot=>{Pe?.unsubscribe();let tt=0;const Rt=K++;(0,b.Tg)(Ee(ot,Rt)).subscribe(Pe=(0,q._)(Ne,Ft=>Ne.next(Fe?Fe(ot,Ft,Rt,tt++):Ft),()=>{Pe=null,He()}))},()=>{Ae=!0,He()}))})}},6697:(Cn,nt,x)=>{x.d(nt,{s:()=>H});var b=x(983),$=x(9974),q=x(4360);function H(Ee){return Ee<=0?()=>b.w:(0,$.N)((Fe,Le)=>{let Ne=0;Fe.subscribe((0,q._)(Le,Pe=>{++Ne<=Ee&&(Le.next(Pe),Ee<=Ne&&Le.complete())}))})}},6977:(Cn,nt,x)=>{x.d(nt,{Q:()=>Ee});var b=x(9974),$=x(4360),q=x(8750),H=x(5343);function Ee(Fe){return(0,b.N)((Le,Ne)=>{(0,q.Tg)(Fe).subscribe((0,$._)(Ne,()=>Ne.complete(),H.l)),!Ne.closed&&Le.subscribe(Ne)})}},8141:(Cn,nt,x)=>{x.d(nt,{M:()=>Ee});var b=x(8071),$=x(9974),q=x(4360),H=x(3669);function Ee(Fe,Le,Ne){const Pe=(0,b.T)(Fe)||Le||Ne?{next:Fe,error:Le,complete:Ne}:Fe;return Pe?(0,$.N)((K,Ae)=>{var He;null===(He=Pe.subscribe)||void 0===He||He.call(Pe);let ot=!0;K.subscribe((0,q._)(Ae,tt=>{var Rt;null===(Rt=Pe.next)||void 0===Rt||Rt.call(Pe,tt),Ae.next(tt)},()=>{var tt;ot=!1,null===(tt=Pe.complete)||void 0===tt||tt.call(Pe),Ae.complete()},tt=>{var Rt;ot=!1,null===(Rt=Pe.error)||void 0===Rt||Rt.call(Pe,tt),Ae.error(tt)},()=>{var tt,Rt;ot&&(null===(tt=Pe.unsubscribe)||void 0===tt||tt.call(Pe)),null===(Rt=Pe.finalize)||void 0===Rt||Rt.call(Pe)}))}):H.D}},3774:(Cn,nt,x)=>{x.d(nt,{v:()=>H});var b=x(9350),$=x(9974),q=x(4360);function H(Fe=Ee){return(0,$.N)((Le,Ne)=>{let Pe=!1;Le.subscribe((0,q._)(Ne,K=>{Pe=!0,Ne.next(K)},()=>Pe?Ne.complete():Ne.error(Fe())))})}function Ee(){return new b.G}},2087:(Cn,nt,x)=>{x.d(nt,{w:()=>Pe});var b=x(3236),$=x(8211),q=x(9974),H=x(8750),Ee=x(1853),Fe=x(4360),Le=x(5225);const Ne=(0,Ee.L)(Ae=>function(ot=null){Ae(this),this.message="Timeout has occurred",this.name="TimeoutError",this.info=ot});function Pe(Ae,He){const{first:ot,each:tt,with:Rt=K,scheduler:Ft=He??b.E,meta:Gt=null}=(0,$.v)(Ae)?{first:Ae}:"number"==typeof Ae?{each:Ae}:Ae;if(null==ot&&null==tt)throw new TypeError("No timeout provided.");return(0,q.N)((Pt,hn)=>{let Et,kt,Ke=null,Qe=0;const ct=Ze=>{kt=(0,Le.N)(hn,Ft,()=>{try{Et.unsubscribe(),(0,H.Tg)(Rt({meta:Gt,lastValue:Ke,seen:Qe})).subscribe(hn)}catch(Ge){hn.error(Ge)}},Ze)};Et=Pt.subscribe((0,Fe._)(hn,Ze=>{kt?.unsubscribe(),Qe++,hn.next(Ke=Ze),tt>0&&ct(tt)},void 0,void 0,()=>{kt?.closed||kt?.unsubscribe(),Ke=null})),!Qe&&ct(null!=ot?"number"==typeof ot?ot:+ot-Ft.now():tt)})}function K(Ae){throw new Ne(Ae)}},3993:(Cn,nt,x)=>{x.d(nt,{E:()=>Le});var b=x(9974),$=x(4360),q=x(8750),H=x(3669),Ee=x(5343),Fe=x(9326);function Le(...Ne){const Pe=(0,Fe.ms)(Ne);return(0,b.N)((K,Ae)=>{const He=Ne.length,ot=new Array(He);let tt=Ne.map(()=>!1),Rt=!1;for(let Ft=0;Ft<He;Ft++)(0,q.Tg)(Ne[Ft]).subscribe((0,$._)(Ae,Gt=>{ot[Ft]=Gt,!Rt&&!tt[Ft]&&(tt[Ft]=!0,(Rt=tt.every(H.D))&&(tt=null))},Ee.l));K.subscribe((0,$._)(Ae,Ft=>{if(Rt){const Gt=[Ft,...ot];Ae.next(Pe?Pe(...Gt):Gt)}}))})}},6780:(Cn,nt,x)=>{x.d(nt,{R:()=>Ee});var b=x(8359);class $ extends b.yU{constructor(Le,Ne){super()}schedule(Le,Ne=0){return this}}const q={setInterval(Fe,Le,...Ne){const{delegate:Pe}=q;return Pe?.setInterval?Pe.setInterval(Fe,Le,...Ne):setInterval(Fe,Le,...Ne)},clearInterval(Fe){const{delegate:Le}=q;return(Le?.clearInterval||clearInterval)(Fe)},delegate:void 0};var H=x(7908);class Ee extends ${constructor(Le,Ne){super(Le,Ne),this.scheduler=Le,this.work=Ne,this.pending=!1}schedule(Le,Ne=0){var Pe;if(this.closed)return this;this.state=Le;const K=this.id,Ae=this.scheduler;return null!=K&&(this.id=this.recycleAsyncId(Ae,K,Ne)),this.pending=!0,this.delay=Ne,this.id=null!==(Pe=this.id)&&void 0!==Pe?Pe:this.requestAsyncId(Ae,this.id,Ne),this}requestAsyncId(Le,Ne,Pe=0){return q.setInterval(Le.flush.bind(Le,this),Pe)}recycleAsyncId(Le,Ne,Pe=0){if(null!=Pe&&this.delay===Pe&&!1===this.pending)return Ne;null!=Ne&&q.clearInterval(Ne)}execute(Le,Ne){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const Pe=this._execute(Le,Ne);if(Pe)return Pe;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(Le,Ne){let K,Pe=!1;try{this.work(Le)}catch(Ae){Pe=!0,K=Ae||new Error("Scheduled action threw falsy error")}if(Pe)return this.unsubscribe(),K}unsubscribe(){if(!this.closed){const{id:Le,scheduler:Ne}=this,{actions:Pe}=Ne;this.work=this.state=this.scheduler=null,this.pending=!1,(0,H.o)(Pe,this),null!=Le&&(this.id=this.recycleAsyncId(Ne,Le,null)),this.delay=null,super.unsubscribe()}}}},9687:(Cn,nt,x)=>{x.d(nt,{q:()=>q});var b=x(6129);class ${constructor(Ee,Fe=$.now){this.schedulerActionCtor=Ee,this.now=Fe}schedule(Ee,Fe=0,Le){return new this.schedulerActionCtor(this,Ee).schedule(Le,Fe)}}$.now=b.U.now;class q extends ${constructor(Ee,Fe=$.now){super(Ee,Fe),this.actions=[],this._active=!1}flush(Ee){const{actions:Fe}=this;if(this._active)return void Fe.push(Ee);let Le;this._active=!0;do{if(Le=Ee.execute(Ee.state,Ee.delay))break}while(Ee=Fe.shift());if(this._active=!1,Le){for(;Ee=Fe.shift();)Ee.unsubscribe();throw Le}}}},3236:(Cn,nt,x)=>{x.d(nt,{E:()=>q,b:()=>H});var b=x(6780);const q=new(x(9687).q)(b.R),H=q},6129:(Cn,nt,x)=>{x.d(nt,{U:()=>b});const b={now:()=>(b.delegate||Date).now(),delegate:void 0}},7242:(Cn,nt,x)=>{x.d(nt,{T:()=>Ee});var b=x(6780),q=x(9687);const Ee=new class H extends q.q{}(class $ extends b.R{constructor(Ne,Pe){super(Ne,Pe),this.scheduler=Ne,this.work=Pe}schedule(Ne,Pe=0){return Pe>0?super.schedule(Ne,Pe):(this.delay=Pe,this.state=Ne,this.scheduler.flush(this),this)}execute(Ne,Pe){return Pe>0||this.closed?super.execute(Ne,Pe):this._execute(Ne,Pe)}requestAsyncId(Ne,Pe,K=0){return null!=K&&K>0||null==K&&this.delay>0?super.requestAsyncId(Ne,Pe,K):(Ne.flush(this),0)}})},9270:(Cn,nt,x)=>{x.d(nt,{f:()=>b});const b={setTimeout($,q,...H){const{delegate:Ee}=b;return Ee?.setTimeout?Ee.setTimeout($,q,...H):setTimeout($,q,...H)},clearTimeout($){const{delegate:q}=b;return(q?.clearTimeout||clearTimeout)($)},delegate:void 0}},4761:(Cn,nt,x)=>{x.d(nt,{l:()=>$});const $=function b(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},3494:(Cn,nt,x)=>{x.d(nt,{s:()=>b});const b="function"==typeof Symbol&&Symbol.observable||"@@observable"},9350:(Cn,nt,x)=>{x.d(nt,{G:()=>$});const $=(0,x(1853).L)(q=>function(){q(this),this.name="EmptyError",this.message="no elements in sequence"})},9326:(Cn,nt,x)=>{x.d(nt,{R0:()=>Fe,lI:()=>Ee,ms:()=>H});var b=x(8071),$=x(9470);function q(Le){return Le[Le.length-1]}function H(Le){return(0,b.T)(q(Le))?Le.pop():void 0}function Ee(Le){return(0,$.m)(q(Le))?Le.pop():void 0}function Fe(Le,Ne){return"number"==typeof q(Le)?Le.pop():Ne}},3073:(Cn,nt,x)=>{x.d(nt,{D:()=>Ee});const{isArray:b}=Array,{getPrototypeOf:$,prototype:q,keys:H}=Object;function Ee(Le){if(1===Le.length){const Ne=Le[0];if(b(Ne))return{args:Ne,keys:null};if(function Fe(Le){return Le&&"object"==typeof Le&&$(Le)===q}(Ne)){const Pe=H(Ne);return{args:Pe.map(K=>Ne[K]),keys:Pe}}}return{args:Le,keys:null}}},7908:(Cn,nt,x)=>{function b($,q){if($){const H=$.indexOf(q);0<=H&&$.splice(H,1)}}x.d(nt,{o:()=>b})},1853:(Cn,nt,x)=>{function b($){const H=$(Ee=>{Error.call(Ee),Ee.stack=(new Error).stack});return H.prototype=Object.create(Error.prototype),H.prototype.constructor=H,H}x.d(nt,{L:()=>b})},8496:(Cn,nt,x)=>{function b($,q){return $.reduce((H,Ee,Fe)=>(H[Ee]=q[Fe],H),{})}x.d(nt,{e:()=>b})},9786:(Cn,nt,x)=>{x.d(nt,{Y:()=>q,l:()=>H});var b=x(1026);let $=null;function q(Ee){if(b.$.useDeprecatedSynchronousErrorHandling){const Fe=!$;if(Fe&&($={errorThrown:!1,error:null}),Ee(),Fe){const{errorThrown:Le,error:Ne}=$;if($=null,Le)throw Ne}}else Ee()}function H(Ee){b.$.useDeprecatedSynchronousErrorHandling&&$&&($.errorThrown=!0,$.error=Ee)}},5225:(Cn,nt,x)=>{function b($,q,H,Ee=0,Fe=!1){const Le=q.schedule(function(){H(),Fe?$.add(this.schedule(null,Ee)):this.unsubscribe()},Ee);if($.add(Le),!Fe)return Le}x.d(nt,{N:()=>b})},3669:(Cn,nt,x)=>{function b($){return $}x.d(nt,{D:()=>b})},7441:(Cn,nt,x)=>{x.d(nt,{X:()=>b});const b=$=>$&&"number"==typeof $.length&&"function"!=typeof $},7953:(Cn,nt,x)=>{x.d(nt,{T:()=>$});var b=x(8071);function $(q){return Symbol.asyncIterator&&(0,b.T)(q?.[Symbol.asyncIterator])}},8211:(Cn,nt,x)=>{function b($){return $ instanceof Date&&!isNaN($)}x.d(nt,{v:()=>b})},8071:(Cn,nt,x)=>{function b($){return"function"==typeof $}x.d(nt,{T:()=>b})},5055:(Cn,nt,x)=>{x.d(nt,{l:()=>q});var b=x(3494),$=x(8071);function q(H){return(0,$.T)(H[b.s])}},5397:(Cn,nt,x)=>{x.d(nt,{x:()=>q});var b=x(4761),$=x(8071);function q(H){return(0,$.T)(H?.[b.l])}},4402:(Cn,nt,x)=>{x.d(nt,{A:()=>q});var b=x(1985),$=x(8071);function q(H){return!!H&&(H instanceof b.c||(0,$.T)(H.lift)&&(0,$.T)(H.subscribe))}},9858:(Cn,nt,x)=>{x.d(nt,{y:()=>$});var b=x(8071);function $(q){return(0,b.T)(q?.then)}},5196:(Cn,nt,x)=>{x.d(nt,{C:()=>q,U:()=>H});var b=x(1635),$=x(8071);function q(Ee){return(0,b.AQ)(this,arguments,function*(){const Le=Ee.getReader();try{for(;;){const{value:Ne,done:Pe}=yield(0,b.N3)(Le.read());if(Pe)return yield(0,b.N3)(void 0);yield yield(0,b.N3)(Ne)}}finally{Le.releaseLock()}})}function H(Ee){return(0,$.T)(Ee?.getReader)}},9470:(Cn,nt,x)=>{x.d(nt,{m:()=>$});var b=x(8071);function $(q){return q&&(0,b.T)(q.schedule)}},9974:(Cn,nt,x)=>{x.d(nt,{N:()=>q,S:()=>$});var b=x(8071);function $(H){return(0,b.T)(H?.lift)}function q(H){return Ee=>{if($(Ee))return Ee.lift(function(Fe){try{return H(Fe,this)}catch(Le){this.error(Le)}});throw new TypeError("Unable to lift unknown Observable type")}}},6450:(Cn,nt,x)=>{x.d(nt,{I:()=>H});var b=x(6354);const{isArray:$}=Array;function H(Ee){return(0,b.T)(Fe=>function q(Ee,Fe){return $(Fe)?Ee(...Fe):Ee(Fe)}(Ee,Fe))}},5343:(Cn,nt,x)=>{function b(){}x.d(nt,{l:()=>b})},1203:(Cn,nt,x)=>{x.d(nt,{F:()=>$,m:()=>q});var b=x(3669);function $(...H){return q(H)}function q(H){return 0===H.length?b.D:1===H.length?H[0]:function(Fe){return H.reduce((Le,Ne)=>Ne(Le),Fe)}}},5334:(Cn,nt,x)=>{x.d(nt,{m:()=>q});var b=x(1026),$=x(9270);function q(H){$.f.setTimeout(()=>{const{onUnhandledError:Ee}=b.$;if(!Ee)throw H;Ee(H)})}},591:(Cn,nt,x)=>{function b($){return new TypeError(`You provided ${null!==$&&"object"==typeof $?"an invalid object":`'${$}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}x.d(nt,{L:()=>b})},4523:(Cn,nt,x)=>{function b(q,H,Ee,Fe,Le,Ne,Pe){try{var K=q[Ne](Pe),Ae=K.value}catch(He){return void Ee(He)}K.done?H(Ae):Promise.resolve(Ae).then(Fe,Le)}function $(q){return function(){var H=this,Ee=arguments;return new Promise(function(Fe,Le){var Ne=q.apply(H,Ee);function Pe(Ae){b(Ne,Fe,Le,Pe,K,"next",Ae)}function K(Ae){b(Ne,Fe,Le,Pe,K,"throw",Ae)}Pe(void 0)})}}x.d(nt,{A:()=>$})},9969:(Cn,nt,x)=>{x.d(nt,{FX:()=>Ge,If:()=>b,K2:()=>Fe,MA:()=>He,Os:()=>Ee,P:()=>tt,hZ:()=>q,i0:()=>H,iF:()=>Le,kY:()=>K,kp:()=>$,sf:()=>ct,ui:()=>Ze,wk:()=>Ne});var b=function(me){return me[me.State=0]="State",me[me.Transition=1]="Transition",me[me.Sequence=2]="Sequence",me[me.Group=3]="Group",me[me.Animate=4]="Animate",me[me.Keyframes=5]="Keyframes",me[me.Style=6]="Style",me[me.Trigger=7]="Trigger",me[me.Reference=8]="Reference",me[me.AnimateChild=9]="AnimateChild",me[me.AnimateRef=10]="AnimateRef",me[me.Query=11]="Query",me[me.Stagger=12]="Stagger",me}(b||{});const $="*";function q(me,ve){return{type:b.Trigger,name:me,definitions:ve,options:{}}}function H(me,ve=null){return{type:b.Animate,styles:ve,timings:me}}function Ee(me,ve=null){return{type:b.Group,steps:me,options:ve}}function Fe(me,ve=null){return{type:b.Sequence,steps:me,options:ve}}function Le(me){return{type:b.Style,styles:me,offset:null}}function Ne(me,ve,At){return{type:b.State,name:me,styles:ve,options:At}}function K(me,ve,At=null){return{type:b.Transition,expr:me,animation:ve,options:At}}function He(me=null){return{type:b.AnimateChild,options:me}}function tt(me,ve,At=null){return{type:b.Query,selector:me,animation:ve,options:At}}class ct{constructor(ve=0,At=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=ve+At}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(ve=>ve()),this._onDoneFns=[])}onStart(ve){this._originalOnStartFns.push(ve),this._onStartFns.push(ve)}onDone(ve){this._originalOnDoneFns.push(ve),this._onDoneFns.push(ve)}onDestroy(ve){this._onDestroyFns.push(ve)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(ve=>ve()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(ve=>ve()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(ve){this._position=this.totalTime?ve*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(ve){const At="start"==ve?this._onStartFns:this._onDoneFns;At.forEach(Jt=>Jt()),At.length=0}}class Ze{constructor(ve){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=ve;let At=0,Jt=0,Nt=0;const Yt=this.players.length;0==Yt?queueMicrotask(()=>this._onFinish()):this.players.forEach(an=>{an.onDone(()=>{++At==Yt&&this._onFinish()}),an.onDestroy(()=>{++Jt==Yt&&this._onDestroy()}),an.onStart(()=>{++Nt==Yt&&this._onStart()})}),this.totalTime=this.players.reduce((an,$t)=>Math.max(an,$t.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(ve=>ve()),this._onDoneFns=[])}init(){this.players.forEach(ve=>ve.init())}onStart(ve){this._onStartFns.push(ve)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(ve=>ve()),this._onStartFns=[])}onDone(ve){this._onDoneFns.push(ve)}onDestroy(ve){this._onDestroyFns.push(ve)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(ve=>ve.play())}pause(){this.players.forEach(ve=>ve.pause())}restart(){this.players.forEach(ve=>ve.restart())}finish(){this._onFinish(),this.players.forEach(ve=>ve.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(ve=>ve.destroy()),this._onDestroyFns.forEach(ve=>ve()),this._onDestroyFns=[])}reset(){this.players.forEach(ve=>ve.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(ve){const At=ve*this.totalTime;this.players.forEach(Jt=>{const Nt=Jt.totalTime?Math.min(1,At/Jt.totalTime):1;Jt.setPosition(Nt)})}getPosition(){const ve=this.players.reduce((At,Jt)=>null===At||Jt.totalTime>At.totalTime?Jt:At,null);return null!=ve?ve.getPosition():0}beforeDestroy(){this.players.forEach(ve=>{ve.beforeDestroy&&ve.beforeDestroy()})}triggerCallback(ve){const At="start"==ve?this._onStartFns:this._onDoneFns;At.forEach(Jt=>Jt()),At.length=0}}const Ge="!"},851:(Cn,nt,x)=>{x.d(nt,{Pd:()=>Te,vr:()=>Nt,FN:()=>xt,GX:()=>$n,Q_:()=>pn,Z7:()=>et,Ai:()=>ar,_G:()=>rn,w6:()=>fn});var b=x(177),$=x(4438),q=x(6860),H=x(1413),Fe=(x(8359),x(4412)),Le=x(7673),Ne=x(7336),ot=(x(8141),x(152),x(5964),x(6354),x(6697)),tt=x(5245),Rt=x(3294),Ft=x(6977);let Gt=(()=>{class ne{create(Q){return typeof MutationObserver>"u"?null:new MutationObserver(Q)}static{this.\u0275fac=function(oe){return new(oe||ne)}}static{this.\u0275prov=$.jDH({token:ne,factory:ne.\u0275fac,providedIn:"root"})}}return ne})(),Et=(()=>{class ne{static{this.\u0275fac=function(oe){return new(oe||ne)}}static{this.\u0275mod=$.$C({type:ne})}static{this.\u0275inj=$.G2t({providers:[Gt]})}}return ne})();var kt=x(4085),Ke=x(9327);function Ge(ne,J){return(ne.getAttribute(J)||"").match(/\S+/g)||[]}const ve="cdk-describedby-message",At="cdk-describedby-host";let Jt=0,Nt=(()=>{class ne{constructor(Q,oe){this._platform=oe,this._messageRegistry=new Map,this._messagesContainer=null,this._id=""+Jt++,this._document=Q,this._id=(0,$.WQX)($.sZ2)+"-"+Jt++}describe(Q,oe,ee){if(!this._canBeDescribed(Q,oe))return;const pe=Yt(oe,ee);"string"!=typeof oe?(an(oe,this._id),this._messageRegistry.set(pe,{messageElement:oe,referenceCount:0})):this._messageRegistry.has(pe)||this._createMessageElement(oe,ee),this._isElementDescribedByMessage(Q,pe)||this._addMessageReference(Q,pe)}removeDescription(Q,oe,ee){if(!oe||!this._isElementNode(Q))return;const pe=Yt(oe,ee);if(this._isElementDescribedByMessage(Q,pe)&&this._removeMessageReference(Q,pe),"string"==typeof oe){const Oe=this._messageRegistry.get(pe);Oe&&0===Oe.referenceCount&&this._deleteMessageElement(pe)}0===this._messagesContainer?.childNodes.length&&(this._messagesContainer.remove(),this._messagesContainer=null)}ngOnDestroy(){const Q=this._document.querySelectorAll(`[${At}="${this._id}"]`);for(let oe=0;oe<Q.length;oe++)this._removeCdkDescribedByReferenceIds(Q[oe]),Q[oe].removeAttribute(At);this._messagesContainer?.remove(),this._messagesContainer=null,this._messageRegistry.clear()}_createMessageElement(Q,oe){const ee=this._document.createElement("div");an(ee,this._id),ee.textContent=Q,oe&&ee.setAttribute("role",oe),this._createMessagesContainer(),this._messagesContainer.appendChild(ee),this._messageRegistry.set(Yt(Q,oe),{messageElement:ee,referenceCount:0})}_deleteMessageElement(Q){this._messageRegistry.get(Q)?.messageElement?.remove(),this._messageRegistry.delete(Q)}_createMessagesContainer(){if(this._messagesContainer)return;const Q="cdk-describedby-message-container",oe=this._document.querySelectorAll(`.${Q}[platform="server"]`);for(let pe=0;pe<oe.length;pe++)oe[pe].remove();const ee=this._document.createElement("div");ee.style.visibility="hidden",ee.classList.add(Q),ee.classList.add("cdk-visually-hidden"),this._platform&&!this._platform.isBrowser&&ee.setAttribute("platform","server"),this._document.body.appendChild(ee),this._messagesContainer=ee}_removeCdkDescribedByReferenceIds(Q){const oe=Ge(Q,"aria-describedby").filter(ee=>0!=ee.indexOf(ve));Q.setAttribute("aria-describedby",oe.join(" "))}_addMessageReference(Q,oe){const ee=this._messageRegistry.get(oe);(function ct(ne,J,Q){const oe=Ge(ne,J);oe.some(ee=>ee.trim()==Q.trim())||(oe.push(Q.trim()),ne.setAttribute(J,oe.join(" ")))})(Q,"aria-describedby",ee.messageElement.id),Q.setAttribute(At,this._id),ee.referenceCount++}_removeMessageReference(Q,oe){const ee=this._messageRegistry.get(oe);ee.referenceCount--,function Ze(ne,J,Q){const ee=Ge(ne,J).filter(pe=>pe!=Q.trim());ee.length?ne.setAttribute(J,ee.join(" ")):ne.removeAttribute(J)}(Q,"aria-describedby",ee.messageElement.id),Q.removeAttribute(At)}_isElementDescribedByMessage(Q,oe){const ee=Ge(Q,"aria-describedby"),pe=this._messageRegistry.get(oe),Oe=pe&&pe.messageElement.id;return!!Oe&&-1!=ee.indexOf(Oe)}_canBeDescribed(Q,oe){if(!this._isElementNode(Q))return!1;if(oe&&"object"==typeof oe)return!0;const ee=null==oe?"":`${oe}`.trim(),pe=Q.getAttribute("aria-label");return!(!ee||pe&&pe.trim()===ee)}_isElementNode(Q){return Q.nodeType===this._document.ELEMENT_NODE}static{this.\u0275fac=function(oe){return new(oe||ne)($.KVO(b.qQ),$.KVO(q.OD))}}static{this.\u0275prov=$.jDH({token:ne,factory:ne.\u0275fac,providedIn:"root"})}}return ne})();function Yt(ne,J){return"string"==typeof ne?`${J||""}/${ne}`:ne}function an(ne,J){ne.id||(ne.id=`${ve}-${J}-${Jt++}`)}let et=(()=>{class ne{constructor(Q){this._platform=Q}isDisabled(Q){return Q.hasAttribute("disabled")}isVisible(Q){return function Mt(ne){return!!(ne.offsetWidth||ne.offsetHeight||"function"==typeof ne.getClientRects&&ne.getClientRects().length)}(Q)&&"visible"===getComputedStyle(Q).visibility}isTabbable(Q){if(!this._platform.isBrowser)return!1;const oe=function gt(ne){try{return ne.frameElement}catch{return null}}(function Rr(ne){return ne.ownerDocument&&ne.ownerDocument.defaultView||window}(Q));if(oe&&(-1===sr(oe)||!this.isVisible(oe)))return!1;let ee=Q.nodeName.toLowerCase(),pe=sr(Q);return Q.hasAttribute("contenteditable")?-1!==pe:!("iframe"===ee||"object"===ee||this._platform.WEBKIT&&this._platform.IOS&&!function fr(ne){let J=ne.nodeName.toLowerCase(),Q="input"===J&&ne.type;return"text"===Q||"password"===Q||"select"===J||"textarea"===J}(Q))&&("audio"===ee?!!Q.hasAttribute("controls")&&-1!==pe:"video"===ee?-1!==pe&&(null!==pe||this._platform.FIREFOX||Q.hasAttribute("controls")):Q.tabIndex>=0)}isFocusable(Q,oe){return function Jn(ne){return!function Ct(ne){return function nr(ne){return"input"==ne.nodeName.toLowerCase()}(ne)&&"hidden"==ne.type}(ne)&&(function ft(ne){let J=ne.nodeName.toLowerCase();return"input"===J||"select"===J||"button"===J||"textarea"===J}(ne)||function ln(ne){return function hr(ne){return"a"==ne.nodeName.toLowerCase()}(ne)&&ne.hasAttribute("href")}(ne)||ne.hasAttribute("contenteditable")||Cr(ne))}(Q)&&!this.isDisabled(Q)&&(oe?.ignoreVisibility||this.isVisible(Q))}static{this.\u0275fac=function(oe){return new(oe||ne)($.KVO(q.OD))}}static{this.\u0275prov=$.jDH({token:ne,factory:ne.\u0275fac,providedIn:"root"})}}return ne})();function Cr(ne){if(!ne.hasAttribute("tabindex")||void 0===ne.tabIndex)return!1;let J=ne.getAttribute("tabindex");return!(!J||isNaN(parseInt(J,10)))}function sr(ne){if(!Cr(ne))return null;const J=parseInt(ne.getAttribute("tabindex")||"",10);return isNaN(J)?-1:J}class vr{get enabled(){return this._enabled}set enabled(J){this._enabled=J,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(J,this._startAnchor),this._toggleAnchorTabIndex(J,this._endAnchor))}constructor(J,Q,oe,ee,pe=!1){this._element=J,this._checker=Q,this._ngZone=oe,this._document=ee,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,pe||this.attachAnchors()}destroy(){const J=this._startAnchor,Q=this._endAnchor;J&&(J.removeEventListener("focus",this.startAnchorListener),J.remove()),Q&&(Q.removeEventListener("focus",this.endAnchorListener),Q.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(J){return new Promise(Q=>{this._executeOnStable(()=>Q(this.focusInitialElement(J)))})}focusFirstTabbableElementWhenReady(J){return new Promise(Q=>{this._executeOnStable(()=>Q(this.focusFirstTabbableElement(J)))})}focusLastTabbableElementWhenReady(J){return new Promise(Q=>{this._executeOnStable(()=>Q(this.focusLastTabbableElement(J)))})}_getRegionBoundary(J){const Q=this._element.querySelectorAll(`[cdk-focus-region-${J}], [cdkFocusRegion${J}], [cdk-focus-${J}]`);return"start"==J?Q.length?Q[0]:this._getFirstTabbableElement(this._element):Q.length?Q[Q.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(J){const Q=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(Q){if(!this._checker.isFocusable(Q)){const oe=this._getFirstTabbableElement(Q);return oe?.focus(J),!!oe}return Q.focus(J),!0}return this.focusFirstTabbableElement(J)}focusFirstTabbableElement(J){const Q=this._getRegionBoundary("start");return Q&&Q.focus(J),!!Q}focusLastTabbableElement(J){const Q=this._getRegionBoundary("end");return Q&&Q.focus(J),!!Q}hasAttached(){return this._hasAttached}_getFirstTabbableElement(J){if(this._checker.isFocusable(J)&&this._checker.isTabbable(J))return J;const Q=J.children;for(let oe=0;oe<Q.length;oe++){const ee=Q[oe].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(Q[oe]):null;if(ee)return ee}return null}_getLastTabbableElement(J){if(this._checker.isFocusable(J)&&this._checker.isTabbable(J))return J;const Q=J.children;for(let oe=Q.length-1;oe>=0;oe--){const ee=Q[oe].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(Q[oe]):null;if(ee)return ee}return null}_createAnchor(){const J=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,J),J.classList.add("cdk-visually-hidden"),J.classList.add("cdk-focus-trap-anchor"),J.setAttribute("aria-hidden","true"),J}_toggleAnchorTabIndex(J,Q){J?Q.setAttribute("tabindex","0"):Q.removeAttribute("tabindex")}toggleAnchors(J){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(J,this._startAnchor),this._toggleAnchorTabIndex(J,this._endAnchor))}_executeOnStable(J){this._ngZone.isStable?J():this._ngZone.onStable.pipe((0,ot.s)(1)).subscribe(J)}}let $n=(()=>{class ne{constructor(Q,oe,ee){this._checker=Q,this._ngZone=oe,this._document=ee}create(Q,oe=!1){return new vr(Q,this._checker,this._ngZone,this._document,oe)}static{this.\u0275fac=function(oe){return new(oe||ne)($.KVO(et),$.KVO($.SKi),$.KVO(b.qQ))}}static{this.\u0275prov=$.jDH({token:ne,factory:ne.\u0275fac,providedIn:"root"})}}return ne})();function rn(ne){return 0===ne.buttons||0===ne.detail}function fn(ne){const J=ne.touches&&ne.touches[0]||ne.changedTouches&&ne.changedTouches[0];return!(!J||-1!==J.identifier||null!=J.radiusX&&1!==J.radiusX||null!=J.radiusY&&1!==J.radiusY)}const mn=new $.nKC("cdk-input-modality-detector-options"),Ut={ignoreKeys:[Ne.A$,Ne.W3,Ne.eg,Ne.Ge,Ne.FX]},$e=(0,q.BQ)({passive:!0,capture:!0});let _t=(()=>{class ne{get mostRecentModality(){return this._modality.value}constructor(Q,oe,ee,pe){this._platform=Q,this._mostRecentTarget=null,this._modality=new Fe.t(null),this._lastTouchMs=0,this._onKeydown=Oe=>{this._options?.ignoreKeys?.some(Tt=>Tt===Oe.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=(0,q.Fb)(Oe))},this._onMousedown=Oe=>{Date.now()-this._lastTouchMs<650||(this._modality.next(rn(Oe)?"keyboard":"mouse"),this._mostRecentTarget=(0,q.Fb)(Oe))},this._onTouchstart=Oe=>{fn(Oe)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=(0,q.Fb)(Oe))},this._options={...Ut,...pe},this.modalityDetected=this._modality.pipe((0,tt.i)(1)),this.modalityChanged=this.modalityDetected.pipe((0,Rt.F)()),Q.isBrowser&&oe.runOutsideAngular(()=>{ee.addEventListener("keydown",this._onKeydown,$e),ee.addEventListener("mousedown",this._onMousedown,$e),ee.addEventListener("touchstart",this._onTouchstart,$e)})}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,$e),document.removeEventListener("mousedown",this._onMousedown,$e),document.removeEventListener("touchstart",this._onTouchstart,$e))}static{this.\u0275fac=function(oe){return new(oe||ne)($.KVO(q.OD),$.KVO($.SKi),$.KVO(b.qQ),$.KVO(mn,8))}}static{this.\u0275prov=$.jDH({token:ne,factory:ne.\u0275fac,providedIn:"root"})}}return ne})();const gn=new $.nKC("liveAnnouncerElement",{providedIn:"root",factory:function An(){return null}}),ir=new $.nKC("LIVE_ANNOUNCER_DEFAULT_OPTIONS");let yr=0,ar=(()=>{class ne{constructor(Q,oe,ee,pe){this._ngZone=oe,this._defaultOptions=pe,this._document=ee,this._liveElement=Q||this._createLiveElement()}announce(Q,...oe){const ee=this._defaultOptions;let pe,Oe;return 1===oe.length&&"number"==typeof oe[0]?Oe=oe[0]:[pe,Oe]=oe,this.clear(),clearTimeout(this._previousTimeout),pe||(pe=ee&&ee.politeness?ee.politeness:"polite"),null==Oe&&ee&&(Oe=ee.duration),this._liveElement.setAttribute("aria-live",pe),this._liveElement.id&&this._exposeAnnouncerToModals(this._liveElement.id),this._ngZone.runOutsideAngular(()=>(this._currentPromise||(this._currentPromise=new Promise(Tt=>this._currentResolve=Tt)),clearTimeout(this._previousTimeout),this._previousTimeout=setTimeout(()=>{this._liveElement.textContent=Q,"number"==typeof Oe&&(this._previousTimeout=setTimeout(()=>this.clear(),Oe)),this._currentResolve(),this._currentPromise=this._currentResolve=void 0},100),this._currentPromise))}clear(){this._liveElement&&(this._liveElement.textContent="")}ngOnDestroy(){clearTimeout(this._previousTimeout),this._liveElement?.remove(),this._liveElement=null,this._currentResolve?.(),this._currentPromise=this._currentResolve=void 0}_createLiveElement(){const Q="cdk-live-announcer-element",oe=this._document.getElementsByClassName(Q),ee=this._document.createElement("div");for(let pe=0;pe<oe.length;pe++)oe[pe].remove();return ee.classList.add(Q),ee.classList.add("cdk-visually-hidden"),ee.setAttribute("aria-atomic","true"),ee.setAttribute("aria-live","polite"),ee.id="cdk-live-announcer-"+yr++,this._document.body.appendChild(ee),ee}_exposeAnnouncerToModals(Q){const oe=this._document.querySelectorAll('body > .cdk-overlay-container [aria-modal="true"]');for(let ee=0;ee<oe.length;ee++){const pe=oe[ee],Oe=pe.getAttribute("aria-owns");Oe?-1===Oe.indexOf(Q)&&pe.setAttribute("aria-owns",Oe+" "+Q):pe.setAttribute("aria-owns",Q)}}static{this.\u0275fac=function(oe){return new(oe||ne)($.KVO(gn,8),$.KVO($.SKi),$.KVO(b.qQ),$.KVO(ir,8))}}static{this.\u0275prov=$.jDH({token:ne,factory:ne.\u0275fac,providedIn:"root"})}}return ne})();const Yr=new $.nKC("cdk-focus-monitor-default-options"),Nr=(0,q.BQ)({passive:!0,capture:!0});let xt=(()=>{class ne{constructor(Q,oe,ee,pe,Oe){this._ngZone=Q,this._platform=oe,this._inputModalityDetector=ee,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new H.B,this._rootNodeFocusAndBlurListener=Tt=>{for(let On=(0,q.Fb)(Tt);On;On=On.parentElement)"focus"===Tt.type?this._onFocus(Tt,On):this._onBlur(Tt,On)},this._document=pe,this._detectionMode=Oe?.detectionMode||0}monitor(Q,oe=!1){const ee=(0,kt.i8)(Q);if(!this._platform.isBrowser||1!==ee.nodeType)return(0,Le.of)();const pe=(0,q.KT)(ee)||this._getDocument(),Oe=this._elementInfo.get(ee);if(Oe)return oe&&(Oe.checkChildren=!0),Oe.subject;const Tt={checkChildren:oe,subject:new H.B,rootNode:pe};return this._elementInfo.set(ee,Tt),this._registerGlobalListeners(Tt),Tt.subject}stopMonitoring(Q){const oe=(0,kt.i8)(Q),ee=this._elementInfo.get(oe);ee&&(ee.subject.complete(),this._setClasses(oe),this._elementInfo.delete(oe),this._removeGlobalListeners(ee))}focusVia(Q,oe,ee){const pe=(0,kt.i8)(Q);pe===this._getDocument().activeElement?this._getClosestElementsInfo(pe).forEach(([Tt,lt])=>this._originChanged(Tt,oe,lt)):(this._setOrigin(oe),"function"==typeof pe.focus&&pe.focus(ee))}ngOnDestroy(){this._elementInfo.forEach((Q,oe)=>this.stopMonitoring(oe))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(Q){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(Q)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:Q&&this._isLastInteractionFromInputLabel(Q)?"mouse":"program"}_shouldBeAttributedToTouch(Q){return 1===this._detectionMode||!!Q?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(Q,oe){Q.classList.toggle("cdk-focused",!!oe),Q.classList.toggle("cdk-touch-focused","touch"===oe),Q.classList.toggle("cdk-keyboard-focused","keyboard"===oe),Q.classList.toggle("cdk-mouse-focused","mouse"===oe),Q.classList.toggle("cdk-program-focused","program"===oe)}_setOrigin(Q,oe=!1){this._ngZone.runOutsideAngular(()=>{this._origin=Q,this._originFromTouchInteraction="touch"===Q&&oe,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(Q,oe){const ee=this._elementInfo.get(oe),pe=(0,q.Fb)(Q);!ee||!ee.checkChildren&&oe!==pe||this._originChanged(oe,this._getFocusOrigin(pe),ee)}_onBlur(Q,oe){const ee=this._elementInfo.get(oe);!ee||ee.checkChildren&&Q.relatedTarget instanceof Node&&oe.contains(Q.relatedTarget)||(this._setClasses(oe),this._emitOrigin(ee,null))}_emitOrigin(Q,oe){Q.subject.observers.length&&this._ngZone.run(()=>Q.subject.next(oe))}_registerGlobalListeners(Q){if(!this._platform.isBrowser)return;const oe=Q.rootNode,ee=this._rootNodeFocusListenerCount.get(oe)||0;ee||this._ngZone.runOutsideAngular(()=>{oe.addEventListener("focus",this._rootNodeFocusAndBlurListener,Nr),oe.addEventListener("blur",this._rootNodeFocusAndBlurListener,Nr)}),this._rootNodeFocusListenerCount.set(oe,ee+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe((0,Ft.Q)(this._stopInputModalityDetector)).subscribe(pe=>{this._setOrigin(pe,!0)}))}_removeGlobalListeners(Q){const oe=Q.rootNode;if(this._rootNodeFocusListenerCount.has(oe)){const ee=this._rootNodeFocusListenerCount.get(oe);ee>1?this._rootNodeFocusListenerCount.set(oe,ee-1):(oe.removeEventListener("focus",this._rootNodeFocusAndBlurListener,Nr),oe.removeEventListener("blur",this._rootNodeFocusAndBlurListener,Nr),this._rootNodeFocusListenerCount.delete(oe))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(Q,oe,ee){this._setClasses(Q,oe),this._emitOrigin(ee,oe),this._lastFocusOrigin=oe}_getClosestElementsInfo(Q){const oe=[];return this._elementInfo.forEach((ee,pe)=>{(pe===Q||ee.checkChildren&&pe.contains(Q))&&oe.push([pe,ee])}),oe}_isLastInteractionFromInputLabel(Q){const{_mostRecentTarget:oe,mostRecentModality:ee}=this._inputModalityDetector;if("mouse"!==ee||!oe||oe===Q||"INPUT"!==Q.nodeName&&"TEXTAREA"!==Q.nodeName||Q.disabled)return!1;const pe=Q.labels;if(pe)for(let Oe=0;Oe<pe.length;Oe++)if(pe[Oe].contains(oe))return!0;return!1}static{this.\u0275fac=function(oe){return new(oe||ne)($.KVO($.SKi),$.KVO(q.OD),$.KVO(_t),$.KVO(b.qQ,8),$.KVO(Yr,8))}}static{this.\u0275prov=$.jDH({token:ne,factory:ne.\u0275fac,providedIn:"root"})}}return ne})();const ai="cdk-high-contrast-black-on-white",yi="cdk-high-contrast-white-on-black",Xr="cdk-high-contrast-active";let pn=(()=>{class ne{constructor(Q,oe){this._platform=Q,this._document=oe,this._breakpointSubscription=(0,$.WQX)(Ke.QP).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const Q=this._document.createElement("div");Q.style.backgroundColor="rgb(1,2,3)",Q.style.position="absolute",this._document.body.appendChild(Q);const oe=this._document.defaultView||window,ee=oe&&oe.getComputedStyle?oe.getComputedStyle(Q):null,pe=(ee&&ee.backgroundColor||"").replace(/ /g,"");switch(Q.remove(),pe){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return 2;case"rgb(255,255,255)":case"rgb(255,250,239)":return 1}return 0}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const Q=this._document.body.classList;Q.remove(Xr,ai,yi),this._hasCheckedHighContrastMode=!0;const oe=this.getHighContrastMode();1===oe?Q.add(Xr,ai):2===oe&&Q.add(Xr,yi)}}static{this.\u0275fac=function(oe){return new(oe||ne)($.KVO(q.OD),$.KVO(b.qQ))}}static{this.\u0275prov=$.jDH({token:ne,factory:ne.\u0275fac,providedIn:"root"})}}return ne})(),Te=(()=>{class ne{constructor(Q){Q._applyBodyHighContrastModeCssClasses()}static{this.\u0275fac=function(oe){return new(oe||ne)($.KVO(pn))}}static{this.\u0275mod=$.$C({type:ne})}static{this.\u0275inj=$.G2t({imports:[Et]})}}return ne})()},8203:(Cn,nt,x)=>{x.d(nt,{dS:()=>Le,jI:()=>Pe});var b=x(4438),$=x(177);const q=new b.nKC("cdk-dir-doc",{providedIn:"root",factory:function H(){return(0,b.WQX)($.qQ)}}),Ee=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let Le=(()=>{class K{constructor(He){this.value="ltr",this.change=new b.bkB,He&&(this.value=function Fe(K){const Ae=K?.toLowerCase()||"";return"auto"===Ae&&typeof navigator<"u"&&navigator?.language?Ee.test(navigator.language)?"rtl":"ltr":"rtl"===Ae?"rtl":"ltr"}((He.body?He.body.dir:null)||(He.documentElement?He.documentElement.dir:null)||"ltr"))}ngOnDestroy(){this.change.complete()}static{this.\u0275fac=function(ot){return new(ot||K)(b.KVO(q,8))}}static{this.\u0275prov=b.jDH({token:K,factory:K.\u0275fac,providedIn:"root"})}}return K})(),Pe=(()=>{class K{static{this.\u0275fac=function(ot){return new(ot||K)}}static{this.\u0275mod=b.$C({type:K})}static{this.\u0275inj=b.G2t({})}}return K})()},4085:(Cn,nt,x)=>{x.d(nt,{FG:()=>Ee,OE:()=>q,a1:()=>Fe,he:()=>$,i8:()=>Le});var b=x(4438);function $(Pe){return null!=Pe&&"false"!=`${Pe}`}function q(Pe,K=0){return function H(Pe){return!isNaN(parseFloat(Pe))&&!isNaN(Number(Pe))}(Pe)?Number(Pe):K}function Ee(Pe){return Array.isArray(Pe)?Pe:[Pe]}function Fe(Pe){return null==Pe?"":"string"==typeof Pe?Pe:`${Pe}px`}function Le(Pe){return Pe instanceof b.aKT?Pe.nativeElement:Pe}},7336:(Cn,nt,x)=>{x.d(nt,{A:()=>gt,A$:()=>Ne,FX:()=>Fe,Ge:()=>_t,Kp:()=>Rt,LE:()=>hn,UQ:()=>Gt,W3:()=>Le,Z:()=>$e,_f:()=>Ae,bn:()=>$t,dB:()=>tt,eg:()=>ti,f2:()=>Ze,i7:()=>Pt,n6:()=>Et,rp:()=>wr,w_:()=>ot,wn:()=>q,yZ:()=>Ft});const q=9,Fe=16,Le=17,Ne=18,Ae=27,ot=33,tt=34,Rt=35,Ft=36,Gt=37,Pt=38,hn=39,Et=40,Ze=48,$t=57,gt=65,$e=90,_t=91,ti=224;function wr(yn,...Dn){return Dn.length?Dn.some(or=>yn[or]):yn.altKey||yn.shiftKey||yn.ctrlKey||yn.metaKey}},9327:(Cn,nt,x)=>{x.d(nt,{QP:()=>Et,Rp:()=>Ke});var b=x(4438),$=x(4085),q=x(1413),H=x(4572),Ee=x(8793),Fe=x(1985),Le=x(6697),Ne=x(5245),Pe=x(152),K=x(6354),Ae=x(9172),He=x(6977),ot=x(6860);const Rt=new Set;let Ft,Gt=(()=>{class Qe{constructor(Ze,Ge){this._platform=Ze,this._nonce=Ge,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):hn}matchMedia(Ze){return(this._platform.WEBKIT||this._platform.BLINK)&&function Pt(Qe,ct){if(!Rt.has(Qe))try{Ft||(Ft=document.createElement("style"),ct&&(Ft.nonce=ct),Ft.setAttribute("type","text/css"),document.head.appendChild(Ft)),Ft.sheet&&(Ft.sheet.insertRule(`@media ${Qe} {body{ }}`,0),Rt.add(Qe))}catch(Ze){console.error(Ze)}}(Ze,this._nonce),this._matchMedia(Ze)}static{this.\u0275fac=function(Ge){return new(Ge||Qe)(b.KVO(ot.OD),b.KVO(b.BIS,8))}}static{this.\u0275prov=b.jDH({token:Qe,factory:Qe.\u0275fac,providedIn:"root"})}}return Qe})();function hn(Qe){return{matches:"all"===Qe||""===Qe,media:Qe,addListener:()=>{},removeListener:()=>{}}}let Et=(()=>{class Qe{constructor(Ze,Ge){this._mediaMatcher=Ze,this._zone=Ge,this._queries=new Map,this._destroySubject=new q.B}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(Ze){return kt((0,$.FG)(Ze)).some(me=>this._registerQuery(me).mql.matches)}observe(Ze){const me=kt((0,$.FG)(Ze)).map(At=>this._registerQuery(At).observable);let ve=(0,H.z)(me);return ve=(0,Ee.x)(ve.pipe((0,Le.s)(1)),ve.pipe((0,Ne.i)(1),(0,Pe.B)(0))),ve.pipe((0,K.T)(At=>{const Jt={matches:!1,breakpoints:{}};return At.forEach(({matches:Nt,query:Yt})=>{Jt.matches=Jt.matches||Nt,Jt.breakpoints[Yt]=Nt}),Jt}))}_registerQuery(Ze){if(this._queries.has(Ze))return this._queries.get(Ze);const Ge=this._mediaMatcher.matchMedia(Ze),ve={observable:new Fe.c(At=>{const Jt=Nt=>this._zone.run(()=>At.next(Nt));return Ge.addListener(Jt),()=>{Ge.removeListener(Jt)}}).pipe((0,Ae.Z)(Ge),(0,K.T)(({matches:At})=>({query:Ze,matches:At})),(0,He.Q)(this._destroySubject)),mql:Ge};return this._queries.set(Ze,ve),ve}static{this.\u0275fac=function(Ge){return new(Ge||Qe)(b.KVO(Gt),b.KVO(b.SKi))}}static{this.\u0275prov=b.jDH({token:Qe,factory:Qe.\u0275fac,providedIn:"root"})}}return Qe})();function kt(Qe){return Qe.map(ct=>ct.split(",")).reduce((ct,Ze)=>ct.concat(Ze)).map(ct=>ct.trim())}const Ke={XSmall:"(max-width: 599.98px)",Small:"(min-width: 600px) and (max-width: 959.98px)",Medium:"(min-width: 960px) and (max-width: 1279.98px)",Large:"(min-width: 1280px) and (max-width: 1919.98px)",XLarge:"(min-width: 1920px)",Handset:"(max-width: 599.98px) and (orientation: portrait), (max-width: 959.98px) and (orientation: landscape)",Tablet:"(min-width: 600px) and (max-width: 839.98px) and (orientation: portrait), (min-width: 960px) and (max-width: 1279.98px) and (orientation: landscape)",Web:"(min-width: 840px) and (orientation: portrait), (min-width: 1280px) and (orientation: landscape)",HandsetPortrait:"(max-width: 599.98px) and (orientation: portrait)",TabletPortrait:"(min-width: 600px) and (max-width: 839.98px) and (orientation: portrait)",WebPortrait:"(min-width: 840px) and (orientation: portrait)",HandsetLandscape:"(max-width: 959.98px) and (orientation: landscape)",TabletLandscape:"(min-width: 960px) and (max-width: 1279.98px) and (orientation: landscape)",WebLandscape:"(min-width: 1280px) and (orientation: landscape)"}},7987:(Cn,nt,x)=>{x.d(nt,{Sf:()=>Yt,hJ:()=>Cr,rR:()=>Qe,yY:()=>an,z_:()=>qn});var b=x(3980),$=x(177),q=x(4438),H=x(4085),Ee=x(6860),Fe=x(5964),Le=x(6697),Ne=x(6977),Pe=x(8203),K=x(6939),Ae=x(1413),He=x(8359),ot=x(7786);const tt=(0,Ee.CZ)();class Rt{constructor(De,Xe){this._viewportRuler=De,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=Xe}attach(){}enable(){if(this._canBeEnabled()){const De=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=De.style.left||"",this._previousHTMLStyles.top=De.style.top||"",De.style.left=(0,H.a1)(-this._previousScrollPosition.left),De.style.top=(0,H.a1)(-this._previousScrollPosition.top),De.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const De=this._document.documentElement,je=De.style,rn=this._document.body.style,fn=je.scrollBehavior||"",mn=rn.scrollBehavior||"";this._isEnabled=!1,je.left=this._previousHTMLStyles.left,je.top=this._previousHTMLStyles.top,De.classList.remove("cdk-global-scrollblock"),tt&&(je.scrollBehavior=rn.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),tt&&(je.scrollBehavior=fn,rn.scrollBehavior=mn)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const Xe=this._document.body,je=this._viewportRuler.getViewportSize();return Xe.scrollHeight>je.height||Xe.scrollWidth>je.width}}class Gt{constructor(De,Xe,je,rn){this._scrollDispatcher=De,this._ngZone=Xe,this._viewportRuler=je,this._config=rn,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(De){this._overlayRef=De}enable(){if(this._scrollSubscription)return;const De=this._scrollDispatcher.scrolled(0).pipe((0,Fe.p)(Xe=>!Xe||!this._overlayRef.overlayElement.contains(Xe.getElementRef().nativeElement)));this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=De.subscribe(()=>{const Xe=this._viewportRuler.getViewportScrollPosition().top;Math.abs(Xe-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=De.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class Pt{enable(){}disable(){}attach(){}}function hn(st,De){return De.some(Xe=>st.bottom<Xe.top||st.top>Xe.bottom||st.right<Xe.left||st.left>Xe.right)}function Et(st,De){return De.some(Xe=>st.top<Xe.top||st.bottom>Xe.bottom||st.left<Xe.left||st.right>Xe.right)}class kt{constructor(De,Xe,je,rn){this._scrollDispatcher=De,this._viewportRuler=Xe,this._ngZone=je,this._config=rn,this._scrollSubscription=null}attach(De){this._overlayRef=De}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const Xe=this._overlayRef.overlayElement.getBoundingClientRect(),{width:je,height:rn}=this._viewportRuler.getViewportSize();hn(Xe,[{width:je,height:rn,bottom:rn,right:je,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let Ke=(()=>{class st{constructor(Xe,je,rn,fn){this._scrollDispatcher=Xe,this._viewportRuler=je,this._ngZone=rn,this.noop=()=>new Pt,this.close=mn=>new Gt(this._scrollDispatcher,this._ngZone,this._viewportRuler,mn),this.block=()=>new Rt(this._viewportRuler,this._document),this.reposition=mn=>new kt(this._scrollDispatcher,this._viewportRuler,this._ngZone,mn),this._document=fn}static{this.\u0275fac=function(je){return new(je||st)(q.KVO(b.R),q.KVO(b.Xj),q.KVO(q.SKi),q.KVO($.qQ))}}static{this.\u0275prov=q.jDH({token:st,factory:st.\u0275fac,providedIn:"root"})}}return st})();class Qe{constructor(De){if(this.scrollStrategy=new Pt,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,De){const Xe=Object.keys(De);for(const je of Xe)void 0!==De[je]&&(this[je]=De[je])}}}class Ge{constructor(De,Xe){this.connectionPair=De,this.scrollableViewProperties=Xe}}let At=(()=>{class st{constructor(Xe){this._attachedOverlays=[],this._document=Xe}ngOnDestroy(){this.detach()}add(Xe){this.remove(Xe),this._attachedOverlays.push(Xe)}remove(Xe){const je=this._attachedOverlays.indexOf(Xe);je>-1&&this._attachedOverlays.splice(je,1),0===this._attachedOverlays.length&&this.detach()}static{this.\u0275fac=function(je){return new(je||st)(q.KVO($.qQ))}}static{this.\u0275prov=q.jDH({token:st,factory:st.\u0275fac,providedIn:"root"})}}return st})(),Jt=(()=>{class st extends At{constructor(Xe,je){super(Xe),this._ngZone=je,this._keydownListener=rn=>{const fn=this._attachedOverlays;for(let mn=fn.length-1;mn>-1;mn--)if(fn[mn]._keydownEvents.observers.length>0){const Ut=fn[mn]._keydownEvents;this._ngZone?this._ngZone.run(()=>Ut.next(rn)):Ut.next(rn);break}}}add(Xe){super.add(Xe),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}static{this.\u0275fac=function(je){return new(je||st)(q.KVO($.qQ),q.KVO(q.SKi,8))}}static{this.\u0275prov=q.jDH({token:st,factory:st.\u0275fac,providedIn:"root"})}}return st})(),Nt=(()=>{class st extends At{constructor(Xe,je,rn){super(Xe),this._platform=je,this._ngZone=rn,this._cursorStyleIsSet=!1,this._pointerDownListener=fn=>{this._pointerDownEventTarget=(0,Ee.Fb)(fn)},this._clickListener=fn=>{const mn=(0,Ee.Fb)(fn),Ut="click"===fn.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:mn;this._pointerDownEventTarget=null;const wt=this._attachedOverlays.slice();for(let $e=wt.length-1;$e>-1;$e--){const _t=wt[$e];if(_t._outsidePointerEvents.observers.length<1||!_t.hasAttached())continue;if(_t.overlayElement.contains(mn)||_t.overlayElement.contains(Ut))break;const gn=_t._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>gn.next(fn)):gn.next(fn)}}}add(Xe){if(super.add(Xe),!this._isAttached){const je=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(je)):this._addEventListeners(je),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=je.style.cursor,je.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const Xe=this._document.body;Xe.removeEventListener("pointerdown",this._pointerDownListener,!0),Xe.removeEventListener("click",this._clickListener,!0),Xe.removeEventListener("auxclick",this._clickListener,!0),Xe.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(Xe.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(Xe){Xe.addEventListener("pointerdown",this._pointerDownListener,!0),Xe.addEventListener("click",this._clickListener,!0),Xe.addEventListener("auxclick",this._clickListener,!0),Xe.addEventListener("contextmenu",this._clickListener,!0)}static{this.\u0275fac=function(je){return new(je||st)(q.KVO($.qQ),q.KVO(Ee.OD),q.KVO(q.SKi,8))}}static{this.\u0275prov=q.jDH({token:st,factory:st.\u0275fac,providedIn:"root"})}}return st})(),Yt=(()=>{class st{constructor(Xe,je){this._platform=je,this._document=Xe}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const Xe="cdk-overlay-container";if(this._platform.isBrowser||(0,Ee.v8)()){const rn=this._document.querySelectorAll(`.${Xe}[platform="server"], .${Xe}[platform="test"]`);for(let fn=0;fn<rn.length;fn++)rn[fn].remove()}const je=this._document.createElement("div");je.classList.add(Xe),(0,Ee.v8)()?je.setAttribute("platform","test"):this._platform.isBrowser||je.setAttribute("platform","server"),this._document.body.appendChild(je),this._containerElement=je}static{this.\u0275fac=function(je){return new(je||st)(q.KVO($.qQ),q.KVO(Ee.OD))}}static{this.\u0275prov=q.jDH({token:st,factory:st.\u0275fac,providedIn:"root"})}}return st})();class an{constructor(De,Xe,je,rn,fn,mn,Ut,wt,$e,_t=!1){this._portalOutlet=De,this._host=Xe,this._pane=je,this._config=rn,this._ngZone=fn,this._keyboardDispatcher=mn,this._document=Ut,this._location=wt,this._outsideClickDispatcher=$e,this._animationsDisabled=_t,this._backdropElement=null,this._backdropClick=new Ae.B,this._attachments=new Ae.B,this._detachments=new Ae.B,this._locationChanges=He.yU.EMPTY,this._backdropClickHandler=gn=>this._backdropClick.next(gn),this._backdropTransitionendHandler=gn=>{this._disposeBackdrop(gn.target)},this._keydownEvents=new Ae.B,this._outsidePointerEvents=new Ae.B,rn.scrollStrategy&&(this._scrollStrategy=rn.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=rn.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(De){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);const Xe=this._portalOutlet.attach(De);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe((0,Le.s)(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),"function"==typeof Xe?.onDestroy&&Xe.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),Xe}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const De=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),De}dispose(){const De=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._previousHostParent=this._pane=this._host=null,De&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(De){De!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=De,this.hasAttached()&&(De.attach(this),this.updatePosition()))}updateSize(De){this._config={...this._config,...De},this._updateElementSize()}setDirection(De){this._config={...this._config,direction:De},this._updateElementDirection()}addPanelClass(De){this._pane&&this._toggleClasses(this._pane,De,!0)}removePanelClass(De){this._pane&&this._toggleClasses(this._pane,De,!1)}getDirection(){const De=this._config.direction;return De?"string"==typeof De?De:De.value:"ltr"}updateScrollStrategy(De){De!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=De,this.hasAttached()&&(De.attach(this),De.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const De=this._pane.style;De.width=(0,H.a1)(this._config.width),De.height=(0,H.a1)(this._config.height),De.minWidth=(0,H.a1)(this._config.minWidth),De.minHeight=(0,H.a1)(this._config.minHeight),De.maxWidth=(0,H.a1)(this._config.maxWidth),De.maxHeight=(0,H.a1)(this._config.maxHeight)}_togglePointerEvents(De){this._pane.style.pointerEvents=De?"":"none"}_attachBackdrop(){const De="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(De)})}):this._backdropElement.classList.add(De)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const De=this._backdropElement;if(De){if(this._animationsDisabled)return void this._disposeBackdrop(De);De.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{De.addEventListener("transitionend",this._backdropTransitionendHandler)}),De.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(De)},500))}}_toggleClasses(De,Xe,je){const rn=(0,H.FG)(Xe||[]).filter(fn=>!!fn);rn.length&&(je?De.classList.add(...rn):De.classList.remove(...rn))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const De=this._ngZone.onStable.pipe((0,Ne.Q)((0,ot.h)(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),De.unsubscribe())})})}_disposeScrollStrategy(){const De=this._scrollStrategy;De&&(De.disable(),De.detach&&De.detach())}_disposeBackdrop(De){De&&(De.removeEventListener("click",this._backdropClickHandler),De.removeEventListener("transitionend",this._backdropTransitionendHandler),De.remove(),this._backdropElement===De&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}const $t="cdk-overlay-connected-position-bounding-box",ye=/([A-Za-z%]+)$/;class Ye{get positions(){return this._preferredPositions}constructor(De,Xe,je,rn,fn){this._viewportRuler=Xe,this._document=je,this._platform=rn,this._overlayContainer=fn,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new Ae.B,this._resizeSubscription=He.yU.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(De)}attach(De){this._validatePositions(),De.hostElement.classList.add($t),this._overlayRef=De,this._boundingBox=De.hostElement,this._pane=De.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const De=this._originRect,Xe=this._overlayRect,je=this._viewportRect,rn=this._containerRect,fn=[];let mn;for(let Ut of this._preferredPositions){let wt=this._getOriginPoint(De,rn,Ut),$e=this._getOverlayPoint(wt,Xe,Ut),_t=this._getOverlayFit($e,Xe,je,Ut);if(_t.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(Ut,wt);this._canFitWithFlexibleDimensions(_t,$e,je)?fn.push({position:Ut,origin:wt,overlayRect:Xe,boundingBoxRect:this._calculateBoundingBoxRect(wt,Ut)}):(!mn||mn.overlayFit.visibleArea<_t.visibleArea)&&(mn={overlayFit:_t,overlayPoint:$e,originPoint:wt,position:Ut,overlayRect:Xe})}if(fn.length){let Ut=null,wt=-1;for(const $e of fn){const _t=$e.boundingBoxRect.width*$e.boundingBoxRect.height*($e.position.weight||1);_t>wt&&(wt=_t,Ut=$e)}return this._isPushed=!1,void this._applyPosition(Ut.position,Ut.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(mn.position,mn.originPoint);this._applyPosition(mn.position,mn.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&Ht(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove($t),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const De=this._lastPosition;if(De){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const Xe=this._getOriginPoint(this._originRect,this._containerRect,De);this._applyPosition(De,Xe)}else this.apply()}withScrollableContainers(De){return this._scrollables=De,this}withPositions(De){return this._preferredPositions=De,-1===De.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(De){return this._viewportMargin=De,this}withFlexibleDimensions(De=!0){return this._hasFlexibleDimensions=De,this}withGrowAfterOpen(De=!0){return this._growAfterOpen=De,this}withPush(De=!0){return this._canPush=De,this}withLockedPosition(De=!0){return this._positionLocked=De,this}setOrigin(De){return this._origin=De,this}withDefaultOffsetX(De){return this._offsetX=De,this}withDefaultOffsetY(De){return this._offsetY=De,this}withTransformOriginOn(De){return this._transformOriginSelector=De,this}_getOriginPoint(De,Xe,je){let rn,fn;if("center"==je.originX)rn=De.left+De.width/2;else{const mn=this._isRtl()?De.right:De.left,Ut=this._isRtl()?De.left:De.right;rn="start"==je.originX?mn:Ut}return Xe.left<0&&(rn-=Xe.left),fn="center"==je.originY?De.top+De.height/2:"top"==je.originY?De.top:De.bottom,Xe.top<0&&(fn-=Xe.top),{x:rn,y:fn}}_getOverlayPoint(De,Xe,je){let rn,fn;return rn="center"==je.overlayX?-Xe.width/2:"start"===je.overlayX?this._isRtl()?-Xe.width:0:this._isRtl()?0:-Xe.width,fn="center"==je.overlayY?-Xe.height/2:"top"==je.overlayY?0:-Xe.height,{x:De.x+rn,y:De.y+fn}}_getOverlayFit(De,Xe,je,rn){const fn=gt(Xe);let{x:mn,y:Ut}=De,wt=this._getOffset(rn,"x"),$e=this._getOffset(rn,"y");wt&&(mn+=wt),$e&&(Ut+=$e);let An=0-Ut,ir=Ut+fn.height-je.height,yr=this._subtractOverflows(fn.width,0-mn,mn+fn.width-je.width),ar=this._subtractOverflows(fn.height,An,ir),mr=yr*ar;return{visibleArea:mr,isCompletelyWithinViewport:fn.width*fn.height===mr,fitsInViewportVertically:ar===fn.height,fitsInViewportHorizontally:yr==fn.width}}_canFitWithFlexibleDimensions(De,Xe,je){if(this._hasFlexibleDimensions){const rn=je.bottom-Xe.y,fn=je.right-Xe.x,mn=et(this._overlayRef.getConfig().minHeight),Ut=et(this._overlayRef.getConfig().minWidth);return(De.fitsInViewportVertically||null!=mn&&mn<=rn)&&(De.fitsInViewportHorizontally||null!=Ut&&Ut<=fn)}return!1}_pushOverlayOnScreen(De,Xe,je){if(this._previousPushAmount&&this._positionLocked)return{x:De.x+this._previousPushAmount.x,y:De.y+this._previousPushAmount.y};const rn=gt(Xe),fn=this._viewportRect,mn=Math.max(De.x+rn.width-fn.width,0),Ut=Math.max(De.y+rn.height-fn.height,0),wt=Math.max(fn.top-je.top-De.y,0),$e=Math.max(fn.left-je.left-De.x,0);let _t=0,gn=0;return _t=rn.width<=fn.width?$e||-mn:De.x<this._viewportMargin?fn.left-je.left-De.x:0,gn=rn.height<=fn.height?wt||-Ut:De.y<this._viewportMargin?fn.top-je.top-De.y:0,this._previousPushAmount={x:_t,y:gn},{x:De.x+_t,y:De.y+gn}}_applyPosition(De,Xe){if(this._setTransformOrigin(De),this._setOverlayElementStyles(Xe,De),this._setBoundingBoxStyles(Xe,De),De.panelClass&&this._addPanelClasses(De.panelClass),this._lastPosition=De,this._positionChanges.observers.length){const je=this._getScrollVisibility(),rn=new Ge(De,je);this._positionChanges.next(rn)}this._isInitialRender=!1}_setTransformOrigin(De){if(!this._transformOriginSelector)return;const Xe=this._boundingBox.querySelectorAll(this._transformOriginSelector);let je,rn=De.overlayY;je="center"===De.overlayX?"center":this._isRtl()?"start"===De.overlayX?"right":"left":"start"===De.overlayX?"left":"right";for(let fn=0;fn<Xe.length;fn++)Xe[fn].style.transformOrigin=`${je} ${rn}`}_calculateBoundingBoxRect(De,Xe){const je=this._viewportRect,rn=this._isRtl();let fn,mn,Ut,_t,gn,An;if("top"===Xe.overlayY)mn=De.y,fn=je.height-mn+this._viewportMargin;else if("bottom"===Xe.overlayY)Ut=je.height-De.y+2*this._viewportMargin,fn=je.height-Ut+this._viewportMargin;else{const ir=Math.min(je.bottom-De.y+je.top,De.y),yr=this._lastBoundingBoxSize.height;fn=2*ir,mn=De.y-ir,fn>yr&&!this._isInitialRender&&!this._growAfterOpen&&(mn=De.y-yr/2)}if("end"===Xe.overlayX&&!rn||"start"===Xe.overlayX&&rn)An=je.width-De.x+this._viewportMargin,_t=De.x-this._viewportMargin;else if("start"===Xe.overlayX&&!rn||"end"===Xe.overlayX&&rn)gn=De.x,_t=je.right-De.x;else{const ir=Math.min(je.right-De.x+je.left,De.x),yr=this._lastBoundingBoxSize.width;_t=2*ir,gn=De.x-ir,_t>yr&&!this._isInitialRender&&!this._growAfterOpen&&(gn=De.x-yr/2)}return{top:mn,left:gn,bottom:Ut,right:An,width:_t,height:fn}}_setBoundingBoxStyles(De,Xe){const je=this._calculateBoundingBoxRect(De,Xe);!this._isInitialRender&&!this._growAfterOpen&&(je.height=Math.min(je.height,this._lastBoundingBoxSize.height),je.width=Math.min(je.width,this._lastBoundingBoxSize.width));const rn={};if(this._hasExactPosition())rn.top=rn.left="0",rn.bottom=rn.right=rn.maxHeight=rn.maxWidth="",rn.width=rn.height="100%";else{const fn=this._overlayRef.getConfig().maxHeight,mn=this._overlayRef.getConfig().maxWidth;rn.height=(0,H.a1)(je.height),rn.top=(0,H.a1)(je.top),rn.bottom=(0,H.a1)(je.bottom),rn.width=(0,H.a1)(je.width),rn.left=(0,H.a1)(je.left),rn.right=(0,H.a1)(je.right),rn.alignItems="center"===Xe.overlayX?"center":"end"===Xe.overlayX?"flex-end":"flex-start",rn.justifyContent="center"===Xe.overlayY?"center":"bottom"===Xe.overlayY?"flex-end":"flex-start",fn&&(rn.maxHeight=(0,H.a1)(fn)),mn&&(rn.maxWidth=(0,H.a1)(mn))}this._lastBoundingBoxSize=je,Ht(this._boundingBox.style,rn)}_resetBoundingBoxStyles(){Ht(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){Ht(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(De,Xe){const je={},rn=this._hasExactPosition(),fn=this._hasFlexibleDimensions,mn=this._overlayRef.getConfig();if(rn){const _t=this._viewportRuler.getViewportScrollPosition();Ht(je,this._getExactOverlayY(Xe,De,_t)),Ht(je,this._getExactOverlayX(Xe,De,_t))}else je.position="static";let Ut="",wt=this._getOffset(Xe,"x"),$e=this._getOffset(Xe,"y");wt&&(Ut+=`translateX(${wt}px) `),$e&&(Ut+=`translateY(${$e}px)`),je.transform=Ut.trim(),mn.maxHeight&&(rn?je.maxHeight=(0,H.a1)(mn.maxHeight):fn&&(je.maxHeight="")),mn.maxWidth&&(rn?je.maxWidth=(0,H.a1)(mn.maxWidth):fn&&(je.maxWidth="")),Ht(this._pane.style,je)}_getExactOverlayY(De,Xe,je){let rn={top:"",bottom:""},fn=this._getOverlayPoint(Xe,this._overlayRect,De);return this._isPushed&&(fn=this._pushOverlayOnScreen(fn,this._overlayRect,je)),"bottom"===De.overlayY?rn.bottom=this._document.documentElement.clientHeight-(fn.y+this._overlayRect.height)+"px":rn.top=(0,H.a1)(fn.y),rn}_getExactOverlayX(De,Xe,je){let mn,rn={left:"",right:""},fn=this._getOverlayPoint(Xe,this._overlayRect,De);return this._isPushed&&(fn=this._pushOverlayOnScreen(fn,this._overlayRect,je)),mn=this._isRtl()?"end"===De.overlayX?"left":"right":"end"===De.overlayX?"right":"left","right"===mn?rn.right=this._document.documentElement.clientWidth-(fn.x+this._overlayRect.width)+"px":rn.left=(0,H.a1)(fn.x),rn}_getScrollVisibility(){const De=this._getOriginRect(),Xe=this._pane.getBoundingClientRect(),je=this._scrollables.map(rn=>rn.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:Et(De,je),isOriginOutsideView:hn(De,je),isOverlayClipped:Et(Xe,je),isOverlayOutsideView:hn(Xe,je)}}_subtractOverflows(De,...Xe){return Xe.reduce((je,rn)=>je-Math.max(rn,0),De)}_getNarrowedViewportRect(){const De=this._document.documentElement.clientWidth,Xe=this._document.documentElement.clientHeight,je=this._viewportRuler.getViewportScrollPosition();return{top:je.top+this._viewportMargin,left:je.left+this._viewportMargin,right:je.left+De-this._viewportMargin,bottom:je.top+Xe-this._viewportMargin,width:De-2*this._viewportMargin,height:Xe-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(De,Xe){return"x"===Xe?null==De.offsetX?this._offsetX:De.offsetX:null==De.offsetY?this._offsetY:De.offsetY}_validatePositions(){}_addPanelClasses(De){this._pane&&(0,H.FG)(De).forEach(Xe=>{""!==Xe&&-1===this._appliedPanelClasses.indexOf(Xe)&&(this._appliedPanelClasses.push(Xe),this._pane.classList.add(Xe))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(De=>{this._pane.classList.remove(De)}),this._appliedPanelClasses=[])}_getOriginRect(){const De=this._origin;if(De instanceof q.aKT)return De.nativeElement.getBoundingClientRect();if(De instanceof Element)return De.getBoundingClientRect();const Xe=De.width||0,je=De.height||0;return{top:De.y,bottom:De.y+je,left:De.x,right:De.x+Xe,height:je,width:Xe}}}function Ht(st,De){for(let Xe in De)De.hasOwnProperty(Xe)&&(st[Xe]=De[Xe]);return st}function et(st){if("number"!=typeof st&&null!=st){const[De,Xe]=st.split(ye);return Xe&&"px"!==Xe?null:parseFloat(De)}return st||null}function gt(st){return{top:Math.floor(st.top),right:Math.floor(st.right),bottom:Math.floor(st.bottom),left:Math.floor(st.left),width:Math.floor(st.width),height:Math.floor(st.height)}}const Ct="cdk-global-overlay-wrapper";class ln{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(De){const Xe=De.getConfig();this._overlayRef=De,this._width&&!Xe.width&&De.updateSize({width:this._width}),this._height&&!Xe.height&&De.updateSize({height:this._height}),De.hostElement.classList.add(Ct),this._isDisposed=!1}top(De=""){return this._bottomOffset="",this._topOffset=De,this._alignItems="flex-start",this}left(De=""){return this._xOffset=De,this._xPosition="left",this}bottom(De=""){return this._topOffset="",this._bottomOffset=De,this._alignItems="flex-end",this}right(De=""){return this._xOffset=De,this._xPosition="right",this}start(De=""){return this._xOffset=De,this._xPosition="start",this}end(De=""){return this._xOffset=De,this._xPosition="end",this}width(De=""){return this._overlayRef?this._overlayRef.updateSize({width:De}):this._width=De,this}height(De=""){return this._overlayRef?this._overlayRef.updateSize({height:De}):this._height=De,this}centerHorizontally(De=""){return this.left(De),this._xPosition="center",this}centerVertically(De=""){return this.top(De),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const De=this._overlayRef.overlayElement.style,Xe=this._overlayRef.hostElement.style,je=this._overlayRef.getConfig(),{width:rn,height:fn,maxWidth:mn,maxHeight:Ut}=je,wt=!("100%"!==rn&&"100vw"!==rn||mn&&"100%"!==mn&&"100vw"!==mn),$e=!("100%"!==fn&&"100vh"!==fn||Ut&&"100%"!==Ut&&"100vh"!==Ut),_t=this._xPosition,gn=this._xOffset,An="rtl"===this._overlayRef.getConfig().direction;let ir="",yr="",ar="";wt?ar="flex-start":"center"===_t?(ar="center",An?yr=gn:ir=gn):An?"left"===_t||"end"===_t?(ar="flex-end",ir=gn):("right"===_t||"start"===_t)&&(ar="flex-start",yr=gn):"left"===_t||"start"===_t?(ar="flex-start",ir=gn):("right"===_t||"end"===_t)&&(ar="flex-end",yr=gn),De.position=this._cssPosition,De.marginLeft=wt?"0":ir,De.marginTop=$e?"0":this._topOffset,De.marginBottom=this._bottomOffset,De.marginRight=wt?"0":yr,Xe.justifyContent=ar,Xe.alignItems=$e?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const De=this._overlayRef.overlayElement.style,Xe=this._overlayRef.hostElement,je=Xe.style;Xe.classList.remove(Ct),je.justifyContent=je.alignItems=De.marginTop=De.marginBottom=De.marginLeft=De.marginRight=De.position="",this._overlayRef=null,this._isDisposed=!0}}let nr=(()=>{class st{constructor(Xe,je,rn,fn){this._viewportRuler=Xe,this._document=je,this._platform=rn,this._overlayContainer=fn}global(){return new ln}flexibleConnectedTo(Xe){return new Ye(Xe,this._viewportRuler,this._document,this._platform,this._overlayContainer)}static{this.\u0275fac=function(je){return new(je||st)(q.KVO(b.Xj),q.KVO($.qQ),q.KVO(Ee.OD),q.KVO(Yt))}}static{this.\u0275prov=q.jDH({token:st,factory:st.\u0275fac,providedIn:"root"})}}return st})(),hr=0,Cr=(()=>{class st{constructor(Xe,je,rn,fn,mn,Ut,wt,$e,_t,gn,An,ir){this.scrollStrategies=Xe,this._overlayContainer=je,this._componentFactoryResolver=rn,this._positionBuilder=fn,this._keyboardDispatcher=mn,this._injector=Ut,this._ngZone=wt,this._document=$e,this._directionality=_t,this._location=gn,this._outsideClickDispatcher=An,this._animationsModuleType=ir}create(Xe){const je=this._createHostElement(),rn=this._createPaneElement(je),fn=this._createPortalOutlet(rn),mn=new Qe(Xe);return mn.direction=mn.direction||this._directionality.value,new an(fn,je,rn,mn,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,"NoopAnimations"===this._animationsModuleType)}position(){return this._positionBuilder}_createPaneElement(Xe){const je=this._document.createElement("div");return je.id="cdk-overlay-"+hr++,je.classList.add("cdk-overlay-pane"),Xe.appendChild(je),je}_createHostElement(){const Xe=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(Xe),Xe}_createPortalOutlet(Xe){return this._appRef||(this._appRef=this._injector.get(q.o8S)),new K.aI(Xe,this._componentFactoryResolver,this._appRef,this._injector,this._document)}static{this.\u0275fac=function(je){return new(je||st)(q.KVO(Ke),q.KVO(Yt),q.KVO(q.OM3),q.KVO(nr),q.KVO(Jt),q.KVO(q.zZn),q.KVO(q.SKi),q.KVO($.qQ),q.KVO(Pe.dS),q.KVO($.aZ),q.KVO(Nt),q.KVO(q.bc$,8))}}static{this.\u0275prov=q.jDH({token:st,factory:st.\u0275fac,providedIn:"root"})}}return st})();const $n={provide:new q.nKC("cdk-connected-overlay-scroll-strategy",{providedIn:"root",factory:()=>{const st=(0,q.WQX)(Cr);return()=>st.scrollStrategies.reposition()}}),deps:[Cr],useFactory:function vr(st){return()=>st.scrollStrategies.reposition()}};let qn=(()=>{class st{static{this.\u0275fac=function(je){return new(je||st)}}static{this.\u0275mod=q.$C({type:st})}static{this.\u0275inj=q.G2t({providers:[Cr,$n],imports:[Pe.jI,K.jc,b.E9,b.E9]})}}return st})()},6860:(Cn,nt,x)=>{x.d(nt,{BD:()=>Rt,BQ:()=>Ae,CZ:()=>tt,Fb:()=>Et,KT:()=>Pt,OD:()=>H,v8:()=>kt,vc:()=>hn});var b=x(4438),$=x(177);let q;try{q=typeof Intl<"u"&&Intl.v8BreakIterator}catch{q=!1}let Pe,He,ot,Ft,H=(()=>{class Ke{constructor(ct){this._platformId=ct,this.isBrowser=this._platformId?(0,$.UE)(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!q)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}static{this.\u0275fac=function(Ze){return new(Ze||Ke)(b.KVO(b.Agw))}}static{this.\u0275prov=b.jDH({token:Ke,factory:Ke.\u0275fac,providedIn:"root"})}}return Ke})();function Ae(Ke){return function K(){if(null==Pe&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Pe=!0}))}finally{Pe=Pe||!1}return Pe}()?Ke:!!Ke.capture}function tt(){if(null==ot){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return ot=!1,ot;if("scrollBehavior"in document.documentElement.style)ot=!0;else{const Ke=Element.prototype.scrollTo;ot=!!Ke&&!/\{\s*\[native code\]\s*\}/.test(Ke.toString())}}return ot}function Rt(){if("object"!=typeof document||!document)return 0;if(null==He){const Ke=document.createElement("div"),Qe=Ke.style;Ke.dir="rtl",Qe.width="1px",Qe.overflow="auto",Qe.visibility="hidden",Qe.pointerEvents="none",Qe.position="absolute";const ct=document.createElement("div"),Ze=ct.style;Ze.width="2px",Ze.height="1px",Ke.appendChild(ct),document.body.appendChild(Ke),He=0,0===Ke.scrollLeft&&(Ke.scrollLeft=1,He=0===Ke.scrollLeft?1:2),Ke.remove()}return He}function Pt(Ke){if(function Gt(){if(null==Ft){const Ke=typeof document<"u"?document.head:null;Ft=!(!Ke||!Ke.createShadowRoot&&!Ke.attachShadow)}return Ft}()){const Qe=Ke.getRootNode?Ke.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&Qe instanceof ShadowRoot)return Qe}return null}function hn(){let Ke=typeof document<"u"&&document?document.activeElement:null;for(;Ke&&Ke.shadowRoot;){const Qe=Ke.shadowRoot.activeElement;if(Qe===Ke)break;Ke=Qe}return Ke}function Et(Ke){return Ke.composedPath?Ke.composedPath()[0]:Ke.target}function kt(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}},6939:(Cn,nt,x)=>{x.d(nt,{A8:()=>K,I3:()=>hn,VA:()=>Ae,aI:()=>Rt,jc:()=>kt,lb:()=>ot});var b=x(4438),$=x(177);class Pe{attach(ct){return this._attachedHost=ct,ct.attach(this)}detach(){let ct=this._attachedHost;null!=ct&&(this._attachedHost=null,ct.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(ct){this._attachedHost=ct}}class K extends Pe{constructor(ct,Ze,Ge,me,ve){super(),this.component=ct,this.viewContainerRef=Ze,this.injector=Ge,this.componentFactoryResolver=me,this.projectableNodes=ve}}class Ae extends Pe{constructor(ct,Ze,Ge,me){super(),this.templateRef=ct,this.viewContainerRef=Ze,this.context=Ge,this.injector=me}get origin(){return this.templateRef.elementRef}attach(ct,Ze=this.context){return this.context=Ze,super.attach(ct)}detach(){return this.context=void 0,super.detach()}}class He extends Pe{constructor(ct){super(),this.element=ct instanceof b.aKT?ct.nativeElement:ct}}class ot{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(ct){return ct instanceof K?(this._attachedPortal=ct,this.attachComponentPortal(ct)):ct instanceof Ae?(this._attachedPortal=ct,this.attachTemplatePortal(ct)):this.attachDomPortal&&ct instanceof He?(this._attachedPortal=ct,this.attachDomPortal(ct)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(ct){this._disposeFn=ct}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class Rt extends ot{constructor(ct,Ze,Ge,me,ve){super(),this.outletElement=ct,this._componentFactoryResolver=Ze,this._appRef=Ge,this._defaultInjector=me,this.attachDomPortal=At=>{const Jt=At.element,Nt=this._document.createComment("dom-portal");Jt.parentNode.insertBefore(Nt,Jt),this.outletElement.appendChild(Jt),this._attachedPortal=At,super.setDisposeFn(()=>{Nt.parentNode&&Nt.parentNode.replaceChild(Jt,Nt)})},this._document=ve}attachComponentPortal(ct){const Ge=(ct.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(ct.component);let me;return ct.viewContainerRef?(me=ct.viewContainerRef.createComponent(Ge,ct.viewContainerRef.length,ct.injector||ct.viewContainerRef.injector,ct.projectableNodes||void 0),this.setDisposeFn(()=>me.destroy())):(me=Ge.create(ct.injector||this._defaultInjector||b.zZn.NULL),this._appRef.attachView(me.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(me.hostView),me.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(me)),this._attachedPortal=ct,me}attachTemplatePortal(ct){let Ze=ct.viewContainerRef,Ge=Ze.createEmbeddedView(ct.templateRef,ct.context,{injector:ct.injector});return Ge.rootNodes.forEach(me=>this.outletElement.appendChild(me)),Ge.detectChanges(),this.setDisposeFn(()=>{let me=Ze.indexOf(Ge);-1!==me&&Ze.remove(me)}),this._attachedPortal=ct,Ge}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(ct){return ct.hostView.rootNodes[0]}}let hn=(()=>{class Qe extends ot{constructor(Ze,Ge,me){super(),this._componentFactoryResolver=Ze,this._viewContainerRef=Ge,this._isInitialized=!1,this.attached=new b.bkB,this.attachDomPortal=ve=>{const At=ve.element,Jt=this._document.createComment("dom-portal");ve.setAttachedHost(this),At.parentNode.insertBefore(Jt,At),this._getRootNode().appendChild(At),this._attachedPortal=ve,super.setDisposeFn(()=>{Jt.parentNode&&Jt.parentNode.replaceChild(At,Jt)})},this._document=me}get portal(){return this._attachedPortal}set portal(Ze){this.hasAttached()&&!Ze&&!this._isInitialized||(this.hasAttached()&&super.detach(),Ze&&super.attach(Ze),this._attachedPortal=Ze||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedRef=this._attachedPortal=null}attachComponentPortal(Ze){Ze.setAttachedHost(this);const Ge=null!=Ze.viewContainerRef?Ze.viewContainerRef:this._viewContainerRef,ve=(Ze.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(Ze.component),At=Ge.createComponent(ve,Ge.length,Ze.injector||Ge.injector,Ze.projectableNodes||void 0);return Ge!==this._viewContainerRef&&this._getRootNode().appendChild(At.hostView.rootNodes[0]),super.setDisposeFn(()=>At.destroy()),this._attachedPortal=Ze,this._attachedRef=At,this.attached.emit(At),At}attachTemplatePortal(Ze){Ze.setAttachedHost(this);const Ge=this._viewContainerRef.createEmbeddedView(Ze.templateRef,Ze.context,{injector:Ze.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=Ze,this._attachedRef=Ge,this.attached.emit(Ge),Ge}_getRootNode(){const Ze=this._viewContainerRef.element.nativeElement;return Ze.nodeType===Ze.ELEMENT_NODE?Ze:Ze.parentNode}static{this.\u0275fac=function(Ge){return new(Ge||Qe)(b.rXU(b.OM3),b.rXU(b.c1b),b.rXU($.qQ))}}static{this.\u0275dir=b.FsC({type:Qe,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:[b.Mj6.None,"cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[b.Vt3]})}}return Qe})(),kt=(()=>{class Qe{static{this.\u0275fac=function(Ge){return new(Ge||Qe)}}static{this.\u0275mod=b.$C({type:Qe})}static{this.\u0275inj=b.G2t({})}}return Qe})()},3980:(Cn,nt,x)=>{x.d(nt,{uv:()=>fr,Gj:()=>fn,R:()=>sr,E9:()=>mn,Xj:()=>Rr});var b=x(4085),$=x(4438),q=x(1413),H=x(7673),Ee=x(1985),Fe=x(3726),Le=x(6780),Ne=x(8359);const Pe={schedule(Ut){let wt=requestAnimationFrame,$e=cancelAnimationFrame;const{delegate:_t}=Pe;_t&&(wt=_t.requestAnimationFrame,$e=_t.cancelAnimationFrame);const gn=wt(An=>{$e=void 0,Ut(An)});return new Ne.yU(()=>$e?.(gn))},requestAnimationFrame(...Ut){const{delegate:wt}=Pe;return(wt?.requestAnimationFrame||requestAnimationFrame)(...Ut)},cancelAnimationFrame(...Ut){const{delegate:wt}=Pe;return(wt?.cancelAnimationFrame||cancelAnimationFrame)(...Ut)},delegate:void 0};var Ae=x(9687);new class He extends Ae.q{flush(wt){let $e;this._active=!0,wt?$e=wt.id:($e=this._scheduled,this._scheduled=void 0);const{actions:_t}=this;let gn;wt=wt||_t.shift();do{if(gn=wt.execute(wt.state,wt.delay))break}while((wt=_t[0])&&wt.id===$e&&_t.shift());if(this._active=!1,gn){for(;(wt=_t[0])&&wt.id===$e&&_t.shift();)wt.unsubscribe();throw gn}}}(class K extends Le.R{constructor(wt,$e){super(wt,$e),this.scheduler=wt,this.work=$e}requestAsyncId(wt,$e,_t=0){return null!==_t&&_t>0?super.requestAsyncId(wt,$e,_t):(wt.actions.push(this),wt._scheduled||(wt._scheduled=Pe.requestAnimationFrame(()=>wt.flush(void 0))))}recycleAsyncId(wt,$e,_t=0){var gn;if(null!=_t?_t>0:this.delay>0)return super.recycleAsyncId(wt,$e,_t);const{actions:An}=wt;null!=$e&&$e===wt._scheduled&&(null===(gn=An[An.length-1])||void 0===gn?void 0:gn.id)!==$e&&(Pe.cancelAnimationFrame($e),wt._scheduled=void 0)}});let Ft,Rt=1;const Gt={};function Pt(Ut){return Ut in Gt&&(delete Gt[Ut],!0)}const hn={setImmediate(Ut){const wt=Rt++;return Gt[wt]=!0,Ft||(Ft=Promise.resolve()),Ft.then(()=>Pt(wt)&&Ut()),wt},clearImmediate(Ut){Pt(Ut)}},{setImmediate:kt,clearImmediate:Ke}=hn,Qe={setImmediate(...Ut){const{delegate:wt}=Qe;return(wt?.setImmediate||kt)(...Ut)},clearImmediate(Ut){const{delegate:wt}=Qe;return(wt?.clearImmediate||Ke)(Ut)},delegate:void 0};new class Ze extends Ae.q{flush(wt){this._active=!0;const $e=this._scheduled;this._scheduled=void 0;const{actions:_t}=this;let gn;wt=wt||_t.shift();do{if(gn=wt.execute(wt.state,wt.delay))break}while((wt=_t[0])&&wt.id===$e&&_t.shift());if(this._active=!1,gn){for(;(wt=_t[0])&&wt.id===$e&&_t.shift();)wt.unsubscribe();throw gn}}}(class ct extends Le.R{constructor(wt,$e){super(wt,$e),this.scheduler=wt,this.work=$e}requestAsyncId(wt,$e,_t=0){return null!==_t&&_t>0?super.requestAsyncId(wt,$e,_t):(wt.actions.push(this),wt._scheduled||(wt._scheduled=Qe.setImmediate(wt.flush.bind(wt,void 0))))}recycleAsyncId(wt,$e,_t=0){var gn;if(null!=_t?_t>0:this.delay>0)return super.recycleAsyncId(wt,$e,_t);const{actions:An}=wt;null!=$e&&(null===(gn=An[An.length-1])||void 0===gn?void 0:gn.id)!==$e&&(Qe.clearImmediate($e),wt._scheduled===$e&&(wt._scheduled=void 0))}});var ve=x(3236),At=x(9974),Jt=x(8750),Nt=x(4360),an=x(1807);function $t(Ut,wt=ve.E){return function Yt(Ut){return(0,At.N)((wt,$e)=>{let _t=!1,gn=null,An=null,ir=!1;const yr=()=>{if(An?.unsubscribe(),An=null,_t){_t=!1;const mr=gn;gn=null,$e.next(mr)}ir&&$e.complete()},ar=()=>{An=null,ir&&$e.complete()};wt.subscribe((0,Nt._)($e,mr=>{_t=!0,gn=mr,An||(0,Jt.Tg)(Ut(mr)).subscribe(An=(0,Nt._)($e,yr,ar))},()=>{ir=!0,(!_t||!An||An.closed)&&$e.complete()}))})}(()=>(0,an.O)(Ut,wt))}var ye=x(5964),Ye=x(6977),Ht=x(6860),et=x(177),gt=x(8203);let sr=(()=>{class Ut{constructor($e,_t,gn){this._ngZone=$e,this._platform=_t,this._scrolled=new q.B,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=gn}register($e){this.scrollContainers.has($e)||this.scrollContainers.set($e,$e.elementScrolled().subscribe(()=>this._scrolled.next($e)))}deregister($e){const _t=this.scrollContainers.get($e);_t&&(_t.unsubscribe(),this.scrollContainers.delete($e))}scrolled($e=20){return this._platform.isBrowser?new Ee.c(_t=>{this._globalSubscription||this._addGlobalListener();const gn=$e>0?this._scrolled.pipe($t($e)).subscribe(_t):this._scrolled.subscribe(_t);return this._scrolledCount++,()=>{gn.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):(0,H.of)()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach(($e,_t)=>this.deregister(_t)),this._scrolled.complete()}ancestorScrolled($e,_t){const gn=this.getAncestorScrollContainers($e);return this.scrolled(_t).pipe((0,ye.p)(An=>!An||gn.indexOf(An)>-1))}getAncestorScrollContainers($e){const _t=[];return this.scrollContainers.forEach((gn,An)=>{this._scrollableContainsElement(An,$e)&&_t.push(An)}),_t}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement($e,_t){let gn=(0,b.i8)(_t),An=$e.getElementRef().nativeElement;do{if(gn==An)return!0}while(gn=gn.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>{const $e=this._getWindow();return(0,Fe.R)($e.document,"scroll").subscribe(()=>this._scrolled.next())})}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}static{this.\u0275fac=function(_t){return new(_t||Ut)($.KVO($.SKi),$.KVO(Ht.OD),$.KVO(et.qQ,8))}}static{this.\u0275prov=$.jDH({token:Ut,factory:Ut.\u0275fac,providedIn:"root"})}}return Ut})(),fr=(()=>{class Ut{constructor($e,_t,gn,An){this.elementRef=$e,this.scrollDispatcher=_t,this.ngZone=gn,this.dir=An,this._destroyed=new q.B,this._elementScrolled=new Ee.c(ir=>this.ngZone.runOutsideAngular(()=>(0,Fe.R)(this.elementRef.nativeElement,"scroll").pipe((0,Ye.Q)(this._destroyed)).subscribe(ir)))}ngOnInit(){this.scrollDispatcher.register(this)}ngOnDestroy(){this.scrollDispatcher.deregister(this),this._destroyed.next(),this._destroyed.complete()}elementScrolled(){return this._elementScrolled}getElementRef(){return this.elementRef}scrollTo($e){const _t=this.elementRef.nativeElement,gn=this.dir&&"rtl"==this.dir.value;null==$e.left&&($e.left=gn?$e.end:$e.start),null==$e.right&&($e.right=gn?$e.start:$e.end),null!=$e.bottom&&($e.top=_t.scrollHeight-_t.clientHeight-$e.bottom),gn&&0!=(0,Ht.BD)()?(null!=$e.left&&($e.right=_t.scrollWidth-_t.clientWidth-$e.left),2==(0,Ht.BD)()?$e.left=$e.right:1==(0,Ht.BD)()&&($e.left=$e.right?-$e.right:$e.right)):null!=$e.right&&($e.left=_t.scrollWidth-_t.clientWidth-$e.right),this._applyScrollToOptions($e)}_applyScrollToOptions($e){const _t=this.elementRef.nativeElement;(0,Ht.CZ)()?_t.scrollTo($e):(null!=$e.top&&(_t.scrollTop=$e.top),null!=$e.left&&(_t.scrollLeft=$e.left))}measureScrollOffset($e){const _t="left",An=this.elementRef.nativeElement;if("top"==$e)return An.scrollTop;if("bottom"==$e)return An.scrollHeight-An.clientHeight-An.scrollTop;const ir=this.dir&&"rtl"==this.dir.value;return"start"==$e?$e=ir?"right":_t:"end"==$e&&($e=ir?_t:"right"),ir&&2==(0,Ht.BD)()?$e==_t?An.scrollWidth-An.clientWidth-An.scrollLeft:An.scrollLeft:ir&&1==(0,Ht.BD)()?$e==_t?An.scrollLeft+An.scrollWidth-An.clientWidth:-An.scrollLeft:$e==_t?An.scrollLeft:An.scrollWidth-An.clientWidth-An.scrollLeft}static{this.\u0275fac=function(_t){return new(_t||Ut)($.rXU($.aKT),$.rXU(sr),$.rXU($.SKi),$.rXU(gt.dS,8))}}static{this.\u0275dir=$.FsC({type:Ut,selectors:[["","cdk-scrollable",""],["","cdkScrollable",""]],standalone:!0})}}return Ut})(),Rr=(()=>{class Ut{constructor($e,_t,gn){this._platform=$e,this._change=new q.B,this._changeListener=An=>{this._change.next(An)},this._document=gn,_t.runOutsideAngular(()=>{if($e.isBrowser){const An=this._getWindow();An.addEventListener("resize",this._changeListener),An.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const $e=this._getWindow();$e.removeEventListener("resize",this._changeListener),$e.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const $e={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),$e}getViewportRect(){const $e=this.getViewportScrollPosition(),{width:_t,height:gn}=this.getViewportSize();return{top:$e.top,left:$e.left,bottom:$e.top+gn,right:$e.left+_t,height:gn,width:_t}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const $e=this._document,_t=this._getWindow(),gn=$e.documentElement,An=gn.getBoundingClientRect();return{top:-An.top||$e.body.scrollTop||_t.scrollY||gn.scrollTop||0,left:-An.left||$e.body.scrollLeft||_t.scrollX||gn.scrollLeft||0}}change($e=20){return $e>0?this._change.pipe($t($e)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const $e=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:$e.innerWidth,height:$e.innerHeight}:{width:0,height:0}}static{this.\u0275fac=function(_t){return new(_t||Ut)($.KVO(Ht.OD),$.KVO($.SKi),$.KVO(et.qQ,8))}}static{this.\u0275prov=$.jDH({token:Ut,factory:Ut.\u0275fac,providedIn:"root"})}}return Ut})(),fn=(()=>{class Ut{static{this.\u0275fac=function(_t){return new(_t||Ut)}}static{this.\u0275mod=$.$C({type:Ut})}static{this.\u0275inj=$.G2t({})}}return Ut})(),mn=(()=>{class Ut{static{this.\u0275fac=function(_t){return new(_t||Ut)}}static{this.\u0275mod=$.$C({type:Ut})}static{this.\u0275inj=$.G2t({imports:[gt.jI,fn,gt.jI,fn]})}}return Ut})()},177:(Cn,nt,x)=>{x.d(nt,{AJ:()=>Fo,Jj:()=>Ie,MD:()=>Ca,N0:()=>Dc,QT:()=>q,Sm:()=>Ft,T3:()=>Be,UE:()=>Cc,VF:()=>Ee,Vy:()=>qo,Xr:()=>ls,YU:()=>un,ZD:()=>H,_b:()=>Ue,aZ:()=>Pt,fw:()=>Gt,hb:()=>tt,hj:()=>Pe,qQ:()=>Le});var b=x(4438);let $=null;function q(){return $}function H(L){$??=L}class Ee{}const Le=new b.nKC("");let Ne=(()=>{class L{historyGo(X){throw new Error("")}static{this.\u0275fac=function(ue){return new(ue||L)}}static{this.\u0275prov=b.jDH({token:L,factory:()=>(0,b.WQX)(K),providedIn:"platform"})}}return L})();const Pe=new b.nKC("");let K=(()=>{class L extends Ne{constructor(){super(),this._doc=(0,b.WQX)(Le),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return q().getBaseHref(this._doc)}onPopState(X){const ue=q().getGlobalEventTarget(this._doc,"window");return ue.addEventListener("popstate",X,!1),()=>ue.removeEventListener("popstate",X)}onHashChange(X){const ue=q().getGlobalEventTarget(this._doc,"window");return ue.addEventListener("hashchange",X,!1),()=>ue.removeEventListener("hashchange",X)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(X){this._location.pathname=X}pushState(X,ue,qe){this._history.pushState(X,ue,qe)}replaceState(X,ue,qe){this._history.replaceState(X,ue,qe)}forward(){this._history.forward()}back(){this._history.back()}historyGo(X=0){this._history.go(X)}getState(){return this._history.state}static{this.\u0275fac=function(ue){return new(ue||L)}}static{this.\u0275prov=b.jDH({token:L,factory:()=>new L,providedIn:"platform"})}}return L})();function Ae(L,_e){if(0==L.length)return _e;if(0==_e.length)return L;let X=0;return L.endsWith("/")&&X++,_e.startsWith("/")&&X++,2==X?L+_e.substring(1):1==X?L+_e:L+"/"+_e}function He(L){const _e=L.match(/#|\?|$/),X=_e&&_e.index||L.length;return L.slice(0,X-("/"===L[X-1]?1:0))+L.slice(X)}function ot(L){return L&&"?"!==L[0]?"?"+L:L}let tt=(()=>{class L{historyGo(X){throw new Error("")}static{this.\u0275fac=function(ue){return new(ue||L)}}static{this.\u0275prov=b.jDH({token:L,factory:()=>(0,b.WQX)(Ft),providedIn:"root"})}}return L})();const Rt=new b.nKC("");let Ft=(()=>{class L extends tt{constructor(X,ue){super(),this._platformLocation=X,this._removeListenerFns=[],this._baseHref=ue??this._platformLocation.getBaseHrefFromDOM()??(0,b.WQX)(Le).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(X){this._removeListenerFns.push(this._platformLocation.onPopState(X),this._platformLocation.onHashChange(X))}getBaseHref(){return this._baseHref}prepareExternalUrl(X){return Ae(this._baseHref,X)}path(X=!1){const ue=this._platformLocation.pathname+ot(this._platformLocation.search),qe=this._platformLocation.hash;return qe&&X?`${ue}${qe}`:ue}pushState(X,ue,qe,cn){const Nn=this.prepareExternalUrl(qe+ot(cn));this._platformLocation.pushState(X,ue,Nn)}replaceState(X,ue,qe,cn){const Nn=this.prepareExternalUrl(qe+ot(cn));this._platformLocation.replaceState(X,ue,Nn)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(X=0){this._platformLocation.historyGo?.(X)}static{this.\u0275fac=function(ue){return new(ue||L)(b.KVO(Ne),b.KVO(Rt,8))}}static{this.\u0275prov=b.jDH({token:L,factory:L.\u0275fac,providedIn:"root"})}}return L})(),Gt=(()=>{class L extends tt{constructor(X,ue){super(),this._platformLocation=X,this._baseHref="",this._removeListenerFns=[],null!=ue&&(this._baseHref=ue)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(X){this._removeListenerFns.push(this._platformLocation.onPopState(X),this._platformLocation.onHashChange(X))}getBaseHref(){return this._baseHref}path(X=!1){const ue=this._platformLocation.hash??"#";return ue.length>0?ue.substring(1):ue}prepareExternalUrl(X){const ue=Ae(this._baseHref,X);return ue.length>0?"#"+ue:ue}pushState(X,ue,qe,cn){let Nn=this.prepareExternalUrl(qe+ot(cn));0==Nn.length&&(Nn=this._platformLocation.pathname),this._platformLocation.pushState(X,ue,Nn)}replaceState(X,ue,qe,cn){let Nn=this.prepareExternalUrl(qe+ot(cn));0==Nn.length&&(Nn=this._platformLocation.pathname),this._platformLocation.replaceState(X,ue,Nn)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(X=0){this._platformLocation.historyGo?.(X)}static{this.\u0275fac=function(ue){return new(ue||L)(b.KVO(Ne),b.KVO(Rt,8))}}static{this.\u0275prov=b.jDH({token:L,factory:L.\u0275fac})}}return L})(),Pt=(()=>{class L{constructor(X){this._subject=new b.bkB,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=X;const ue=this._locationStrategy.getBaseHref();this._basePath=function Ke(L){if(new RegExp("^(https?:)?//").test(L)){const[,X]=L.split(/\/\/[^\/]+/);return X}return L}(He(kt(ue))),this._locationStrategy.onPopState(qe=>{this._subject.emit({url:this.path(!0),pop:!0,state:qe.state,type:qe.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(X=!1){return this.normalize(this._locationStrategy.path(X))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(X,ue=""){return this.path()==this.normalize(X+ot(ue))}normalize(X){return L.stripTrailingSlash(function Et(L,_e){if(!L||!_e.startsWith(L))return _e;const X=_e.substring(L.length);return""===X||["/",";","?","#"].includes(X[0])?X:_e}(this._basePath,kt(X)))}prepareExternalUrl(X){return X&&"/"!==X[0]&&(X="/"+X),this._locationStrategy.prepareExternalUrl(X)}go(X,ue="",qe=null){this._locationStrategy.pushState(qe,"",X,ue),this._notifyUrlChangeListeners(this.prepareExternalUrl(X+ot(ue)),qe)}replaceState(X,ue="",qe=null){this._locationStrategy.replaceState(qe,"",X,ue),this._notifyUrlChangeListeners(this.prepareExternalUrl(X+ot(ue)),qe)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(X=0){this._locationStrategy.historyGo?.(X)}onUrlChange(X){return this._urlChangeListeners.push(X),this._urlChangeSubscription??=this.subscribe(ue=>{this._notifyUrlChangeListeners(ue.url,ue.state)}),()=>{const ue=this._urlChangeListeners.indexOf(X);this._urlChangeListeners.splice(ue,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(X="",ue){this._urlChangeListeners.forEach(qe=>qe(X,ue))}subscribe(X,ue,qe){return this._subject.subscribe({next:X,error:ue,complete:qe})}static{this.normalizeQueryParams=ot}static{this.joinWithSlash=Ae}static{this.stripTrailingSlash=He}static{this.\u0275fac=function(ue){return new(ue||L)(b.KVO(tt))}}static{this.\u0275prov=b.jDH({token:L,factory:()=>function hn(){return new Pt((0,b.KVO)(tt))}(),providedIn:"root"})}}return L})();function kt(L){return L.replace(/\/index.html$/,"")}function Ue(L,_e){_e=encodeURIComponent(_e);for(const X of L.split(";")){const ue=X.indexOf("="),[qe,cn]=-1==ue?[X,""]:[X.slice(0,ue),X.slice(ue+1)];if(qe.trim()===_e)return decodeURIComponent(cn)}return null}const it=/\s+/,ut=[];let un=(()=>{class L{constructor(X,ue){this._ngEl=X,this._renderer=ue,this.initialClasses=ut,this.stateMap=new Map}set klass(X){this.initialClasses=null!=X?X.trim().split(it):ut}set ngClass(X){this.rawClass="string"==typeof X?X.trim().split(it):X}ngDoCheck(){for(const ue of this.initialClasses)this._updateState(ue,!0);const X=this.rawClass;if(Array.isArray(X)||X instanceof Set)for(const ue of X)this._updateState(ue,!0);else if(null!=X)for(const ue of Object.keys(X))this._updateState(ue,!!X[ue]);this._applyStateDiff()}_updateState(X,ue){const qe=this.stateMap.get(X);void 0!==qe?(qe.enabled!==ue&&(qe.changed=!0,qe.enabled=ue),qe.touched=!0):this.stateMap.set(X,{enabled:ue,changed:!0,touched:!0})}_applyStateDiff(){for(const X of this.stateMap){const ue=X[0],qe=X[1];qe.changed?(this._toggleClass(ue,qe.enabled),qe.changed=!1):qe.touched||(qe.enabled&&this._toggleClass(ue,!1),this.stateMap.delete(ue)),qe.touched=!1}}_toggleClass(X,ue){(X=X.trim()).length>0&&X.split(it).forEach(qe=>{ue?this._renderer.addClass(this._ngEl.nativeElement,qe):this._renderer.removeClass(this._ngEl.nativeElement,qe)})}static{this.\u0275fac=function(ue){return new(ue||L)(b.rXU(b.aKT),b.rXU(b.sFG))}}static{this.\u0275dir=b.FsC({type:L,selectors:[["","ngClass",""]],inputs:{klass:[b.Mj6.None,"class","klass"],ngClass:"ngClass"},standalone:!0})}}return L})(),Be=(()=>{class L{constructor(X){this._viewContainerRef=X,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(X){if(this._shouldRecreateView(X)){const ue=this._viewContainerRef;if(this._viewRef&&ue.remove(ue.indexOf(this._viewRef)),!this.ngTemplateOutlet)return void(this._viewRef=null);const qe=this._createContextForwardProxy();this._viewRef=ue.createEmbeddedView(this.ngTemplateOutlet,qe,{injector:this.ngTemplateOutletInjector??void 0})}}_shouldRecreateView(X){return!!X.ngTemplateOutlet||!!X.ngTemplateOutletInjector}_createContextForwardProxy(){return new Proxy({},{set:(X,ue,qe)=>!!this.ngTemplateOutletContext&&Reflect.set(this.ngTemplateOutletContext,ue,qe),get:(X,ue,qe)=>{if(this.ngTemplateOutletContext)return Reflect.get(this.ngTemplateOutletContext,ue,qe)}})}static{this.\u0275fac=function(ue){return new(ue||L)(b.rXU(b.c1b))}}static{this.\u0275dir=b.FsC({type:L,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[b.OA$]})}}return L})();class Kt{createSubscription(_e,X){return(0,b.O8t)(()=>_e.subscribe({next:X,error:ue=>{throw ue}}))}dispose(_e){(0,b.O8t)(()=>_e.unsubscribe())}}class Kn{createSubscription(_e,X){return _e.then(X,ue=>{throw ue})}dispose(_e){}}const Rn=new Kn,mt=new Kt;let Ie=(()=>{class L{constructor(X){this._latestValue=null,this.markForCheckOnValueUpdate=!0,this._subscription=null,this._obj=null,this._strategy=null,this._ref=X}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(X){if(!this._obj){if(X)try{this.markForCheckOnValueUpdate=!1,this._subscribe(X)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return X!==this._obj?(this._dispose(),this.transform(X)):this._latestValue}_subscribe(X){this._obj=X,this._strategy=this._selectStrategy(X),this._subscription=this._strategy.createSubscription(X,ue=>this._updateLatestValue(X,ue))}_selectStrategy(X){if((0,b.jNT)(X))return Rn;if((0,b.zjR)(X))return mt;throw function bt(L,_e){return new b.wOt(2100,!1)}()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(X,ue){X===this._obj&&(this._latestValue=ue,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}static{this.\u0275fac=function(ue){return new(ue||L)(b.rXU(b.gRc,16))}}static{this.\u0275pipe=b.EJ8({name:"async",type:L,pure:!1,standalone:!0})}}return L})(),Ca=(()=>{class L{static{this.\u0275fac=function(ue){return new(ue||L)}}static{this.\u0275mod=b.$C({type:L})}static{this.\u0275inj=b.G2t({})}}return L})();const Fo="browser",rc="server";function Cc(L){return L===Fo}function qo(L){return L===rc}let ls=(()=>{class L{static{this.\u0275prov=(0,b.jDH)({token:L,providedIn:"root",factory:()=>Cc((0,b.WQX)(b.Agw))?new Sc((0,b.WQX)(Le),window):new fa})}}return L})();class Sc{constructor(_e,X){this.document=_e,this.window=X,this.offset=()=>[0,0]}setOffset(_e){this.offset=Array.isArray(_e)?()=>_e:_e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(_e){this.window.scrollTo(_e[0],_e[1])}scrollToAnchor(_e){const X=function Br(L,_e){const X=L.getElementById(_e)||L.getElementsByName(_e)[0];if(X)return X;if("function"==typeof L.createTreeWalker&&L.body&&"function"==typeof L.body.attachShadow){const ue=L.createTreeWalker(L.body,NodeFilter.SHOW_ELEMENT);let qe=ue.currentNode;for(;qe;){const cn=qe.shadowRoot;if(cn){const Nn=cn.getElementById(_e)||cn.querySelector(`[name="${_e}"]`);if(Nn)return Nn}qe=ue.nextNode()}}return null}(this.document,_e);X&&(this.scrollToElement(X),X.focus())}setHistoryScrollRestoration(_e){this.window.history.scrollRestoration=_e}scrollToElement(_e){const X=_e.getBoundingClientRect(),ue=X.left+this.window.pageXOffset,qe=X.top+this.window.pageYOffset,cn=this.offset();this.window.scrollTo(ue-cn[0],qe-cn[1])}}class fa{setOffset(_e){}getScrollPosition(){return[0,0]}scrollToPosition(_e){}scrollToAnchor(_e){}setHistoryScrollRestoration(_e){}}class Dc{}},1626:(Cn,nt,x)=>{x.d(nt,{$R:()=>Q,$m:()=>_s,Lr:()=>Rt,Nl:()=>Qe,Qq:()=>gt,Sx:()=>pe,a7:()=>Rr}),x(4523);var $=x(4438),q=x(7673),H=x(1985),Ee=x(8455),Fe=x(274),Le=x(5964),Ne=x(6354),Pe=x(980),K=x(5558),Ae=x(8141),He=x(177);class ot{}class tt{}class Rt{constructor(it){this.normalizedNames=new Map,this.lazyUpdate=null,it?"string"==typeof it?this.lazyInit=()=>{this.headers=new Map,it.split("\n").forEach(ut=>{const un=ut.indexOf(":");if(un>0){const sn=ut.slice(0,un),Sn=sn.toLowerCase(),jt=ut.slice(un+1).trim();this.maybeSetNormalizedName(sn,Sn),this.headers.has(Sn)?this.headers.get(Sn).push(jt):this.headers.set(Sn,[jt])}})}:typeof Headers<"u"&&it instanceof Headers?(this.headers=new Map,it.forEach((ut,un)=>{this.setHeaderEntries(un,ut)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(it).forEach(([ut,un])=>{this.setHeaderEntries(ut,un)})}:this.headers=new Map}has(it){return this.init(),this.headers.has(it.toLowerCase())}get(it){this.init();const ut=this.headers.get(it.toLowerCase());return ut&&ut.length>0?ut[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(it){return this.init(),this.headers.get(it.toLowerCase())||null}append(it,ut){return this.clone({name:it,value:ut,op:"a"})}set(it,ut){return this.clone({name:it,value:ut,op:"s"})}delete(it,ut){return this.clone({name:it,value:ut,op:"d"})}maybeSetNormalizedName(it,ut){this.normalizedNames.has(ut)||this.normalizedNames.set(ut,it)}init(){this.lazyInit&&(this.lazyInit instanceof Rt?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(it=>this.applyUpdate(it)),this.lazyUpdate=null))}copyFrom(it){it.init(),Array.from(it.headers.keys()).forEach(ut=>{this.headers.set(ut,it.headers.get(ut)),this.normalizedNames.set(ut,it.normalizedNames.get(ut))})}clone(it){const ut=new Rt;return ut.lazyInit=this.lazyInit&&this.lazyInit instanceof Rt?this.lazyInit:this,ut.lazyUpdate=(this.lazyUpdate||[]).concat([it]),ut}applyUpdate(it){const ut=it.name.toLowerCase();switch(it.op){case"a":case"s":let un=it.value;if("string"==typeof un&&(un=[un]),0===un.length)return;this.maybeSetNormalizedName(it.name,ut);const sn=("a"===it.op?this.headers.get(ut):void 0)||[];sn.push(...un),this.headers.set(ut,sn);break;case"d":const Sn=it.value;if(Sn){let jt=this.headers.get(ut);if(!jt)return;jt=jt.filter(Xn=>-1===Sn.indexOf(Xn)),0===jt.length?(this.headers.delete(ut),this.normalizedNames.delete(ut)):this.headers.set(ut,jt)}else this.headers.delete(ut),this.normalizedNames.delete(ut)}}setHeaderEntries(it,ut){const un=(Array.isArray(ut)?ut:[ut]).map(Sn=>Sn.toString()),sn=it.toLowerCase();this.headers.set(sn,un),this.maybeSetNormalizedName(it,sn)}forEach(it){this.init(),Array.from(this.normalizedNames.keys()).forEach(ut=>it(this.normalizedNames.get(ut),this.headers.get(ut)))}}class Gt{encodeKey(it){return kt(it)}encodeValue(it){return kt(it)}decodeKey(it){return decodeURIComponent(it)}decodeValue(it){return decodeURIComponent(it)}}const hn=/%(\d[a-f0-9])/gi,Et={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function kt(Ue){return encodeURIComponent(Ue).replace(hn,(it,ut)=>Et[ut]??it)}function Ke(Ue){return`${Ue}`}class Qe{constructor(it={}){if(this.updates=null,this.cloneFrom=null,this.encoder=it.encoder||new Gt,it.fromString){if(it.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function Pt(Ue,it){const ut=new Map;return Ue.length>0&&Ue.replace(/^\?/,"").split("&").forEach(sn=>{const Sn=sn.indexOf("="),[jt,Xn]=-1==Sn?[it.decodeKey(sn),""]:[it.decodeKey(sn.slice(0,Sn)),it.decodeValue(sn.slice(Sn+1))],Bn=ut.get(jt)||[];Bn.push(Xn),ut.set(jt,Bn)}),ut}(it.fromString,this.encoder)}else it.fromObject?(this.map=new Map,Object.keys(it.fromObject).forEach(ut=>{const un=it.fromObject[ut],sn=Array.isArray(un)?un.map(Ke):[Ke(un)];this.map.set(ut,sn)})):this.map=null}has(it){return this.init(),this.map.has(it)}get(it){this.init();const ut=this.map.get(it);return ut?ut[0]:null}getAll(it){return this.init(),this.map.get(it)||null}keys(){return this.init(),Array.from(this.map.keys())}append(it,ut){return this.clone({param:it,value:ut,op:"a"})}appendAll(it){const ut=[];return Object.keys(it).forEach(un=>{const sn=it[un];Array.isArray(sn)?sn.forEach(Sn=>{ut.push({param:un,value:Sn,op:"a"})}):ut.push({param:un,value:sn,op:"a"})}),this.clone(ut)}set(it,ut){return this.clone({param:it,value:ut,op:"s"})}delete(it,ut){return this.clone({param:it,value:ut,op:"d"})}toString(){return this.init(),this.keys().map(it=>{const ut=this.encoder.encodeKey(it);return this.map.get(it).map(un=>ut+"="+this.encoder.encodeValue(un)).join("&")}).filter(it=>""!==it).join("&")}clone(it){const ut=new Qe({encoder:this.encoder});return ut.cloneFrom=this.cloneFrom||this,ut.updates=(this.updates||[]).concat(it),ut}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(it=>this.map.set(it,this.cloneFrom.map.get(it))),this.updates.forEach(it=>{switch(it.op){case"a":case"s":const ut=("a"===it.op?this.map.get(it.param):void 0)||[];ut.push(Ke(it.value)),this.map.set(it.param,ut);break;case"d":if(void 0===it.value){this.map.delete(it.param);break}{let un=this.map.get(it.param)||[];const sn=un.indexOf(Ke(it.value));-1!==sn&&un.splice(sn,1),un.length>0?this.map.set(it.param,un):this.map.delete(it.param)}}}),this.cloneFrom=this.updates=null)}}class Ze{constructor(){this.map=new Map}set(it,ut){return this.map.set(it,ut),this}get(it){return this.map.has(it)||this.map.set(it,it.defaultValue()),this.map.get(it)}delete(it){return this.map.delete(it),this}has(it){return this.map.has(it)}keys(){return this.map.keys()}}function me(Ue){return typeof ArrayBuffer<"u"&&Ue instanceof ArrayBuffer}function ve(Ue){return typeof Blob<"u"&&Ue instanceof Blob}function At(Ue){return typeof FormData<"u"&&Ue instanceof FormData}class Nt{constructor(it,ut,un,sn){let Sn;if(this.url=ut,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=it.toUpperCase(),function Ge(Ue){switch(Ue){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||sn?(this.body=void 0!==un?un:null,Sn=sn):Sn=un,Sn&&(this.reportProgress=!!Sn.reportProgress,this.withCredentials=!!Sn.withCredentials,Sn.responseType&&(this.responseType=Sn.responseType),Sn.headers&&(this.headers=Sn.headers),Sn.context&&(this.context=Sn.context),Sn.params&&(this.params=Sn.params),this.transferCache=Sn.transferCache),this.headers??=new Rt,this.context??=new Ze,this.params){const jt=this.params.toString();if(0===jt.length)this.urlWithParams=ut;else{const Xn=ut.indexOf("?");this.urlWithParams=ut+(-1===Xn?"?":Xn<ut.length-1?"&":"")+jt}}else this.params=new Qe,this.urlWithParams=ut}serializeBody(){return null===this.body?null:"string"==typeof this.body||me(this.body)||ve(this.body)||At(this.body)||function Jt(Ue){return typeof URLSearchParams<"u"&&Ue instanceof URLSearchParams}(this.body)?this.body:this.body instanceof Qe?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||At(this.body)?null:ve(this.body)?this.body.type||null:me(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Qe?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(it={}){const ut=it.method||this.method,un=it.url||this.url,sn=it.responseType||this.responseType,Sn=it.transferCache??this.transferCache,jt=void 0!==it.body?it.body:this.body,Xn=it.withCredentials??this.withCredentials,Bn=it.reportProgress??this.reportProgress;let ti=it.headers||this.headers,wr=it.params||this.params;const yn=it.context??this.context;return void 0!==it.setHeaders&&(ti=Object.keys(it.setHeaders).reduce((Dn,or)=>Dn.set(or,it.setHeaders[or]),ti)),it.setParams&&(wr=Object.keys(it.setParams).reduce((Dn,or)=>Dn.set(or,it.setParams[or]),wr)),new Nt(ut,un,jt,{params:wr,headers:ti,context:yn,reportProgress:Bn,responseType:sn,withCredentials:Xn,transferCache:Sn})}}var Yt=function(Ue){return Ue[Ue.Sent=0]="Sent",Ue[Ue.UploadProgress=1]="UploadProgress",Ue[Ue.ResponseHeader=2]="ResponseHeader",Ue[Ue.DownloadProgress=3]="DownloadProgress",Ue[Ue.Response=4]="Response",Ue[Ue.User=5]="User",Ue}(Yt||{});class an{constructor(it,ut=Ht.Ok,un="OK"){this.headers=it.headers||new Rt,this.status=void 0!==it.status?it.status:ut,this.statusText=it.statusText||un,this.url=it.url||null,this.ok=this.status>=200&&this.status<300}}class $t extends an{constructor(it={}){super(it),this.type=Yt.ResponseHeader}clone(it={}){return new $t({headers:it.headers||this.headers,status:void 0!==it.status?it.status:this.status,statusText:it.statusText||this.statusText,url:it.url||this.url||void 0})}}class ye extends an{constructor(it={}){super(it),this.type=Yt.Response,this.body=void 0!==it.body?it.body:null}clone(it={}){return new ye({body:void 0!==it.body?it.body:this.body,headers:it.headers||this.headers,status:void 0!==it.status?it.status:this.status,statusText:it.statusText||this.statusText,url:it.url||this.url||void 0})}}class Ye extends an{constructor(it){super(it,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${it.url||"(unknown url)"}`:`Http failure response for ${it.url||"(unknown url)"}: ${it.status} ${it.statusText}`,this.error=it.error||null}}var Ht=function(Ue){return Ue[Ue.Continue=100]="Continue",Ue[Ue.SwitchingProtocols=101]="SwitchingProtocols",Ue[Ue.Processing=102]="Processing",Ue[Ue.EarlyHints=103]="EarlyHints",Ue[Ue.Ok=200]="Ok",Ue[Ue.Created=201]="Created",Ue[Ue.Accepted=202]="Accepted",Ue[Ue.NonAuthoritativeInformation=203]="NonAuthoritativeInformation",Ue[Ue.NoContent=204]="NoContent",Ue[Ue.ResetContent=205]="ResetContent",Ue[Ue.PartialContent=206]="PartialContent",Ue[Ue.MultiStatus=207]="MultiStatus",Ue[Ue.AlreadyReported=208]="AlreadyReported",Ue[Ue.ImUsed=226]="ImUsed",Ue[Ue.MultipleChoices=300]="MultipleChoices",Ue[Ue.MovedPermanently=301]="MovedPermanently",Ue[Ue.Found=302]="Found",Ue[Ue.SeeOther=303]="SeeOther",Ue[Ue.NotModified=304]="NotModified",Ue[Ue.UseProxy=305]="UseProxy",Ue[Ue.Unused=306]="Unused",Ue[Ue.TemporaryRedirect=307]="TemporaryRedirect",Ue[Ue.PermanentRedirect=308]="PermanentRedirect",Ue[Ue.BadRequest=400]="BadRequest",Ue[Ue.Unauthorized=401]="Unauthorized",Ue[Ue.PaymentRequired=402]="PaymentRequired",Ue[Ue.Forbidden=403]="Forbidden",Ue[Ue.NotFound=404]="NotFound",Ue[Ue.MethodNotAllowed=405]="MethodNotAllowed",Ue[Ue.NotAcceptable=406]="NotAcceptable",Ue[Ue.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",Ue[Ue.RequestTimeout=408]="RequestTimeout",Ue[Ue.Conflict=409]="Conflict",Ue[Ue.Gone=410]="Gone",Ue[Ue.LengthRequired=411]="LengthRequired",Ue[Ue.PreconditionFailed=412]="PreconditionFailed",Ue[Ue.PayloadTooLarge=413]="PayloadTooLarge",Ue[Ue.UriTooLong=414]="UriTooLong",Ue[Ue.UnsupportedMediaType=415]="UnsupportedMediaType",Ue[Ue.RangeNotSatisfiable=416]="RangeNotSatisfiable",Ue[Ue.ExpectationFailed=417]="ExpectationFailed",Ue[Ue.ImATeapot=418]="ImATeapot",Ue[Ue.MisdirectedRequest=421]="MisdirectedRequest",Ue[Ue.UnprocessableEntity=422]="UnprocessableEntity",Ue[Ue.Locked=423]="Locked",Ue[Ue.FailedDependency=424]="FailedDependency",Ue[Ue.TooEarly=425]="TooEarly",Ue[Ue.UpgradeRequired=426]="UpgradeRequired",Ue[Ue.PreconditionRequired=428]="PreconditionRequired",Ue[Ue.TooManyRequests=429]="TooManyRequests",Ue[Ue.RequestHeaderFieldsTooLarge=431]="RequestHeaderFieldsTooLarge",Ue[Ue.UnavailableForLegalReasons=451]="UnavailableForLegalReasons",Ue[Ue.InternalServerError=500]="InternalServerError",Ue[Ue.NotImplemented=501]="NotImplemented",Ue[Ue.BadGateway=502]="BadGateway",Ue[Ue.ServiceUnavailable=503]="ServiceUnavailable",Ue[Ue.GatewayTimeout=504]="GatewayTimeout",Ue[Ue.HttpVersionNotSupported=505]="HttpVersionNotSupported",Ue[Ue.VariantAlsoNegotiates=506]="VariantAlsoNegotiates",Ue[Ue.InsufficientStorage=507]="InsufficientStorage",Ue[Ue.LoopDetected=508]="LoopDetected",Ue[Ue.NotExtended=510]="NotExtended",Ue[Ue.NetworkAuthenticationRequired=511]="NetworkAuthenticationRequired",Ue}(Ht||{});function et(Ue,it){return{body:it,headers:Ue.headers,context:Ue.context,observe:Ue.observe,params:Ue.params,reportProgress:Ue.reportProgress,responseType:Ue.responseType,withCredentials:Ue.withCredentials,transferCache:Ue.transferCache}}let gt=(()=>{class Ue{constructor(ut){this.handler=ut}request(ut,un,sn={}){let Sn;if(ut instanceof Nt)Sn=ut;else{let Bn,ti;Bn=sn.headers instanceof Rt?sn.headers:new Rt(sn.headers),sn.params&&(ti=sn.params instanceof Qe?sn.params:new Qe({fromObject:sn.params})),Sn=new Nt(ut,un,void 0!==sn.body?sn.body:null,{headers:Bn,context:sn.context,params:ti,reportProgress:sn.reportProgress,responseType:sn.responseType||"json",withCredentials:sn.withCredentials,transferCache:sn.transferCache})}const jt=(0,q.of)(Sn).pipe((0,Fe.H)(Bn=>this.handler.handle(Bn)));if(ut instanceof Nt||"events"===sn.observe)return jt;const Xn=jt.pipe((0,Le.p)(Bn=>Bn instanceof ye));switch(sn.observe||"body"){case"body":switch(Sn.responseType){case"arraybuffer":return Xn.pipe((0,Ne.T)(Bn=>{if(null!==Bn.body&&!(Bn.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return Bn.body}));case"blob":return Xn.pipe((0,Ne.T)(Bn=>{if(null!==Bn.body&&!(Bn.body instanceof Blob))throw new Error("Response is not a Blob.");return Bn.body}));case"text":return Xn.pipe((0,Ne.T)(Bn=>{if(null!==Bn.body&&"string"!=typeof Bn.body)throw new Error("Response is not a string.");return Bn.body}));default:return Xn.pipe((0,Ne.T)(Bn=>Bn.body))}case"response":return Xn;default:throw new Error(`Unreachable: unhandled observe type ${sn.observe}}`)}}delete(ut,un={}){return this.request("DELETE",ut,un)}get(ut,un={}){return this.request("GET",ut,un)}head(ut,un={}){return this.request("HEAD",ut,un)}jsonp(ut,un){return this.request("JSONP",ut,{params:(new Qe).append(un,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(ut,un={}){return this.request("OPTIONS",ut,un)}patch(ut,un,sn={}){return this.request("PATCH",ut,et(sn,un))}post(ut,un,sn={}){return this.request("POST",ut,et(sn,un))}put(ut,un,sn={}){return this.request("PUT",ut,et(sn,un))}static{this.\u0275fac=function(un){return new(un||Ue)($.KVO(ot))}}static{this.\u0275prov=$.jDH({token:Ue,factory:Ue.\u0275fac})}}return Ue})();function sr(Ue,it){return it(Ue)}function fr(Ue,it){return(ut,un)=>it.intercept(ut,{handle:sn=>Ue(sn,un)})}const Rr=new $.nKC(""),vr=new $.nKC(""),$n=new $.nKC(""),qn=new $.nKC("");function gi(){let Ue=null;return(it,ut)=>{null===Ue&&(Ue=((0,$.WQX)(Rr,{optional:!0})??[]).reduceRight(fr,sr));const un=(0,$.WQX)($.TgB),sn=un.add();return Ue(it,ut).pipe((0,Pe.j)(()=>un.remove(sn)))}}let Xe=(()=>{class Ue extends ot{constructor(ut,un){super(),this.backend=ut,this.injector=un,this.chain=null,this.pendingTasks=(0,$.WQX)($.TgB);const sn=(0,$.WQX)(qn,{optional:!0});this.backend=sn??ut}handle(ut){if(null===this.chain){const sn=Array.from(new Set([...this.injector.get(vr),...this.injector.get($n,[])]));this.chain=sn.reduceRight((Sn,jt)=>function Jn(Ue,it,ut){return(un,sn)=>(0,$.N4e)(ut,()=>it(un,Sn=>Ue(Sn,sn)))}(Sn,jt,this.injector),sr)}const un=this.pendingTasks.add();return this.chain(ut,sn=>this.backend.handle(sn)).pipe((0,Pe.j)(()=>this.pendingTasks.remove(un)))}static{this.\u0275fac=function(un){return new(un||Ue)($.KVO(tt),$.KVO($.uvJ))}}static{this.\u0275prov=$.jDH({token:Ue,factory:Ue.\u0275fac})}}return Ue})();const yr=/^\)\]\}',?\n/;let mr=(()=>{class Ue{constructor(ut){this.xhrFactory=ut}handle(ut){if("JSONP"===ut.method)throw new $.wOt(-2800,!1);const un=this.xhrFactory;return(un.\u0275loadImpl?(0,Ee.H)(un.\u0275loadImpl()):(0,q.of)(null)).pipe((0,K.n)(()=>new H.c(Sn=>{const jt=un.build();if(jt.open(ut.method,ut.urlWithParams),ut.withCredentials&&(jt.withCredentials=!0),ut.headers.forEach((_r,xn)=>jt.setRequestHeader(_r,xn.join(","))),ut.headers.has("Accept")||jt.setRequestHeader("Accept","application/json, text/plain, */*"),!ut.headers.has("Content-Type")){const _r=ut.detectContentTypeHeader();null!==_r&&jt.setRequestHeader("Content-Type",_r)}if(ut.responseType){const _r=ut.responseType.toLowerCase();jt.responseType="json"!==_r?_r:"text"}const Xn=ut.serializeBody();let Bn=null;const ti=()=>{if(null!==Bn)return Bn;const _r=jt.statusText||"OK",xn=new Rt(jt.getAllResponseHeaders()),Zr=function ar(Ue){return"responseURL"in Ue&&Ue.responseURL?Ue.responseURL:/^X-Request-URL:/m.test(Ue.getAllResponseHeaders())?Ue.getResponseHeader("X-Request-URL"):null}(jt)||ut.url;return Bn=new $t({headers:xn,status:jt.status,statusText:_r,url:Zr}),Bn},wr=()=>{let{headers:_r,status:xn,statusText:Zr,url:Ri}=ti(),kr=null;xn!==Ht.NoContent&&(kr=typeof jt.response>"u"?jt.responseText:jt.response),0===xn&&(xn=kr?Ht.Ok:0);let oi=xn>=200&&xn<300;if("json"===ut.responseType&&"string"==typeof kr){const As=kr;kr=kr.replace(yr,"");try{kr=""!==kr?JSON.parse(kr):null}catch(qi){kr=As,oi&&(oi=!1,kr={error:qi,text:kr})}}oi?(Sn.next(new ye({body:kr,headers:_r,status:xn,statusText:Zr,url:Ri||void 0})),Sn.complete()):Sn.error(new Ye({error:kr,headers:_r,status:xn,statusText:Zr,url:Ri||void 0}))},yn=_r=>{const{url:xn}=ti(),Zr=new Ye({error:_r,status:jt.status||0,statusText:jt.statusText||"Unknown Error",url:xn||void 0});Sn.error(Zr)};let Dn=!1;const or=_r=>{Dn||(Sn.next(ti()),Dn=!0);let xn={type:Yt.DownloadProgress,loaded:_r.loaded};_r.lengthComputable&&(xn.total=_r.total),"text"===ut.responseType&&jt.responseText&&(xn.partialText=jt.responseText),Sn.next(xn)},gr=_r=>{let xn={type:Yt.UploadProgress,loaded:_r.loaded};_r.lengthComputable&&(xn.total=_r.total),Sn.next(xn)};return jt.addEventListener("load",wr),jt.addEventListener("error",yn),jt.addEventListener("timeout",yn),jt.addEventListener("abort",yn),ut.reportProgress&&(jt.addEventListener("progress",or),null!==Xn&&jt.upload&&jt.upload.addEventListener("progress",gr)),jt.send(Xn),Sn.next({type:Yt.Sent}),()=>{jt.removeEventListener("error",yn),jt.removeEventListener("abort",yn),jt.removeEventListener("load",wr),jt.removeEventListener("timeout",yn),ut.reportProgress&&(jt.removeEventListener("progress",or),null!==Xn&&jt.upload&&jt.upload.removeEventListener("progress",gr)),jt.readyState!==jt.DONE&&jt.abort()}})))}static{this.\u0275fac=function(un){return new(un||Ue)($.KVO(He.N0))}}static{this.\u0275prov=$.jDH({token:Ue,factory:Ue.\u0275fac})}}return Ue})();const Yr=new $.nKC(""),xt=new $.nKC("",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),ai=new $.nKC("",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class yi{}let Xr=(()=>{class Ue{constructor(ut,un,sn){this.doc=ut,this.platform=un,this.cookieName=sn,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const ut=this.doc.cookie||"";return ut!==this.lastCookieString&&(this.parseCount++,this.lastToken=(0,He._b)(ut,this.cookieName),this.lastCookieString=ut),this.lastToken}static{this.\u0275fac=function(un){return new(un||Ue)($.KVO(He.qQ),$.KVO($.Agw),$.KVO(xt))}}static{this.\u0275prov=$.jDH({token:Ue,factory:Ue.\u0275fac})}}return Ue})();function pn(Ue,it){const ut=Ue.url.toLowerCase();if(!(0,$.WQX)(Yr)||"GET"===Ue.method||"HEAD"===Ue.method||ut.startsWith("http://")||ut.startsWith("https://"))return it(Ue);const un=(0,$.WQX)(yi).getToken(),sn=(0,$.WQX)(ai);return null!=un&&!Ue.headers.has(sn)&&(Ue=Ue.clone({headers:Ue.headers.set(sn,un)})),it(Ue)}var ne=function(Ue){return Ue[Ue.Interceptors=0]="Interceptors",Ue[Ue.LegacyInterceptors=1]="LegacyInterceptors",Ue[Ue.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",Ue[Ue.NoXsrfProtection=3]="NoXsrfProtection",Ue[Ue.JsonpSupport=4]="JsonpSupport",Ue[Ue.RequestsMadeViaParent=5]="RequestsMadeViaParent",Ue[Ue.Fetch=6]="Fetch",Ue}(ne||{});function Q(...Ue){const it=[gt,mr,Xe,{provide:ot,useExisting:Xe},{provide:tt,useExisting:mr},{provide:vr,useValue:pn,multi:!0},{provide:Yr,useValue:!0},{provide:yi,useClass:Xr}];for(const ut of Ue)it.push(...ut.\u0275providers);return(0,$.EmA)(it)}const ee=new $.nKC("");function pe(){return function J(Ue,it){return{\u0275kind:Ue,\u0275providers:it}}(ne.LegacyInterceptors,[{provide:ee,useFactory:gi},{provide:vr,useExisting:ee,multi:!0}])}const hi="b",er="h",rs="s",Ms="st",Ks="u",Co="rt",Os=new $.nKC(""),vi=["GET","HEAD"];function la(Ue,it){const{isCacheActive:ut,...un}=(0,$.WQX)(Os),{transferCache:sn,method:Sn}=Ue;if(!ut||"POST"===Sn&&!un.includePostRequests&&!sn||"POST"!==Sn&&!vi.includes(Sn)||!1===sn||!1===un.filter?.(Ue))return it(Ue);const jt=(0,$.WQX)($.pJN),Xn=function fo(Ue){const{params:it,method:ut,responseType:un,url:sn}=Ue,Sn=so(it);let jt=Ue.serializeBody();jt instanceof URLSearchParams?jt=so(jt):"string"!=typeof jt&&(jt="");const Bn=function Gs(Ue){let it=0;for(const ut of Ue)it=Math.imul(31,it)+ut.charCodeAt(0)|0;return it+=2147483648,it.toString()}([ut,un,sn,jt,Sn].join("|"));return(0,$.zw6)(Bn)}(Ue),Bn=jt.get(Xn,null);let ti=un.includeHeaders;if("object"==typeof sn&&sn.includeHeaders&&(ti=sn.includeHeaders),Bn){const{[hi]:yn,[Co]:Dn,[er]:or,[rs]:gr,[Ms]:_r,[Ks]:xn}=Bn;let Zr=yn;switch(Dn){case"arraybuffer":Zr=(new TextEncoder).encode(yn).buffer;break;case"blob":Zr=new Blob([yn])}let Ri=new Rt(or);return(0,q.of)(new ye({body:Zr,headers:Ri,status:gr,statusText:_r,url:xn}))}const wr=(0,He.Vy)((0,$.WQX)($.Agw));return it(Ue).pipe((0,Ae.M)(yn=>{yn instanceof ye&&wr&&jt.set(Xn,{[hi]:yn.body,[er]:$s(yn.headers,ti),[rs]:yn.status,[Ms]:yn.statusText,[Ks]:yn.url||"",[Co]:Ue.responseType})}))}function $s(Ue,it){if(!it)return{};const ut={};for(const un of it){const sn=Ue.getAll(un);null!==sn&&(ut[un]=sn)}return ut}function so(Ue){return[...Ue.keys()].sort().map(it=>`${it}=${Ue.getAll(it)}`).join("&")}function _s(Ue){return[{provide:Os,useFactory:()=>((0,$.ngT)("NgHttpTransferCache"),{isCacheActive:!0,...Ue})},{provide:$n,useValue:la,multi:!0,deps:[$.pJN,Os]},{provide:$.iLQ,multi:!0,useFactory:()=>{const it=(0,$.WQX)($.o8S),ut=(0,$.WQX)(Os);return()=>{(0,$.zuW)(it).then(()=>{ut.isCacheActive=!1})}}}]}},4438:(Cn,nt,x)=>{function $(e,n){return Object.is(e,n)}x.d(nt,{bc$:()=>Pm,iLQ:()=>Ub,sZ2:()=>xg,hnV:()=>wA,o8S:()=>Tm,BIS:()=>Qf,gRc:()=>VA,Ql9:()=>ZR,OM3:()=>rf,Ocv:()=>oP,abz:()=>Je,Z63:()=>pa,aKT:()=>ho,uvJ:()=>Oi,zcH:()=>se,bkB:()=>Pu,y_5:()=>Cc,$GK:()=>he,nKC:()=>sn,zZn:()=>h,_q3:()=>Gb,MKu:()=>qb,xe9:()=>gE,Co$:()=>II,Vns:()=>Sg,SKi:()=>Ko,Xx1:()=>qo,Agw:()=>Dp,PLl:()=>qf,rOR:()=>mh,sFG:()=>Ov,_9s:()=>Mv,czy:()=>lp,WPN:()=>kd,kdw:()=>ha,C4Q:()=>nh,NYb:()=>KR,giA:()=>TA,pJN:()=>Zd,xvI:()=>ER,RxE:()=>mA,c1b:()=>Cg,gXe:()=>$a,mal:()=>Lv,Af3:()=>L,tdH:()=>ME,L39:()=>tM,EWP:()=>rM,Ol2:()=>WE,w6W:()=>Vw,Rfq:()=>pn,oKB:()=>Ha,WQX:()=>Ur,naY:()=>dP,QuC:()=>Bo,EmA:()=>Po,zw6:()=>kg,HJs:()=>uM,N4e:()=>ta,vPA:()=>iI,O8t:()=>iM,An2:()=>Bd,H3F:()=>gA,H8p:()=>sl,KH2:()=>q_,TgB:()=>R_,wOt:()=>st,WHO:()=>bA,e01:()=>IA,lNU:()=>gi,h9k:()=>Wg,$MX:()=>Fs,ZF7:()=>zo,Kcf:()=>Nd,e5t:()=>Bg,UyX:()=>Bp,cWb:()=>Ug,osQ:()=>Bm,H5H:()=>vb,Zy3:()=>De,mq5:()=>S0,JZv:()=>ar,TL3:()=>UP,LfX:()=>fo,plB:()=>sh,jNT:()=>Fb,zjR:()=>AA,ngT:()=>bl,TL$:()=>Sp,Tbb:()=>qr,zUL:()=>yi,rcV:()=>xd,zuW:()=>RA,M8M:()=>WP,Vt3:()=>BE,Mj6:()=>to,GFd:()=>bI,OA$:()=>Id,Jv_:()=>jT,aNF:()=>$T,R7$:()=>u_,BMQ:()=>eb,HbH:()=>u0,AVh:()=>ab,vxM:()=>E0,wni:()=>pT,VBU:()=>yo,FsC:()=>hs,jDH:()=>vi,G2t:()=>$s,$C:()=>Zo,EJ8:()=>Ra,rXU:()=>eh,nrm:()=>fb,eu8:()=>gb,k0s:()=>iE,j41:()=>rE,RV6:()=>C0,xGo:()=>kh,Mr5:()=>_b,KVO:()=>Wi,kS0:()=>Sd,QTQ:()=>ag,bIt:()=>Ib,lsd:()=>_T,XpG:()=>rT,nI1:()=>XT,bMT:()=>ZT,SdG:()=>sT,NAR:()=>iT,Y8G:()=>ib,FS9:()=>wb,Mz_:()=>lE,lJ4:()=>zT,eq3:()=>HT,mGM:()=>gT,sdS:()=>yT,Dyx:()=>T0,Z7z:()=>I0,fX1:()=>b0,Njj:()=>_c,EBC:()=>em,eBV:()=>ka,B4B:()=>Gh,n$t:()=>Gp,xc7:()=>ob,Kam:()=>Tb,zvX:()=>yb,DNE:()=>P_,C5r:()=>JT,EFF:()=>DT,JRh:()=>Cb,SpI:()=>uE,GBs:()=>mT}),x(4523);let q=null,H=!1,Ee=1;const Fe=Symbol("SIGNAL");function Le(e){const n=q;return q=e,n}const Ae={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function He(e){if(H)throw new Error("");if(null===q)return;q.consumerOnSignalRead(e);const n=q.nextProducerIndex++;Ze(q),n<q.producerNode.length&&q.producerNode[n]!==e&&ct(q)&&Qe(q.producerNode[n],q.producerIndexOfThis[n]),q.producerNode[n]!==e&&(q.producerNode[n]=e,q.producerIndexOfThis[n]=ct(q)?Ke(e,q,n):0),q.producerLastReadVersion[n]=e.version}function tt(e){if((!ct(e)||e.dirty)&&(e.dirty||e.lastCleanEpoch!==Ee)){if(!e.producerMustRecompute(e)&&!Et(e))return e.dirty=!1,void(e.lastCleanEpoch=Ee);e.producerRecomputeValue(e),e.dirty=!1,e.lastCleanEpoch=Ee}}function Rt(e){if(void 0===e.liveConsumerNode)return;const n=H;H=!0;try{for(const r of e.liveConsumerNode)r.dirty||Gt(r)}finally{H=n}}function Ft(){return!1!==q?.consumerAllowSignalWrites}function Gt(e){e.dirty=!0,Rt(e),e.consumerMarkedDirty?.(e)}function Pt(e){return e&&(e.nextProducerIndex=0),Le(e)}function hn(e,n){if(Le(n),e&&void 0!==e.producerNode&&void 0!==e.producerIndexOfThis&&void 0!==e.producerLastReadVersion){if(ct(e))for(let r=e.nextProducerIndex;r<e.producerNode.length;r++)Qe(e.producerNode[r],e.producerIndexOfThis[r]);for(;e.producerNode.length>e.nextProducerIndex;)e.producerNode.pop(),e.producerLastReadVersion.pop(),e.producerIndexOfThis.pop()}}function Et(e){Ze(e);for(let n=0;n<e.producerNode.length;n++){const r=e.producerNode[n],s=e.producerLastReadVersion[n];if(s!==r.version||(tt(r),s!==r.version))return!0}return!1}function Ke(e,n,r){if(Ge(e),Ze(e),0===e.liveConsumerNode.length)for(let s=0;s<e.producerNode.length;s++)e.producerIndexOfThis[s]=Ke(e.producerNode[s],e,s);return e.liveConsumerIndexOfThis.push(r),e.liveConsumerNode.push(n)-1}function Qe(e,n){if(Ge(e),Ze(e),1===e.liveConsumerNode.length)for(let s=0;s<e.producerNode.length;s++)Qe(e.producerNode[s],e.producerIndexOfThis[s]);const r=e.liveConsumerNode.length-1;if(e.liveConsumerNode[n]=e.liveConsumerNode[r],e.liveConsumerIndexOfThis[n]=e.liveConsumerIndexOfThis[r],e.liveConsumerNode.length--,e.liveConsumerIndexOfThis.length--,n<e.liveConsumerNode.length){const s=e.liveConsumerIndexOfThis[n],l=e.liveConsumerNode[n];Ze(l),l.producerIndexOfThis[s]=n}}function ct(e){return e.consumerIsAlwaysLive||(e?.liveConsumerNode?.length??0)>0}function Ze(e){e.producerNode??=[],e.producerIndexOfThis??=[],e.producerLastReadVersion??=[]}function Ge(e){e.liveConsumerNode??=[],e.liveConsumerIndexOfThis??=[]}const ve=Symbol("UNSET"),At=Symbol("COMPUTING"),Jt=Symbol("ERRORED"),Nt={...Ae,value:ve,dirty:!0,error:null,equal:$,producerMustRecompute:e=>e.value===ve||e.value===At,producerRecomputeValue(e){if(e.value===At)throw new Error("Detected cycle in computations.");const n=e.value;e.value=At;const r=Pt(e);let s;try{s=e.computation()}catch(l){s=Jt,e.error=l}finally{hn(e,r)}n!==ve&&n!==Jt&&s!==Jt&&e.equal(n,s)?e.value=n:(e.value=s,e.version++)}};let an=function Yt(){throw new Error};function $t(){an()}let Ye=null;function Mt(e,n){Ft()||$t(),e.equal(e.value,n)||(e.value=n,function ln(e){e.version++,function ot(){Ee++}(),Rt(e),Ye?.()}(e))}const Ct={...Ae,equal:$,value:void 0};var fr=x(1413),Jn=x(8359),Rr=x(4412),vr=x(6354),$n=x(1594);const gi="https://g.co/ng/security#xss";class st extends Error{constructor(n,r){super(De(n,r)),this.code=n}}function De(e,n){return`NG0${Math.abs(e)}${n?": "+n:""}`}function Ut(e){return{toString:e}.toString()}const $e="__parameters__";function ir(e,n,r){return Ut(()=>{const s=function An(e){return function(...r){if(e){const s=e(...r);for(const l in s)this[l]=s[l]}}}(n);function l(...p){if(this instanceof l)return s.apply(this,p),this;const A=new l(...p);return P.annotation=A,P;function P(F,re,ge){const xe=F.hasOwnProperty($e)?F[$e]:Object.defineProperty(F,$e,{value:[]})[$e];for(;xe.length<=ge;)xe.push(null);return(xe[ge]=xe[ge]||[]).push(A),F}}return r&&(l.prototype=Object.create(r.prototype)),l.prototype.ngMetadataName=e,l.annotationCls=l,l})}const ar=globalThis;function Nr(e){for(let n in e)if(e[n]===Nr)return n;throw Error("Could not find renamed property on target object.")}function xt(e,n){for(const r in n)n.hasOwnProperty(r)&&!e.hasOwnProperty(r)&&(e[r]=n[r])}function qr(e){if("string"==typeof e)return e;if(Array.isArray(e))return"["+e.map(qr).join(", ")+"]";if(null==e)return""+e;if(e.overriddenName)return`${e.overriddenName}`;if(e.name)return`${e.name}`;const n=e.toString();if(null==n)return""+n;const r=n.indexOf("\n");return-1===r?n:n.substring(0,r)}function ai(e,n){return null==e||""===e?null===n?"":n:null==n||""===n?e:e+" "+n}function yi(e,n=100){if(!e||n<1||e.length<=n)return e;if(1==n)return e.substring(0,1)+"...";const r=Math.round(n/2);return e.substring(0,r)+"..."+e.substring(e.length-r)}const Xr=Nr({__forward_ref__:Nr});function pn(e){return e.__forward_ref__=pn,e.toString=function(){return qr(this())},e}function Te(e){return ne(e)?e():e}function ne(e){return"function"==typeof e&&e.hasOwnProperty(Xr)&&e.__forward_ref__===pn}function vi(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function $s(e){return{providers:e.providers||[],imports:e.imports||[]}}function so(e){return Gs(e,Ue)||Gs(e,ut)}function fo(e){return null!==so(e)}function Gs(e,n){return e.hasOwnProperty(n)?e[n]:null}function Ts(e){return e&&(e.hasOwnProperty(it)||e.hasOwnProperty(un))?e[it]:null}const Ue=Nr({\u0275prov:Nr}),it=Nr({\u0275inj:Nr}),ut=Nr({ngInjectableDef:Nr}),un=Nr({ngInjectorDef:Nr});class sn{constructor(n,r){this._desc=n,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof r?this.__NG_ELEMENT_ID__=r:void 0!==r&&(this.\u0275prov=vi({token:this,providedIn:r.providedIn||"root",factory:r.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function _r(e){return e&&!!e.\u0275providers}const xn=Nr({\u0275cmp:Nr}),Zr=Nr({\u0275dir:Nr}),Ri=Nr({\u0275pipe:Nr}),kr=Nr({\u0275mod:Nr}),oi=Nr({\u0275fac:Nr}),As=Nr({__NG_ELEMENT_ID__:Nr}),qi=Nr({__NG_ENV_ID__:Nr});function Be(e){return"string"==typeof e?e:null==e?"":String(e)}function Ie(e,n){throw new st(-201,!1)}var he=function(e){return e[e.Default=0]="Default",e[e.Host=1]="Host",e[e.Self=2]="Self",e[e.SkipSelf=4]="SkipSelf",e[e.Optional=8]="Optional",e}(he||{});let We;function yt(){return We}function In(e){const n=We;return We=e,n}function jn(e,n,r){const s=so(e);return s&&"root"==s.providedIn?void 0===s.value?s.value=s.factory():s.value:r&he.Optional?null:void 0!==n?n:void Ie()}const es={},ds="__NG_DI_FLAG__",is="ngTempTokenPath",ua=/\n/gm,da="__source";let Zs;function Js(e){const n=Zs;return Zs=e,n}function So(e,n=he.Default){if(void 0===Zs)throw new st(-203,!1);return null===Zs?jn(e,void 0,n):Zs.get(e,n&he.Optional?null:void 0,n)}function Wi(e,n=he.Default){return(yt()||So)(Te(e),n)}function Ur(e,n=he.Default){return Wi(e,Go(n))}function Go(e){return typeof e>"u"||"number"==typeof e?e:(e.optional&&8)|(e.host&&1)|(e.self&&2)|(e.skipSelf&&4)}function Ca(e){const n=[];for(let r=0;r<e.length;r++){const s=Te(e[r]);if(Array.isArray(s)){if(0===s.length)throw new st(900,!1);let l,p=he.Default;for(let A=0;A<s.length;A++){const P=s[A],F=rc(P);"number"==typeof F?-1===F?l=P.token:p|=F:l=P}n.push(Wi(l,p))}else n.push(Wi(s))}return n}function Fo(e,n){return e[ds]=n,e.prototype[ds]=n,e}function rc(e){return e[ds]}const Cc=Fo(ir("Inject",e=>({token:e})),-1),qo=Fo(ir("Optional"),8),ha=Fo(ir("SkipSelf"),4);function ls(e,n){return e.hasOwnProperty(oi)?e[oi]:null}function fa(e,n){e.forEach(r=>Array.isArray(r)?fa(r,n):n(r))}function Dc(e,n,r){n>=e.length?e.push(r):e.splice(n,0,r)}function Qo(e,n){return n>=e.length-1?e.pop():e.splice(n,1)[0]}function Ns(e,n,r){let s=ns(e,n);return s>=0?e[1|s]=r:(s=~s,function Do(e,n,r,s){let l=e.length;if(l==n)e.push(r,s);else if(1===l)e.push(s,e[0]),e[0]=r;else{for(l--,e.push(e[l-1],e[l]);l>n;)e[l]=e[l-2],l--;e[n]=r,e[n+1]=s}}(e,s,n,r)),s}function ss(e,n){const r=ns(e,n);if(r>=0)return e[1|r]}function ns(e,n){return function Sa(e,n,r){let s=0,l=e.length>>r;for(;l!==s;){const p=s+(l-s>>1),A=e[p<<r];if(n===A)return p<<r;A>n?l=p:s=p+1}return~(l<<r)}(e,n,1)}const qs={},Mi=[],pa=new sn(""),oo=new sn("",-1),go=new sn("");class Da{get(n,r=es){if(r===es){const s=new Error(`NullInjectorError: No provider for ${qr(n)}!`);throw s.name="NullInjectorError",s}return r}}var Rc=function(e){return e[e.OnPush=0]="OnPush",e[e.Default=1]="Default",e}(Rc||{}),$a=function(e){return e[e.Emulated=0]="Emulated",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",e}($a||{}),to=function(e){return e[e.None=0]="None",e[e.SignalBased=1]="SignalBased",e[e.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",e}(to||{});function Vs(e,n,r){let s=e.length;for(;;){const l=e.indexOf(n,r);if(-1===l)return l;if(0===l||e.charCodeAt(l-1)<=32){const p=n.length;if(l+p===s||e.charCodeAt(l+p)<=32)return l}r=l+1}}function vs(e,n,r){let s=0;for(;s<r.length;){const l=r[s];if("number"==typeof l){if(0!==l)break;s++;const p=r[s++],A=r[s++],P=r[s++];e.setAttribute(n,A,P,p)}else{const p=l,A=r[++s];nl(p)?e.setProperty(n,p,A):e.setAttribute(n,p,A),s++}}return s}function ic(e){return 3===e||4===e||6===e}function nl(e){return 64===e.charCodeAt(0)}function _o(e,n){if(null!==n&&0!==n.length)if(null===e||0===e.length)e=n.slice();else{let r=-1;for(let s=0;s<n.length;s++){const l=n[s];"number"==typeof l?r=l:0===r||Wa(e,r,l,null,-1===r||2===r?n[++s]:null)}}return e}function Wa(e,n,r,s,l){let p=0,A=e.length;if(-1===n)A=-1;else for(;p<e.length;){const P=e[p++];if("number"==typeof P){if(P===n){A=-1;break}if(P>n){A=p-1;break}}}for(;p<e.length;){const P=e[p];if("number"==typeof P)break;if(P===r){if(null===s)return void(null!==l&&(e[p+1]=l));if(s===e[p+1])return void(e[p+2]=l)}p++,null!==s&&p++,null!==l&&p++}-1!==A&&(e.splice(A,0,n),p=A+1),e.splice(p++,0,r),null!==s&&e.splice(p++,0,s),null!==l&&e.splice(p++,0,l)}const sc="ng-template";function Uo(e,n,r,s){let l=0;if(s){for(;l<n.length&&"string"==typeof n[l];l+=2)if("class"===n[l]&&-1!==Vs(n[l+1].toLowerCase(),r,0))return!0}else if(za(e))return!1;if(l=n.indexOf(1,l),l>-1){let p;for(;++l<n.length&&"string"==typeof(p=n[l]);)if(p.toLowerCase()===r)return!0}return!1}function za(e){return 4===e.type&&e.value!==sc}function ao(e,n,r){return n===(4!==e.type||r?e.value:sc)}function Pc(e,n,r){let s=4;const l=e.attrs,p=null!==l?function Vi(e){for(let n=0;n<e.length;n++)if(ic(e[n]))return n;return e.length}(l):0;let A=!1;for(let P=0;P<n.length;P++){const F=n[P];if("number"!=typeof F){if(!A)if(4&s){if(s=2|1&s,""!==F&&!ao(e,F,r)||""===F&&1===n.length){if(no(s))return!1;A=!0}}else if(8&s){if(null===l||!Uo(e,l,F,r)){if(no(s))return!1;A=!0}}else{const re=n[++P],ge=Yo(F,l,za(e),r);if(-1===ge){if(no(s))return!1;A=!0;continue}if(""!==re){let xe;if(xe=ge>p?"":l[ge+1].toLowerCase(),2&s&&re!==xe){if(no(s))return!1;A=!0}}}}else{if(!A&&!no(s)&&!no(F))return!1;if(A&&no(F))continue;A=!1,s=F|1&s}}return no(s)||A}function no(e){return!(1&e)}function Yo(e,n,r,s){if(null===n)return-1;let l=0;if(s||!r){let p=!1;for(;l<n.length;){const A=n[l];if(A===e)return l;if(3===A||6===A)p=!0;else{if(1===A||2===A){let P=n[++l];for(;"string"==typeof P;)P=n[++l];continue}if(4===A)break;if(0===A){l+=4;continue}}l+=p?1:2}return-1}return function Qi(e,n){let r=e.indexOf(4);if(r>-1)for(r++;r<e.length;){const s=e[r];if("number"==typeof s)return-1;if(s===n)return r;r++}return-1}(n,e)}function Cs(e,n,r=!1){for(let s=0;s<n.length;s++)if(Pc(e,n[s],r))return!0;return!1}function Xo(e,n){e:for(let r=0;r<n.length;r++){const s=n[r];if(e.length===s.length){for(let l=0;l<e.length;l++)if(e[l]!==s[l])continue e;return!0}}return!1}function co(e,n){return e?":not("+n.trim()+")":n}function Mc(e){let n=e[0],r=1,s=2,l="",p=!1;for(;r<e.length;){let A=e[r];if("string"==typeof A)if(2&s){const P=e[++r];l+="["+A+(P.length>0?'="'+P+'"':"")+"]"}else 8&s?l+="."+A:4&s&&(l+=" "+A);else""!==l&&!no(A)&&(n+=co(p,l),l=""),s=A,p=p||!no(s);r++}return""!==l&&(n+=co(p,l)),n}function yo(e){return Ut(()=>{const n=Pa(e),r={...n,decls:e.decls,vars:e.vars,template:e.template,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,onPush:e.changeDetection===Rc.OnPush,directiveDefs:null,pipeDefs:null,dependencies:n.standalone&&e.dependencies||null,getStandaloneInjector:null,signals:e.signals??!1,data:e.data||{},encapsulation:e.encapsulation||$a.Emulated,styles:e.styles||Mi,_:null,schemas:e.schemas||null,tView:null,id:""};rl(r);const s=e.dependencies;return r.directiveDefs=ci(s,!1),r.pipeDefs=ci(s,!0),r.id=function Ro(e){let n=0;const r=[e.selectors,e.ngContentSelectors,e.hostVars,e.hostAttrs,e.consts,e.vars,e.decls,e.encapsulation,e.standalone,e.signals,e.exportAs,JSON.stringify(e.inputs),JSON.stringify(e.outputs),Object.getOwnPropertyNames(e.type.prototype),!!e.contentQueries,!!e.viewQuery].join("|");for(const l of r)n=Math.imul(31,n)+l.charCodeAt(0)|0;return n+=2147483648,"c"+n}(r),r})}function vo(e){return ri(e)||Ui(e)}function _a(e){return null!==e}function Zo(e){return Ut(()=>({type:e.type,bootstrap:e.bootstrap||Mi,declarations:e.declarations||Mi,imports:e.imports||Mi,exports:e.exports||Mi,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null}))}function Mu(e,n){if(null==e)return qs;const r={};for(const s in e)if(e.hasOwnProperty(s)){const l=e[s];let p,A,P=to.None;Array.isArray(l)?(P=l[0],p=l[1],A=l[2]??p):(p=l,A=l),n?(r[p]=P!==to.None?[s,P]:s,n[p]=A):r[p]=s}return r}function hs(e){return Ut(()=>{const n=Pa(e);return rl(n),n})}function Ra(e){return{type:e.type,name:e.name,factory:null,pure:!1!==e.pure,standalone:!0===e.standalone,onDestroy:e.type.prototype.ngOnDestroy||null}}function ri(e){return e[xn]||null}function Ui(e){return e[Zr]||null}function Ci(e){return e[Ri]||null}function Bo(e){const n=ri(e)||Ui(e)||Ci(e);return null!==n&&n.standalone}function Ss(e,n){const r=e[kr]||null;if(!r&&!0===n)throw new Error(`Type ${qr(e)} does not have '\u0275mod' property.`);return r}function Pa(e){const n={};return{type:e.type,providersResolver:null,factory:null,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:n,inputTransforms:null,inputConfig:e.inputs||qs,exportAs:e.exportAs||null,standalone:!0===e.standalone,signals:!0===e.signals,selectors:e.selectors||Mi,viewQuery:e.viewQuery||null,features:e.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Mu(e.inputs,n),outputs:Mu(e.outputs),debugInfo:null}}function rl(e){e.features?.forEach(n=>n(e))}function ci(e,n){if(!e)return null;const r=n?Ci:vo;return()=>("function"==typeof e?e():e).map(s=>r(s)).filter(_a)}function Po(e){return{\u0275providers:e}}function Ha(...e){return{\u0275providers:il(0,e),\u0275fromNgModule:!0}}function il(e,...n){const r=[],s=new Set;let l;const p=A=>{r.push(A)};return fa(n,A=>{const P=A;ya(P,p,[],s)&&(l||=[],l.push(P))}),void 0!==l&&oc(l,p),r}function oc(e,n){for(let r=0;r<e.length;r++){const{ngModule:s,providers:l}=e[r];jo(l,p=>{n(p,s)})}}function ya(e,n,r,s){if(!(e=Te(e)))return!1;let l=null,p=Ts(e);const A=!p&&ri(e);if(p||A){if(A&&!A.standalone)return!1;l=e}else{const F=e.ngModule;if(p=Ts(F),!p)return!1;l=F}const P=s.has(l);if(A){if(P)return!1;if(s.add(l),A.dependencies){const F="function"==typeof A.dependencies?A.dependencies():A.dependencies;for(const re of F)ya(re,n,r,s)}}else{if(!p)return!1;{if(null!=p.imports&&!P){let re;s.add(l);try{fa(p.imports,ge=>{ya(ge,n,r,s)&&(re||=[],re.push(ge))})}finally{}void 0!==re&&oc(re,n)}if(!P){const re=ls(l)||(()=>new l);n({provide:l,useFactory:re,deps:Mi},l),n({provide:go,useValue:l,multi:!0},l),n({provide:pa,useValue:()=>Wi(l),multi:!0},l)}const F=p.providers;if(null!=F&&!P){const re=e;jo(F,ge=>{n(ge,re)})}}}return l!==e&&void 0!==e.providers}function jo(e,n){for(let r of e)_r(r)&&(r=r.\u0275providers),Array.isArray(r)?jo(r,n):n(r)}const Oc=Nr({provide:String,useValue:Nr});function Mo(e){return null!==e&&"object"==typeof e&&Oc in e}function Ma(e){return"function"==typeof e}const sl=new sn(""),ol={},lc={};let Wl;function uc(){return void 0===Wl&&(Wl=new Da),Wl}class Oi{}class $o extends Oi{get destroyed(){return this._destroyed}constructor(n,r,s,l){super(),this.parent=r,this.source=s,this.scopes=l,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,ea(n,A=>this.processProvider(A)),this.records.set(oo,Al(void 0,this)),l.has("environment")&&this.records.set(Oi,Al(void 0,this));const p=this.records.get(sl);null!=p&&"string"==typeof p.value&&this.scopes.add(p.value),this.injectorDefTypes=new Set(this.get(go,Mi,he.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;const n=Le(null);try{for(const s of this._ngOnDestroyHooks)s.ngOnDestroy();const r=this._onDestroyHooks;this._onDestroyHooks=[];for(const s of r)s()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Le(n)}}onDestroy(n){return this.assertNotDestroyed(),this._onDestroyHooks.push(n),()=>this.removeOnDestroy(n)}runInContext(n){this.assertNotDestroyed();const r=Js(this),s=In(void 0);try{return n()}finally{Js(r),In(s)}}get(n,r=es,s=he.Default){if(this.assertNotDestroyed(),n.hasOwnProperty(qi))return n[qi](this);s=Go(s);const p=Js(this),A=In(void 0);try{if(!(s&he.SkipSelf)){let F=this.records.get(n);if(void 0===F){const re=function Eo(e){return"function"==typeof e||"object"==typeof e&&e instanceof sn}(n)&&so(n);F=re&&this.injectableDefInScope(re)?Al(Jo(n),ol):null,this.records.set(n,F)}if(null!=F)return this.hydrate(n,F)}return(s&he.Self?uc():this.parent).get(n,r=s&he.Optional&&r===es?null:r)}catch(P){if("NullInjectorError"===P.name){if((P[is]=P[is]||[]).unshift(qr(n)),p)throw P;return function Vo(e,n,r,s){const l=e[is];throw n[da]&&l.unshift(n[da]),e.message=function Ii(e,n,r,s=null){e=e&&"\n"===e.charAt(0)&&"\u0275"==e.charAt(1)?e.slice(2):e;let l=qr(n);if(Array.isArray(n))l=n.map(qr).join(" -> ");else if("object"==typeof n){let p=[];for(let A in n)if(n.hasOwnProperty(A)){let P=n[A];p.push(A+":"+("string"==typeof P?JSON.stringify(P):qr(P)))}l=`{${p.join(", ")}}`}return`${r}${s?"("+s+")":""}[${l}]: ${e.replace(ua,"\n  ")}`}("\n"+e.message,l,r,s),e.ngTokenPath=l,e[is]=null,e}(P,n,"R3InjectorError",this.source)}throw P}finally{In(A),Js(p)}}resolveInjectorInitializers(){const n=Le(null),r=Js(this),s=In(void 0);try{const p=this.get(pa,Mi,he.Self);for(const A of p)A()}finally{Js(r),In(s),Le(n)}}toString(){const n=[],r=this.records;for(const s of r.keys())n.push(qr(s));return`R3Injector[${n.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new st(205,!1)}processProvider(n){let r=Ma(n=Te(n))?n:Te(n&&n.provide);const s=function su(e){return Mo(e)?Al(void 0,e.useValue):Al(xc(e),ol)}(n);if(!Ma(n)&&!0===n.multi){let l=this.records.get(r);l||(l=Al(void 0,ol,!0),l.factory=()=>Ca(l.multi),this.records.set(r,l)),r=n,l.multi.push(n)}this.records.set(r,s)}hydrate(n,r){const s=Le(null);try{return r.value===ol&&(r.value=lc,r.value=r.factory()),"object"==typeof r.value&&r.value&&function Ea(e){return null!==e&&"object"==typeof e&&"function"==typeof e.ngOnDestroy}(r.value)&&this._ngOnDestroyHooks.add(r.value),r.value}finally{Le(s)}}injectableDefInScope(n){if(!n.providedIn)return!1;const r=Te(n.providedIn);return"string"==typeof r?"any"===r||this.scopes.has(r):this.injectorDefTypes.has(r)}removeOnDestroy(n){const r=this._onDestroyHooks.indexOf(n);-1!==r&&this._onDestroyHooks.splice(r,1)}}function Jo(e){const n=so(e),r=null!==n?n.factory:ls(e);if(null!==r)return r;if(e instanceof sn)throw new st(204,!1);if(e instanceof Function)return function dc(e){if(e.length>0)throw new st(204,!1);const r=function _s(e){return e&&(e[Ue]||e[ut])||null}(e);return null!==r?()=>r.factory(e):()=>new e}(e);throw new st(204,!1)}function xc(e,n,r){let s;if(Ma(e)){const l=Te(e);return ls(l)||Jo(l)}if(Mo(e))s=()=>Te(e.useValue);else if(function va(e){return!(!e||!e.useFactory)}(e))s=()=>e.useFactory(...Ca(e.deps||[]));else if(function ac(e){return!(!e||!e.useExisting)}(e))s=()=>Wi(Te(e.useExisting));else{const l=Te(e&&(e.useClass||e.provide));if(!function vd(e){return!!e.deps}(e))return ls(l)||Jo(l);s=()=>new l(...Ca(e.deps))}return s}function Al(e,n,r=!1){return{factory:e,value:n,multi:r?[]:void 0}}function ea(e,n){for(const r of e)Array.isArray(r)?ea(r,n):r&&_r(r)?ea(r.\u0275providers,n):n(r)}function ta(e,n){e instanceof $o&&e.assertNotDestroyed();const s=Js(e),l=In(void 0);try{return n()}finally{Js(s),In(l)}}function Nc(){return void 0!==yt()||null!=function po(){return Zs}()}function L(e){if(!Nc())throw new st(-203,!1)}const xi=0,Gn=1,Er=2,Ti=3,Us=4,Bs=5,bo=6,wl=7,Es=8,zs=9,na=10,jr=11,zl=12,td=13,kc=14,fs=15,Ga=16,Hl=17,Lc=18,bs=19,ou=20,Oo=21,au=22,Oa=23,zr=25,us=1,Ds=6,ra=7,hc=9,ps=10;var Ed=function(e){return e[e.None=0]="None",e[e.HasTransplantedViews=2]="HasTransplantedViews",e}(Ed||{});function xo(e){return Array.isArray(e)&&"object"==typeof e[us]}function Qs(e){return Array.isArray(e)&&!0===e[us]}function al(e){return!!(4&e.flags)}function xa(e){return e.componentOffset>-1}function Fc(e){return!(1&~e.flags)}function ms(e){return!!e.template}function Na(e){return!!(512&e[Er])}class qa{constructor(n,r,s){this.previousValue=n,this.currentValue=r,this.firstChange=s}isFirstChange(){return this.firstChange}}function Wd(e,n,r,s){null!==n?n.applyValueToInputSignal(n,s):e[r]=s}function Id(){return zd}function zd(e){return e.type.prototype.ngOnChanges&&(e.setInput=uu),xu}function xu(){const e=Uc(this),n=e?.current;if(n){const r=e.previous;if(r===qs)e.previous=n;else for(let s in n)r[s]=n[s];e.current=null,this.ngOnChanges(n)}}function uu(e,n,r,s,l){const p=this.declaredInputs[s],A=Uc(e)||function rd(e,n){return e[Nu]=n}(e,{previous:qs,current:null}),P=A.current||(A.current={}),F=A.previous,re=F[p];P[p]=new qa(re&&re.currentValue,r,F===qs),Wd(e,n,l,r)}Id.ngInherit=!0;const Nu="__ngSimpleChanges__";function Uc(e){return e[Nu]||null}const ia=function(e,n,r){};let Qa=!1;function Ai(e){for(;Array.isArray(e);)e=e[xi];return e}function fu(e,n){return Ai(n[e])}function gs(e,n){return Ai(n[e.index])}function ll(e,n){return e.data[n]}function Ya(e,n){return e[n]}function Ia(e,n){const r=n[e];return xo(r)?r:r[xi]}function pc(e){return!(128&~e[Er])}function sa(e,n){return null==n?null:e[n]}function pu(e){e[Hl]=0}function mu(e){1024&e[Er]||(e[Er]|=1024,pc(e)&&gc(e))}function Ta(e){return!!(9216&e[Er]||e[Oa]?.dirty)}function oa(e){e[na].changeDetectionScheduler?.notify(1),Ta(e)?gc(e):64&e[Er]&&(function Wo(){return Qa}()?(e[Er]|=1024,gc(e)):e[na].changeDetectionScheduler?.notify())}function gc(e){e[na].changeDetectionScheduler?.notify();let n=Rs(e);for(;null!==n&&!(8192&n[Er])&&(n[Er]|=8192,pc(n));)n=Rs(n)}function Io(e,n){if(!(256&~e[Er]))throw new st(911,!1);null===e[Oo]&&(e[Oo]=[]),e[Oo].push(n)}function Rs(e){const n=e[Ti];return Qs(n)?n[Ti]:n}const ei={lFrame:cd(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function Fu(){return ei.bindingsEnabled}function Aa(){return null!==ei.skipHydrationRootTNode}function En(){return ei.lFrame.lView}function ii(){return ei.lFrame.tView}function ka(e){return ei.lFrame.contextLView=e,e[Es]}function _c(e){return ei.lFrame.contextLView=null,e}function Hi(){let e=fl();for(;null!==e&&64===e.type;)e=e.parent;return e}function fl(){return ei.lFrame.currentTNode}function La(e,n){const r=ei.lFrame;r.currentTNode=e,r.isParent=n}function gu(){return ei.lFrame.isParent}function _u(){ei.lFrame.isParent=!1}function as(){const e=ei.lFrame;let n=e.bindingRootIndex;return-1===n&&(n=e.bindingRootIndex=e.tView.bindingStartIndex),n}function Ys(){return ei.lFrame.bindingIndex++}function pl(e){const n=ei.lFrame,r=n.bindingIndex;return n.bindingIndex=n.bindingIndex+e,r}function Hd(e,n){const r=ei.lFrame;r.bindingIndex=r.bindingRootIndex=e,od(n)}function od(e){ei.lFrame.currentDirectiveIndex=e}function vu(e){const n=ei.lFrame.currentDirectiveIndex;return-1===n?null:e[n]}function Td(){return ei.lFrame.currentQueryIndex}function ad(e){ei.lFrame.currentQueryIndex=e}function Uu(e){const n=e[Gn];return 2===n.type?n.declTNode:1===n.type?e[Bs]:null}function Eu(e,n,r){if(r&he.SkipSelf){let l=n,p=e;for(;!(l=l.parent,null!==l||r&he.Host||(l=Uu(p),null===l||(p=p[kc],10&l.type))););if(null===l)return!1;n=l,e=p}const s=ei.lFrame=Bu();return s.currentTNode=n,s.lView=e,!0}function Wc(e){const n=Bu(),r=e[Gn];ei.lFrame=n,n.currentTNode=r.firstChild,n.lView=e,n.tView=r,n.contextLView=e,n.bindingIndex=r.bindingStartIndex,n.inI18n=!1}function Bu(){const e=ei.lFrame,n=null===e?null:e.child;return null===n?cd(e):n}function cd(e){const n={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return null!==e&&(e.child=n),n}function bu(){const e=ei.lFrame;return ei.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}const ju=bu;function Iu(){const e=bu();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function uo(){return ei.lFrame.selectedIndex}function zc(e){ei.lFrame.selectedIndex=e}function cs(){const e=ei.lFrame;return ll(e.tView,e.selectedIndex)}function xl(){return ei.lFrame.currentNamespace}let Xs=!0;function Xa(){return Xs}function Fa(e){Xs=e}function Kc(e,n){for(let r=n.directiveStart,s=n.directiveEnd;r<s;r++){const p=e.data[r].type.prototype,{ngAfterContentInit:A,ngAfterContentChecked:P,ngAfterViewInit:F,ngAfterViewChecked:re,ngOnDestroy:ge}=p;A&&(e.contentHooks??=[]).push(-r,A),P&&((e.contentHooks??=[]).push(r,P),(e.contentCheckHooks??=[]).push(r,P)),F&&(e.viewHooks??=[]).push(-r,F),re&&((e.viewHooks??=[]).push(r,re),(e.viewCheckHooks??=[]).push(r,re)),null!=ge&&(e.destroyHooks??=[]).push(r,ge)}}function ud(e,n,r){Zl(e,n,3,r)}function Za(e,n,r,s){(3&e[Er])===r&&Zl(e,n,r,s)}function Nl(e,n){let r=e[Er];(3&r)===n&&(r&=16383,r+=1,e[Er]=r)}function Zl(e,n,r,s){const p=s??-1,A=n.length-1;let P=0;for(let F=void 0!==s?65535&e[Hl]:0;F<A;F++)if("number"==typeof n[F+1]){if(P=n[F],null!=s&&P>=s)break}else n[F]<0&&(e[Hl]+=65536),(P<p||-1==p)&&(eu(e,r,n,F),e[Hl]=(4294901760&e[Hl])+F+2),F++}function Jl(e,n){ia(4,e,n);const r=Le(null);try{n.call(e)}finally{Le(r),ia(5,e,n)}}function eu(e,n,r,s){const l=r[s]<0,p=r[s+1],P=e[l?-r[s]:r[s]];l?e[Er]>>14<e[Hl]>>16&&(3&e[Er])===n&&(e[Er]+=16384,Jl(P,p)):Jl(P,p)}const Gc=-1;class qc{constructor(n,r,s){this.factory=n,this.resolving=!1,this.canSeeViewProviders=r,this.injectImpl=s}}function wu(e){return e!==Gc}function kl(e){return 32767&e}function N(e,n){let r=function Ja(e){return e>>16}(e),s=n;for(;r>0;)s=s[kc],r--;return s}let E=!0;function C(e){const n=E;return E=e,n}const de=255,Se=5;let It=0;const qt={};function Dr(e,n){const r=ui(e,n);if(-1!==r)return r;const s=n[Gn];s.firstCreatePass&&(e.injectorIndex=n.length,Vr(s.data,e),Vr(n,null),Vr(s.blueprint,null));const l=Xi(e,n),p=e.injectorIndex;if(wu(l)){const A=kl(l),P=N(l,n),F=P[Gn].data;for(let re=0;re<8;re++)n[p+re]=P[A+re]|F[A+re]}return n[p+8]=l,p}function Vr(e,n){e.push(0,0,0,0,0,0,0,0,n)}function ui(e,n){return-1===e.injectorIndex||e.parent&&e.parent.injectorIndex===e.injectorIndex||null===n[e.injectorIndex+8]?-1:e.injectorIndex}function Xi(e,n){if(e.parent&&-1!==e.parent.injectorIndex)return e.parent.injectorIndex;let r=0,s=null,l=n;for(;null!==l;){if(s=nu(l),null===s)return Gc;if(r++,l=l[kc],-1!==s.injectorIndex)return s.injectorIndex|r<<16}return Gc}function Ls(e,n,r){!function Fn(e,n,r){let s;"string"==typeof r?s=r.charCodeAt(0)||0:r.hasOwnProperty(As)&&(s=r[As]),null==s&&(s=r[As]=It++);const l=s&de;n.data[e+(l>>Se)]|=1<<l}(e,n,r)}function ec(e,n,r){if(r&he.Optional||void 0!==e)return e;Ie()}function Cu(e,n,r,s){if(r&he.Optional&&void 0===s&&(s=null),!(r&(he.Self|he.Host))){const l=e[zs],p=In(void 0);try{return l?l.get(n,s,r&he.Optional):jn(n,s,r&he.Optional)}finally{In(p)}}return ec(s,0,r)}function Gd(e,n,r,s=he.Default,l){if(null!==e){if(2048&n[Er]&&!(s&he.Self)){const A=function hh(e,n,r,s,l){let p=e,A=n;for(;null!==p&&null!==A&&2048&A[Er]&&!(512&A[Er]);){const P=wd(p,A,r,s|he.Self,qt);if(P!==qt)return P;let F=p.parent;if(!F){const re=A[ou];if(re){const ge=re.get(r,qt,s);if(ge!==qt)return ge}F=nu(A),A=A[kc]}p=F}return l}(e,n,r,s,qt);if(A!==qt)return A}const p=wd(e,n,r,s,qt);if(p!==qt)return p}return Cu(n,r,s,l)}function wd(e,n,r,s,l){const p=function Ec(e){if("string"==typeof e)return e.charCodeAt(0)||0;const n=e.hasOwnProperty(As)?e[As]:void 0;return"number"==typeof n?n>=0?n&de:$u:n}(r);if("function"==typeof p){if(!Eu(n,e,s))return s&he.Host?ec(l,0,s):Cu(n,r,s,l);try{let A;if(A=p(s),null!=A||s&he.Optional)return A;Ie()}finally{ju()}}else if("number"==typeof p){let A=null,P=ui(e,n),F=Gc,re=s&he.Host?n[fs][Bs]:null;for((-1===P||s&he.SkipSelf)&&(F=-1===P?Xi(e,n):n[P+8],F!==Gc&&_l(s,!1)?(A=n[Gn],P=kl(F),n=N(F,n)):P=-1);-1!==P;){const ge=n[Gn];if(Du(p,P,ge.data)){const xe=Su(P,n,r,A,s,re);if(xe!==qt)return xe}F=n[P+8],F!==Gc&&_l(s,n[Gn].data[P+8]===re)&&Du(p,P,n)?(A=ge,P=kl(F),n=N(F,n)):P=-1}}return l}function Su(e,n,r,s,l,p){const A=n[Gn],P=A.data[e+8],ge=hd(P,A,r,null==s?xa(P)&&E:s!=A&&!!(3&P.type),l&he.Host&&p===P);return null!==ge?tu(n,A,ge,P):qt}function hd(e,n,r,s,l){const p=e.providerIndexes,A=n.data,P=1048575&p,F=e.directiveStart,ge=p>>20,vt=l?P+ge:e.directiveEnd;for(let Vt=s?P:P+ge;Vt<vt;Vt++){const tn=A[Vt];if(Vt<F&&r===tn||Vt>=F&&tn.type===r)return Vt}if(l){const Vt=A[F];if(Vt&&ms(Vt)&&Vt.type===r)return F}return null}function tu(e,n,r,s){let l=e[r];const p=n.data;if(function Tu(e){return e instanceof qc}(l)){const A=l;A.resolving&&function Kn(e,n){throw n&&n.join(" > "),new st(-200,e)}(function Zt(e){return"function"==typeof e?e.name||e.toString():"object"==typeof e&&null!=e&&"function"==typeof e.type?e.type.name||e.type.toString():Be(e)}(p[r]));const P=C(A.canSeeViewProviders);A.resolving=!0;const re=A.injectImpl?In(A.injectImpl):null;Eu(e,s,he.Default);try{l=e[r]=A.factory(void 0,p,e,s),n.firstCreatePass&&r>=s.directiveStart&&function Kd(e,n,r){const{ngOnChanges:s,ngOnInit:l,ngDoCheck:p}=n.type.prototype;if(s){const A=zd(n);(r.preOrderHooks??=[]).push(e,A),(r.preOrderCheckHooks??=[]).push(e,A)}l&&(r.preOrderHooks??=[]).push(0-e,l),p&&((r.preOrderHooks??=[]).push(e,p),(r.preOrderCheckHooks??=[]).push(e,p))}(r,p[r],n)}finally{null!==re&&In(re),C(P),A.resolving=!1,ju()}}return l}function Du(e,n,r){return!!(r[n+(e>>Se)]&1<<e)}function _l(e,n){return!(e&he.Self||e&he.Host&&n)}class ji{constructor(n,r){this._tNode=n,this._lView=r}get(n,r,s){return Gd(this._tNode,this._lView,n,Go(s),r)}}function $u(){return new ji(Hi(),En())}function kh(e){return Ut(()=>{const n=e.prototype.constructor,r=n[oi]||Cd(n),s=Object.prototype;let l=Object.getPrototypeOf(e.prototype).constructor;for(;l&&l!==s;){const p=l[oi]||Cd(l);if(p&&p!==r)return p;l=Object.getPrototypeOf(l)}return p=>new p})}function Cd(e){return ne(e)?()=>{const n=Cd(Te(e));return n&&n()}:ls(e)}function nu(e){const n=e[Gn],r=n.type;return 2===r?n.declTNode:1===r?e[Bs]:null}function Sd(e){return function vc(e,n){if("class"===n)return e.classes;if("style"===n)return e.styles;const r=e.attrs;if(r){const s=r.length;let l=0;for(;l<s;){const p=r[l];if(ic(p))break;if(0===p)l+=2;else if("number"==typeof p)for(l++;l<s&&"string"==typeof r[l];)l++;else{if(p===n)return r[l+1];l+=2}}}return null}(Hi(),e)}function jf(e,n=null,r=null,s){const l=y(e,n,r,s);return l.resolveInjectorInitializers(),l}function y(e,n=null,r=null,s,l=new Set){const p=[r||Mi,Ha(e)];return s=s||("object"==typeof e?void 0:qr(e)),new $o(p,n||uc(),s||null,l)}let h=(()=>{class e{static{this.THROW_IF_NOT_FOUND=es}static{this.NULL=new Da}static create(r,s){if(Array.isArray(r))return jf({name:""},s,r,"");{const l=r.name??"";return jf({name:l},r.parent,r.providers,l)}}static{this.\u0275prov=vi({token:e,providedIn:"any",factory:()=>Wi(oo)})}static{this.__NG_ELEMENT_ID__=-1}}return e})();function Z(e){return e.ngOriginalError}class se{constructor(){this._console=console}handleError(n){const r=this._findOriginalError(n);this._console.error("ERROR",n),r&&this._console.error("ORIGINAL ERROR",r)}_findOriginalError(n){let r=n&&Z(n);for(;r&&Z(r);)r=Z(r);return r||null}}const Me=new sn("",{providedIn:"root",factory:()=>Ur(se).handleError.bind(void 0)});let Je=(()=>{class e{static{this.__NG_ELEMENT_ID__=_n}static{this.__NG_ENV_ID__=r=>r}}return e})();class pt extends Je{constructor(n){super(),this._lView=n}onDestroy(n){return Io(this._lView,n),()=>function Rl(e,n){if(null===e[Oo])return;const r=e[Oo].indexOf(n);-1!==r&&e[Oo].splice(r,1)}(this._lView,n)}}function _n(){return new pt(En())}function aa(){return Qc(Hi(),En())}function Qc(e,n){return new ho(gs(e,n))}let ho=(()=>{class e{constructor(r){this.nativeElement=r}static{this.__NG_ELEMENT_ID__=aa}}return e})();function Ll(e){return e instanceof ho?e.nativeElement:e}function ff(e){return n=>{setTimeout(e,void 0,n)}}const Pu=class hf extends fr.B{constructor(n=!1){super(),this.destroyRef=void 0,this.__isAsync=n,Nc()&&(this.destroyRef=Ur(Je,{optional:!0})??void 0)}emit(n){const r=Le(null);try{super.next(n)}finally{Le(r)}}subscribe(n,r,s){let l=n,p=r||(()=>null),A=s;if(n&&"object"==typeof n){const F=n;l=F.next?.bind(F),p=F.error?.bind(F),A=F.complete?.bind(F)}this.__isAsync&&(p=ff(p),l&&(l=ff(l)),A&&(A=ff(A)));const P=super.subscribe({next:l,error:p,complete:A});return n instanceof Jn.yU&&n.add(P),P}};function ph(){return this._results[Symbol.iterator]()}class mh{get changes(){return this._changes??=new Pu}constructor(n=!1){this._emitDistinctChangesOnly=n,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;const r=mh.prototype;r[Symbol.iterator]||(r[Symbol.iterator]=ph)}get(n){return this._results[n]}map(n){return this._results.map(n)}filter(n){return this._results.filter(n)}find(n){return this._results.find(n)}reduce(n,r){return this._results.reduce(n,r)}forEach(n){this._results.forEach(n)}some(n){return this._results.some(n)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(n,r){this.dirty=!1;const s=function Br(e){return e.flat(Number.POSITIVE_INFINITY)}(n);(this._changesDetected=!function Sc(e,n,r){if(e.length!==n.length)return!1;for(let s=0;s<e.length;s++){let l=e[s],p=n[s];if(r&&(l=r(l),p=r(p)),p!==l)return!1}return!0}(this._results,s,r))&&(this._results=s,this.length=s.length,this.last=s[this.length-1],this.first=s[0])}notifyOnChanges(){void 0!==this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(n){this._onDirty=n}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){void 0!==this._changes&&(this._changes.complete(),this._changes.unsubscribe())}}const Yd="ngSkipHydration",yl="ngskiphydration";function Tp(e){const n=e.mergedAttrs;if(null===n)return!1;for(let r=0;r<n.length;r+=2){const s=n[r];if("number"==typeof s)return!1;if("string"==typeof s&&s.toLowerCase()===yl)return!0}return!1}function D(e){return e.hasAttribute(Yd)}function g(e){return!(128&~e.flags)}const M=new Map;let te=0;const Ic="__ngContext__";function No(e,n){xo(n)?(e[Ic]=n[bs],function at(e){M.set(e[bs],e)}(n)):e[Ic]=n}function xr(e){return Ap(e[zl])}function wm(e){return Ap(e[Us])}function Ap(e){for(;null!==e&&!Qs(e);)e=e[Us];return e}let Gf;function Sp(e){Gf=e}function ru(){if(void 0!==Gf)return Gf;if(typeof document<"u")return document;throw new st(210,!1)}const xg=new sn("",{providedIn:"root",factory:()=>_v}),_v="ng",qf=new sn(""),Dp=new sn("",{providedIn:"platform",factory:()=>"unknown"}),Pm=new sn(""),Qf=new sn("",{providedIn:"root",factory:()=>ru().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});function kg(e){return e}function Rp(){const e=new Zd;return"browser"===Ur(Dp)&&(e.store=function Om(e,n){const r=e.getElementById(n+"-state");if(r?.textContent)try{return JSON.parse(r.textContent)}catch(s){console.warn("Exception while restoring TransferState for app "+n,s)}return{}}(ru(),Ur(xg))),e}let Zd=(()=>{class e{constructor(){this.store={},this.onSerializeCallbacks={}}static{this.\u0275prov=vi({token:e,providedIn:"root",factory:Rp})}get(r,s){return void 0!==this.store[r]?this.store[r]:s}set(r,s){this.store[r]=s}remove(r){delete this.store[r]}hasKey(r){return this.store.hasOwnProperty(r)}get isEmpty(){return 0===Object.keys(this.store).length}onSerialize(r,s){this.onSerializeCallbacks[r]=s}toJson(){for(const r in this.onSerializeCallbacks)if(this.onSerializeCallbacks.hasOwnProperty(r))try{this.store[r]=this.onSerializeCallbacks[r]()}catch(s){console.warn("Exception in onSerialize callback: ",s)}return JSON.stringify(this.store).replace(/</g,"\\u003C")}}return e})();const Pp="h",gh="b";var _h=function(e){return e.FirstChild="f",e.NextSibling="n",e}(_h||{});const gf="e",Vh="t",yh="c",Mp="x",qu="r",xm="i",Yf="n",Xf="d",Op="__nghData__",vh="ngh",ry="nghm";let Lg=()=>null;function iy(e,n,r=!1){let s=e.getAttribute(vh);if(null==s)return null;const[l,p]=s.split("|");if(s=r?p:l,!s)return null;const P=r?l:p?`|${p}`:"";let F={};if(""!==s){const ge=n.get(Zd,null,{optional:!0});null!==ge&&(F=ge.get(Op,[])[Number(s)])}const re={data:F,firstChild:e.firstChild??null};return r&&(re.firstChild=e,xp(re,0,e.nextSibling)),P?e.setAttribute(vh,P):e.removeAttribute(vh),re}function Jf(e,n,r=!1){return Lg(e,n,r)}function _f(e){let n=e._lView;return 2===n[Gn].type?null:(Na(n)&&(n=n[zr]),n)}function xp(e,n,r){e.segmentHeads??={},e.segmentHeads[n]=r}function jh(e,n){return e.segmentHeads?.[n]??null}function Lm(e,n){return e.data[yh]?.[n]??null}function Wh(e,n){const r=Lm(e,n)??[];let s=0;for(let l of r)s+=l[qu]*(l[Mp]??1);return s}function tp(e,n){if(typeof e.disconnectedNodes>"u"){const r=e.data[Xf];e.disconnectedNodes=r?new Set(r):null}return!!e.disconnectedNodes?.has(n)}const bf=new sn(""),Np=new sn("",{providedIn:"root",factory:()=>!1}),Fl=new sn("");let kp,np;function zh(e){return function Vg(){if(void 0===kp&&(kp=null,ar.trustedTypes))try{kp=ar.trustedTypes.createPolicy("angular",{createHTML:e=>e,createScript:e=>e,createScriptURL:e=>e})}catch{}return kp}()?.createHTML(e)||e}function Um(e){return function Lp(){if(void 0===np&&(np=null,ar.trustedTypes))try{np=ar.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:e=>e,createScript:e=>e,createScriptURL:e=>e})}catch{}return np}()?.createScriptURL(e)||e}class Eh{constructor(n){this.changingThisBreaksApplicationSecurity=n}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${gi})`}}class Vp extends Eh{getTypeName(){return"HTML"}}class Ki extends Eh{getTypeName(){return"Style"}}class Wn extends Eh{getTypeName(){return"Script"}}class Up extends Eh{getTypeName(){return"URL"}}class Hh extends Eh{getTypeName(){return"ResourceURL"}}function xd(e){return e instanceof Eh?e.changingThisBreaksApplicationSecurity:e}function zo(e,n){const r=function io(e){return e instanceof Eh&&e.getTypeName()||null}(e);if(null!=r&&r!==n){if("ResourceURL"===r&&"URL"===n)return!0;throw new Error(`Required a safe ${n}, got a ${r} (see ${gi})`)}return r===n}function Nd(e){return new Vp(e)}function Ug(e){return new Ki(e)}function Bp(e){return new Wn(e)}function Bm(e){return new Up(e)}function Bg(e){return new Hh(e)}class $m{constructor(n){this.inertDocumentHelper=n}getInertBodyElement(n){n="<body><remove></remove>"+n;try{const r=(new window.DOMParser).parseFromString(zh(n),"text/html").body;return null===r?this.inertDocumentHelper.getInertBodyElement(n):(r.removeChild(r.firstChild),r)}catch{return null}}}class Wm{constructor(n){this.defaultDoc=n,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(n){const r=this.inertDocument.createElement("template");return r.innerHTML=zh(n),r}}const cy=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Fs(e){return(e=String(e)).match(cy)?e:"unsafe:"+e}function bh(e){const n={};for(const r of e.split(","))n[r]=!0;return n}function If(...e){const n={};for(const r of e)for(const s in r)r.hasOwnProperty(s)&&(n[s]=!0);return n}const Hs=bh("area,br,col,hr,img,wbr"),jp=bh("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),zm=bh("rp,rt"),$p=If(Hs,If(jp,bh("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),If(zm,bh("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),If(zm,jp)),rp=bh("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),dy=If(rp,bh("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),bh("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Wp=bh("script,style,template");class Km{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(n){let r=n.firstChild,s=!0,l=[];for(;r;)if(r.nodeType===Node.ELEMENT_NODE?s=this.startElement(r):r.nodeType===Node.TEXT_NODE?this.chars(r.nodeValue):this.sanitizedSomething=!0,s&&r.firstChild)l.push(r),r=Ih(r);else for(;r;){r.nodeType===Node.ELEMENT_NODE&&this.endElement(r);let p=$g(r);if(p){r=p;break}r=l.pop()}return this.buf.join("")}startElement(n){const r=Qu(n).toLowerCase();if(!$p.hasOwnProperty(r))return this.sanitizedSomething=!0,!Wp.hasOwnProperty(r);this.buf.push("<"),this.buf.push(r);const s=n.attributes;for(let l=0;l<s.length;l++){const p=s.item(l),A=p.name,P=A.toLowerCase();if(!dy.hasOwnProperty(P)){this.sanitizedSomething=!0;continue}let F=p.value;rp[P]&&(F=Fs(F)),this.buf.push(" ",A,'="',wf(F),'"')}return this.buf.push(">"),!0}endElement(n){const r=Qu(n).toLowerCase();$p.hasOwnProperty(r)&&!Hs.hasOwnProperty(r)&&(this.buf.push("</"),this.buf.push(r),this.buf.push(">"))}chars(n){this.buf.push(wf(n))}}function $g(e){const n=e.nextSibling;if(n&&e!==n.previousSibling)throw hy(n);return n}function Ih(e){const n=e.firstChild;if(n&&function Tf(e,n){return(e.compareDocumentPosition(n)&Node.DOCUMENT_POSITION_CONTAINED_BY)!==Node.DOCUMENT_POSITION_CONTAINED_BY}(e,n))throw hy(n);return n}function Qu(e){const n=e.nodeName;return"string"==typeof n?n:"FORM"}function hy(e){return new Error(`Failed to sanitize html because the element is clobbered: ${e.outerHTML}`)}const Th=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Af=/([^\#-~ |!])/g;function wf(e){return e.replace(/&/g,"&amp;").replace(Th,function(n){return"&#"+(1024*(n.charCodeAt(0)-55296)+(n.charCodeAt(1)-56320)+65536)+";"}).replace(Af,function(n){return"&#"+n.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let ip;function Wg(e,n){let r=null;try{ip=ip||function jm(e){const n=new Wm(e);return function ay(){try{return!!(new window.DOMParser).parseFromString(zh(""),"text/html")}catch{return!1}}()?new $m(n):n}(e);let s=n?String(n):"";r=ip.getInertBodyElement(s);let l=5,p=s;do{if(0===l)throw new Error("Failed to sanitize html because the input is unstable");l--,s=p,p=r.innerHTML,r=ip.getInertBodyElement(s)}while(s!==p);return zh((new Km).sanitizeChildren(sp(r)||r))}finally{if(r){const s=sp(r)||r;for(;s.firstChild;)s.removeChild(s.firstChild)}}}function sp(e){return"content"in e&&function fy(e){return e.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===e.nodeName}(e)?e.content:null}var kd=function(e){return e[e.NONE=0]="NONE",e[e.HTML=1]="HTML",e[e.STYLE=2]="STYLE",e[e.SCRIPT=3]="SCRIPT",e[e.URL=4]="URL",e[e.RESOURCE_URL=5]="RESOURCE_URL",e}(kd||{});function Gh(e){const n=Cf();return n?n.sanitize(kd.URL,e)||"":zo(e,"URL")?xd(e):Fs(Be(e))}function Ah(e){const n=Cf();if(n)return Um(n.sanitize(kd.RESOURCE_URL,e)||"");if(zo(e,"ResourceURL"))return Um(xd(e));throw new st(904,!1)}function Gp(e,n,r){return function qm(e,n){return"src"===n&&("embed"===e||"frame"===e||"iframe"===e||"media"===e||"script"===e)||"href"===n&&("base"===e||"link"===e)?Ah:Gh}(n,r)(e)}function Cf(){const e=En();return e&&e[na].sanitizer}const wh=/^>|^->|<!--|-->|--!>|<!-$/g,Qm=/(<|>)/g,Ym="\u200b$1\u200b";function em(e){return e.ownerDocument}function Yc(e){return e instanceof Function?e():e}function Ld(e){return"browser"===(e??Ur(h)).get(Dp)}var lp=function(e){return e[e.Important=1]="Important",e[e.DashCase=2]="DashCase",e}(lp||{});let pd;function eg(e,n){return pd(e,n)}function Df(e,n,r,s,l){if(null!=s){let p,A=!1;Qs(s)?p=s:xo(s)&&(A=!0,s=s[xi]);const P=Ai(s);0===e&&null!==r?null==l?rg(n,r,P):Sh(n,r,P,l||null,!0):1===e&&null!==r?Sh(n,r,P,l||null,!0):2===e?hp(n,P,A):3===e&&n.destroyNode(P),null!=p&&function um(e,n,r,s,l){const p=r[ra];p!==Ai(r)&&Df(n,e,s,p,l);for(let P=ps;P<r.length;P++){const F=r[P];fp(F[Gn],F,e,n,s,p)}}(n,e,p,r,l)}}function tg(e,n){return e.createText(n)}function Jd(e,n){return e.createComment(function op(e){return e.replace(wh,n=>n.replace(Qm,Ym))}(n))}function Yh(e,n,r){return e.createElement(n,r)}function Zg(e,n){n[na].changeDetectionScheduler?.notify(1),fp(e,n,n[jr],2,null,null)}function Jg(e,n){const r=e[hc],s=r.indexOf(n);r.splice(s,1)}function up(e,n){if(e.length<=ps)return;const r=ps+n,s=e[r];if(s){const l=s[Ga];null!==l&&l!==e&&Jg(l,s),n>0&&(e[r-1][Us]=s[Us]);const p=Qo(e,ps+n);!function Xh(e,n){Zg(e,n),n[xi]=null,n[Bs]=null}(s[Gn],s);const A=p[Lc];null!==A&&A.detachView(p[Gn]),s[Ti]=null,s[Us]=null,s[Er]&=-129}return s}function om(e,n){if(!(256&n[Er])){const r=n[jr];r.destroyNode&&fp(e,n,r,3,null,null),function by(e){let n=e[zl];if(!n)return Zh(e[Gn],e);for(;n;){let r=null;if(xo(n))r=n[zl];else{const s=n[ps];s&&(r=s)}if(!r){for(;n&&!n[Us]&&n!==e;)xo(n)&&Zh(n[Gn],n),n=n[Ti];null===n&&(n=e),xo(n)&&Zh(n[Gn],n),r=n&&n[Us]}n=r}}(n)}}function Zh(e,n){if(256&n[Er])return;const r=Le(null);try{n[Er]&=-129,n[Er]|=256,n[Oa]&&function kt(e){if(Ze(e),ct(e))for(let n=0;n<e.producerNode.length;n++)Qe(e.producerNode[n],e.producerIndexOfThis[n]);e.producerNode.length=e.producerLastReadVersion.length=e.producerIndexOfThis.length=0,e.liveConsumerNode&&(e.liveConsumerNode.length=e.liveConsumerIndexOfThis.length=0)}(n[Oa]),function e_(e,n){let r;if(null!=e&&null!=(r=e.destroyHooks))for(let s=0;s<r.length;s+=2){const l=n[r[s]];if(!(l instanceof qc)){const p=r[s+1];if(Array.isArray(p))for(let A=0;A<p.length;A+=2){const P=l[p[A]],F=p[A+1];ia(4,P,F);try{F.call(P)}finally{ia(5,P,F)}}else{ia(4,l,p);try{p.call(l)}finally{ia(5,l,p)}}}}}(e,n),function Ty(e,n){const r=e.cleanup,s=n[wl];if(null!==r)for(let p=0;p<r.length-1;p+=2)if("string"==typeof r[p]){const A=r[p+3];A>=0?s[A]():s[-A].unsubscribe(),p+=2}else r[p].call(s[r[p+1]]);null!==s&&(n[wl]=null);const l=n[Oo];if(null!==l){n[Oo]=null;for(let p=0;p<l.length;p++)(0,l[p])()}}(e,n),1===n[Gn].type&&n[jr].destroy();const s=n[Ga];if(null!==s&&Qs(n[Ti])){s!==n[Ti]&&Jg(s,n);const l=n[Lc];null!==l&&l.detachView(e)}!function vn(e){M.delete(e[bs])}(n)}finally{Le(r)}}function am(e,n,r){return function ng(e,n,r){let s=n;for(;null!==s&&40&s.type;)s=(n=s).parent;if(null===s)return r[xi];{const{componentOffset:l}=s;if(l>-1){const{encapsulation:p}=e.data[s.directiveStart+l];if(p===$a.None||p===$a.Emulated)return null}return gs(s,r)}}(e,n.parent,r)}function Sh(e,n,r,s,l){e.insertBefore(n,r,s,l)}function rg(e,n,r){e.appendChild(n,r)}function Dh(e,n,r,s,l){null!==s?Sh(e,n,r,s,l):rg(e,n,r)}function Rf(e,n){return e.parentNode(n)}function ig(e,n,r){return n_(e,n,r)}let r_,n_=function dp(e,n,r){return 40&e.type?gs(e,r):null};function sg(e,n,r,s){const l=am(e,s,n),p=n[jr],P=ig(s.parent||n[Bs],s,n);if(null!=l)if(Array.isArray(r))for(let F=0;F<r.length;F++)Dh(p,l,r[F],P,!1);else Dh(p,l,r,P,!1);void 0!==r_&&r_(p,s,n,r,l)}function lm(e,n){if(null!==n){const r=n.type;if(3&r)return gs(n,e);if(4&r)return s_(-1,e[n.index]);if(8&r){const s=n.child;if(null!==s)return lm(e,s);{const l=e[n.index];return Qs(l)?s_(-1,l):Ai(l)}}if(32&r)return eg(n,e)()||Ai(e[n.index]);{const s=i_(e,n);return null!==s?Array.isArray(s)?s[0]:lm(Rs(e[fs]),s):lm(e,n.next)}}return null}function i_(e,n){return null!==n?e[fs][Bs].projection[n.projection]:null}function s_(e,n){const r=ps+e+1;if(r<n.length){const s=n[r],l=s[Gn].firstChild;if(null!==l)return lm(s,l)}return n[ra]}function hp(e,n,r){const s=Rf(e,n);s&&function cm(e,n,r,s){e.removeChild(n,r,s)}(e,s,n,r)}function wy(e){e.textContent=""}function og(e,n,r,s,l,p,A){for(;null!=r;){const P=s[r.index],F=r.type;if(A&&0===n&&(P&&No(Ai(P),s),r.flags|=2),32&~r.flags)if(8&F)og(e,n,r.child,s,l,p,!1),Df(n,e,l,P,p);else if(32&F){const re=eg(r,s);let ge;for(;ge=re();)Df(n,e,l,ge,p);Df(n,e,l,P,p)}else 16&F?Cy(e,n,s,r,l,p):Df(n,e,l,P,p);r=A?r.projectionNext:r.next}}function fp(e,n,r,s,l,p){og(r,s,e.firstChild,n,l,p,!1)}function Cy(e,n,r,s,l,p){const A=r[fs],F=A[Bs].projection[s.projection];if(Array.isArray(F))for(let re=0;re<F.length;re++)Df(n,e,l,F[re],p);else{let re=F;const ge=A[Ti];g(s)&&(re.flags|=128),og(e,n,re,ge,l,p,!0)}}function c_(e,n,r){""===r?e.removeAttribute(n,"class"):e.setAttribute(n,"class",r)}function l_(e,n,r){const{mergedAttrs:s,classes:l,styles:p}=r;null!==s&&vs(e,n,s),null!==l&&c_(e,n,l),null!==p&&function a_(e,n,r){e.setAttribute(n,"style",r)}(e,n,p)}const Ni={};function u_(e=1){Iv(ii(),En(),uo()+e,!1)}function Iv(e,n,r,s){if(!s)if(3&~n[Er]){const p=e.preOrderHooks;null!==p&&Za(n,p,0,r)}else{const p=e.preOrderCheckHooks;null!==p&&ud(n,p,r)}zc(r)}function eh(e,n=he.Default){const r=En();return null===r?Wi(e,n):Gd(Hi(),r,Te(e),n)}function ag(){throw new Error("invalid")}function cg(e,n,r,s,l,p){const A=Le(null);try{let P=null;l&to.SignalBased&&(P=n[s][Fe]),null!==P&&void 0!==P.transformFn&&(p=P.transformFn(p)),l&to.HasDecoratorInputTransform&&(p=e.inputTransforms[s].call(n,p)),null!==e.setInput?e.setInput(n,P,p,r,s):Wd(n,P,s,p)}finally{Le(A)}}function dm(e,n,r,s,l,p,A,P,F,re,ge){const xe=n.blueprint.slice();return xe[xi]=l,xe[Er]=204|s,(null!==re||e&&2048&e[Er])&&(xe[Er]|=2048),pu(xe),xe[Ti]=xe[kc]=e,xe[Es]=r,xe[na]=A||e&&e[na],xe[jr]=P||e&&e[jr],xe[zs]=F||e&&e[zs]||null,xe[Bs]=p,xe[bs]=function be(){return te++}(),xe[bo]=ge,xe[ou]=re,xe[fs]=2==n.type?e[fs]:xe,xe}function Pf(e,n,r,s,l){let p=e.data[n];if(null===p)p=function d_(e,n,r,s,l){const p=fl(),A=gu(),F=e.data[n]=function U(e,n,r,s,l,p){let A=n?n.injectorIndex:-1,P=0;return Aa()&&(P|=128),{type:r,index:s,insertBeforeIndex:null,injectorIndex:A,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:P,providerIndexes:0,value:l,attrs:p,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:n,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,A?p:p&&p.parent,r,n,s,l);return null===e.firstChild&&(e.firstChild=F),null!==p&&(A?null==p.child&&null!==F.parent&&(p.child=F):null===p.next&&(p.next=F,F.prev=p)),F}(e,n,r,s,l),function uh(){return ei.lFrame.inI18n}()&&(p.flags|=32);else if(64&p.type){p.type=r,p.value=s,p.attrs=l;const A=function Ol(){const e=ei.lFrame,n=e.currentTNode;return e.isParent?n:n.parent}();p.injectorIndex=null===A?-1:A.injectorIndex}return La(p,!0),p}function Ph(e,n,r,s){if(0===r)return-1;const l=n.length;for(let p=0;p<r;p++)n.push(s),e.blueprint.push(s),e.data.push(null);return l}function hm(e,n,r,s,l){const p=uo(),A=2&s;try{zc(-1),A&&n.length>zr&&Iv(e,n,zr,!1),ia(A?2:0,l),r(s,l)}finally{zc(p),ia(A?3:1,l)}}function lg(e,n,r){if(al(n)){const s=Le(null);try{const p=n.directiveEnd;for(let A=n.directiveStart;A<p;A++){const P=e.data[A];P.contentQueries&&P.contentQueries(1,r[A],A)}}finally{Le(s)}}}function pp(e,n,r){Fu()&&(function ki(e,n,r,s){const l=r.directiveStart,p=r.directiveEnd;xa(r)&&function St(e,n,r){const s=gs(n,e),l=Mf(r);let A=16;r.signals?A=4096:r.onPush&&(A=64);const P=_p(e,dm(e,l,null,A,s,n,null,e[na].rendererFactory.createRenderer(s,r),null,null,null));e[n.index]=P}(n,r,e.data[l+r.componentOffset]),e.firstCreatePass||Dr(r,n),No(s,n);const A=r.initialInputs;for(let P=l;P<p;P++){const F=e.data[P],re=tu(n,e,P,r);No(re,n),null!==A&&Sy(0,P-l,re,F,0,A),ms(F)&&(Ia(r.index,n)[Es]=tu(n,e,P,r))}}(e,n,r,gs(r,n)),!(64&~r.flags)&&Is(e,n,r))}function mp(e,n,r=gs){const s=n.localNames;if(null!==s){let l=n.index+1;for(let p=0;p<s.length;p+=2){const A=s[p+1],P=-1===A?r(n,e):e[A];e[l++]=P}}}function Mf(e){const n=e.tView;return null===n||n.incompleteFirstPass?e.tView=Jh(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts,e.id):n}function Jh(e,n,r,s,l,p,A,P,F,re,ge){const xe=zr+s,vt=xe+l,Vt=function u(e,n){const r=[];for(let s=0;s<n;s++)r.push(s<e?null:Ni);return r}(xe,vt),tn="function"==typeof re?re():re;return Vt[Gn]={type:e,blueprint:Vt,template:r,queries:null,viewQuery:P,declTNode:n,data:Vt.slice().fill(null,xe),bindingStartIndex:xe,expandoStartIndex:vt,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof p?p():p,pipeRegistry:"function"==typeof A?A():A,firstChild:null,schemas:F,consts:tn,incompleteFirstPass:!1,ssrId:ge}}let o=()=>null;function d(e){D(e)?wy(e):function Nm(e){const n=ru(),r=n.createNodeIterator(e,NodeFilter.SHOW_COMMENT,{acceptNode(p){const A=function ep(e){return e.textContent?.replace(/\s/gm,"")}(p);return"ngetn"===A||"ngtns"===A?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}});let s;const l=[];for(;s=r.nextNode();)l.push(s);for(const p of l)"ngetn"===p.textContent?p.replaceWith(n.createTextNode("")):p.remove()}(e)}function G(e,n,r,s,l){for(let p in n){if(!n.hasOwnProperty(p))continue;const A=n[p];if(void 0===A)continue;s??={};let P,F=to.None;Array.isArray(A)?(P=A[0],F=A[1]):P=A;let re=p;if(null!==l){if(!l.hasOwnProperty(p))continue;re=l[p]}0===e?ce(s,r,re,P,F):ce(s,r,re,P)}return s}function ce(e,n,r,s,l){let p;e.hasOwnProperty(r)?(p=e[r]).push(n,s):p=e[r]=[n,s],void 0!==l&&p.push(l)}function ht(e,n,r,s,l,p,A,P){const F=gs(n,r);let ge,re=n.inputs;!P&&null!=re&&(ge=re[s])?(nf(e,r,ge,s,l),xa(n)&&function nn(e,n){const r=Ia(n,e);16&r[Er]||(r[Er]|=64)}(r,n.index)):3&n.type&&(s=function ze(e){return"class"===e?"className":"for"===e?"htmlFor":"formaction"===e?"formAction":"innerHtml"===e?"innerHTML":"readonly"===e?"readOnly":"tabindex"===e?"tabIndex":e}(s),l=null!=A?A(l,n.value||"",s):l,p.setProperty(F,s,l))}function Zn(e,n,r,s){if(Fu()){const l=null===s?null:{"":-1},p=function Wt(e,n){const r=e.directiveRegistry;let s=null,l=null;if(r)for(let p=0;p<r.length;p++){const A=r[p];if(Cs(n,A.selectors,!1))if(s||(s=[]),ms(A))if(null!==A.findHostDirectiveDefs){const P=[];l=l||new Map,A.findHostDirectiveDefs(A,P,l),s.unshift(...P,A),dt(e,n,P.length)}else s.unshift(A),dt(e,n,0);else l=l||new Map,A.findHostDirectiveDefs?.(A,s,l),s.push(A)}return null===s?null:[s,l]}(e,r);let A,P;null===p?A=P=null:[A,P]=p,null!==A&&Kr(e,n,r,A,l,P),l&&function Dt(e,n,r){if(n){const s=e.localNames=[];for(let l=0;l<n.length;l+=2){const p=r[n[l+1]];if(null==p)throw new st(-301,!1);s.push(n[l],p)}}}(r,s,l)}r.mergedAttrs=_o(r.mergedAttrs,r.attrs)}function Kr(e,n,r,s,l,p){for(let re=0;re<s.length;re++)Ls(Dr(r,n),e,s[re].type);!function Xt(e,n,r){e.flags|=1,e.directiveStart=n,e.directiveEnd=n+r,e.providerIndexes=n}(r,e.data.length,s.length);for(let re=0;re<s.length;re++){const ge=s[re];ge.providersResolver&&ge.providersResolver(ge)}let A=!1,P=!1,F=Ph(e,n,s.length,null);for(let re=0;re<s.length;re++){const ge=s[re];r.mergedAttrs=_o(r.mergedAttrs,ge.hostAttrs),dn(e,r,n,F,ge),zt(F,ge,l),null!==ge.contentQueries&&(r.flags|=4),(null!==ge.hostBindings||null!==ge.hostAttrs||0!==ge.hostVars)&&(r.flags|=64);const xe=ge.type.prototype;!A&&(xe.ngOnChanges||xe.ngOnInit||xe.ngDoCheck)&&((e.preOrderHooks??=[]).push(r.index),A=!0),!P&&(xe.ngOnChanges||xe.ngDoCheck)&&((e.preOrderCheckHooks??=[]).push(r.index),P=!0),F++}!function we(e,n,r){const l=n.directiveEnd,p=e.data,A=n.attrs,P=[];let F=null,re=null;for(let ge=n.directiveStart;ge<l;ge++){const xe=p[ge],vt=r?r.get(xe):null,tn=vt?vt.outputs:null;F=G(0,xe.inputs,ge,F,vt?vt.inputs:null),re=G(1,xe.outputs,ge,re,tn);const Mn=null===F||null===A||za(n)?null:gp(F,ge,A);P.push(Mn)}null!==F&&(F.hasOwnProperty("class")&&(n.flags|=8),F.hasOwnProperty("style")&&(n.flags|=16)),n.initialInputs=P,n.inputs=F,n.outputs=re}(e,r,p)}function Is(e,n,r){const s=r.directiveStart,l=r.directiveEnd,p=r.index,A=function ks(){return ei.lFrame.currentDirectiveIndex}();try{zc(p);for(let P=s;P<l;P++){const F=e.data[P],re=n[P];od(P),(null!==F.hostBindings||0!==F.hostVars||null!==F.hostAttrs)&&$i(F,re)}}finally{zc(-1),od(A)}}function $i(e,n){null!==e.hostBindings&&e.hostBindings(1,n)}function dt(e,n,r){n.componentOffset=r,(e.components??=[]).push(n.index)}function zt(e,n,r){if(r){if(n.exportAs)for(let s=0;s<n.exportAs.length;s++)r[n.exportAs[s]]=e;ms(n)&&(r[""]=e)}}function dn(e,n,r,s,l){e.data[s]=l;const p=l.factory||(l.factory=ls(l.type)),A=new qc(p,ms(l),eh);e.blueprint[s]=A,r[s]=A,function si(e,n,r,s,l){const p=l.hostBindings;if(p){let A=e.hostBindingOpCodes;null===A&&(A=e.hostBindingOpCodes=[]);const P=~n.index;(function Qr(e){let n=e.length;for(;n>0;){const r=e[--n];if("number"==typeof r&&r<0)return r}return 0})(A)!=P&&A.push(P),A.push(r,s,p)}}(e,n,s,Ph(e,r,l.hostVars,Ni),l)}function Ac(e,n,r,s,l,p){const A=gs(e,n);!function ef(e,n,r,s,l,p,A){if(null==p)e.removeAttribute(n,l,r);else{const P=null==A?Be(p):A(p,s||"",l);e.setAttribute(n,l,P,r)}}(n[jr],A,p,e.value,r,s,l)}function Sy(e,n,r,s,l,p){const A=p[n];if(null!==A)for(let P=0;P<A.length;)cg(s,r,A[P++],A[P++],A[P++],A[P++])}function gp(e,n,r){let s=null,l=0;for(;l<r.length;){const p=r[l];if(0!==p)if(5!==p){if("number"==typeof p)break;if(e.hasOwnProperty(p)){null===s&&(s=[]);const A=e[p];for(let P=0;P<A.length;P+=3)if(A[P]===n){s.push(p,A[P+1],A[P+2],r[l+1]);break}}l+=2}else l+=2;else l+=4}return s}function Of(e,n,r,s){return[e,!0,0,n,null,s,null,r,null,null]}function fm(e,n){const r=e.contentQueries;if(null!==r){const s=Le(null);try{for(let l=0;l<r.length;l+=2){const A=r[l+1];if(-1!==A){const P=e.data[A];ad(r[l]),P.contentQueries(2,n[A],A)}}}finally{Le(s)}}}function _p(e,n){return e[zl]?e[td][Us]=n:e[zl]=n,e[td]=n,n}function ug(e,n,r){ad(0);const s=Le(null);try{n(e,r)}finally{Le(s)}}function Xc(e){return e[wl]||(e[wl]=[])}function h_(e){return e.cleanup||(e.cleanup=[])}function yp(e,n,r){return(null===e||ms(e))&&(r=function cl(e){for(;Array.isArray(e);){if("object"==typeof e[us])return e;e=e[xi]}return null}(r[n.index])),r[jr]}function dg(e,n){const r=e[zs],s=r?r.get(se,null):null;s&&s.handleError(n)}function nf(e,n,r,s,l){for(let p=0;p<r.length;){const A=r[p++],P=r[p++],F=r[p++];cg(e.data[A],n[A],s,P,F,l)}}function Dy(e,n){const r=Ia(n,e),s=r[Gn];!function _(e,n){for(let r=n.length;r<e.blueprint.length;r++)n.push(e.blueprint[r])}(s,r);const l=r[xi];null!==l&&null===r[bo]&&(r[bo]=Jf(l,r[zs])),c(s,r,r[Es])}function c(e,n,r){Wc(n);try{const s=e.viewQuery;null!==s&&ug(1,s,r);const l=e.template;null!==l&&hm(e,n,l,1,r),e.firstCreatePass&&(e.firstCreatePass=!1),n[Lc]?.finishViewCreation(e),e.staticContentQueries&&fm(e,n),e.staticViewQueries&&ug(2,e.viewQuery,r);const p=e.components;null!==p&&function a(e,n){for(let r=0;r<n.length;r++)Dy(e,n[r])}(n,p)}catch(s){throw e.firstCreatePass&&(e.incompleteFirstPass=!0,e.firstCreatePass=!1),s}finally{n[Er]&=-5,Iu()}}function m(e,n,r,s){const l=Le(null);try{const p=n.tView,F=dm(e,p,r,4096&e[Er]?4096:16,null,n,null,null,s?.injector??null,s?.embeddedViewInjector??null,s?.dehydratedView??null);F[Ga]=e[n.index];const ge=e[Lc];return null!==ge&&(F[Lc]=ge.createEmbeddedView(p)),c(p,F,r),F}finally{Le(l)}}function R(e,n){const r=ps+n;if(r<e.length)return e[r]}function j(e,n){return!n||null===n.firstChild||g(e)}function ie(e,n,r,s=!0){const l=n[Gn];if(function Fd(e,n,r,s){const l=ps+s,p=r.length;s>0&&(r[l-1][Us]=n),s<p-ps?(n[Us]=r[l],Dc(r,ps+s,n)):(r.push(n),n[Us]=null),n[Ti]=r;const A=n[Ga];null!==A&&r!==A&&function Iy(e,n){const r=e[hc];n[fs]!==n[Ti][Ti][fs]&&(e[Er]|=Ed.HasTransplantedViews),null===r?e[hc]=[n]:r.push(n)}(A,n);const P=n[Lc];null!==P&&P.insertView(e),oa(n),n[Er]|=128}(l,n,e,r),s){const A=s_(r,e),P=n[jr],F=Rf(P,e[ra]);null!==F&&function Ey(e,n,r,s,l,p){s[xi]=l,s[Bs]=n,fp(e,s,r,1,l,p)}(l,e[Bs],P,n,F,A)}const p=n[bo];null!==p&&null!==p.firstChild&&(p.firstChild=null)}function fe(e,n){const r=up(e,n);return void 0!==r&&om(r[Gn],r),r}function ke(e,n,r,s,l=!1){for(;null!==r;){const p=n[r.index];null!==p&&s.push(Ai(p)),Qs(p)&&Re(p,s);const A=r.type;if(8&A)ke(e,n,r.child,s);else if(32&A){const P=eg(r,n);let F;for(;F=P();)s.push(F)}else if(16&A){const P=i_(n,r);if(Array.isArray(P))s.push(...P);else{const F=Rs(n[fs]);ke(F[Gn],F,P,s,!0)}}r=l?r.projectionNext:r.next}return s}function Re(e,n){for(let r=ps;r<e.length;r++){const s=e[r],l=s[Gn].firstChild;null!==l&&ke(s[Gn],s,l,n)}e[ra]!==e[xi]&&n.push(e[ra])}let Ot=[];const Pn={...Ae,consumerIsAlwaysLive:!0,consumerMarkedDirty:e=>{gc(e.lView)},consumerOnSignalRead(){this.lView[Oa]=this}},rr=100;function zn(e,n=!0,r=0){const s=e[na],l=s.rendererFactory;l.begin?.();try{!function Vn(e,n){ca(e,n);let r=0;for(;Ta(e);){if(r===rr)throw new st(103,!1);r++,ca(e,1)}}(e,r)}catch(A){throw n&&dg(e,A),A}finally{l.end?.(),s.inlineEffectRunner?.flush()}}function tr(e,n,r,s){const l=n[Er];if(!(256&~l))return;n[na].inlineEffectRunner?.flush(),Wc(n);let A=null,P=null;(function ur(e){return 2!==e.type})(e)&&(P=function Lt(e){return e[Oa]??function wn(e){const n=Ot.pop()??Object.create(Pn);return n.lView=e,n}(e)}(n),A=Pt(P));try{pu(n),function yu(e){return ei.lFrame.bindingIndex=e}(e.bindingStartIndex),null!==r&&hm(e,n,r,2,s);const F=!(3&~l);if(F){const xe=e.preOrderCheckHooks;null!==xe&&ud(n,xe,null)}else{const xe=e.preOrderHooks;null!==xe&&Za(n,xe,0,null),Nl(n,0)}if(function Gr(e){for(let n=xr(e);null!==n;n=wm(n)){if(!(n[Er]&Ed.HasTransplantedViews))continue;const r=n[hc];for(let s=0;s<r.length;s++){mu(r[s])}}}(n),Or(n,0),null!==e.contentQueries&&fm(e,n),F){const xe=e.contentCheckHooks;null!==xe&&ud(n,xe)}else{const xe=e.contentHooks;null!==xe&&Za(n,xe,1),Nl(n,1)}!function Tv(e,n){const r=e.hostBindingOpCodes;if(null!==r)try{for(let s=0;s<r.length;s++){const l=r[s];if(l<0)zc(~l);else{const p=l,A=r[++s],P=r[++s];Hd(A,p),P(2,n[p])}}}finally{zc(-1)}}(e,n);const re=e.components;null!==re&&md(n,re,0);const ge=e.viewQuery;if(null!==ge&&ug(2,ge,s),F){const xe=e.viewCheckHooks;null!==xe&&ud(n,xe)}else{const xe=e.viewHooks;null!==xe&&Za(n,xe,2),Nl(n,2)}if(!0===e.firstUpdatePass&&(e.firstUpdatePass=!1),n[au]){for(const xe of n[au])xe();n[au]=null}n[Er]&=-73}catch(F){throw gc(n),F}finally{null!==P&&(hn(P,A),function kn(e){e.lView[Oa]!==e&&(e.lView=null,Ot.push(e))}(P)),Iu()}}function Or(e,n){for(let r=xr(e);null!==r;r=wm(r))for(let s=ps;s<r.length;s++)Gi(r[s],n)}function Di(e,n,r){Gi(Ia(n,e),r)}function Gi(e,n){pc(e)&&ca(e,n)}function ca(e,n){const s=e[Gn],l=e[Er],p=e[Oa];let A=!!(0===n&&16&l);if(A||=!!(64&l&&0===n),A||=!!(1024&l),A||=!(!p?.dirty||!Et(p)),p&&(p.dirty=!1),e[Er]&=-9217,A)tr(s,e,s.template,e[Es]);else if(8192&l){Or(e,1);const P=s.components;null!==P&&md(e,P,1)}}function md(e,n,r){for(let s=0;s<n.length;s++)Di(e,n[s],r)}function xf(e){for(e[na].changeDetectionScheduler?.notify();e;){e[Er]|=64;const n=Rs(e);if(Na(e)&&!n)return e;e=n}return null}class gd{get rootNodes(){const n=this._lView,r=n[Gn];return ke(r,n,r.firstChild,[])}constructor(n,r,s=!0){this._lView=n,this._cdRefInjectingView=r,this.notifyErrorHandler=s,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Es]}set context(n){this._lView[Es]=n}get destroyed(){return!(256&~this._lView[Er])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const n=this._lView[Ti];if(Qs(n)){const r=n[8],s=r?r.indexOf(this):-1;s>-1&&(up(n,s),Qo(r,s))}this._attachedToViewContainer=!1}om(this._lView[Gn],this._lView)}onDestroy(n){Io(this._lView,n)}markForCheck(){xf(this._cdRefInjectingView||this._lView)}detach(){this._lView[Er]&=-129}reattach(){oa(this._lView),this._lView[Er]|=128}detectChanges(){this._lView[Er]|=1024,zn(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new st(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,Zg(this._lView[Gn],this._lView)}attachToAppRef(n){if(this._attachedToViewContainer)throw new st(902,!1);this._appRef=n,oa(this._lView)}}let nh=(()=>{class e{static{this.__NG_ELEMENT_ID__=Wr}}return e})();const hg=nh,fg=class extends hg{constructor(n,r,s){super(),this._declarationLView=n,this._declarationTContainer=r,this.elementRef=s}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(n,r){return this.createEmbeddedViewImpl(n,r)}createEmbeddedViewImpl(n,r,s){const l=m(this._declarationLView,this._declarationTContainer,n,{embeddedViewInjector:r,dehydratedView:s});return new gd(l)}};function Wr(){return ni(Hi(),En())}function ni(e,n){return 4&e.type?new fg(n,e,Qc(e,n)):null}function My(e){const n=e[Ds]??[],s=e[Ti][jr];for(const l of n)Av(l,s);e[Ds]=Mi}function Av(e,n){let r=0,s=e.firstChild;if(s){const l=e.data[qu];for(;r<l;){const p=s.nextSibling;hp(n,s,!1),s=p,r++}}}function g_(e){My(e);for(let n=ps;n<e.length;n++)mg(e[n])}function mg(e){!function Oy(e){const n=e[bo]?.i18nNodes;if(n){const r=e[jr];for(const s of n.values())hp(r,s,!1);e[bo].i18nNodes=void 0}}(e);const n=e[Gn];for(let r=zr;r<n.bindingStartIndex;r++)Qs(e[r])?g_(e[r]):xo(e[r])&&mg(e[r])}const AE=new RegExp(`^(\\d+)*(${gh}|${Pp})*(.*)`);function vp(e){return e.index-zr}function y_(e,n,r,s){const l=vp(s);let p=function Ny(e,n){const r=e.i18nNodes;if(r){const s=r.get(n);return s&&r.delete(n),s}return null}(e,l);if(!p){const A=e.data[Yf];if(A?.[l])p=function ky(e,n){const[r,...s]=function Cv(e){const n=e.match(AE),[r,s,l,p]=n,A=s?parseInt(s,10):l,P=[];for(const[F,re,ge]of p.matchAll(/(f|n)(\d*)/g)){const xe=parseInt(ge,10)||1;P.push(re,xe)}return[A,...P]}(e);let l;return l=r===Pp?n[fs][xi]:r===gh?function tm(e){return e.ownerDocument.body}(n[fs][xi]):Ai(n[Number(r)+zr]),function Sv(e,n){let r=e;for(let s=0;s<n.length;s+=2){const l=n[s],p=n[s+1];for(let A=0;A<p;A++)switch(l){case _h.FirstChild:r=r.firstChild;break;case _h.NextSibling:r=r.nextSibling}}return r}(l,s)}(A[l],r);else if(n.firstChild===s)p=e.firstChild;else{const P=null===s.prev,F=s.prev??s.parent;if(function xy(e){return!e.prev&&8===e.parent?.type}(s))p=jh(e,vp(s.parent));else{let re=gs(F,r);if(P)p=re.firstChild;else{const ge=vp(F),xe=jh(e,ge);p=2===F.type&&xe?gg(Wh(e,ge)+1,xe):re.nextSibling}}}}return p}function gg(e,n){let r=n;for(let s=0;s<e;s++)r=r.nextSibling;return r}let Fy=()=>null;function Rv(e,n){const r=e[Ds];return n&&null!==r&&0!==r.length?r[0].data[xm]===n?r.shift():(My(e),null):null}function Ud(e,n){return Fy(e,n)}class Bd{}class v_{}class yg{}class vg{resolveComponentFactory(n){throw function Pv(e){const n=Error(`No component factory found for ${qr(e)}.`);return n.ngComponent=e,n}(n)}}let rf=(()=>{class e{static{this.NULL=new vg}}return e})();class Mv{}let Ov=(()=>{class e{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>function RE(){const e=En(),r=Ia(Hi().index,e);return(xo(r)?r:e)[jr]}()}}return e})(),PE=(()=>{class e{static{this.\u0275prov=vi({token:e,providedIn:"root",factory:()=>null})}}return e})();const Uy={};function ME(e,n){if(null!==function Ne(){return q}())throw new st(-602,!1)}const mm=new Set;function bl(e){mm.has(e)||(mm.add(e),performance?.mark?.("mark_feature_usage",{detail:{feature:e}}))}function By(...e){}class Ko{constructor({enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:s=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Pu(!1),this.onMicrotaskEmpty=new Pu(!1),this.onStable=new Pu(!1),this.onError=new Pu(!1),typeof Zone>"u")throw new st(908,!1);Zone.assertZonePatched();const l=this;l._nesting=0,l._outer=l._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(l._inner=l._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(l._inner=l._inner.fork(Zone.longStackTraceZoneSpec)),l.shouldCoalesceEventChangeDetection=!s&&r,l.shouldCoalesceRunChangeDetection=s,l.lastRequestAnimationFrameId=-1,l.nativeRequestAnimationFrame=function xv(){const e="function"==typeof ar.requestAnimationFrame;let n=ar[e?"requestAnimationFrame":"setTimeout"],r=ar[e?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&n&&r){const s=n[Zone.__symbol__("OriginalDelegate")];s&&(n=s);const l=r[Zone.__symbol__("OriginalDelegate")];l&&(r=l)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:r}}().nativeRequestAnimationFrame,function kf(e){const n=()=>{!function NE(e){e.isCheckStableRunning||-1!==e.lastRequestAnimationFrameId||(e.lastRequestAnimationFrameId=e.nativeRequestAnimationFrame.call(ar,()=>{e.fakeTopEventTask||(e.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{e.lastRequestAnimationFrameId=-1,$y(e),e.isCheckStableRunning=!0,jy(e),e.isCheckStableRunning=!1},void 0,()=>{},()=>{})),e.fakeTopEventTask.invoke()}),$y(e))}(e)};e._inner=e._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(r,s,l,p,A,P)=>{if(function kv(e){return!(!Array.isArray(e)||1!==e.length)&&!0===e[0].data?.__ignore_ng_zone__}(P))return r.invokeTask(l,p,A,P);try{return Nv(e),r.invokeTask(l,p,A,P)}finally{(e.shouldCoalesceEventChangeDetection&&"eventTask"===p.type||e.shouldCoalesceRunChangeDetection)&&n(),gm(e)}},onInvoke:(r,s,l,p,A,P,F)=>{try{return Nv(e),r.invoke(l,p,A,P,F)}finally{e.shouldCoalesceRunChangeDetection&&n(),gm(e)}},onHasTask:(r,s,l,p)=>{r.hasTask(l,p),s===l&&("microTask"==p.change?(e._hasPendingMicrotasks=p.microTask,$y(e),jy(e)):"macroTask"==p.change&&(e.hasPendingMacrotasks=p.macroTask))},onHandleError:(r,s,l,p)=>(r.handleError(l,p),e.runOutsideAngular(()=>e.onError.emit(p)),!1)})}(l)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Ko.isInAngularZone())throw new st(909,!1)}static assertNotInAngularZone(){if(Ko.isInAngularZone())throw new st(909,!1)}run(n,r,s){return this._inner.run(n,r,s)}runTask(n,r,s,l){const p=this._inner,A=p.scheduleEventTask("NgZoneEvent: "+l,n,xE,By,By);try{return p.runTask(A,r,s)}finally{p.cancelTask(A)}}runGuarded(n,r,s){return this._inner.runGuarded(n,r,s)}runOutsideAngular(n){return this._outer.run(n)}}const xE={};function jy(e){if(0==e._nesting&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function $y(e){e.hasPendingMicrotasks=!!(e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&-1!==e.lastRequestAnimationFrameId)}function Nv(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function gm(e){e._nesting--,jy(e)}var ih=function(e){return e[e.EarlyRead=0]="EarlyRead",e[e.Write=1]="Write",e[e.MixedReadWrite=2]="MixedReadWrite",e[e.Read=3]="Read",e}(ih||{});const Wy={destroy(){}};function Lv(e,n){!n&&L();const r=n?.injector??Ur(h);if(!Ld(r))return Wy;bl("NgAfterNextRender");const s=r.get(_m),l=s.handler??=new zy,p=n?.phase??ih.MixedReadWrite,A=()=>{l.unregister(F),P()},P=r.get(Je).onDestroy(A),F=ta(r,()=>new Fv(p,()=>{A(),e()}));return l.register(F),{destroy:A}}class Fv{constructor(n,r){this.phase=n,this.callbackFn=r,this.zone=Ur(Ko),this.errorHandler=Ur(se,{optional:!0}),Ur(Bd,{optional:!0})?.notify(1)}invoke(){try{this.zone.runOutsideAngular(this.callbackFn)}catch(n){this.errorHandler?.handleError(n)}}}class zy{constructor(){this.executingCallbacks=!1,this.buckets={[ih.EarlyRead]:new Set,[ih.Write]:new Set,[ih.MixedReadWrite]:new Set,[ih.Read]:new Set},this.deferredCallbacks=new Set}register(n){(this.executingCallbacks?this.deferredCallbacks:this.buckets[n.phase]).add(n)}unregister(n){this.buckets[n.phase].delete(n),this.deferredCallbacks.delete(n)}execute(){this.executingCallbacks=!0;for(const n of Object.values(this.buckets))for(const r of n)r.invoke();this.executingCallbacks=!1;for(const n of this.deferredCallbacks)this.buckets[n.phase].add(n);this.deferredCallbacks.clear()}destroy(){for(const n of Object.values(this.buckets))n.clear();this.deferredCallbacks.clear()}}let _m=(()=>{class e{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){const r=[...this.internalCallbacks];this.internalCallbacks.length=0;for(const s of r)s()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}static{this.\u0275prov=vi({token:e,providedIn:"root",factory:()=>new e})}}return e})();function sh(e){return!!Ss(e)}function T_(e,n,r){let s=r?e.styles:null,l=r?e.classes:null,p=0;if(null!==n)for(let A=0;A<n.length;A++){const P=n[A];"number"==typeof P?p=P:1==p?l=ai(l,P):2==p&&(s=ai(s,P+": "+n[++A]+";"))}r?e.styles=s:e.stylesWithoutHost=s,r?e.classes=l:e.classesWithoutHost=l}class Ky extends rf{constructor(n){super(),this.ngModule=n}resolveComponentFactory(n){const r=ri(n);return new Ep(r,this.ngModule)}}function Em(e){const n=[];for(const r in e){if(!e.hasOwnProperty(r))continue;const s=e[r];void 0!==s&&n.push({propName:Array.isArray(s)?s[0]:s,templateName:r})}return n}class wg{constructor(n,r){this.injector=n,this.parentInjector=r}get(n,r,s){s=Go(s);const l=this.injector.get(n,Uy,s);return l!==Uy||r===Uy?l:this.parentInjector.get(n,r,s)}}class Ep extends yg{get inputs(){const n=this.componentDef,r=n.inputTransforms,s=Em(n.inputs);if(null!==r)for(const l of s)r.hasOwnProperty(l.propName)&&(l.transform=r[l.propName]);return s}get outputs(){return Em(this.componentDef.outputs)}constructor(n,r){super(),this.componentDef=n,this.ngModule=r,this.componentType=n.type,this.selector=function ma(e){return e.map(Mc).join(",")}(n.selectors),this.ngContentSelectors=n.ngContentSelectors?n.ngContentSelectors:[],this.isBoundToModule=!!r}create(n,r,s,l){const p=Le(null);try{let A=(l=l||this.ngModule)instanceof Oi?l:l?.injector;A&&null!==this.componentDef.getStandaloneInjector&&(A=this.componentDef.getStandaloneInjector(A)||A);const P=A?new wg(n,A):n,F=P.get(Mv,null);if(null===F)throw new st(407,!1);const re=P.get(PE,null),vt={rendererFactory:F,sanitizer:re,inlineEffectRunner:null,afterRenderEventManager:P.get(_m,null),changeDetectionScheduler:P.get(Bd,null)},Vt=F.createRenderer(null,this.componentDef),tn=this.componentDef.selectors[0][0]||"div",Mn=s?function t(e,n,r,s){const p=s.get(Np,!1)||r===$a.ShadowDom,A=e.selectRootElement(n,p);return function i(e){o(e)}(A),A}(Vt,s,this.componentDef.encapsulation,P):Yh(Vt,tn,function Vv(e){const n=e.toLowerCase();return"svg"===n?"svg":"math"===n?"math":null}(tn));let dr=512;this.componentDef.signals?dr|=4096:this.componentDef.onPush||(dr|=16);let Ar=null;null!==Mn&&(Ar=Jf(Mn,P,!0));const Qn=Jh(0,null,null,1,0,null,null,null,null,null,null),Pi=dm(null,Qn,null,dr,null,null,vt,Vt,P,null,Ar);let js,Lo;Wc(Pi);try{const jl=this.componentDef;let $d,J_=null;jl.findHostDirectiveDefs?($d=[],J_=new Map,jl.findHostDirectiveDefs(jl,$d,J_),$d.push(jl)):$d=[jl];const mw=function Uv(e,n){const r=e[Gn],s=zr;return e[s]=n,Pf(r,s,2,"#host",null)}(Pi,Mn),dM=function A_(e,n,r,s,l,p,A){const P=l[Gn];!function Bv(e,n,r,s){for(const l of e)n.mergedAttrs=_o(n.mergedAttrs,l.hostAttrs);null!==n.mergedAttrs&&(T_(n,n.mergedAttrs,!0),null!==r&&l_(s,r,n))}(s,e,n,A);let F=null;null!==n&&(F=Jf(n,l[zs]));const re=p.rendererFactory.createRenderer(n,r);let ge=16;r.signals?ge=4096:r.onPush&&(ge=64);const xe=dm(l,Mf(r),null,ge,l[e.index],e,p,re,null,null,F);return P.firstCreatePass&&dt(P,e,s.length-1),_p(l,xe),l[e.index]=xe}(mw,Mn,jl,$d,Pi,vt,Vt);Lo=ll(Qn,zr),Mn&&function bp(e,n,r,s){if(s)vs(e,r,["ng-version","17.3.12"]);else{const{attrs:l,classes:p}=function ga(e){const n=[],r=[];let s=1,l=2;for(;s<e.length;){let p=e[s];if("string"==typeof p)2===l?""!==p&&n.push(p,e[++s]):8===l&&r.push(p);else{if(!no(l))break;l=p}s++}return{attrs:n,classes:r}}(n.selectors[0]);l&&vs(e,r,l),p&&p.length>0&&c_(e,r,p.join(" "))}}(Vt,jl,Mn,s),void 0!==r&&function $v(e,n,r){const s=e.projection=[];for(let l=0;l<n.length;l++){const p=r[l];s.push(null!=p?Array.from(p):null)}}(Lo,this.ngContentSelectors,r),js=function jv(e,n,r,s,l,p){const A=Hi(),P=l[Gn],F=gs(A,l);Kr(P,l,A,r,null,s);for(let ge=0;ge<r.length;ge++)No(tu(l,P,A.directiveStart+ge,A),l);Is(P,l,A),F&&No(F,l);const re=tu(l,P,A.directiveStart+A.componentOffset,A);if(e[Es]=l[Es]=re,null!==p)for(const ge of p)ge(re,n);return lg(P,A,l),re}(dM,jl,$d,J_,Pi,[Wv]),c(Qn,Pi,null)}finally{Iu()}return new Gy(this.componentType,js,Qc(Lo,Pi),Pi,Lo)}finally{Le(p)}}}class Gy extends v_{constructor(n,r,s,l,p){super(),this.location=s,this._rootLView=l,this._tNode=p,this.previousInputValues=null,this.instance=r,this.hostView=this.changeDetectorRef=new gd(l,void 0,!1),this.componentType=n}setInput(n,r){const s=this._tNode.inputs;let l;if(null!==s&&(l=s[n])){if(this.previousInputValues??=new Map,this.previousInputValues.has(n)&&Object.is(this.previousInputValues.get(n),r))return;const p=this._rootLView;nf(p[Gn],p,l,n,r),this.previousInputValues.set(n,r),xf(Ia(this._tNode.index,p))}}get injector(){return new ji(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(n){this.hostView.onDestroy(n)}}function Wv(){const e=Hi();Kc(En()[Gn],e)}let Cg=(()=>{class e{static{this.__NG_ELEMENT_ID__=zv}}return e})();function zv(){return Ip(Hi(),En())}const w_=Cg,ed=class extends w_{constructor(n,r,s){super(),this._lContainer=n,this._hostTNode=r,this._hostLView=s}get element(){return Qc(this._hostTNode,this._hostLView)}get injector(){return new ji(this._hostTNode,this._hostLView)}get parentInjector(){const n=Xi(this._hostTNode,this._hostLView);if(wu(n)){const r=N(n,this._hostLView),s=kl(n);return new ji(r[Gn].data[s+8],r)}return new ji(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(n){const r=qy(this._lContainer);return null!==r&&r[n]||null}get length(){return this._lContainer.length-ps}createEmbeddedView(n,r,s){let l,p;"number"==typeof s?l=s:null!=s&&(l=s.index,p=s.injector);const A=Ud(this._lContainer,n.ssrId),P=n.createEmbeddedViewImpl(r||{},p,A);return this.insertImpl(P,l,j(this._hostTNode,A)),P}createComponent(n,r,s,l,p){const A=n&&!function cr(e){return"function"==typeof e}(n);let P;if(A)P=r;else{const tn=r||{};P=tn.index,s=tn.injector,l=tn.projectableNodes,p=tn.environmentInjector||tn.ngModuleRef}const F=A?n:new Ep(ri(n)),re=s||this.parentInjector;if(!p&&null==F.ngModule){const Mn=(A?re:this.parentInjector).get(Oi,null);Mn&&(p=Mn)}const ge=ri(F.componentType??{}),xe=Ud(this._lContainer,ge?.id??null),Vt=F.create(re,l,xe?.firstChild??null,p);return this.insertImpl(Vt.hostView,P,j(this._hostTNode,xe)),Vt}insert(n,r){return this.insertImpl(n,r,!0)}insertImpl(n,r,s){const l=n._lView;if(function mc(e){return Qs(e[Ti])}(l)){const P=this.indexOf(n);if(-1!==P)this.detach(P);else{const F=l[Ti],re=new ed(F,F[Bs],F[Ti]);re.detach(re.indexOf(n))}}const p=this._adjustIndex(r),A=this._lContainer;return ie(A,l,p,s),n.attachToViewContainerRef(),Dc(C_(A),p,n),n}move(n,r){return this.insert(n,r)}indexOf(n){const r=qy(this._lContainer);return null!==r?r.indexOf(n):-1}remove(n){const r=this._adjustIndex(n,-1),s=up(this._lContainer,r);s&&(Qo(C_(this._lContainer),r),om(s[Gn],s))}detach(n){const r=this._adjustIndex(n,-1),s=up(this._lContainer,r);return s&&null!=Qo(C_(this._lContainer),r)?new gd(s):null}_adjustIndex(n,r=0){return n??this.length+r}};function qy(e){return e[8]}function C_(e){return e[8]||(e[8]=[])}function Ip(e,n){let r;const s=n[e.index];return Qs(s)?r=s:(r=Of(s,n,null,e),n[e.index]=r,_p(n,r)),Y(r,n,e,s),new ed(r,e,n)}let Y=en,le=()=>!1;function en(e,n,r,s){if(e[ra])return;let l;l=8&r.type?Ai(s):function w(e,n){const r=e[jr],s=r.createComment(""),l=gs(n,e);return Sh(r,Rf(r,l),s,function t_(e,n){return e.nextSibling(n)}(r,l),!1),s}(n,r),e[ra]=l}function bn(e,n,r){if(e[ra]&&e[Ds])return!0;const s=r[bo],l=n.index-zr;if(!s||function v(e){if(g(e))return!0;let n=e.parent;for(;n;){if(g(e)||Tp(n))return!0;n=n.parent}return!1}(n)||tp(s,l))return!1;const A=jh(s,l),P=s.data[yh]?.[l],[F,re]=function SE(e,n){const r=[];for(const s of n)for(let l=0;l<(s[Mp]??1);l++){const p={data:s,firstChild:null};s[qu]>0&&(p.firstChild=e,e=gg(s[qu],e)),r.push(p)}return[e,r]}(A,P);return e[ra]=F,e[Ds]=re,!0}function Sr(e,n,r,s){le(e,r,n)||en(e,n,r,s)}class Zc{constructor(n){this.queryList=n,this.matches=null}clone(){return new Zc(this.queryList)}setDirty(){this.queryList.setDirty()}}class Ps{constructor(n=[]){this.queries=n}createEmbeddedView(n){const r=n.queries;if(null!==r){const s=null!==n.contentQueries?n.contentQueries[0]:r.length,l=[];for(let p=0;p<s;p++){const A=r.getByIndex(p);l.push(this.queries[A.indexInDeclarationView].clone())}return new Ps(l)}return null}insertView(n){this.dirtyQueriesWithMatches(n)}detachView(n){this.dirtyQueriesWithMatches(n)}finishViewCreation(n){this.dirtyQueriesWithMatches(n)}dirtyQueriesWithMatches(n){for(let r=0;r<this.queries.length;r++)null!==VE(n,r).matches&&this.queries[r].setDirty()}}class Vl{constructor(n,r,s=null){this.flags=r,this.read=s,this.predicate="string"==typeof n?function _w(e){return e.split(",").map(n=>n.trim())}(n):n}}class Il{constructor(n=[]){this.queries=n}elementStart(n,r){for(let s=0;s<this.queries.length;s++)this.queries[s].elementStart(n,r)}elementEnd(n){for(let r=0;r<this.queries.length;r++)this.queries[r].elementEnd(n)}embeddedTView(n){let r=null;for(let s=0;s<this.length;s++){const l=null!==r?r.length:0,p=this.getByIndex(s).embeddedTView(n,l);p&&(p.indexInDeclarationView=s,null!==r?r.push(p):r=[p])}return null!==r?new Il(r):null}template(n,r){for(let s=0;s<this.queries.length;s++)this.queries[s].template(n,r)}getByIndex(n){return this.queries[n]}get length(){return this.queries.length}track(n){this.queries.push(n)}}class Lf{constructor(n,r=-1){this.metadata=n,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=r}elementStart(n,r){this.isApplyingToNode(r)&&this.matchTNode(n,r)}elementEnd(n){this._declarationNodeIndex===n.index&&(this._appliesToNextNode=!1)}template(n,r){this.elementStart(n,r)}embeddedTView(n,r){return this.isApplyingToNode(n)?(this.crossesNgTemplate=!0,this.addMatch(-n.index,r),new Lf(this.metadata)):null}isApplyingToNode(n){if(this._appliesToNextNode&&1&~this.metadata.flags){const r=this._declarationNodeIndex;let s=n.parent;for(;null!==s&&8&s.type&&s.index!==r;)s=s.parent;return r===(null!==s?s.index:-1)}return this._appliesToNextNode}matchTNode(n,r){const s=this.metadata.predicate;if(Array.isArray(s))for(let l=0;l<s.length;l++){const p=s[l];this.matchTNodeWithReadOption(n,r,ah(r,p)),this.matchTNodeWithReadOption(n,r,hd(r,n,p,!1,!1))}else s===nh?4&r.type&&this.matchTNodeWithReadOption(n,r,-1):this.matchTNodeWithReadOption(n,r,hd(r,n,s,!1,!1))}matchTNodeWithReadOption(n,r,s){if(null!==s){const l=this.metadata.read;if(null!==l)if(l===ho||l===Cg||l===nh&&4&r.type)this.addMatch(r.index,-2);else{const p=hd(r,n,l,!1,!1);null!==p&&this.addMatch(r.index,p)}else this.addMatch(r.index,s)}}addMatch(n,r){null===this.matches?this.matches=[n,r]:this.matches.push(n,r)}}function ah(e,n){const r=e.localNames;if(null!==r)for(let s=0;s<r.length;s+=2)if(r[s]===n)return r[s+1];return null}function Qy(e,n,r,s){return-1===r?function S_(e,n){return 11&e.type?Qc(e,n):4&e.type?ni(e,n):null}(n,e):-2===r?function gw(e,n,r){return r===ho?Qc(n,e):r===nh?ni(n,e):r===Cg?Ip(n,e):void 0}(e,n,s):tu(e,e[Gn],r,n)}function Xb(e,n,r,s){const l=n[Lc].queries[s];if(null===l.matches){const p=e.data,A=r.matches,P=[];for(let F=0;null!==A&&F<A.length;F+=2){const re=A[F];P.push(re<0?null:Qy(n,p[re],A[F+1],r.metadata.read))}l.matches=P}return l.matches}function LE(e,n,r,s){const l=e.queries.getByIndex(r),p=l.matches;if(null!==p){const A=Xb(e,n,l,r);for(let P=0;P<p.length;P+=2){const F=p[P];if(F>0)s.push(A[P/2]);else{const re=p[P+1],ge=n[-F];for(let xe=ps;xe<ge.length;xe++){const vt=ge[xe];vt[Ga]===vt[Ti]&&LE(vt[Gn],vt,re,s)}if(null!==ge[hc]){const xe=ge[hc];for(let vt=0;vt<xe.length;vt++){const Vt=xe[vt];LE(Vt[Gn],Vt,re,s)}}}}}return s}function Zb(e,n,r){const s=new mh(!(4&~r));return function S(e,n,r,s){const l=Xc(n);l.push(r),e.firstCreatePass&&h_(e).push(s,l.length-1)}(e,n,s,s.destroy),(n[Lc]??=new Ps).queries.push(new Zc(s))-1}function tI(e,n,r){null===e.queries&&(e.queries=new Il),e.queries.track(new Lf(n,r))}function VE(e,n){return e.queries.getByIndex(n)}function nI(e,n){const r=e[Gn],s=VE(r,n);return s.crossesNgTemplate?LE(r,e,n,[]):Xb(r,e,s,n)}function iI(e,n){bl("NgSignals");const r=function Ht(e){const n=Object.create(Ct);n.value=e;const r=()=>(He(n),n.value);return r[Fe]=n,r}(e),s=r[Fe];return n?.equal&&(s.equal=n.equal),r.set=l=>Mt(s,l),r.update=l=>function ft(e,n){Ft()||$t(),Mt(e,n(e.value))}(s,l),r.asReadonly=sI.bind(r),r}function sI(){const e=this[Fe];if(void 0===e.readonlyFn){const n=()=>this();n[Fe]=e,e.readonlyFn=n}return e.readonlyFn}function BE(e){let n=function _I(e){return Object.getPrototypeOf(e.prototype).constructor}(e.type),r=!0;const s=[e];for(;n;){let l;if(ms(e))l=n.\u0275cmp||n.\u0275dir;else{if(n.\u0275cmp)throw new st(903,!1);l=n.\u0275dir}if(l){if(r){s.push(l);const A=e;A.inputs=Kv(e.inputs),A.inputTransforms=Kv(e.inputTransforms),A.declaredInputs=Kv(e.declaredInputs),A.outputs=Kv(e.outputs);const P=l.hostBindings;P&&Ow(e,P);const F=l.viewQuery,re=l.contentQueries;if(F&&Pw(e,F),re&&Mw(e,re),Dw(e,l),xt(e.outputs,l.outputs),ms(l)&&l.data.animation){const ge=e.data;ge.animation=(ge.animation||[]).concat(l.data.animation)}}const p=l.features;if(p)for(let A=0;A<p.length;A++){const P=p[A];P&&P.ngInherit&&P(e),P===BE&&(r=!1)}}n=Object.getPrototypeOf(n)}!function Rw(e){let n=0,r=null;for(let s=e.length-1;s>=0;s--){const l=e[s];l.hostVars=n+=l.hostVars,l.hostAttrs=_o(l.hostAttrs,r=_o(r,l.hostAttrs))}}(s)}function Dw(e,n){for(const r in n.inputs){if(!n.inputs.hasOwnProperty(r)||e.inputs.hasOwnProperty(r))continue;const s=n.inputs[r];if(void 0!==s&&(e.inputs[r]=s,e.declaredInputs[r]=n.declaredInputs[r],null!==n.inputTransforms)){const l=Array.isArray(s)?s[0]:s;if(!n.inputTransforms.hasOwnProperty(l))continue;e.inputTransforms??={},e.inputTransforms[l]=n.inputTransforms[l]}}}function Kv(e){return e===qs?{}:e===Mi?[]:e}function Pw(e,n){const r=e.viewQuery;e.viewQuery=r?(s,l)=>{n(s,l),r(s,l)}:n}function Mw(e,n){const r=e.contentQueries;e.contentQueries=r?(s,l,p)=>{n(s,l,p),r(s,l,p)}:n}function Ow(e,n){const r=e.hostBindings;e.hostBindings=r?(s,l)=>{n(s,l),r(s,l)}:n}function bI(e){const n=e.inputConfig,r={};for(const s in n)if(n.hasOwnProperty(s)){const l=n[s];Array.isArray(l)&&l[3]&&(r[s]=l[3])}e.inputTransforms=r}class Sg{}class II{}function Vw(e,n){return new jE(e,n??null,[])}class jE extends Sg{constructor(n,r,s){super(),this._parent=r,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Ky(this);const l=Ss(n);this._bootstrapComponents=Yc(l.bootstrap),this._r3Injector=y(n,r,[{provide:Sg,useValue:this},{provide:rf,useValue:this.componentFactoryResolver},...s],qr(n),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(n)}get injector(){return this._r3Injector}destroy(){const n=this._r3Injector;!n.destroyed&&n.destroy(),this.destroyCbs.forEach(r=>r()),this.destroyCbs=null}onDestroy(n){this.destroyCbs.push(n)}}class $E extends II{constructor(n){super(),this.moduleType=n}create(n){return new jE(this.moduleType,n,[])}}class TI extends Sg{constructor(n){super(),this.componentFactoryResolver=new Ky(this),this.instance=null;const r=new $o([...n.providers,{provide:Sg,useValue:this},{provide:rf,useValue:this.componentFactoryResolver}],n.parent||uc(),n.debugName,new Set(["environment"]));this.injector=r,n.runEnvironmentInitializers&&r.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(n){this.injector.onDestroy(n)}}function WE(e,n,r=null){return new TI({providers:e,parent:n,debugName:r,runEnvironmentInitializers:!0}).injector}let R_=(()=>{class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Rr.t(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);const r=this.taskId++;return this.pendingTasks.add(r),r}remove(r){this.pendingTasks.delete(r),0===this.pendingTasks.size&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275fac=function(s){return new(s||e)}}static{this.\u0275prov=vi({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function qv(e){return!!zE(e)&&(Array.isArray(e)||!(e instanceof Map)&&Symbol.iterator in e)}function zE(e){return null!==e&&("function"==typeof e||"object"==typeof e)}function Ff(e,n,r){return e[n]=r}function Jc(e,n,r){return!Object.is(e[n],r)&&(e[n]=r,!0)}function Zy(e){return!(32&~e.flags)}function P_(e,n,r,s,l,p,A,P){const F=En(),re=ii(),ge=e+zr,xe=re.firstCreatePass?function Hw(e,n,r,s,l,p,A,P,F){const re=n.consts,ge=Pf(n,e,4,A||null,sa(re,P));Zn(n,r,ge,sa(re,F)),Kc(n,ge);const xe=ge.tView=Jh(2,ge,s,l,p,n.directiveRegistry,n.pipeRegistry,null,n.schemas,re,null);return null!==n.queries&&(n.queries.template(n,ge),xe.queries=n.queries.embeddedTView(ge)),ge}(ge,re,F,n,r,s,l,p,A):re.data[ge];La(xe,!1);const vt=AI(re,F,xe,e);Xa()&&sg(re,F,vt,xe),No(vt,F);const Vt=Of(vt,F,vt,xe);return F[ge]=Vt,_p(F,Vt),function Ve(e,n,r){return le(e,n,r)}(Vt,xe,F),Fc(xe)&&pp(re,F,xe),null!=A&&mp(F,xe,P),P_}let AI=wI;function wI(e,n,r,s){return Fa(!0),n[jr].createComment("")}function Kw(e,n,r,s){const l=n[bo],p=!l||Aa()||Zy(r)||tp(l,s);if(Fa(p),p)return wI(0,n);const A=l.data[Vh]?.[s]??null;null!==A&&null!==r.tView&&null===r.tView.ssrId&&(r.tView.ssrId=A);const P=y_(l,e,n,r);return xp(l,s,P),gg(Wh(l,s),P)}function eb(e,n,r,s){const l=En();return Jc(l,Ys(),n)&&(ii(),Ac(cs(),l,e,n,r,s)),eb}function V_(e,n,r,s){return Jc(e,Ys(),r)?n+Be(r)+s:Ni}function tE(e,n){return e<<17|n<<2}function Im(e){return e>>17&32767}function tb(e){return 2|e}function Pg(e){return(131068&e)>>2}function nb(e,n){return-131069&e|n<<2}function rb(e){return 1|e}function n0(e,n,r,s){const l=e[r+1],p=null===n;let A=s?Im(l):Pg(l),P=!1;for(;0!==A&&(!1===P||p);){const re=e[A+1];MC(e[A],n)&&(P=!0,e[A+1]=s?rb(re):tb(re)),A=s?Im(re):Pg(re)}P&&(e[r+1]=s?tb(l):rb(l))}function MC(e,n){return null===e||null==n||(Array.isArray(e)?e[1]:e)===n||!(!Array.isArray(e)||"string"!=typeof n)&&ns(e,n)>=0}const Ul={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function r0(e){return e.substring(Ul.key,Ul.keyEnd)}function s0(e,n){const r=Ul.textEnd;return r===n?-1:(n=Ul.keyEnd=function kC(e,n,r){for(;n<r&&e.charCodeAt(n)>32;)n++;return n}(e,Ul.key=n,r),K_(e,n,r))}function K_(e,n,r){for(;n<r&&e.charCodeAt(n)<=32;)n++;return n}function ib(e,n,r){const s=En();return Jc(s,Ys(),n)&&ht(ii(),cs(),s,e,n,s[jr],r,!1),ib}function sb(e,n,r,s,l){const A=l?"class":"style";nf(e,r,n.inputs[A],A,s)}function ob(e,n,r){return sf(e,n,r,!1),ob}function ab(e,n){return sf(e,n,null,!0),ab}function u0(e){!function af(e,n,r,s){const l=ii(),p=pl(2);l.firstUpdatePass&&h0(l,null,p,s);const A=En();if(r!==Ni&&Jc(A,p,r)){const P=l.data[uo()];if(g0(P,s)&&!d0(l,p)){let F=s?P.classesWithoutHost:P.stylesWithoutHost;null!==F&&(r=ai(F,r||"")),sb(l,P,A,r,s)}else!function HC(e,n,r,s,l,p,A,P){l===Ni&&(l=Mi);let F=0,re=0,ge=0<l.length?l[0]:null,xe=0<p.length?p[0]:null;for(;null!==ge||null!==xe;){const vt=F<l.length?l[F+1]:void 0,Vt=re<p.length?p[re+1]:void 0;let Mn,tn=null;ge===xe?(F+=2,re+=2,vt!==Vt&&(tn=xe,Mn=Vt)):null===xe||null!==ge&&ge<xe?(F+=2,tn=ge):(re+=2,tn=xe,Mn=Vt),null!==tn&&p0(e,n,r,s,tn,Mn,A,P),ge=F<l.length?l[F]:null,xe=re<p.length?p[re]:null}}(l,P,A,A[jr],A[p+1],A[p+1]=function WC(e,n,r){if(null==r||""===r)return Mi;const s=[],l=xd(r);if(Array.isArray(l))for(let p=0;p<l.length;p++)e(s,l[p],!0);else if("object"==typeof l)for(const p in l)l.hasOwnProperty(p)&&e(s,p,l[p]);else"string"==typeof l&&n(s,l);return s}(e,n,r),s,p)}}(zC,Uf,e,!0)}function Uf(e,n){for(let r=function xC(e){return function a0(e){Ul.key=0,Ul.keyEnd=0,Ul.value=0,Ul.valueEnd=0,Ul.textEnd=e.length}(e),s0(e,K_(e,0,Ul.textEnd))}(n);r>=0;r=s0(n,r))Ns(e,r0(n),!0)}function sf(e,n,r,s){const l=En(),p=ii(),A=pl(2);p.firstUpdatePass&&h0(p,e,A,s),n!==Ni&&Jc(l,A,n)&&p0(p,p.data[uo()],l,l[jr],e,l[A+1]=function KC(e,n){return null==e||""===e||("string"==typeof n?e+=n:"object"==typeof e&&(e=qr(xd(e)))),e}(n,r),s,A)}function d0(e,n){return n>=e.expandoStartIndex}function h0(e,n,r,s){const l=e.data;if(null===l[r+1]){const p=l[uo()],A=d0(e,r);g0(p,s)&&null===n&&!A&&(n=!1),n=function UC(e,n,r,s){const l=vu(e);let p=s?n.residualClasses:n.residualStyles;if(null===l)0===(s?n.classBindings:n.styleBindings)&&(r=nv(r=cb(null,e,n,r,s),n.attrs,s),p=null);else{const A=n.directiveStylingLast;if(-1===A||e[A]!==l)if(r=cb(l,e,n,r,s),null===p){let F=function BC(e,n,r){const s=r?n.classBindings:n.styleBindings;if(0!==Pg(s))return e[Im(s)]}(e,n,s);void 0!==F&&Array.isArray(F)&&(F=cb(null,e,n,F[1],s),F=nv(F,n.attrs,s),function jC(e,n,r,s){e[Im(r?n.classBindings:n.styleBindings)]=s}(e,n,s,F))}else p=function $C(e,n,r){let s;const l=n.directiveEnd;for(let p=1+n.directiveStylingLast;p<l;p++)s=nv(s,e[p].hostAttrs,r);return nv(s,n.attrs,r)}(e,n,s)}return void 0!==p&&(s?n.residualClasses=p:n.residualStyles=p),r}(l,p,n,s),function RC(e,n,r,s,l,p){let A=p?n.classBindings:n.styleBindings,P=Im(A),F=Pg(A);e[s]=r;let ge,re=!1;if(Array.isArray(r)?(ge=r[1],(null===ge||ns(r,ge)>0)&&(re=!0)):ge=r,l)if(0!==F){const vt=Im(e[P+1]);e[s+1]=tE(vt,P),0!==vt&&(e[vt+1]=nb(e[vt+1],s)),e[P+1]=function SC(e,n){return 131071&e|n<<17}(e[P+1],s)}else e[s+1]=tE(P,0),0!==P&&(e[P+1]=nb(e[P+1],s)),P=s;else e[s+1]=tE(F,0),0===P?P=s:e[F+1]=nb(e[F+1],s),F=s;re&&(e[s+1]=tb(e[s+1])),n0(e,ge,s,!0),n0(e,ge,s,!1),function PC(e,n,r,s,l){const p=l?e.residualClasses:e.residualStyles;null!=p&&"string"==typeof n&&ns(p,n)>=0&&(r[s+1]=rb(r[s+1]))}(n,ge,e,s,p),A=tE(P,F),p?n.classBindings=A:n.styleBindings=A}(l,p,n,r,A,s)}}function cb(e,n,r,s,l){let p=null;const A=r.directiveEnd;let P=r.directiveStylingLast;for(-1===P?P=r.directiveStart:P++;P<A&&(p=n[P],s=nv(s,p.hostAttrs,l),p!==e);)P++;return null!==e&&(r.directiveStylingLast=P),s}function nv(e,n,r){const s=r?1:2;let l=-1;if(null!==n)for(let p=0;p<n.length;p++){const A=n[p];"number"==typeof A?l=A:l===s&&(Array.isArray(e)||(e=void 0===e?[]:["",e]),Ns(e,A,!!r||n[++p]))}return void 0===e?null:e}function zC(e,n,r){const s=String(n);""!==s&&!s.includes(" ")&&Ns(e,s,r)}function p0(e,n,r,s,l,p,A,P){if(!(3&n.type))return;const F=e.data,re=F[P+1],ge=function DC(e){return!(1&~e)}(re)?m0(F,n,r,l,Pg(re),A):void 0;nE(ge)||(nE(p)||function CC(e){return!(2&~e)}(re)&&(p=m0(F,null,r,l,P,A)),function o_(e,n,r,s,l){if(n)l?e.addClass(r,s):e.removeClass(r,s);else{let p=-1===s.indexOf("-")?void 0:lp.DashCase;null==l?e.removeStyle(r,s,p):("string"==typeof l&&l.endsWith("!important")&&(l=l.slice(0,-10),p|=lp.Important),e.setStyle(r,s,l,p))}}(s,A,fu(uo(),r),l,p))}function m0(e,n,r,s,l,p){const A=null===n;let P;for(;l>0;){const F=e[l],re=Array.isArray(F),ge=re?F[1]:F,xe=null===ge;let vt=r[l+1];vt===Ni&&(vt=xe?Mi:void 0);let Vt=xe?ss(vt,s):ge===s?vt:void 0;if(re&&!nE(Vt)&&(Vt=ss(F,s)),nE(Vt)&&(P=Vt,A))return P;const tn=e[l+1];l=A?Im(tn):Pg(tn)}if(null!==n){let F=p?n.residualClasses:n.residualStyles;null!=F&&(P=ss(F,s))}return P}function nE(e){return void 0!==e}function g0(e,n){return!!(e.flags&(n?8:16))}class rS{destroy(n){}updateValue(n,r){}swap(n,r){const s=Math.min(n,r),l=Math.max(n,r),p=this.detach(l);if(l-s>1){const A=this.detach(s);this.attach(s,p),this.attach(l,A)}else this.attach(s,p)}move(n,r){this.attach(r,this.detach(n))}}function lb(e,n,r,s,l){return e===r&&Object.is(n,s)?1:Object.is(l(e,n),l(r,s))?-1:0}function ub(e,n,r,s){return!(void 0===n||!n.has(s)||(e.attach(r,n.get(s)),n.delete(s),0))}function _0(e,n,r,s,l){if(ub(e,n,s,r(s,l)))e.updateValue(s,l);else{const p=e.create(s,l);e.attach(s,p)}}function y0(e,n,r,s){const l=new Set;for(let p=n;p<=r;p++)l.add(s(p,e.at(p)));return l}class v0{constructor(){this.kvMap=new Map,this._vMap=void 0}has(n){return this.kvMap.has(n)}delete(n){if(!this.has(n))return!1;const r=this.kvMap.get(n);return void 0!==this._vMap&&this._vMap.has(r)?(this.kvMap.set(n,this._vMap.get(r)),this._vMap.delete(r)):this.kvMap.delete(n),!0}get(n){return this.kvMap.get(n)}set(n,r){if(this.kvMap.has(n)){let s=this.kvMap.get(n);void 0===this._vMap&&(this._vMap=new Map);const l=this._vMap;for(;l.has(s);)s=l.get(s);l.set(s,r)}else this.kvMap.set(n,r)}forEach(n){for(let[r,s]of this.kvMap)if(n(s,r),void 0!==this._vMap){const l=this._vMap;for(;l.has(s);)s=l.get(s),n(s,r)}}}function E0(e,n,r){bl("NgControlFlow");const s=En(),l=Ys(),p=db(s,zr+e);if(Jc(s,l,n)){const P=Le(null);try{if(fe(p,0),-1!==n){const F=hb(s[Gn],zr+n),re=Ud(p,F.tView.ssrId);ie(p,m(s,F,r,{dehydratedView:re}),0,j(F,re))}}finally{Le(P)}}else{const P=R(p,0);void 0!==P&&(P[Es]=r)}}class sS{constructor(n,r,s){this.lContainer=n,this.$implicit=r,this.$index=s}get $count(){return this.lContainer.length-ps}}function b0(e,n){return n}class aS{constructor(n,r,s){this.hasEmptyBlock=n,this.trackByFn=r,this.liveCollection=s}}function I0(e,n,r,s,l,p,A,P,F,re,ge,xe,vt){bl("NgControlFlow");const Vt=void 0!==F,tn=En(),Mn=P?A.bind(tn[fs][Es]):A,dr=new aS(Vt,Mn);tn[zr+e]=dr,P_(e+1,n,r,s,l,p),Vt&&P_(e+2,F,re,ge,xe,vt)}class cS extends rS{constructor(n,r,s){super(),this.lContainer=n,this.hostLView=r,this.templateTNode=s,this.needsIndexUpdate=!1}get length(){return this.lContainer.length-ps}at(n){return this.getLView(n)[Es].$implicit}attach(n,r){const s=r[bo];this.needsIndexUpdate||=n!==this.length,ie(this.lContainer,r,n,j(this.templateTNode,s))}detach(n){return this.needsIndexUpdate||=n!==this.length-1,function lS(e,n){return up(e,n)}(this.lContainer,n)}create(n,r){const s=Ud(this.lContainer,this.templateTNode.tView.ssrId);return m(this.hostLView,this.templateTNode,new sS(this.lContainer,r,n),{dehydratedView:s})}destroy(n){om(n[Gn],n)}updateValue(n,r){this.getLView(n)[Es].$implicit=r}reset(){this.needsIndexUpdate=!1}updateIndexes(){if(this.needsIndexUpdate)for(let n=0;n<this.length;n++)this.getLView(n)[Es].$index=n}getLView(n){return function uS(e,n){return R(e,n)}(this.lContainer,n)}}function T0(e){const n=Le(null),r=uo();try{const s=En(),l=s[Gn],p=s[r];if(void 0===p.liveCollection){const P=r+1,F=db(s,P),re=hb(l,P);p.liveCollection=new cS(F,s,re)}else p.liveCollection.reset();const A=p.liveCollection;if(function iS(e,n,r){let s,l,p=0,A=e.length-1;if(Array.isArray(n)){let P=n.length-1;for(;p<=A&&p<=P;){const F=e.at(p),re=n[p],ge=lb(p,F,p,re,r);if(0!==ge){ge<0&&e.updateValue(p,re),p++;continue}const xe=e.at(A),vt=n[P],Vt=lb(A,xe,P,vt,r);if(0!==Vt){Vt<0&&e.updateValue(A,vt),A--,P--;continue}const tn=r(p,F),Mn=r(A,xe),dr=r(p,re);if(Object.is(dr,Mn)){const Ar=r(P,vt);Object.is(Ar,tn)?(e.swap(p,A),e.updateValue(A,vt),P--,A--):e.move(A,p),e.updateValue(p,re),p++}else if(s??=new v0,l??=y0(e,p,A,r),ub(e,s,p,dr))e.updateValue(p,re),p++,A++;else if(l.has(dr))s.set(tn,e.detach(p)),A--;else{const Ar=e.create(p,n[p]);e.attach(p,Ar),p++,A++}}for(;p<=P;)_0(e,s,r,p,n[p]),p++}else if(null!=n){const P=n[Symbol.iterator]();let F=P.next();for(;!F.done&&p<=A;){const re=e.at(p),ge=F.value,xe=lb(p,re,p,ge,r);if(0!==xe)xe<0&&e.updateValue(p,ge),p++,F=P.next();else{s??=new v0,l??=y0(e,p,A,r);const vt=r(p,ge);if(ub(e,s,p,vt))e.updateValue(p,ge),p++,A++,F=P.next();else if(l.has(vt)){const Vt=r(p,re);s.set(Vt,e.detach(p)),A--}else e.attach(p,e.create(p,ge)),p++,A++,F=P.next()}}for(;!F.done;)_0(e,s,r,e.length,F.value),F=P.next()}for(;p<=A;)e.destroy(e.detach(A--));s?.forEach(P=>{e.destroy(P)})}(A,e,p.trackByFn),A.updateIndexes(),p.hasEmptyBlock){const P=Ys(),F=0===A.length;if(Jc(s,P,F)){const re=r+2,ge=db(s,re);if(F){const xe=hb(l,re),vt=Ud(ge,xe.tView.ssrId);ie(ge,m(s,xe,void 0,{dehydratedView:vt}),0,j(xe,vt))}else fe(ge,0)}}}finally{Le(n)}}function db(e,n){return e[n]}function hb(e,n){return ll(e,n)}function rE(e,n,r,s){const l=En(),p=ii(),A=zr+e,P=l[jr],F=p.firstCreatePass?function dS(e,n,r,s,l,p){const A=n.consts,F=Pf(n,e,2,s,sa(A,l));return Zn(n,r,F,sa(A,p)),null!==F.attrs&&T_(F,F.attrs,!1),null!==F.mergedAttrs&&T_(F,F.mergedAttrs,!0),null!==n.queries&&n.queries.elementStart(n,F),F}(A,p,l,n,r,s):p.data[A],re=A0(p,l,F,P,n,e);l[A]=re;const ge=Fc(F);return La(F,!0),l_(P,re,F),!Zy(F)&&Xa()&&sg(p,l,re,F),0===function Xl(){return ei.lFrame.elementDepthCount}()&&No(re,l),function Bc(){ei.lFrame.elementDepthCount++}(),ge&&(pp(p,l,F),lg(p,F,l)),null!==s&&mp(l,F),rE}function iE(){let e=Hi();gu()?_u():(e=e.parent,La(e,!1));const n=e;(function Pl(e){return ei.skipHydrationRootTNode===e})(n)&&function id(){ei.skipHydrationRootTNode=null}(),function dl(){ei.lFrame.elementDepthCount--}();const r=ii();return r.firstCreatePass&&(Kc(r,e),al(e)&&r.queries.elementEnd(e)),null!=n.classesWithoutHost&&function dd(e){return!!(8&e.flags)}(n)&&sb(r,n,En(),n.classesWithoutHost,!0),null!=n.stylesWithoutHost&&function xh(e){return!!(16&e.flags)}(n)&&sb(r,n,En(),n.stylesWithoutHost,!1),iE}function fb(e,n,r,s){return rE(e,n,r,s),iE(),fb}let A0=(e,n,r,s,l,p)=>(Fa(!0),Yh(s,l,xl()));function hS(e,n,r,s,l,p){const A=n[bo],P=!A||Aa()||Zy(r)||tp(A,p);if(Fa(P),P)return Yh(s,l,xl());const F=y_(A,e,n,r);return Lm(A,p)&&xp(A,p,F.nextSibling),A&&(Tp(r)||D(F))&&xa(r)&&(function hl(e){ei.skipHydrationRootTNode=e}(r),wy(F)),F}function pb(e,n,r){const s=En(),l=ii(),p=e+zr,A=l.firstCreatePass?function pS(e,n,r,s,l){const p=n.consts,A=sa(p,s),P=Pf(n,e,8,"ng-container",A);return null!==A&&T_(P,A,!0),Zn(n,r,P,sa(p,l)),null!==n.queries&&n.queries.elementStart(n,P),P}(p,l,s,n,r):l.data[p];La(A,!0);const P=w0(l,s,A,e);return s[p]=P,Xa()&&sg(l,s,P,A),No(P,s),Fc(A)&&(pp(l,s,A),lg(l,A,s)),null!=r&&mp(s,A),pb}function mb(){let e=Hi();const n=ii();return gu()?_u():(e=e.parent,La(e,!1)),n.firstCreatePass&&(Kc(n,e),al(e)&&n.queries.elementEnd(e)),mb}function gb(e,n,r){return pb(e,n,r),mb(),gb}let w0=(e,n,r,s)=>(Fa(!0),Jd(n[jr],""));function mS(e,n,r,s){let l;const p=n[bo],A=!p||Aa()||Zy(r);if(Fa(A),A)return Jd(n[jr],"");const P=y_(p,e,n,r),F=function $h(e,n){const r=e.data;let s=r[gf]?.[n]??null;return null===s&&r[yh]?.[n]&&(s=Wh(e,n)),s}(p,s);return xp(p,s,P),l=gg(F,P),l}function C0(){return En()}function _b(e,n,r){const s=En();return Jc(s,Ys(),n)&&ht(ii(),cs(),s,e,n,s[jr],r,!0),_b}function yb(e,n,r){const s=En();if(Jc(s,Ys(),n)){const p=ii(),A=cs();ht(p,A,s,e,n,yp(vu(p.data),A,s),r,!0)}return yb}const Mg=void 0;var yS=["en",[["a","p"],["AM","PM"],Mg],[["AM","PM"],Mg,Mg],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Mg,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Mg,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Mg,"{1} 'at' {0}",Mg],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function _S(e){const r=Math.floor(Math.abs(e)),s=e.toString().replace(/^[^.]*\.?/,"").length;return 1===r&&0===s?1:5}];let G_={};function vb(e){const n=function vS(e){return e.toLowerCase().replace(/_/g,"-")}(e);let r=D0(n);if(r)return r;const s=n.split("-")[0];if(r=D0(s),r)return r;if("en"===s)return yS;throw new st(701,!1)}function S0(e){return vb(e)[q_.PluralCase]}function D0(e){return e in G_||(G_[e]=ar.ng&&ar.ng.common&&ar.ng.common.locales&&ar.ng.common.locales[e]),G_[e]}var q_=function(e){return e[e.LocaleId=0]="LocaleId",e[e.DayPeriodsFormat=1]="DayPeriodsFormat",e[e.DayPeriodsStandalone=2]="DayPeriodsStandalone",e[e.DaysFormat=3]="DaysFormat",e[e.DaysStandalone=4]="DaysStandalone",e[e.MonthsFormat=5]="MonthsFormat",e[e.MonthsStandalone=6]="MonthsStandalone",e[e.Eras=7]="Eras",e[e.FirstDayOfWeek=8]="FirstDayOfWeek",e[e.WeekendRange=9]="WeekendRange",e[e.DateFormat=10]="DateFormat",e[e.TimeFormat=11]="TimeFormat",e[e.DateTimeFormat=12]="DateTimeFormat",e[e.NumberSymbols=13]="NumberSymbols",e[e.NumberFormats=14]="NumberFormats",e[e.CurrencyCode=15]="CurrencyCode",e[e.CurrencySymbol=16]="CurrencySymbol",e[e.CurrencyName=17]="CurrencyName",e[e.Currencies=18]="Currencies",e[e.Directionality=19]="Directionality",e[e.PluralCase=20]="PluralCase",e[e.ExtraData=21]="ExtraData",e}(q_||{});const Q_="en-US";let R0=Q_;function V0(e,n,r){const s=e[jr];switch(r){case Node.COMMENT_NODE:return Jd(s,n);case Node.TEXT_NODE:return tg(s,n);case Node.ELEMENT_NODE:return Yh(s,n,null)}}let ov=(e,n,r,s)=>(Fa(!0),V0(e,r,s));function xS(e,n,r,s){return Fa(!0),V0(e,r,s)}function Ib(e,n,r,s){const l=En(),p=ii(),A=Hi();return Ab(p,l,l[jr],A,e,n,s),Ib}function Tb(e,n){const r=Hi(),s=En(),l=ii();return Ab(l,s,yp(vu(l.data),r,s),r,e,n),Tb}function Ab(e,n,r,s,l,p,A){const P=Fc(s),re=e.firstCreatePass&&h_(e),ge=n[Es],xe=Xc(n);let vt=!0;if(3&s.type||A){const Mn=gs(s,n),dr=A?A(Mn):Mn,Ar=xe.length,Qn=A?js=>A(Ai(js[s.index])):s.index;let Pi=null;if(!A&&P&&(Pi=function mD(e,n,r,s){const l=e.cleanup;if(null!=l)for(let p=0;p<l.length-1;p+=2){const A=l[p];if(A===r&&l[p+1]===s){const P=n[wl],F=l[p+2];return P.length>F?P[F]:null}"string"==typeof A&&(p+=2)}return null}(e,n,l,s.index)),null!==Pi)(Pi.__ngLastListenerFn__||Pi).__ngNextListenerFn__=p,Pi.__ngLastListenerFn__=p,vt=!1;else{p=nT(s,n,ge,p,!1);const js=r.listen(dr,l,p);xe.push(p,js),re&&re.push(l,Qn,Ar,Ar+1)}}else p=nT(s,n,ge,p,!1);const Vt=s.outputs;let tn;if(vt&&null!==Vt&&(tn=Vt[l])){const Mn=tn.length;if(Mn)for(let dr=0;dr<Mn;dr+=2){const Lo=n[tn[dr]][tn[dr+1]].subscribe(p),jl=xe.length;xe.push(p,Lo),re&&re.push(l,s.index,jl,-(jl+1))}}}function tT(e,n,r,s){const l=Le(null);try{return ia(6,n,r),!1!==r(s)}catch(p){return dg(e,p),!1}finally{ia(7,n,r),Le(l)}}function nT(e,n,r,s,l){return function p(A){if(A===Function)return s;xf(e.componentOffset>-1?Ia(e.index,n):n);let F=tT(n,r,s,A),re=p.__ngNextListenerFn__;for(;re;)F=tT(n,r,re,A)&&F,re=re.__ngNextListenerFn__;return l&&!1===F&&A.preventDefault(),F}}function rT(e=1){return function ld(e){return(ei.lFrame.contextLView=function Yl(e,n){for(;e>0;)n=n[kc],e--;return n}(e,ei.lFrame.contextLView))[Es]}(e)}function gD(e,n){let r=null;const s=function Tl(e){const n=e.attrs;if(null!=n){const r=n.indexOf(5);if(!(1&r))return n[r+1]}return null}(e);for(let l=0;l<n.length;l++){const p=n[l];if("*"!==p){if(null===s?Cs(e,p,!0):Xo(s,p))return l}else r=l}return r}function iT(e){const n=En()[fs][Bs];if(!n.projection){const s=n.projection=function Pr(e,n){const r=[];for(let s=0;s<e;s++)r.push(n);return r}(e?e.length:1,null),l=s.slice();let p=n.child;for(;null!==p;){const A=e?gD(p,e):0;null!==A&&(l[A]?l[A].projectionNext=p:s[A]=p,l[A]=p),p=p.next}}}function sT(e,n=0,r){const s=En(),l=ii(),p=Pf(l,zr+e,16,null,r||null);null===p.projection&&(p.projection=n),_u(),(!s[bo]||Aa())&&32&~p.flags&&function Rh(e,n,r){Cy(n[jr],0,n,r,am(e,r,n),ig(r.parent||n[Bs],r,n))}(l,s,p)}function wb(e,n,r){return lE(e,"",n,"",r),wb}function lE(e,n,r,s,l){const p=En(),A=V_(p,n,r,s);return A!==Ni&&ht(ii(),cs(),p,e,A,p[jr],l,!1),lE}function pT(e,n,r,s){!function eI(e,n,r,s){const l=ii();if(l.firstCreatePass){const p=Hi();tI(l,new Vl(n,r,s),p.index),function yw(e,n){const r=e.contentQueries||(e.contentQueries=[]);n!==(r.length?r[r.length-1]:-1)&&r.push(e.queries.length-1,n)}(l,e),!(2&~r)&&(l.staticContentQueries=!0)}return Zb(l,En(),r)}(e,n,r,s)}function mT(e,n,r){!function Jb(e,n,r){const s=ii();return s.firstCreatePass&&(tI(s,new Vl(e,n,r),-1),!(2&~n)&&(s.staticViewQueries=!0)),Zb(s,En(),n)}(e,n,r)}function gT(e){const n=En(),r=ii(),s=Td();ad(s+1);const l=VE(r,s);if(e.dirty&&function ul(e){return!(4&~e[Er])}(n)===!(2&~l.metadata.flags)){if(null===l.matches)e.reset([]);else{const p=nI(n,s);e.reset(p,Ll),e.notifyOnChanges()}return!0}return!1}function _T(){return function FE(e,n){return e[Lc].queries[n].queryList}(En(),Td())}function yT(e){return Ya(function lh(){return ei.lFrame.contextLView}(),zr+e)}function DT(e,n=""){const r=En(),s=ii(),l=e+zr,p=s.firstCreatePass?Pf(s,l,1,n,null):s.data[l],A=RT(s,r,p,n,e);r[l]=A,Xa()&&sg(s,r,A,p),La(p,!1)}let RT=(e,n,r,s,l)=>(Fa(!0),tg(n[jr],s));function PD(e,n,r,s,l){const p=n[bo],A=!p||Aa()||Zy(r)||tp(p,l);return Fa(A),A?tg(n[jr],s):y_(p,e,n,r)}function Cb(e){return uE("",e,""),Cb}function uE(e,n,r){const s=En(),l=V_(s,e,n,r);return l!==Ni&&function th(e,n,r){const s=fu(n,e);!function Ch(e,n,r){e.setValue(n,r)}(e[jr],s,r)}(s,uo(),l),uE}function Sb(e,n,r,s,l){if(e=Te(e),Array.isArray(e))for(let p=0;p<e.length;p++)Sb(e[p],n,r,s,l);else{const p=ii(),A=En(),P=Hi();let F=Ma(e)?e:Te(e.provide);const re=xc(e),ge=1048575&P.providerIndexes,xe=P.directiveStart,vt=P.providerIndexes>>20;if(Ma(e)||!e.multi){const Vt=new qc(re,l,eh),tn=Rb(F,n,l?ge:ge+vt,xe);-1===tn?(Ls(Dr(P,A),p,F),Db(p,e,n.length),n.push(F),P.directiveStart++,P.directiveEnd++,l&&(P.providerIndexes+=1048576),r.push(Vt),A.push(Vt)):(r[tn]=Vt,A[tn]=Vt)}else{const Vt=Rb(F,n,ge+vt,xe),tn=Rb(F,n,ge,ge+vt),dr=tn>=0&&r[tn];if(l&&!dr||!l&&!(Vt>=0&&r[Vt])){Ls(Dr(P,A),p,F);const Ar=function LD(e,n,r,s,l){const p=new qc(e,r,eh);return p.multi=[],p.index=n,p.componentProviders=0,BT(p,l,s&&!r),p}(l?kD:ND,r.length,l,s,re);!l&&dr&&(r[tn].providerFactory=Ar),Db(p,e,n.length,0),n.push(F),P.directiveStart++,P.directiveEnd++,l&&(P.providerIndexes+=1048576),r.push(Ar),A.push(Ar)}else Db(p,e,Vt>-1?Vt:tn,BT(r[l?tn:Vt],re,!l&&s));!l&&s&&dr&&r[tn].componentProviders++}}}function Db(e,n,r,s){const l=Ma(n),p=function cc(e){return!!e.useClass}(n);if(l||p){const F=(p?Te(n.useClass):n).prototype.ngOnDestroy;if(F){const re=e.destroyHooks||(e.destroyHooks=[]);if(!l&&n.multi){const ge=re.indexOf(r);-1===ge?re.push(r,[s,F]):re[ge+1].push(s,F)}else re.push(r,F)}}}function BT(e,n,r){return r&&e.componentProviders++,e.multi.push(n)-1}function Rb(e,n,r,s){for(let l=r;l<s;l++)if(n[l]===e)return l;return-1}function ND(e,n,r,s){return Pb(this.multi,[])}function kD(e,n,r,s){const l=this.multi;let p;if(this.providerFactory){const A=this.providerFactory.componentProviders,P=tu(r,r[Gn],this.providerFactory.index,s);p=P.slice(0,A),Pb(l,p);for(let F=A;F<P.length;F++)p.push(P[F])}else p=[],Pb(l,p);return p}function Pb(e,n){for(let r=0;r<e.length;r++)n.push((0,e[r])());return n}function jT(e,n=[]){return r=>{r.providersResolver=(s,l)=>function xD(e,n,r){const s=ii();if(s.firstCreatePass){const l=ms(e);Sb(r,s.data,s.blueprint,l,!0),Sb(n,s.data,s.blueprint,l,!1)}}(s,l?l(e):e,n)}}let FD=(()=>{class e{constructor(r){this._injector=r,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(r){if(!r.standalone)return null;if(!this.cachedInjectors.has(r)){const s=il(0,r.type),l=s.length>0?WE([s],this._injector,`Standalone[${r.type.name}]`):null;this.cachedInjectors.set(r,l)}return this.cachedInjectors.get(r)}ngOnDestroy(){try{for(const r of this.cachedInjectors.values())null!==r&&r.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=vi({token:e,providedIn:"environment",factory:()=>new e(Wi(Oi))})}}return e})();function $T(e){bl("NgStandalone"),e.getStandaloneInjector=n=>n.get(FD).getOrCreateStandaloneInjector(e)}function zT(e,n,r){const s=as()+e,l=En();return l[s]===Ni?Ff(l,s,r?n.call(r):n()):function Xy(e,n){return e[n]}(l,s)}function HT(e,n,r,s){return KT(En(),as(),e,n,r,s)}function KT(e,n,r,s,l,p){const A=n+r;return Jc(e,A,l)?Ff(e,A+1,p?s.call(p,l):s(l)):function lv(e,n){const r=e[n];return r===Ni?void 0:r}(e,A+1)}function XT(e,n){const r=ii();let s;const l=e+zr;r.firstCreatePass?(s=function qD(e,n){if(n)for(let r=n.length-1;r>=0;r--){const s=n[r];if(e===s.name)return s}}(n,r.pipeRegistry),r.data[l]=s,s.onDestroy&&(r.destroyHooks??=[]).push(l,s.onDestroy)):s=r.data[l];const p=s.factory||(s.factory=ls(s.type)),P=In(eh);try{const F=C(!1),re=p();return C(F),function ED(e,n,r,s){r>=e.data.length&&(e.data[r]=null,e.blueprint[r]=null),n[r]=s}(r,En(),l,re),re}finally{In(P)}}function ZT(e,n,r){const s=e+zr,l=En(),p=Ya(l,s);return function uv(e,n){return e[Gn].data[n].pure}(l,s)?KT(l,as(),n,p.transform,r,p):p.transform(r)}function JT(e,n){return ni(e,n)}class mA{constructor(n){this.full=n;const r=n.split(".");this.major=r[0],this.minor=r[1],this.patch=r.slice(2).join(".")}}const ER=new mA("17.3.12");let gA=(()=>{class e{log(r){console.log(r)}warn(r){console.warn(r)}static{this.\u0275fac=function(s){return new(s||e)}}static{this.\u0275prov=vi({token:e,factory:e.\u0275fac,providedIn:"platform"})}}return e})();const bA=new sn(""),IA=new sn("");let Lb,KR=(()=>{class e{constructor(r,s,l){this._ngZone=r,this.registry=s,this._pendingCount=0,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,Lb||(function GR(e){Lb=e}(l),l.addToWindow(s)),this._watchAngularEvents(),r.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Ko.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let r=this._callbacks.pop();clearTimeout(r.timeoutId),r.doneCb()}});else{let r=this.getPendingTasks();this._callbacks=this._callbacks.filter(s=>!s.updateCb||!s.updateCb(r)||(clearTimeout(s.timeoutId),!1))}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(r=>({source:r.source,creationLocation:r.creationLocation,data:r.data})):[]}addCallback(r,s,l){let p=-1;s&&s>0&&(p=setTimeout(()=>{this._callbacks=this._callbacks.filter(A=>A.timeoutId!==p),r()},s)),this._callbacks.push({doneCb:r,timeoutId:p,updateCb:l})}whenStable(r,s,l){if(l&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(r,s,l),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(r){this.registry.registerApplication(r,this)}unregisterApplication(r){this.registry.unregisterApplication(r)}findProviders(r,s,l){return[]}static{this.\u0275fac=function(s){return new(s||e)(Wi(Ko),Wi(TA),Wi(IA))}}static{this.\u0275prov=vi({token:e,factory:e.\u0275fac})}}return e})(),TA=(()=>{class e{constructor(){this._applications=new Map}registerApplication(r,s){this._applications.set(r,s)}unregisterApplication(r){this._applications.delete(r)}unregisterAllApplications(){this._applications.clear()}getTestability(r){return this._applications.get(r)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(r,s=!0){return Lb?.findTestabilityInTree(this,r,s)??null}static{this.\u0275fac=function(s){return new(s||e)}}static{this.\u0275prov=vi({token:e,factory:e.\u0275fac,providedIn:"platform"})}}return e})();function Fb(e){return!!e&&"function"==typeof e.then}function AA(e){return!!e&&"function"==typeof e.subscribe}const wA=new sn("");let Vb=(()=>{class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,s)=>{this.resolve=r,this.reject=s}),this.appInits=Ur(wA,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const r=[];for(const l of this.appInits){const p=l();if(Fb(p))r.push(p);else if(AA(p)){const A=new Promise((P,F)=>{p.subscribe({complete:P,error:F})});r.push(A)}}const s=()=>{this.done=!0,this.resolve()};Promise.all(r).then(()=>{s()}).catch(l=>{this.reject(l)}),0===r.length&&s(),this.initialized=!0}static{this.\u0275fac=function(s){return new(s||e)}}static{this.\u0275prov=vi({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();const Ub=new sn("");let mE,Tm=(()=>{class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=Ur(Me),this.afterRenderEffectManager=Ur(_m),this.externalTestViews=new Set,this.beforeRender=new fr.B,this.afterTick=new fr.B,this.componentTypes=[],this.components=[],this.isStable=Ur(R_).hasPendingTasks.pipe((0,vr.T)(r=>!r)),this._injector=Ur(Oi)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(r,s){const l=r instanceof yg;if(!this._injector.get(Vb).done)throw!l&&Bo(r),new st(405,!1);let A;A=l?r:this._injector.get(rf).resolveComponentFactory(r),this.componentTypes.push(A.componentType);const P=function qR(e){return e.isBoundToModule}(A)?void 0:this._injector.get(Sg),re=A.create(h.NULL,[],s||A.selector,P),ge=re.location.nativeElement,xe=re.injector.get(bA,null);return xe?.registerApplication(ge),re.onDestroy(()=>{this.detachView(re.hostView),pE(this.components,re),xe?.unregisterApplication(ge)}),this._loadComponent(re),re}tick(){this._tick(!0)}_tick(r){if(this._runningTick)throw new st(101,!1);const s=Le(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(r)}catch(l){this.internalErrorHandler(l)}finally{this.afterTick.next(),this._runningTick=!1,Le(s)}}detectChangesInAttachedViews(r){let s=0;const l=this.afterRenderEffectManager;for(;;){if(s===rr)throw new st(103,!1);if(r){const p=0===s;this.beforeRender.next(p);for(let{_lView:A,notifyErrorHandler:P}of this._views)QR(A,p,P)}if(s++,l.executeInternalCallbacks(),![...this.externalTestViews.keys(),...this._views].some(({_lView:p})=>Bb(p))&&(l.execute(),![...this.externalTestViews.keys(),...this._views].some(({_lView:p})=>Bb(p))))break}}attachView(r){const s=r;this._views.push(s),s.attachToAppRef(this)}detachView(r){const s=r;pE(this._views,s),s.detachFromAppRef()}_loadComponent(r){this.attachView(r.hostView),this.tick(),this.components.push(r);const s=this._injector.get(Ub,[]);[...this._bootstrapListeners,...s].forEach(l=>l(r))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(r=>r()),this._views.slice().forEach(r=>r.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(r){return this._destroyListeners.push(r),()=>pE(this._destroyListeners,r)}destroy(){if(this._destroyed)throw new st(406,!1);const r=this._injector;r.destroy&&!r.destroyed&&r.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(s){return new(s||e)}}static{this.\u0275prov=vi({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function pE(e,n){const r=e.indexOf(n);r>-1&&e.splice(r,1)}function RA(e){mE??=new WeakMap;const n=mE.get(e);if(n)return n;const r=e.isStable.pipe((0,$n.$)(s=>s)).toPromise().then(()=>{});return mE.set(e,r),e.onDestroy(()=>mE?.delete(e)),r}function QR(e,n,r){!n&&!Bb(e)||function YR(e,n,r){let s;r?(s=0,e[Er]|=1024):s=64&e[Er]?0:1,zn(e,n,s)}(e,r,n)}function Bb(e){return Ta(e)}class XR{constructor(n,r){this.ngModuleFactory=n,this.componentFactories=r}}let ZR=(()=>{class e{compileModuleSync(r){return new $E(r)}compileModuleAsync(r){return Promise.resolve(this.compileModuleSync(r))}compileModuleAndAllComponentsSync(r){const s=this.compileModuleSync(r),p=Yc(Ss(r).declarations).reduce((A,P)=>{const F=ri(P);return F&&A.push(new Ep(F)),A},[]);return new XR(s,p)}compileModuleAndAllComponentsAsync(r){return Promise.resolve(this.compileModuleAndAllComponentsSync(r))}clearCache(){}clearCacheFor(r){}getModuleId(r){}static{this.\u0275fac=function(s){return new(s||e)}}static{this.\u0275prov=vi({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),tP=(()=>{class e{constructor(){this.zone=Ur(Ko),this.applicationRef=Ur(Tm)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(s){return new(s||e)}}static{this.\u0275prov=vi({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function MA(e){return[{provide:Ko,useFactory:e},{provide:pa,multi:!0,useFactory:()=>{const n=Ur(tP,{optional:!0});return()=>n.initialize()}},{provide:pa,multi:!0,useFactory:()=>{const n=Ur(iP);return()=>{n.initialize()}}},{provide:Me,useFactory:nP}]}function nP(){const e=Ur(Ko),n=Ur(se);return r=>e.runOutsideAngular(()=>n.handleError(r))}function rP(e){return Po([[],MA(()=>new Ko(function OA(e){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:e?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:e?.runCoalescing??!1}}(e)))])}let iP=(()=>{class e{constructor(){this.subscription=new Jn.yU,this.initialized=!1,this.zone=Ur(Ko),this.pendingTasks=Ur(R_)}initialize(){if(this.initialized)return;this.initialized=!0;let r=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(r=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Ko.assertNotInAngularZone(),queueMicrotask(()=>{null!==r&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(r),r=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Ko.assertInAngularZone(),r??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(s){return new(s||e)}}static{this.\u0275prov=vi({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();const gE=new sn("",{providedIn:"root",factory:()=>Ur(gE,he.Optional|he.SkipSelf)||function sP(){return typeof $localize<"u"&&$localize.locale||Q_}()}),oP=new sn("",{providedIn:"root",factory:()=>"USD"}),jb=new sn("");let Am=null;function dP(){return!1}let VA=(()=>{class e{static{this.__NG_ELEMENT_ID__=hP}}return e})();function hP(e){return function fP(e,n,r){if(xa(e)&&!r){const s=Ia(e.index,n);return new gd(s,s)}return 47&e.type?new gd(n[fs],n):null}(Hi(),En(),!(16&~e))}class $A{constructor(){}supports(n){return qv(n)}create(n){return new yP(n)}}const _P=(e,n)=>n;class yP{constructor(n){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=n||_P}forEachItem(n){let r;for(r=this._itHead;null!==r;r=r._next)n(r)}forEachOperation(n){let r=this._itHead,s=this._removalsHead,l=0,p=null;for(;r||s;){const A=!s||r&&r.currentIndex<zA(s,l,p)?r:s,P=zA(A,l,p),F=A.currentIndex;if(A===s)l--,s=s._nextRemoved;else if(r=r._next,null==A.previousIndex)l++;else{p||(p=[]);const re=P-l,ge=F-l;if(re!=ge){for(let vt=0;vt<re;vt++){const Vt=vt<p.length?p[vt]:p[vt]=0,tn=Vt+vt;ge<=tn&&tn<re&&(p[vt]=Vt+1)}p[A.previousIndex]=ge-re}}P!==F&&n(A,P,F)}}forEachPreviousItem(n){let r;for(r=this._previousItHead;null!==r;r=r._nextPrevious)n(r)}forEachAddedItem(n){let r;for(r=this._additionsHead;null!==r;r=r._nextAdded)n(r)}forEachMovedItem(n){let r;for(r=this._movesHead;null!==r;r=r._nextMoved)n(r)}forEachRemovedItem(n){let r;for(r=this._removalsHead;null!==r;r=r._nextRemoved)n(r)}forEachIdentityChange(n){let r;for(r=this._identityChangesHead;null!==r;r=r._nextIdentityChange)n(r)}diff(n){if(null==n&&(n=[]),!qv(n))throw new st(900,!1);return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let l,p,A,r=this._itHead,s=!1;if(Array.isArray(n)){this.length=n.length;for(let P=0;P<this.length;P++)p=n[P],A=this._trackByFn(P,p),null!==r&&Object.is(r.trackById,A)?(s&&(r=this._verifyReinsertion(r,p,A,P)),Object.is(r.item,p)||this._addIdentityChange(r,p)):(r=this._mismatch(r,p,A,P),s=!0),r=r._next}else l=0,function Ww(e,n){if(Array.isArray(e))for(let r=0;r<e.length;r++)n(e[r]);else{const r=e[Symbol.iterator]();let s;for(;!(s=r.next()).done;)n(s.value)}}(n,P=>{A=this._trackByFn(l,P),null!==r&&Object.is(r.trackById,A)?(s&&(r=this._verifyReinsertion(r,P,A,l)),Object.is(r.item,P)||this._addIdentityChange(r,P)):(r=this._mismatch(r,P,A,l),s=!0),r=r._next,l++}),this.length=l;return this._truncate(r),this.collection=n,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let n;for(n=this._previousItHead=this._itHead;null!==n;n=n._next)n._nextPrevious=n._next;for(n=this._additionsHead;null!==n;n=n._nextAdded)n.previousIndex=n.currentIndex;for(this._additionsHead=this._additionsTail=null,n=this._movesHead;null!==n;n=n._nextMoved)n.previousIndex=n.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(n,r,s,l){let p;return null===n?p=this._itTail:(p=n._prev,this._remove(n)),null!==(n=null===this._unlinkedRecords?null:this._unlinkedRecords.get(s,null))?(Object.is(n.item,r)||this._addIdentityChange(n,r),this._reinsertAfter(n,p,l)):null!==(n=null===this._linkedRecords?null:this._linkedRecords.get(s,l))?(Object.is(n.item,r)||this._addIdentityChange(n,r),this._moveAfter(n,p,l)):n=this._addAfter(new vP(r,s),p,l),n}_verifyReinsertion(n,r,s,l){let p=null===this._unlinkedRecords?null:this._unlinkedRecords.get(s,null);return null!==p?n=this._reinsertAfter(p,n._prev,l):n.currentIndex!=l&&(n.currentIndex=l,this._addToMoves(n,l)),n}_truncate(n){for(;null!==n;){const r=n._next;this._addToRemovals(this._unlink(n)),n=r}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(n,r,s){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(n);const l=n._prevRemoved,p=n._nextRemoved;return null===l?this._removalsHead=p:l._nextRemoved=p,null===p?this._removalsTail=l:p._prevRemoved=l,this._insertAfter(n,r,s),this._addToMoves(n,s),n}_moveAfter(n,r,s){return this._unlink(n),this._insertAfter(n,r,s),this._addToMoves(n,s),n}_addAfter(n,r,s){return this._insertAfter(n,r,s),this._additionsTail=null===this._additionsTail?this._additionsHead=n:this._additionsTail._nextAdded=n,n}_insertAfter(n,r,s){const l=null===r?this._itHead:r._next;return n._next=l,n._prev=r,null===l?this._itTail=n:l._prev=n,null===r?this._itHead=n:r._next=n,null===this._linkedRecords&&(this._linkedRecords=new WA),this._linkedRecords.put(n),n.currentIndex=s,n}_remove(n){return this._addToRemovals(this._unlink(n))}_unlink(n){null!==this._linkedRecords&&this._linkedRecords.remove(n);const r=n._prev,s=n._next;return null===r?this._itHead=s:r._next=s,null===s?this._itTail=r:s._prev=r,n}_addToMoves(n,r){return n.previousIndex===r||(this._movesTail=null===this._movesTail?this._movesHead=n:this._movesTail._nextMoved=n),n}_addToRemovals(n){return null===this._unlinkedRecords&&(this._unlinkedRecords=new WA),this._unlinkedRecords.put(n),n.currentIndex=null,n._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=n,n._prevRemoved=null):(n._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=n),n}_addIdentityChange(n,r){return n.item=r,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=n:this._identityChangesTail._nextIdentityChange=n,n}}class vP{constructor(n,r){this.item=n,this.trackById=r,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class EP{constructor(){this._head=null,this._tail=null}add(n){null===this._head?(this._head=this._tail=n,n._nextDup=null,n._prevDup=null):(this._tail._nextDup=n,n._prevDup=this._tail,n._nextDup=null,this._tail=n)}get(n,r){let s;for(s=this._head;null!==s;s=s._nextDup)if((null===r||r<=s.currentIndex)&&Object.is(s.trackById,n))return s;return null}remove(n){const r=n._prevDup,s=n._nextDup;return null===r?this._head=s:r._nextDup=s,null===s?this._tail=r:s._prevDup=r,null===this._head}}class WA{constructor(){this.map=new Map}put(n){const r=n.trackById;let s=this.map.get(r);s||(s=new EP,this.map.set(r,s)),s.add(n)}get(n,r){const l=this.map.get(n);return l?l.get(n,r):null}remove(n){const r=n.trackById;return this.map.get(r).remove(n)&&this.map.delete(r),n}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function zA(e,n,r){const s=e.previousIndex;if(null===s)return s;let l=0;return r&&s<r.length&&(l=r[s]),s+n+l}class HA{constructor(){}supports(n){return n instanceof Map||zE(n)}create(){return new bP}}class bP{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(n){let r;for(r=this._mapHead;null!==r;r=r._next)n(r)}forEachPreviousItem(n){let r;for(r=this._previousMapHead;null!==r;r=r._nextPrevious)n(r)}forEachChangedItem(n){let r;for(r=this._changesHead;null!==r;r=r._nextChanged)n(r)}forEachAddedItem(n){let r;for(r=this._additionsHead;null!==r;r=r._nextAdded)n(r)}forEachRemovedItem(n){let r;for(r=this._removalsHead;null!==r;r=r._nextRemoved)n(r)}diff(n){if(n){if(!(n instanceof Map||zE(n)))throw new st(900,!1)}else n=new Map;return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let r=this._mapHead;if(this._appendAfter=null,this._forEach(n,(s,l)=>{if(r&&r.key===l)this._maybeAddToChanges(r,s),this._appendAfter=r,r=r._next;else{const p=this._getOrCreateRecordForKey(l,s);r=this._insertBeforeOrAppend(r,p)}}),r){r._prev&&(r._prev._next=null),this._removalsHead=r;for(let s=r;null!==s;s=s._nextRemoved)s===this._mapHead&&(this._mapHead=null),this._records.delete(s.key),s._nextRemoved=s._next,s.previousValue=s.currentValue,s.currentValue=null,s._prev=null,s._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(n,r){if(n){const s=n._prev;return r._next=n,r._prev=s,n._prev=r,s&&(s._next=r),n===this._mapHead&&(this._mapHead=r),this._appendAfter=n,n}return this._appendAfter?(this._appendAfter._next=r,r._prev=this._appendAfter):this._mapHead=r,this._appendAfter=r,null}_getOrCreateRecordForKey(n,r){if(this._records.has(n)){const l=this._records.get(n);this._maybeAddToChanges(l,r);const p=l._prev,A=l._next;return p&&(p._next=A),A&&(A._prev=p),l._next=null,l._prev=null,l}const s=new IP(n);return this._records.set(n,s),s.currentValue=r,this._addToAdditions(s),s}_reset(){if(this.isDirty){let n;for(this._previousMapHead=this._mapHead,n=this._previousMapHead;null!==n;n=n._next)n._nextPrevious=n._next;for(n=this._changesHead;null!==n;n=n._nextChanged)n.previousValue=n.currentValue;for(n=this._additionsHead;null!=n;n=n._nextAdded)n.previousValue=n.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(n,r){Object.is(r,n.currentValue)||(n.previousValue=n.currentValue,n.currentValue=r,this._addToChanges(n))}_addToAdditions(n){null===this._additionsHead?this._additionsHead=this._additionsTail=n:(this._additionsTail._nextAdded=n,this._additionsTail=n)}_addToChanges(n){null===this._changesHead?this._changesHead=this._changesTail=n:(this._changesTail._nextChanged=n,this._changesTail=n)}_forEach(n,r){n instanceof Map?n.forEach(r):Object.keys(n).forEach(s=>r(n[s],s))}}class IP{constructor(n){this.key=n,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function KA(){return new Gb([new $A])}let Gb=(()=>{class e{static{this.\u0275prov=vi({token:e,providedIn:"root",factory:KA})}constructor(r){this.factories=r}static create(r,s){if(null!=s){const l=s.factories.slice();r=r.concat(l)}return new e(r)}static extend(r){return{provide:e,useFactory:s=>e.create(r,s||KA()),deps:[[e,new ha,new qo]]}}find(r){const s=this.factories.find(l=>l.supports(r));if(null!=s)return s;throw new st(901,!1)}}return e})();function GA(){return new qb([new HA])}let qb=(()=>{class e{static{this.\u0275prov=vi({token:e,providedIn:"root",factory:GA})}constructor(r){this.factories=r}static create(r,s){if(s){const l=s.factories.slice();r=r.concat(l)}return new e(r)}static extend(r){return{provide:e,useFactory:s=>e.create(r,s||GA()),deps:[[e,new ha,new qo]]}}find(r){const s=this.factories.find(l=>l.supports(r));if(s)return s;throw new st(901,!1)}}return e})();function UP(e){try{const{rootComponent:n,appProviders:r,platformProviders:s}=e,l=function uP(e=[]){if(Am)return Am;const n=function kA(e=[],n){return h.create({name:n,providers:[{provide:sl,useValue:"platform"},{provide:jb,useValue:new Set([()=>Am=null])},...e]})}(e);return Am=n,function CA(){!function ye(e){an=e}(()=>{throw new st(600,!1)})}(),function LA(e){e.get(qf,null)?.forEach(r=>r())}(n),n}(s),p=[rP(),...r||[]],P=new TI({providers:p,parent:l,debugName:"",runEnvironmentInitializers:!1}).injector,F=P.get(Ko);return F.run(()=>{P.resolveInjectorInitializers();const re=P.get(se,null);let ge;F.runOutsideAngular(()=>{ge=F.onError.subscribe({next:Vt=>{re.handleError(Vt)}})});const xe=()=>P.destroy(),vt=l.get(jb);return vt.add(xe),P.onDestroy(()=>{ge.unsubscribe(),vt.delete(xe)}),function SA(e,n,r){try{const s=r();return Fb(s)?s.catch(l=>{throw n.runOutsideAngular(()=>e.handleError(l)),l}):s}catch(s){throw n.runOutsideAngular(()=>e.handleError(s)),s}}(re,F,()=>{const Vt=P.get(Vb);return Vt.runInitializers(),Vt.donePromise.then(()=>{!function P0(e){"string"==typeof e&&(R0=e.toLowerCase().replace(/_/g,"-"))}(P.get(gE,Q_)||Q_);const Mn=P.get(Tm);return void 0!==n&&Mn.bootstrap(n),Mn})})})}catch(n){return Promise.reject(n)}}let aw=!1,cw=!1;function WP(){return Po([{provide:bf,useFactory:()=>{let e=!0;return Ld()&&(e=!!Ur(Zd,{optional:!0})?.get(Op,null)),e&&bl("NgHydration"),e}},{provide:pa,useValue:()=>{cw=!!Ur(Fl,{optional:!0}),Ld()&&Ur(bf)&&(function HP(){const e=ru();let n;for(const r of e.body.childNodes)if(r.nodeType===Node.COMMENT_NODE&&r.textContent?.trim()===ry){n=r;break}if(!n)throw new st(-507,!1)}(),function jP(){aw||(aw=!0,function sy(){Lg=iy}(),function fS(){A0=hS}(),function MD(){RT=PD}(),function gS(){w0=mS}(),function Gw(){AI=Kw}(),function wo(){Y=Sr,le=bn}(),function DE(){Fy=Rv}(),function I(){o=d}(),function NS(){ov=xS}())}())},multi:!0},{provide:Np,useFactory:()=>Ld()&&Ur(bf)},{provide:Ub,useFactory:()=>{if(Ld()&&Ur(bf)){const e=Ur(Tm);return Ur(h),()=>{(function $P(e,n){return RA(e)})(e).then(()=>{!function wv(e){const n=e._views;for(const r of n){const s=_f(r);null!==s&&null!==s[xi]&&(xo(s)?mg(s):(mg(s[xi]),g_(s)))}}(e)})}}return()=>{}},multi:!0}])}function tM(e){return"boolean"==typeof e?e:null!=e&&"false"!==e}function rM(e,n){bl("NgSignals");const r=function me(e){const n=Object.create(Nt);n.computation=e;const r=()=>{if(tt(n),He(n),n.value===Jt)throw n.error;return n.value};return r[Fe]=n,r}(e);return n?.equal&&(r[Fe].equal=n.equal),r}function iM(e){const n=Le(null);try{return e()}finally{Le(n)}}function uM(e){const n=ri(e);if(!n)return null;const r=new Ep(n);return{get selector(){return r.selector},get type(){return r.componentType},get inputs(){return r.inputs},get outputs(){return r.outputs},get ngContentSelectors(){return r.ngContentSelectors},get isStandalone(){return n.standalone},get isSignal(){return n.signals}}}},9079:(Cn,nt,x)=>{x.d(nt,{ot:()=>Le});var b=x(4438);function Le(Ne,Pe){const K=!Pe?.manualCleanup;K&&!Pe?.injector&&(0,b.Af3)(Le);const Ae=K?Pe?.injector?.get(b.abz)??(0,b.WQX)(b.abz):null;let He;He=(0,b.vPA)(Pe?.requireSync?{kind:0}:{kind:1,value:Pe?.initialValue});const ot=Ne.subscribe({next:tt=>He.set({kind:1,value:tt}),error:tt=>{if(Pe?.rejectErrors)throw tt;He.set({kind:2,error:tt})}});return Ae?.onDestroy(ot.unsubscribe.bind(ot)),(0,b.EWP)(()=>{const tt=He();switch(tt.kind){case 1:return tt.value;case 2:throw tt.error;case 0:throw new b.wOt(601,"`toSignal()` called with `requireSync` but `Observable` did not emit synchronously.")}})}},7440:(Cn,nt,x)=>{x.d(nt,{MW:()=>ot,XU:()=>H,gL:()=>Ee});var b=x(2214),$=x(4438),q=x(3710);class H{constructor(Qe){return Qe}}class Ee{constructor(){return(0,b.Dk)()}}const Ne=new $.nKC("angularfire2._apps"),Pe={provide:H,useFactory:function Le(Ke){return Ke&&1===Ke.length?Ke[0]:new H((0,b.Sx)())},deps:[[new $.Xx1,Ne]]},K={provide:Ee,deps:[[new $.Xx1,Ne]]};function Ae(Ke){return(Qe,ct)=>{const Ze=ct.get($.Agw);(0,b.KO)("angularfire",q.xv.full,"core"),(0,b.KO)("angularfire",q.xv.full,"app"),(0,b.KO)("angular",$.xvI.full,Ze.toString());const Ge=Qe.runOutsideAngular(()=>Ke(ct));return new H(Ge)}}function ot(Ke,...Qe){return(0,$.EmA)([Pe,K,{provide:Ne,useFactory:Ae(Ke),multi:!0,deps:[$.SKi,$.zZn,q.u0,...Qe]}])}},6335:(Cn,nt,x)=>{x.d(nt,{Nj:()=>Ae,DF:()=>He,wh:()=>kt,_q:()=>Et,kQ:()=>Ke});var b=x(3710),$=x(4438),q=x(7440),H=x(2214),Ee=x(9055),Fe=x(1985);function Le(Xr){return new Fe.c(function(pn){return{unsubscribe:(0,Ee.hg)(Xr,pn.next.bind(pn),pn.error.bind(pn),pn.complete.bind(pn))}})}function Ne(Xr){return new Fe.c(function(pn){return{unsubscribe:(0,Ee.iZ)(Xr,pn.next.bind(pn),pn.error.bind(pn),pn.complete.bind(pn))}})}const K="auth";class Ae{constructor(pn){return pn}}class He{constructor(){return(0,b.CA)(K)}}const tt=new $.nKC("angularfire2.auth-instances");function Ft(Xr){return(pn,Te)=>{const ne=pn.runOutsideAngular(()=>Xr(Te));return new Ae(ne)}}const Gt={provide:He,deps:[[new $.Xx1,tt]]},Pt={provide:Ae,useFactory:function Rt(Xr,pn){const Te=(0,b.lR)(K,Xr,pn);return Te&&new Ae(Te)},deps:[[new $.Xx1,tt],q.XU]};function Et(Xr,...pn){return(0,H.KO)("angularfire",b.xv.full,"auth"),(0,$.EmA)([Pt,Gt,{provide:tt,useFactory:Ft(Xr),multi:!0,deps:[$.SKi,$.zZn,b.u0,q.gL,[new $.Xx1,b.Jv],...pn]}])}const kt=(0,b.S3)(Le,!0),Ke=(0,b.S3)(Ne,!0)},5719:(Cn,nt,x)=>{x.d(nt,{DS:()=>At,$z:()=>Ze,UB:()=>me,yy:()=>Qe,ZP:()=>ct,AU:()=>Ge,CP:()=>Ke,gF:()=>ve}),x(7586);var $=x(177),q=x(4438),H=x(3710),Ee=x(9253),Fe=x(1413),Le=x(7673),Ne=x(1985),Pe=x(8455),K=x(7786),Ae=x(941),He=x(5558),ot=x(6354),tt=x(4668),Rt=x(1594),Ft=x(8071);function Gt(Nt,Yt){return(0,Ft.T)(Yt)?(0,He.n)(()=>Nt,Yt):(0,He.n)(()=>Nt)}var Pt=x(6745),hn=x(5964);x(7935);const Ke=new q.nKC("angularfire2.auth.use-emulator"),Qe=new q.nKC("angularfire2.auth.settings"),ct=new q.nKC("angularfire2.auth.tenant-id"),Ze=new q.nKC("angularfire2.auth.langugage-code"),Ge=new q.nKC("angularfire2.auth.use-device-language"),me=new q.nKC("angularfire.auth.persistence"),ve=(Nt,Yt,an,$t,ye,Ye,Ht,et)=>(0,Ee.BM)(`${Nt.name}.auth`,"AngularFireAuth",Nt.name,()=>{const gt=Yt.runOutsideAngular(()=>Nt.auth());if(an&&gt.useEmulator(...an),$t&&(gt.tenantId=$t),gt.languageCode=ye,Ye&&gt.useDeviceLanguage(),Ht)for(const[Mt,ft]of Object.entries(Ht))gt.settings[Mt]=ft;return et&&gt.setPersistence(et),gt},[an,$t,ye,Ye,Ht,et]);let At=(()=>{class Nt{authState;idToken;user;idTokenResult;credential;constructor(an,$t,ye,Ye,Ht,et,gt,Mt,ft,Ct,ln,nr){const hr=new Fe.B,Cr=(0,Le.of)(void 0).pipe((0,Ae.Q)(Ht.outsideAngular),(0,He.n)(()=>Ye.runOutsideAngular(()=>Promise.resolve().then(x.bind(x,7586)))),(0,ot.T)(()=>(0,Ee.iB)(an,Ye,$t)),(0,ot.T)(sr=>ve(sr,Ye,et,Mt,ft,Ct,gt,ln)),(0,tt.t)({bufferSize:1,refCount:!1}));if((0,$.Vy)(ye))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,Le.of)(null);else{Cr.pipe((0,Rt.$)()).subscribe();const sr=Cr.pipe((0,He.n)(Rr=>Rr.getRedirectResult().then(vr=>vr,()=>null)),H.U0,(0,tt.t)({bufferSize:1,refCount:!1})),fr=Cr.pipe((0,He.n)(Rr=>new Ne.c(vr=>({unsubscribe:Ye.runOutsideAngular(()=>Rr.onAuthStateChanged($n=>vr.next($n),$n=>vr.error($n),()=>vr.complete()))})))),Jn=Cr.pipe((0,He.n)(Rr=>new Ne.c(vr=>({unsubscribe:Ye.runOutsideAngular(()=>Rr.onIdTokenChanged($n=>vr.next($n),$n=>vr.error($n),()=>vr.complete()))}))));this.authState=sr.pipe(Gt(fr),(0,Pt._)(Ht.outsideAngular),(0,Ae.Q)(Ht.insideAngular)),this.user=sr.pipe(Gt(Jn),(0,Pt._)(Ht.outsideAngular),(0,Ae.Q)(Ht.insideAngular)),this.idToken=this.user.pipe((0,He.n)(Rr=>Rr?(0,Pe.H)(Rr.getIdToken()):(0,Le.of)(null))),this.idTokenResult=this.user.pipe((0,He.n)(Rr=>Rr?(0,Pe.H)(Rr.getIdTokenResult()):(0,Le.of)(null))),this.credential=(0,K.h)(sr,hr,this.authState.pipe((0,hn.p)(Rr=>!Rr))).pipe((0,ot.T)(Rr=>Rr?.user?Rr:null),(0,Pt._)(Ht.outsideAngular),(0,Ae.Q)(Ht.insideAngular))}return(0,Ee.Gt)(this,Cr,Ye,{spy:{apply:(sr,fr,Jn)=>{(sr.startsWith("signIn")||sr.startsWith("createUser"))&&Jn.then(Rr=>hr.next(Rr))}}})}static \u0275fac=function($t){return new($t||Nt)(q.KVO(Ee.rx),q.KVO(Ee.uP,8),q.KVO(q.Agw),q.KVO(q.SKi),q.KVO(H.u0),q.KVO(Ke,8),q.KVO(Qe,8),q.KVO(ct,8),q.KVO(Ze,8),q.KVO(Ge,8),q.KVO(me,8),q.KVO(H.Jv,8))};static \u0275prov=q.jDH({token:Nt,factory:Nt.\u0275fac,providedIn:"any"})}return Nt})()},9253:(Cn,nt,x)=>{x.d(nt,{BM:()=>tt,Gt:()=>Ee,bf:()=>ot,e7:()=>Fe,iB:()=>K,rx:()=>Ne,uP:()=>Pe});var b=x(4438),$=x(3710),q=x(7935);const H=["ngOnDestroy"],Ee=(Pt,hn,Et,kt={})=>new Proxy(Pt,{get:(Ke,Qe)=>Et.runOutsideAngular(()=>{if(Pt[Qe])return kt?.spy?.get&&kt.spy.get(Qe,Pt[Qe]),Pt[Qe];if(H.indexOf(Qe)>-1)return()=>{};const ct=hn.toPromise().then(Ze=>{const Ge=Ze?.[Qe];return"function"==typeof Ge?Ge.bind(Ze):Ge?.then?Ge.then(me=>Et.run(()=>me)):Et.run(()=>Ge)});return new Proxy(()=>{},{get:(Ze,Ge)=>ct[Ge],apply:(Ze,Ge,me)=>ct.then(ve=>{const At=ve?.(...me);return kt?.spy?.apply&&kt.spy.apply(Qe,me,At),At})})})}),Fe=(Pt,hn)=>{hn.forEach(Et=>{Object.getOwnPropertyNames(Et.prototype||Et).forEach(kt=>{Object.defineProperty(Pt.prototype,kt,Object.getOwnPropertyDescriptor(Et.prototype||Et,kt))})})};class Le{constructor(hn){return hn}}const Ne=new b.nKC("angularfire2.app.options"),Pe=new b.nKC("angularfire2.app.name");function K(Pt,hn,Et){const Ke="object"==typeof Et&&Et||{};Ke.name=Ke.name||"string"==typeof Et&&Et||"[DEFAULT]";const ct=q.A.apps.filter(Ze=>Ze&&Ze.name===Ke.name)[0]||hn.runOutsideAngular(()=>q.A.initializeApp(Pt,Ke));try{if(JSON.stringify(Pt)!==JSON.stringify(ct.options)){const Ze=!!module.hot;Ae("error",`${ct.name} Firebase App already initialized with different options${Ze?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new Le(ct)}const Ae=(Pt,...hn)=>{(0,b.naY)()&&typeof console<"u"&&console[Pt](...hn)},He={provide:Le,useFactory:K,deps:[Ne,b.SKi,[new b.Xx1,Pe]]};let ot=(()=>{class Pt{static initializeApp(Et,kt){return{ngModule:Pt,providers:[{provide:Ne,useValue:Et},{provide:Pe,useValue:kt}]}}constructor(Et){q.A.registerVersion("angularfire",$.xv.full,"core"),q.A.registerVersion("angularfire",$.xv.full,"app-compat"),q.A.registerVersion("angular",b.xvI.full,Et.toString())}static \u0275fac=function(kt){return new(kt||Pt)(b.KVO(b.Agw))};static \u0275mod=b.$C({type:Pt});static \u0275inj=b.G2t({providers:[He]})}return Pt})();function tt(Pt,hn,Et,kt,Ke){const[,Qe,ct]=globalThis.\u0275AngularfireInstanceCache.find(Ze=>Ze[0]===Pt)||[];if(Qe)return function Rt(Pt,hn){try{return Pt.toString()===hn.toString()}catch{return Pt===hn}}(Ke,ct)||(Gt("error",`${hn} was already initialized on the ${Et} Firebase App with different settings.${Ft?" You may need to reload as Firebase is not HMR aware.":""}`),Gt("warn",{is:Ke,was:ct})),Qe;{const Ze=kt();return globalThis.\u0275AngularfireInstanceCache.push([Pt,Ze,Ke]),Ze}}const Ft=typeof module<"u"&&!!module.hot,Gt=(Pt,...hn)=>{(0,b.naY)()&&typeof console<"u"&&console[Pt](...hn)};globalThis.\u0275AngularfireInstanceCache||=[]},9967:(Cn,nt,x)=>{x.d(nt,{_7:()=>Nt,rJ:()=>mn,xs:()=>Cr,hV:()=>ft});var b=x(3710),$=x(4438),q=x(7440),H=x(6335),Ee=x(2214),Fe=x(2784),Le=x(1985),Ne=x(6354),Pe=function(){return Pe=Object.assign||function(Dn){for(var or,gr=1,_r=arguments.length;gr<_r;gr++)for(var xn in or=arguments[gr])Object.prototype.hasOwnProperty.call(or,xn)&&(Dn[xn]=or[xn]);return Dn},Pe.apply(this,arguments)};"function"==typeof SuppressedError&&SuppressedError;var Ae={includeMetadataChanges:!1};function ve(yn,Dn){return void 0===Dn&&(Dn={}),function Ze(yn){return function He(yn,Dn){return void 0===Dn&&(Dn=Ae),new Le.c(function(or){return{unsubscribe:(0,Fe.aQ)(yn,Dn,{next:or.next.bind(or),error:or.error.bind(or),complete:or.complete.bind(or)})}})}(yn,{includeMetadataChanges:!0}).pipe((0,Ne.T)(function(Dn){return Dn.docs}))}(yn).pipe((0,Ne.T)(function(or){return or.map(function(gr){return function Rt(yn,Dn){var or;void 0===Dn&&(Dn={});var gr=yn.data(Dn);return yn.exists()&&"object"==typeof gr&&null!==gr&&Dn.idField?Pe(Pe({},gr),((or={})[Dn.idField]=yn.id,or)):gr}(gr,Dn)})}))}class Nt{constructor(Dn){return Dn}}const Yt="firestore",ye=new $.nKC("angularfire2.firestore-instances");function Ht(yn){return(Dn,or)=>{const gr=Dn.runOutsideAngular(()=>yn(or));return new Nt(gr)}}const et={provide:class an{constructor(){return(0,b.CA)(Yt)}},deps:[[new $.Xx1,ye]]},gt={provide:Nt,useFactory:function Ye(yn,Dn){const or=(0,b.lR)(Yt,yn,Dn);return or&&new Nt(or)},deps:[[new $.Xx1,ye],q.XU]};function ft(yn,...Dn){return(0,Ee.KO)("angularfire",b.xv.full,"fst"),(0,$.EmA)([gt,et,{provide:ye,useFactory:Ht(yn),multi:!0,deps:[$.SKi,$.zZn,b.u0,q.gL,[new $.Xx1,H.DF],[new $.Xx1,b.Jv],...Dn]}])}const Cr=(0,b.S3)(ve,!0),mn=(0,b.S3)(Fe.rJ,!0)},3710:(Cn,nt,x)=>{x.d(nt,{CA:()=>He,Jv:()=>ot,S3:()=>me,U0:()=>ct,cj:()=>K,lR:()=>Ae,u0:()=>Pt,xv:()=>Pe});var b=x(4438),$=x(2214),q=x(7242),H=x(3236),Ee=x(1985),Fe=x(8141),Le=x(6745),Ne=x(941);const Pe=new b.RxE("ANGULARFIRE2_VERSION"),K=ve=>`The APP_INITIALIZER that is "making" isSupported() sync for the sake of convenient DI has not resolved in this\ncontext. Rather than injecting ${ve} in the constructor, first ensure that ${ve} is supported by calling\n\`await isSupported()\`, then retrieve the instance from the injector manually \`injector.get(${ve})\`.`;function Ae(ve,At,Jt){if(At){if(1===At.length)return At[0];const an=At.filter($t=>$t.app===Jt);if(1===an.length)return an[0]}return Jt.container.getProvider(ve).getImmediate({optional:!0})}const He=(ve,At)=>{const Jt=At?[At]:(0,$.Dk)(),Nt=[];return Jt.forEach(Yt=>{Yt.container.getProvider(ve).instances.forEach($t=>{Nt.includes($t)||Nt.push($t)})}),Nt};class ot{constructor(){return He(tt)}}const tt="app-check";function Rt(){}class Ft{zone;delegate;constructor(At,Jt=q.T){this.zone=At,this.delegate=Jt}now(){return this.delegate.now()}schedule(At,Jt,Nt){const Yt=this.zone;return this.delegate.schedule(function($t){Yt.runGuarded(()=>{At.apply(this,[$t])})},Jt,Nt)}}class Gt{zone;task=null;constructor(At){this.zone=At}call(At,Jt){const Nt=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Rt,{},Rt,Rt)),Jt.pipe((0,Fe.M)({next:Nt,complete:Nt,error:Nt})).subscribe(At).add(Nt)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Pt=(()=>{class ve{ngZone;outsideAngular;insideAngular;constructor(Jt){this.ngZone=Jt,this.outsideAngular=Jt.runOutsideAngular(()=>new Ft(Zone.current)),this.insideAngular=Jt.run(()=>new Ft(Zone.current,H.E)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(Nt){return new(Nt||ve)(b.KVO(b.SKi))};static \u0275prov=b.jDH({token:ve,factory:ve.\u0275fac,providedIn:"root"})}return ve})();function hn(){const ve=globalThis.\u0275AngularFireScheduler;if(!ve)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return ve}function kt(ve){return hn().ngZone.run(()=>ve())}function ct(ve){return function Ze(ve){return function(Jt){return(Jt=Jt.lift(new Gt(ve.ngZone))).pipe((0,Le._)(ve.outsideAngular),(0,Ne.Q)(ve.insideAngular))}}(hn())(ve)}const Ge=(ve,At)=>function(){const Nt=arguments;return At&&setTimeout(()=>{"scheduled"===At.state&&At.invoke()},10),kt(()=>ve.apply(void 0,Nt))},me=(ve,At)=>function(){let Jt;const Nt=arguments;for(let an=0;an<arguments.length;an++)"function"==typeof Nt[an]&&(At&&(Jt||=kt(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Rt,{},Rt,Rt))),Nt[an]=Ge(Nt[an],Jt));const Yt=function Et(ve){return hn().ngZone.runOutsideAngular(()=>ve())}(()=>ve.apply(this,Nt));if(!At){if(Yt instanceof Ee.c){const an=hn();return Yt.pipe((0,Le._)(an.outsideAngular),(0,Ne.Q)(an.insideAngular))}return kt(()=>Yt)}return Yt instanceof Ee.c?Yt.pipe(ct):Yt instanceof Promise?kt(()=>new Promise((an,$t)=>Yt.then(ye=>kt(()=>an(ye)),ye=>kt(()=>$t(ye))))):"function"==typeof Yt&&Jt?function(){return setTimeout(()=>{Jt&&"scheduled"===Jt.state&&Jt.invoke()},10),Yt.apply(this,arguments)}:kt(()=>Yt)}},6600:(Cn,nt,x)=>{x.d(nt,{yE:()=>kt,Ej:()=>Xr,pZ:()=>rn});var b=x(4438),$=x(851),q=x(8203),Ee=x(177),Fe=x(6860),Le=x(4085);const Et=new b.nKC("mat-sanity-checks",{providedIn:"root",factory:function hn(){return!0}});let kt=(()=>{class pn{constructor(ne,J,Q){this._sanityChecks=J,this._document=Q,this._hasDoneGlobalChecks=!1,ne._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(ne){return!(0,Fe.v8)()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[ne])}static{this.\u0275fac=function(J){return new(J||pn)(b.KVO($.Q_),b.KVO(Et,8),b.KVO(Ee.qQ))}}static{this.\u0275mod=b.$C({type:pn})}static{this.\u0275inj=b.G2t({imports:[q.jI,q.jI]})}}return pn})();class sr{constructor(Te,ne,J,Q=!1){this._renderer=Te,this.element=ne,this.config=J,this._animationForciblyDisabledThroughCss=Q,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const fr=(0,Fe.BQ)({passive:!0,capture:!0});class Jn{constructor(){this._events=new Map,this._delegateEventHandler=Te=>{const ne=(0,Fe.Fb)(Te);ne&&this._events.get(Te.type)?.forEach((J,Q)=>{(Q===ne||Q.contains(ne))&&J.forEach(oe=>oe.handleEvent(Te))})}}addHandler(Te,ne,J,Q){const oe=this._events.get(ne);if(oe){const ee=oe.get(J);ee?ee.add(Q):oe.set(J,new Set([Q]))}else this._events.set(ne,new Map([[J,new Set([Q])]])),Te.runOutsideAngular(()=>{document.addEventListener(ne,this._delegateEventHandler,fr)})}removeHandler(Te,ne,J){const Q=this._events.get(Te);if(!Q)return;const oe=Q.get(ne);oe&&(oe.delete(J),0===oe.size&&Q.delete(ne),0===Q.size&&(this._events.delete(Te),document.removeEventListener(Te,this._delegateEventHandler,fr)))}}const Rr={enterDuration:225,exitDuration:150},$n=(0,Fe.BQ)({passive:!0,capture:!0}),qn=["mousedown","touchstart"],gi=["mouseup","mouseleave","touchend","touchcancel"];class st{static{this._eventManager=new Jn}constructor(Te,ne,J,Q){this._target=Te,this._ngZone=ne,this._platform=Q,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,Q.isBrowser&&(this._containerElement=(0,Le.i8)(J))}fadeInRipple(Te,ne,J={}){const Q=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),oe={...Rr,...J.animation};J.centered&&(Te=Q.left+Q.width/2,ne=Q.top+Q.height/2);const ee=J.radius||function De(pn,Te,ne){const J=Math.max(Math.abs(pn-ne.left),Math.abs(pn-ne.right)),Q=Math.max(Math.abs(Te-ne.top),Math.abs(Te-ne.bottom));return Math.sqrt(J*J+Q*Q)}(Te,ne,Q),pe=Te-Q.left,Oe=ne-Q.top,Tt=oe.enterDuration,lt=document.createElement("div");lt.classList.add("mat-ripple-element"),lt.style.left=pe-ee+"px",lt.style.top=Oe-ee+"px",lt.style.height=2*ee+"px",lt.style.width=2*ee+"px",null!=J.color&&(lt.style.backgroundColor=J.color),lt.style.transitionDuration=`${Tt}ms`,this._containerElement.appendChild(lt);const On=window.getComputedStyle(lt),wi=On.transitionDuration,bi="none"===On.transitionProperty||"0s"===wi||"0s, 0s"===wi||0===Q.width&&0===Q.height,Lr=new sr(this,lt,J,bi);lt.style.transform="scale3d(1, 1, 1)",Lr.state=0,J.persistent||(this._mostRecentTransientRipple=Lr);let hi=null;return!bi&&(Tt||oe.exitDuration)&&this._ngZone.runOutsideAngular(()=>{const er=()=>this._finishRippleTransition(Lr),rs=()=>this._destroyRipple(Lr);lt.addEventListener("transitionend",er),lt.addEventListener("transitioncancel",rs),hi={onTransitionEnd:er,onTransitionCancel:rs}}),this._activeRipples.set(Lr,hi),(bi||!Tt)&&this._finishRippleTransition(Lr),Lr}fadeOutRipple(Te){if(2===Te.state||3===Te.state)return;const ne=Te.element,J={...Rr,...Te.config.animation};ne.style.transitionDuration=`${J.exitDuration}ms`,ne.style.opacity="0",Te.state=2,(Te._animationForciblyDisabledThroughCss||!J.exitDuration)&&this._finishRippleTransition(Te)}fadeOutAll(){this._getActiveRipples().forEach(Te=>Te.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(Te=>{Te.config.persistent||Te.fadeOut()})}setupTriggerEvents(Te){const ne=(0,Le.i8)(Te);!this._platform.isBrowser||!ne||ne===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=ne,qn.forEach(J=>{st._eventManager.addHandler(this._ngZone,J,ne,this)}))}handleEvent(Te){"mousedown"===Te.type?this._onMousedown(Te):"touchstart"===Te.type?this._onTouchStart(Te):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{gi.forEach(ne=>{this._triggerElement.addEventListener(ne,this,$n)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(Te){0===Te.state?this._startFadeOutTransition(Te):2===Te.state&&this._destroyRipple(Te)}_startFadeOutTransition(Te){const ne=Te===this._mostRecentTransientRipple,{persistent:J}=Te.config;Te.state=1,!J&&(!ne||!this._isPointerDown)&&Te.fadeOut()}_destroyRipple(Te){const ne=this._activeRipples.get(Te)??null;this._activeRipples.delete(Te),this._activeRipples.size||(this._containerRect=null),Te===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),Te.state=3,null!==ne&&(Te.element.removeEventListener("transitionend",ne.onTransitionEnd),Te.element.removeEventListener("transitioncancel",ne.onTransitionCancel)),Te.element.remove()}_onMousedown(Te){const ne=(0,$._G)(Te),J=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!ne&&!J&&(this._isPointerDown=!0,this.fadeInRipple(Te.clientX,Te.clientY,this._target.rippleConfig))}_onTouchStart(Te){if(!this._target.rippleDisabled&&!(0,$.w6)(Te)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const ne=Te.changedTouches;if(ne)for(let J=0;J<ne.length;J++)this.fadeInRipple(ne[J].clientX,ne[J].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(Te=>{!Te.config.persistent&&(1===Te.state||Te.config.terminateOnPointerUp&&0===Te.state)&&Te.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){const Te=this._triggerElement;Te&&(qn.forEach(ne=>st._eventManager.removeHandler(ne,Te,this)),this._pointerUpEventsRegistered&&gi.forEach(ne=>Te.removeEventListener(ne,this,$n)))}}const Xe=new b.nKC("mat-ripple-global-options");let je=(()=>{class pn{get disabled(){return this._disabled}set disabled(ne){ne&&this.fadeOutAllNonPersistent(),this._disabled=ne,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(ne){this._trigger=ne,this._setupTriggerEventsIfEnabled()}constructor(ne,J,Q,oe,ee){this._elementRef=ne,this._animationMode=ee,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=oe||{},this._rippleRenderer=new st(this,J,ne,Q)}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:{...this._globalOptions.animation,..."NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{},...this.animation},terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(ne,J=0,Q){return"number"==typeof ne?this._rippleRenderer.fadeInRipple(ne,J,{...this.rippleConfig,...Q}):this._rippleRenderer.fadeInRipple(0,0,{...this.rippleConfig,...ne})}static{this.\u0275fac=function(J){return new(J||pn)(b.rXU(b.aKT),b.rXU(b.SKi),b.rXU(Fe.OD),b.rXU(Xe,8),b.rXU(b.bc$,8))}}static{this.\u0275dir=b.FsC({type:pn,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(J,Q){2&J&&b.AVh("mat-ripple-unbounded",Q.unbounded)},inputs:{color:[b.Mj6.None,"matRippleColor","color"],unbounded:[b.Mj6.None,"matRippleUnbounded","unbounded"],centered:[b.Mj6.None,"matRippleCentered","centered"],radius:[b.Mj6.None,"matRippleRadius","radius"],animation:[b.Mj6.None,"matRippleAnimation","animation"],disabled:[b.Mj6.None,"matRippleDisabled","disabled"],trigger:[b.Mj6.None,"matRippleTrigger","trigger"]},exportAs:["matRipple"]})}}return pn})(),rn=(()=>{class pn{static{this.\u0275fac=function(J){return new(J||pn)}}static{this.\u0275mod=b.$C({type:pn})}static{this.\u0275inj=b.G2t({imports:[kt,kt]})}}return pn})();const Yr={capture:!0},Nr=["focus","click","mouseenter","touchstart"],xt="mat-ripple-loader-uninitialized",qr="mat-ripple-loader-class-name",ai="mat-ripple-loader-centered",yi="mat-ripple-loader-disabled";let Xr=(()=>{class pn{constructor(){this._document=(0,b.WQX)(Ee.qQ,{optional:!0}),this._animationMode=(0,b.WQX)(b.bc$,{optional:!0}),this._globalRippleOptions=(0,b.WQX)(Xe,{optional:!0}),this._platform=(0,b.WQX)(Fe.OD),this._ngZone=(0,b.WQX)(b.SKi),this._hosts=new Map,this._onInteraction=ne=>{if(!(ne.target instanceof HTMLElement))return;const Q=ne.target.closest(`[${xt}]`);Q&&this._createRipple(Q)},this._ngZone.runOutsideAngular(()=>{for(const ne of Nr)this._document?.addEventListener(ne,this._onInteraction,Yr)})}ngOnDestroy(){const ne=this._hosts.keys();for(const J of ne)this.destroyRipple(J);for(const J of Nr)this._document?.removeEventListener(J,this._onInteraction,Yr)}configureRipple(ne,J){ne.setAttribute(xt,""),(J.className||!ne.hasAttribute(qr))&&ne.setAttribute(qr,J.className||""),J.centered&&ne.setAttribute(ai,""),J.disabled&&ne.setAttribute(yi,"")}getRipple(ne){return this._hosts.get(ne)||this._createRipple(ne)}setDisabled(ne,J){const Q=this._hosts.get(ne);Q?Q.disabled=J:J?ne.setAttribute(yi,""):ne.removeAttribute(yi)}_createRipple(ne){if(!this._document)return;const J=this._hosts.get(ne);if(J)return J;ne.querySelector(".mat-ripple")?.remove();const Q=this._document.createElement("span");Q.classList.add("mat-ripple",ne.getAttribute(qr)),ne.append(Q);const oe=new je(new b.aKT(Q),this._ngZone,this._platform,this._globalRippleOptions?this._globalRippleOptions:void 0,this._animationMode?this._animationMode:void 0);return oe._isInitialized=!0,oe.trigger=ne,oe.centered=ne.hasAttribute(ai),oe.disabled=ne.hasAttribute(yi),this.attachRipple(ne,oe),oe}attachRipple(ne,J){ne.removeAttribute(xt),this._hosts.set(ne,J)}destroyRipple(ne){const J=this._hosts.get(ne);J&&(J.ngOnDestroy(),this._hosts.delete(ne))}static{this.\u0275fac=function(J){return new(J||pn)}}static{this.\u0275prov=b.jDH({token:pn,factory:pn.\u0275fac,providedIn:"root"})}}return pn})()},345:(Cn,nt,x)=>{x.d(nt,{$x:()=>ai,B7:()=>Ge,B8:()=>gt,hE:()=>gi,up:()=>yr});var b=x(4438),$=x(177),q=x(1626);class H extends $.VF{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Ee extends H{static makeCurrent(){(0,$.ZD)(new Ee)}onAndCancel(ne,J,Q){return ne.addEventListener(J,Q),()=>{ne.removeEventListener(J,Q)}}dispatchEvent(ne,J){ne.dispatchEvent(J)}remove(ne){ne.parentNode&&ne.parentNode.removeChild(ne)}createElement(ne,J){return(J=J||this.getDefaultDocument()).createElement(ne)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(ne){return ne.nodeType===Node.ELEMENT_NODE}isShadowRoot(ne){return ne instanceof DocumentFragment}getGlobalEventTarget(ne,J){return"window"===J?window:"document"===J?ne:"body"===J?ne.body:null}getBaseHref(ne){const J=function Le(){return Fe=Fe||document.querySelector("base"),Fe?Fe.getAttribute("href"):null}();return null==J?null:function Ne(Te){return new URL(Te,document.baseURI).pathname}(J)}resetBaseElement(){Fe=null}getUserAgent(){return window.navigator.userAgent}getCookie(ne){return(0,$._b)(document.cookie,ne)}}let Fe=null,K=(()=>{class Te{build(){return new XMLHttpRequest}static{this.\u0275fac=function(Q){return new(Q||Te)}}static{this.\u0275prov=b.jDH({token:Te,factory:Te.\u0275fac})}}return Te})();const Ae=new b.nKC("");let He=(()=>{class Te{constructor(J,Q){this._zone=Q,this._eventNameToPlugin=new Map,J.forEach(oe=>{oe.manager=this}),this._plugins=J.slice().reverse()}addEventListener(J,Q,oe){return this._findPluginFor(Q).addEventListener(J,Q,oe)}getZone(){return this._zone}_findPluginFor(J){let Q=this._eventNameToPlugin.get(J);if(Q)return Q;if(Q=this._plugins.find(ee=>ee.supports(J)),!Q)throw new b.wOt(5101,!1);return this._eventNameToPlugin.set(J,Q),Q}static{this.\u0275fac=function(Q){return new(Q||Te)(b.KVO(Ae),b.KVO(b.SKi))}}static{this.\u0275prov=b.jDH({token:Te,factory:Te.\u0275fac})}}return Te})();class ot{constructor(ne){this._doc=ne}}const tt="ng-app-id";let Rt=(()=>{class Te{constructor(J,Q,oe,ee={}){this.doc=J,this.appId=Q,this.nonce=oe,this.platformId=ee,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=(0,$.Vy)(ee),this.resetHostNodes()}addStyles(J){for(const Q of J)1===this.changeUsageCount(Q,1)&&this.onStyleAdded(Q)}removeStyles(J){for(const Q of J)this.changeUsageCount(Q,-1)<=0&&this.onStyleRemoved(Q)}ngOnDestroy(){const J=this.styleNodesInDOM;J&&(J.forEach(Q=>Q.remove()),J.clear());for(const Q of this.getAllStyles())this.onStyleRemoved(Q);this.resetHostNodes()}addHost(J){this.hostNodes.add(J);for(const Q of this.getAllStyles())this.addStyleToHost(J,Q)}removeHost(J){this.hostNodes.delete(J)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(J){for(const Q of this.hostNodes)this.addStyleToHost(Q,J)}onStyleRemoved(J){const Q=this.styleRef;Q.get(J)?.elements?.forEach(oe=>oe.remove()),Q.delete(J)}collectServerRenderedStyles(){const J=this.doc.head?.querySelectorAll(`style[${tt}="${this.appId}"]`);if(J?.length){const Q=new Map;return J.forEach(oe=>{null!=oe.textContent&&Q.set(oe.textContent,oe)}),Q}return null}changeUsageCount(J,Q){const oe=this.styleRef;if(oe.has(J)){const ee=oe.get(J);return ee.usage+=Q,ee.usage}return oe.set(J,{usage:Q,elements:[]}),Q}getStyleElement(J,Q){const oe=this.styleNodesInDOM,ee=oe?.get(Q);if(ee?.parentNode===J)return oe.delete(Q),ee.removeAttribute(tt),ee;{const pe=this.doc.createElement("style");return this.nonce&&pe.setAttribute("nonce",this.nonce),pe.textContent=Q,this.platformIsServer&&pe.setAttribute(tt,this.appId),J.appendChild(pe),pe}}addStyleToHost(J,Q){const oe=this.getStyleElement(J,Q),ee=this.styleRef,pe=ee.get(Q)?.elements;pe?pe.push(oe):ee.set(Q,{elements:[oe],usage:1})}resetHostNodes(){const J=this.hostNodes;J.clear(),J.add(this.doc.head)}static{this.\u0275fac=function(Q){return new(Q||Te)(b.KVO($.qQ),b.KVO(b.sZ2),b.KVO(b.BIS,8),b.KVO(b.Agw))}}static{this.\u0275prov=b.jDH({token:Te,factory:Te.\u0275fac})}}return Te})();const Ft={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Gt=/%COMP%/g,Ke=new b.nKC("",{providedIn:"root",factory:()=>!0});function Ze(Te,ne){return ne.map(J=>J.replace(Gt,Te))}let Ge=(()=>{class Te{constructor(J,Q,oe,ee,pe,Oe,Tt,lt=null){this.eventManager=J,this.sharedStylesHost=Q,this.appId=oe,this.removeStylesOnCompDestroy=ee,this.doc=pe,this.platformId=Oe,this.ngZone=Tt,this.nonce=lt,this.rendererByCompId=new Map,this.platformIsServer=(0,$.Vy)(Oe),this.defaultRenderer=new me(J,pe,Tt,this.platformIsServer)}createRenderer(J,Q){if(!J||!Q)return this.defaultRenderer;this.platformIsServer&&Q.encapsulation===b.gXe.ShadowDom&&(Q={...Q,encapsulation:b.gXe.Emulated});const oe=this.getOrCreateRenderer(J,Q);return oe instanceof an?oe.applyToHost(J):oe instanceof Yt&&oe.applyStyles(),oe}getOrCreateRenderer(J,Q){const oe=this.rendererByCompId;let ee=oe.get(Q.id);if(!ee){const pe=this.doc,Oe=this.ngZone,Tt=this.eventManager,lt=this.sharedStylesHost,On=this.removeStylesOnCompDestroy,Yn=this.platformIsServer;switch(Q.encapsulation){case b.gXe.Emulated:ee=new an(Tt,lt,Q,this.appId,On,pe,Oe,Yn);break;case b.gXe.ShadowDom:return new Nt(Tt,lt,J,Q,pe,Oe,this.nonce,Yn);default:ee=new Yt(Tt,lt,Q,On,pe,Oe,Yn)}oe.set(Q.id,ee)}return ee}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(Q){return new(Q||Te)(b.KVO(He),b.KVO(Rt),b.KVO(b.sZ2),b.KVO(Ke),b.KVO($.qQ),b.KVO(b.Agw),b.KVO(b.SKi),b.KVO(b.BIS))}}static{this.\u0275prov=b.jDH({token:Te,factory:Te.\u0275fac})}}return Te})();class me{constructor(ne,J,Q,oe){this.eventManager=ne,this.doc=J,this.ngZone=Q,this.platformIsServer=oe,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(ne,J){return J?this.doc.createElementNS(Ft[J]||J,ne):this.doc.createElement(ne)}createComment(ne){return this.doc.createComment(ne)}createText(ne){return this.doc.createTextNode(ne)}appendChild(ne,J){(Jt(ne)?ne.content:ne).appendChild(J)}insertBefore(ne,J,Q){ne&&(Jt(ne)?ne.content:ne).insertBefore(J,Q)}removeChild(ne,J){ne&&ne.removeChild(J)}selectRootElement(ne,J){let Q="string"==typeof ne?this.doc.querySelector(ne):ne;if(!Q)throw new b.wOt(-5104,!1);return J||(Q.textContent=""),Q}parentNode(ne){return ne.parentNode}nextSibling(ne){return ne.nextSibling}setAttribute(ne,J,Q,oe){if(oe){J=oe+":"+J;const ee=Ft[oe];ee?ne.setAttributeNS(ee,J,Q):ne.setAttribute(J,Q)}else ne.setAttribute(J,Q)}removeAttribute(ne,J,Q){if(Q){const oe=Ft[Q];oe?ne.removeAttributeNS(oe,J):ne.removeAttribute(`${Q}:${J}`)}else ne.removeAttribute(J)}addClass(ne,J){ne.classList.add(J)}removeClass(ne,J){ne.classList.remove(J)}setStyle(ne,J,Q,oe){oe&(b.czy.DashCase|b.czy.Important)?ne.style.setProperty(J,Q,oe&b.czy.Important?"important":""):ne.style[J]=Q}removeStyle(ne,J,Q){Q&b.czy.DashCase?ne.style.removeProperty(J):ne.style[J]=""}setProperty(ne,J,Q){null!=ne&&(ne[J]=Q)}setValue(ne,J){ne.nodeValue=J}listen(ne,J,Q){if("string"==typeof ne&&!(ne=(0,$.QT)().getGlobalEventTarget(this.doc,ne)))throw new Error(`Unsupported event target ${ne} for event ${J}`);return this.eventManager.addEventListener(ne,J,this.decoratePreventDefault(Q))}decoratePreventDefault(ne){return J=>{if("__ngUnwrap__"===J)return ne;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>ne(J)):ne(J))&&J.preventDefault()}}}function Jt(Te){return"TEMPLATE"===Te.tagName&&void 0!==Te.content}class Nt extends me{constructor(ne,J,Q,oe,ee,pe,Oe,Tt){super(ne,ee,pe,Tt),this.sharedStylesHost=J,this.hostEl=Q,this.shadowRoot=Q.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const lt=Ze(oe.id,oe.styles);for(const On of lt){const Yn=document.createElement("style");Oe&&Yn.setAttribute("nonce",Oe),Yn.textContent=On,this.shadowRoot.appendChild(Yn)}}nodeOrShadowRoot(ne){return ne===this.hostEl?this.shadowRoot:ne}appendChild(ne,J){return super.appendChild(this.nodeOrShadowRoot(ne),J)}insertBefore(ne,J,Q){return super.insertBefore(this.nodeOrShadowRoot(ne),J,Q)}removeChild(ne,J){return super.removeChild(this.nodeOrShadowRoot(ne),J)}parentNode(ne){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(ne)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class Yt extends me{constructor(ne,J,Q,oe,ee,pe,Oe,Tt){super(ne,ee,pe,Oe),this.sharedStylesHost=J,this.removeStylesOnCompDestroy=oe,this.styles=Tt?Ze(Tt,Q.styles):Q.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class an extends Yt{constructor(ne,J,Q,oe,ee,pe,Oe,Tt){const lt=oe+"-"+Q.id;super(ne,J,Q,ee,pe,Oe,Tt,lt),this.contentAttr=function Qe(Te){return"_ngcontent-%COMP%".replace(Gt,Te)}(lt),this.hostAttr=function ct(Te){return"_nghost-%COMP%".replace(Gt,Te)}(lt)}applyToHost(ne){this.applyStyles(),this.setAttribute(ne,this.hostAttr,"")}createElement(ne,J){const Q=super.createElement(ne,J);return super.setAttribute(Q,this.contentAttr,""),Q}}let $t=(()=>{class Te extends ot{constructor(J){super(J)}supports(J){return!0}addEventListener(J,Q,oe){return J.addEventListener(Q,oe,!1),()=>this.removeEventListener(J,Q,oe)}removeEventListener(J,Q,oe){return J.removeEventListener(Q,oe)}static{this.\u0275fac=function(Q){return new(Q||Te)(b.KVO($.qQ))}}static{this.\u0275prov=b.jDH({token:Te,factory:Te.\u0275fac})}}return Te})();const ye=["alt","control","meta","shift"],Ye={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Ht={alt:Te=>Te.altKey,control:Te=>Te.ctrlKey,meta:Te=>Te.metaKey,shift:Te=>Te.shiftKey};let et=(()=>{class Te extends ot{constructor(J){super(J)}supports(J){return null!=Te.parseEventName(J)}addEventListener(J,Q,oe){const ee=Te.parseEventName(Q),pe=Te.eventCallback(ee.fullKey,oe,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,$.QT)().onAndCancel(J,ee.domEventName,pe))}static parseEventName(J){const Q=J.toLowerCase().split("."),oe=Q.shift();if(0===Q.length||"keydown"!==oe&&"keyup"!==oe)return null;const ee=Te._normalizeKey(Q.pop());let pe="",Oe=Q.indexOf("code");if(Oe>-1&&(Q.splice(Oe,1),pe="code."),ye.forEach(lt=>{const On=Q.indexOf(lt);On>-1&&(Q.splice(On,1),pe+=lt+".")}),pe+=ee,0!=Q.length||0===ee.length)return null;const Tt={};return Tt.domEventName=oe,Tt.fullKey=pe,Tt}static matchEventFullKeyCode(J,Q){let oe=Ye[J.key]||J.key,ee="";return Q.indexOf("code.")>-1&&(oe=J.code,ee="code."),!(null==oe||!oe)&&(oe=oe.toLowerCase()," "===oe?oe="space":"."===oe&&(oe="dot"),ye.forEach(pe=>{pe!==oe&&(0,Ht[pe])(J)&&(ee+=pe+".")}),ee+=oe,ee===Q)}static eventCallback(J,Q,oe){return ee=>{Te.matchEventFullKeyCode(ee,J)&&oe.runGuarded(()=>Q(ee))}}static _normalizeKey(J){return"esc"===J?"escape":J}static{this.\u0275fac=function(Q){return new(Q||Te)(b.KVO($.qQ))}}static{this.\u0275prov=b.jDH({token:Te,factory:Te.\u0275fac})}}return Te})();function gt(Te,ne){return(0,b.TL3)({rootComponent:Te,...ft(ne)})}function ft(Te){return{appProviders:[...Rr,...Te?.providers??[]],platformProviders:Cr}}const Cr=[{provide:b.Agw,useValue:$.AJ},{provide:b.PLl,useValue:function ln(){Ee.makeCurrent()},multi:!0},{provide:$.qQ,useFactory:function hr(){return(0,b.TL$)(document),document},deps:[]}],Rr=[{provide:b.H8p,useValue:"root"},{provide:b.zcH,useFactory:function nr(){return new b.zcH},deps:[]},{provide:Ae,useClass:$t,multi:!0,deps:[$.qQ,b.SKi,b.Agw]},{provide:Ae,useClass:et,multi:!0,deps:[$.qQ]},Ge,Rt,He,{provide:b._9s,useExisting:Ge},{provide:$.N0,useClass:K,deps:[]},[]];let gi=(()=>{class Te{constructor(J){this._doc=J}getTitle(){return this._doc.title}setTitle(J){this._doc.title=J||""}static{this.\u0275fac=function(Q){return new(Q||Te)(b.KVO($.qQ))}}static{this.\u0275prov=b.jDH({token:Te,factory:Te.\u0275fac,providedIn:"root"})}}return Te})(),yr=(()=>{class Te{static{this.\u0275fac=function(Q){return new(Q||Te)}}static{this.\u0275prov=b.jDH({token:Te,factory:function(Q){let oe=null;return oe=Q?new(Q||Te):b.KVO(ar),oe},providedIn:"root"})}}return Te})(),ar=(()=>{class Te extends yr{constructor(J){super(),this._doc=J}sanitize(J,Q){if(null==Q)return null;switch(J){case b.WPN.NONE:return Q;case b.WPN.HTML:return(0,b.ZF7)(Q,"HTML")?(0,b.rcV)(Q):(0,b.h9k)(this._doc,String(Q)).toString();case b.WPN.STYLE:return(0,b.ZF7)(Q,"Style")?(0,b.rcV)(Q):Q;case b.WPN.SCRIPT:if((0,b.ZF7)(Q,"Script"))return(0,b.rcV)(Q);throw new b.wOt(5200,!1);case b.WPN.URL:return(0,b.ZF7)(Q,"URL")?(0,b.rcV)(Q):(0,b.$MX)(String(Q));case b.WPN.RESOURCE_URL:if((0,b.ZF7)(Q,"ResourceURL"))return(0,b.rcV)(Q);throw new b.wOt(5201,!1);default:throw new b.wOt(5202,!1)}}bypassSecurityTrustHtml(J){return(0,b.Kcf)(J)}bypassSecurityTrustStyle(J){return(0,b.cWb)(J)}bypassSecurityTrustScript(J){return(0,b.UyX)(J)}bypassSecurityTrustUrl(J){return(0,b.osQ)(J)}bypassSecurityTrustResourceUrl(J){return(0,b.e5t)(J)}static{this.\u0275fac=function(Q){return new(Q||Te)(b.KVO($.qQ))}}static{this.\u0275prov=b.jDH({token:Te,factory:Te.\u0275fac,providedIn:"root"})}}return Te})();var mr=function(Te){return Te[Te.NoHttpTransferCache=0]="NoHttpTransferCache",Te[Te.HttpTransferCacheOptions=1]="HttpTransferCacheOptions",Te}(mr||{});function ai(...Te){const ne=[],J=new Set,Q=J.has(mr.HttpTransferCacheOptions);for(const{\u0275providers:oe,\u0275kind:ee}of Te)J.add(ee),oe.length&&ne.push(oe);return(0,b.EmA)([[],(0,b.M8M)(),J.has(mr.NoHttpTransferCache)||Q?[]:(0,q.$m)({}),ne])}},1188:(Cn,nt,x)=>{x.d(nt,{_d:()=>bt,j5:()=>Dn,wF:()=>ti,L6:()=>gr,Z:()=>Bn,Ix:()=>Si,Wk:()=>xi,wQ:()=>Gn,iI:()=>xo,n3:()=>Wi,ld:()=>_r,lh:()=>zs,we:()=>Fi});var b=x(4523),$=x(4438),q=x(4402),H=x(8455),Ee=x(7673),Fe=x(4412),Le=x(4572),Ne=x(9350),Pe=x(8793),K=x(9030),Ae=x(1203),He=x(8810),ot=x(983),tt=x(17),Rt=x(1413),Ft=x(8359),Gt=x(177),Pt=x(6354),hn=x(5558),Et=x(6697),kt=x(9172),Ke=x(5964),Qe=x(1397),ct=x(1594),Ze=x(274),Ge=x(8141),me=x(9437),ve=x(2816),At=x(9901),Jt=x(9974),Nt=x(4360);function Yt(O){return O<=0?()=>ot.w:(0,Jt.N)((z,k)=>{let W=[];z.subscribe((0,Nt._)(k,ae=>{W.push(ae),O<W.length&&W.shift()},()=>{for(const ae of W)k.next(ae);k.complete()},void 0,()=>{W=null}))})}var an=x(3774),$t=x(3669),Ye=x(3703),Ht=x(980),et=x(9898),gt=x(6977),Mt=x(6365),ft=x(345);const Ct="primary",ln=Symbol("RouteTitle");class nr{constructor(z){this.params=z||{}}has(z){return Object.prototype.hasOwnProperty.call(this.params,z)}get(z){if(this.has(z)){const k=this.params[z];return Array.isArray(k)?k[0]:k}return null}getAll(z){if(this.has(z)){const k=this.params[z];return Array.isArray(k)?k:[k]}return[]}get keys(){return Object.keys(this.params)}}function hr(O){return new nr(O)}function Cr(O,z,k){const W=k.path.split("/");if(W.length>O.length||"full"===k.pathMatch&&(z.hasChildren()||W.length<O.length))return null;const ae={};for(let Ce=0;Ce<W.length;Ce++){const rt=W[Ce],on=O[Ce];if(rt.startsWith(":"))ae[rt.substring(1)]=on;else if(rt!==on.path)return null}return{consumed:O.slice(0,W.length),posParams:ae}}function fr(O,z){const k=O?Jn(O):void 0,W=z?Jn(z):void 0;if(!k||!W||k.length!=W.length)return!1;let ae;for(let Ce=0;Ce<k.length;Ce++)if(ae=k[Ce],!Rr(O[ae],z[ae]))return!1;return!0}function Jn(O){return[...Object.keys(O),...Object.getOwnPropertySymbols(O)]}function Rr(O,z){if(Array.isArray(O)&&Array.isArray(z)){if(O.length!==z.length)return!1;const k=[...O].sort(),W=[...z].sort();return k.every((ae,Ce)=>W[Ce]===ae)}return O===z}function vr(O){return O.length>0?O[O.length-1]:null}function $n(O){return(0,q.A)(O)?O:(0,$.jNT)(O)?(0,H.H)(Promise.resolve(O)):(0,Ee.of)(O)}const qn={exact:function Xe(O,z,k){if(!gn(O.segments,z.segments)||!mn(O.segments,z.segments,k)||O.numberOfChildren!==z.numberOfChildren)return!1;for(const W in z.children)if(!O.children[W]||!Xe(O.children[W],z.children[W],k))return!1;return!0},subset:rn},gi={exact:function De(O,z){return fr(O,z)},subset:function je(O,z){return Object.keys(z).length<=Object.keys(O).length&&Object.keys(z).every(k=>Rr(O[k],z[k]))},ignored:()=>!0};function st(O,z,k){return qn[k.paths](O.root,z.root,k.matrixParams)&&gi[k.queryParams](O.queryParams,z.queryParams)&&!("exact"===k.fragment&&O.fragment!==z.fragment)}function rn(O,z,k){return fn(O,z,z.segments,k)}function fn(O,z,k,W){if(O.segments.length>k.length){const ae=O.segments.slice(0,k.length);return!(!gn(ae,k)||z.hasChildren()||!mn(ae,k,W))}if(O.segments.length===k.length){if(!gn(O.segments,k)||!mn(O.segments,k,W))return!1;for(const ae in z.children)if(!O.children[ae]||!rn(O.children[ae],z.children[ae],W))return!1;return!0}{const ae=k.slice(0,O.segments.length),Ce=k.slice(O.segments.length);return!!(gn(O.segments,ae)&&mn(O.segments,ae,W)&&O.children[Ct])&&fn(O.children[Ct],z,Ce,W)}}function mn(O,z,k){return z.every((W,ae)=>gi[k](O[ae].parameters,W.parameters))}class Ut{constructor(z=new wt([],{}),k={},W=null){this.root=z,this.queryParams=k,this.fragment=W}get queryParamMap(){return this._queryParamMap??=hr(this.queryParams),this._queryParamMap}toString(){return ar.serialize(this)}}class wt{constructor(z,k){this.segments=z,this.children=k,this.parent=null,Object.values(k).forEach(W=>W.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return mr(this)}}class $e{constructor(z,k){this.path=z,this.parameters=k}get parameterMap(){return this._parameterMap??=hr(this.parameters),this._parameterMap}toString(){return pn(this)}}function gn(O,z){return O.length===z.length&&O.every((k,W)=>k.path===z[W].path)}let ir=(()=>{class O{static{this.\u0275fac=function(W){return new(W||O)}}static{this.\u0275prov=$.jDH({token:O,factory:()=>new yr,providedIn:"root"})}}return O})();class yr{parse(z){const k=new On(z);return new Ut(k.parseRootSegment(),k.parseQueryParams(),k.parseFragment())}serialize(z){const k=`/${Yr(z.root,!0)}`,W=function ne(O){const z=Object.entries(O).map(([k,W])=>Array.isArray(W)?W.map(ae=>`${xt(k)}=${xt(ae)}`).join("&"):`${xt(k)}=${xt(W)}`).filter(k=>k);return z.length?`?${z.join("&")}`:""}(z.queryParams);return`${k}${W}${"string"==typeof z.fragment?`#${function qr(O){return encodeURI(O)}(z.fragment)}`:""}`}}const ar=new yr;function mr(O){return O.segments.map(z=>pn(z)).join("/")}function Yr(O,z){if(!O.hasChildren())return mr(O);if(z){const k=O.children[Ct]?Yr(O.children[Ct],!1):"",W=[];return Object.entries(O.children).forEach(([ae,Ce])=>{ae!==Ct&&W.push(`${ae}:${Yr(Ce,!1)}`)}),W.length>0?`${k}(${W.join("//")})`:k}{const k=function An(O,z){let k=[];return Object.entries(O.children).forEach(([W,ae])=>{W===Ct&&(k=k.concat(z(ae,W)))}),Object.entries(O.children).forEach(([W,ae])=>{W!==Ct&&(k=k.concat(z(ae,W)))}),k}(O,(W,ae)=>ae===Ct?[Yr(O.children[Ct],!1)]:[`${ae}:${Yr(W,!1)}`]);return 1===Object.keys(O.children).length&&null!=O.children[Ct]?`${mr(O)}/${k[0]}`:`${mr(O)}/(${k.join("//")})`}}function Nr(O){return encodeURIComponent(O).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function xt(O){return Nr(O).replace(/%3B/gi,";")}function ai(O){return Nr(O).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function yi(O){return decodeURIComponent(O)}function Xr(O){return yi(O.replace(/\+/g,"%20"))}function pn(O){return`${ai(O.path)}${function Te(O){return Object.entries(O).map(([z,k])=>`;${ai(z)}=${ai(k)}`).join("")}(O.parameters)}`}const J=/^[^\/()?;#]+/;function Q(O){const z=O.match(J);return z?z[0]:""}const oe=/^[^\/()?;=#]+/,pe=/^[^=?&#]+/,Tt=/^[^&#]+/;class On{constructor(z){this.url=z,this.remaining=z}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new wt([],{}):new wt([],this.parseChildren())}parseQueryParams(){const z={};if(this.consumeOptional("?"))do{this.parseQueryParam(z)}while(this.consumeOptional("&"));return z}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const z=[];for(this.peekStartsWith("(")||z.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),z.push(this.parseSegment());let k={};this.peekStartsWith("/(")&&(this.capture("/"),k=this.parseParens(!0));let W={};return this.peekStartsWith("(")&&(W=this.parseParens(!1)),(z.length>0||Object.keys(k).length>0)&&(W[Ct]=new wt(z,k)),W}parseSegment(){const z=Q(this.remaining);if(""===z&&this.peekStartsWith(";"))throw new $.wOt(4009,!1);return this.capture(z),new $e(yi(z),this.parseMatrixParams())}parseMatrixParams(){const z={};for(;this.consumeOptional(";");)this.parseParam(z);return z}parseParam(z){const k=function ee(O){const z=O.match(oe);return z?z[0]:""}(this.remaining);if(!k)return;this.capture(k);let W="";if(this.consumeOptional("=")){const ae=Q(this.remaining);ae&&(W=ae,this.capture(W))}z[yi(k)]=yi(W)}parseQueryParam(z){const k=function Oe(O){const z=O.match(pe);return z?z[0]:""}(this.remaining);if(!k)return;this.capture(k);let W="";if(this.consumeOptional("=")){const rt=function lt(O){const z=O.match(Tt);return z?z[0]:""}(this.remaining);rt&&(W=rt,this.capture(W))}const ae=Xr(k),Ce=Xr(W);if(z.hasOwnProperty(ae)){let rt=z[ae];Array.isArray(rt)||(rt=[rt],z[ae]=rt),rt.push(Ce)}else z[ae]=Ce}parseParens(z){const k={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const W=Q(this.remaining),ae=this.remaining[W.length];if("/"!==ae&&")"!==ae&&";"!==ae)throw new $.wOt(4010,!1);let Ce;W.indexOf(":")>-1?(Ce=W.slice(0,W.indexOf(":")),this.capture(Ce),this.capture(":")):z&&(Ce=Ct);const rt=this.parseChildren();k[Ce]=1===Object.keys(rt).length?rt[Ct]:new wt([],rt),this.consumeOptional("//")}return k}peekStartsWith(z){return this.remaining.startsWith(z)}consumeOptional(z){return!!this.peekStartsWith(z)&&(this.remaining=this.remaining.substring(z.length),!0)}capture(z){if(!this.consumeOptional(z))throw new $.wOt(4011,!1)}}function Yn(O){return O.segments.length>0?new wt([],{[Ct]:O}):O}function wi(O){const z={};for(const[W,ae]of Object.entries(O.children)){const Ce=wi(ae);if(W===Ct&&0===Ce.segments.length&&Ce.hasChildren())for(const[rt,on]of Object.entries(Ce.children))z[rt]=on;else(Ce.segments.length>0||Ce.hasChildren())&&(z[W]=Ce)}return function bi(O){if(1===O.numberOfChildren&&O.children[Ct]){const z=O.children[Ct];return new wt(O.segments.concat(z.segments),z.children)}return O}(new wt(O.segments,z))}function Lr(O){return O instanceof Ut}function er(O){let z;const ae=Yn(function k(Ce){const rt={};for(const Qt of Ce.children){const pr=k(Qt);rt[Qt.outlet]=pr}const on=new wt(Ce.url,rt);return Ce===O&&(z=on),on}(O.root));return z??ae}function rs(O,z,k,W){let ae=O;for(;ae.parent;)ae=ae.parent;if(0===z.length)return Co(ae,ae,ae,k,W);const Ce=function la(O){if("string"==typeof O[0]&&1===O.length&&"/"===O[0])return new vi(!0,0,O);let z=0,k=!1;const W=O.reduce((ae,Ce,rt)=>{if("object"==typeof Ce&&null!=Ce){if(Ce.outlets){const on={};return Object.entries(Ce.outlets).forEach(([Qt,pr])=>{on[Qt]="string"==typeof pr?pr.split("/"):pr}),[...ae,{outlets:on}]}if(Ce.segmentPath)return[...ae,Ce.segmentPath]}return"string"!=typeof Ce?[...ae,Ce]:0===rt?(Ce.split("/").forEach((on,Qt)=>{0==Qt&&"."===on||(0==Qt&&""===on?k=!0:".."===on?z++:""!=on&&ae.push(on))}),ae):[...ae,Ce]},[]);return new vi(k,z,W)}(z);if(Ce.toRoot())return Co(ae,ae,new wt([],{}),k,W);const rt=function so(O,z,k){if(O.isAbsolute)return new $s(z,!0,0);if(!k)return new $s(z,!1,NaN);if(null===k.parent)return new $s(k,!0,0);const W=Ms(O.commands[0])?0:1;return function fo(O,z,k){let W=O,ae=z,Ce=k;for(;Ce>ae;){if(Ce-=ae,W=W.parent,!W)throw new $.wOt(4005,!1);ae=W.segments.length}return new $s(W,!1,ae-Ce)}(k,k.segments.length-1+W,O.numberOfDoubleDots)}(Ce,ae,O),on=rt.processChildren?Ts(rt.segmentGroup,rt.index,Ce.commands):_s(rt.segmentGroup,rt.index,Ce.commands);return Co(ae,rt.segmentGroup,on,k,W)}function Ms(O){return"object"==typeof O&&null!=O&&!O.outlets&&!O.segmentPath}function Ks(O){return"object"==typeof O&&null!=O&&O.outlets}function Co(O,z,k,W,ae){let rt,Ce={};W&&Object.entries(W).forEach(([Qt,pr])=>{Ce[Qt]=Array.isArray(pr)?pr.map(li=>`${li}`):`${pr}`}),rt=O===z?k:Os(O,z,k);const on=Yn(wi(rt));return new Ut(on,Ce,ae)}function Os(O,z,k){const W={};return Object.entries(O.children).forEach(([ae,Ce])=>{W[ae]=Ce===z?k:Os(Ce,z,k)}),new wt(O.segments,W)}class vi{constructor(z,k,W){if(this.isAbsolute=z,this.numberOfDoubleDots=k,this.commands=W,z&&W.length>0&&Ms(W[0]))throw new $.wOt(4003,!1);const ae=W.find(Ks);if(ae&&ae!==vr(W))throw new $.wOt(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class $s{constructor(z,k,W){this.segmentGroup=z,this.processChildren=k,this.index=W}}function _s(O,z,k){if(O??=new wt([],{}),0===O.segments.length&&O.hasChildren())return Ts(O,z,k);const W=function Ue(O,z,k){let W=0,ae=z;const Ce={match:!1,pathIndex:0,commandIndex:0};for(;ae<O.segments.length;){if(W>=k.length)return Ce;const rt=O.segments[ae],on=k[W];if(Ks(on))break;const Qt=`${on}`,pr=W<k.length-1?k[W+1]:null;if(ae>0&&void 0===Qt)break;if(Qt&&pr&&"object"==typeof pr&&void 0===pr.outlets){if(!sn(Qt,pr,rt))return Ce;W+=2}else{if(!sn(Qt,{},rt))return Ce;W++}ae++}return{match:!0,pathIndex:ae,commandIndex:W}}(O,z,k),ae=k.slice(W.commandIndex);if(W.match&&W.pathIndex<O.segments.length){const Ce=new wt(O.segments.slice(0,W.pathIndex),{});return Ce.children[Ct]=new wt(O.segments.slice(W.pathIndex),O.children),Ts(Ce,0,ae)}return W.match&&0===ae.length?new wt(O.segments,{}):W.match&&!O.hasChildren()?it(O,z,k):W.match?Ts(O,0,ae):it(O,z,k)}function Ts(O,z,k){if(0===k.length)return new wt(O.segments,{});{const W=function Gs(O){return Ks(O[0])?O[0].outlets:{[Ct]:O}}(k),ae={};if(Object.keys(W).some(Ce=>Ce!==Ct)&&O.children[Ct]&&1===O.numberOfChildren&&0===O.children[Ct].segments.length){const Ce=Ts(O.children[Ct],z,k);return new wt(O.segments,Ce.children)}return Object.entries(W).forEach(([Ce,rt])=>{"string"==typeof rt&&(rt=[rt]),null!==rt&&(ae[Ce]=_s(O.children[Ce],z,rt))}),Object.entries(O.children).forEach(([Ce,rt])=>{void 0===W[Ce]&&(ae[Ce]=rt)}),new wt(O.segments,ae)}}function it(O,z,k){const W=O.segments.slice(0,z);let ae=0;for(;ae<k.length;){const Ce=k[ae];if(Ks(Ce)){const Qt=ut(Ce.outlets);return new wt(W,Qt)}if(0===ae&&Ms(k[0])){W.push(new $e(O.segments[z].path,un(k[0]))),ae++;continue}const rt=Ks(Ce)?Ce.outlets[Ct]:`${Ce}`,on=ae<k.length-1?k[ae+1]:null;rt&&on&&Ms(on)?(W.push(new $e(rt,un(on))),ae+=2):(W.push(new $e(rt,{})),ae++)}return new wt(W,{})}function ut(O){const z={};return Object.entries(O).forEach(([k,W])=>{"string"==typeof W&&(W=[W]),null!==W&&(z[k]=it(new wt([],{}),0,W))}),z}function un(O){const z={};return Object.entries(O).forEach(([k,W])=>z[k]=`${W}`),z}function sn(O,z,k){return O==k.path&&fr(z,k.parameters)}const Sn="imperative";var jt=function(O){return O[O.NavigationStart=0]="NavigationStart",O[O.NavigationEnd=1]="NavigationEnd",O[O.NavigationCancel=2]="NavigationCancel",O[O.NavigationError=3]="NavigationError",O[O.RoutesRecognized=4]="RoutesRecognized",O[O.ResolveStart=5]="ResolveStart",O[O.ResolveEnd=6]="ResolveEnd",O[O.GuardsCheckStart=7]="GuardsCheckStart",O[O.GuardsCheckEnd=8]="GuardsCheckEnd",O[O.RouteConfigLoadStart=9]="RouteConfigLoadStart",O[O.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",O[O.ChildActivationStart=11]="ChildActivationStart",O[O.ChildActivationEnd=12]="ChildActivationEnd",O[O.ActivationStart=13]="ActivationStart",O[O.ActivationEnd=14]="ActivationEnd",O[O.Scroll=15]="Scroll",O[O.NavigationSkipped=16]="NavigationSkipped",O}(jt||{});class Xn{constructor(z,k){this.id=z,this.url=k}}class Bn extends Xn{constructor(z,k,W="imperative",ae=null){super(z,k),this.type=jt.NavigationStart,this.navigationTrigger=W,this.restoredState=ae}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class ti extends Xn{constructor(z,k,W){super(z,k),this.urlAfterRedirects=W,this.type=jt.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}var wr=function(O){return O[O.Redirect=0]="Redirect",O[O.SupersededByNewNavigation=1]="SupersededByNewNavigation",O[O.NoDataFromResolver=2]="NoDataFromResolver",O[O.GuardRejected=3]="GuardRejected",O}(wr||{}),yn=function(O){return O[O.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",O[O.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",O}(yn||{});class Dn extends Xn{constructor(z,k,W,ae){super(z,k),this.reason=W,this.code=ae,this.type=jt.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class or extends Xn{constructor(z,k,W,ae){super(z,k),this.reason=W,this.code=ae,this.type=jt.NavigationSkipped}}class gr extends Xn{constructor(z,k,W,ae){super(z,k),this.error=W,this.target=ae,this.type=jt.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class _r extends Xn{constructor(z,k,W,ae){super(z,k),this.urlAfterRedirects=W,this.state=ae,this.type=jt.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class xn extends Xn{constructor(z,k,W,ae){super(z,k),this.urlAfterRedirects=W,this.state=ae,this.type=jt.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Zr extends Xn{constructor(z,k,W,ae,Ce){super(z,k),this.urlAfterRedirects=W,this.state=ae,this.shouldActivate=Ce,this.type=jt.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Ri extends Xn{constructor(z,k,W,ae){super(z,k),this.urlAfterRedirects=W,this.state=ae,this.type=jt.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class kr extends Xn{constructor(z,k,W,ae){super(z,k),this.urlAfterRedirects=W,this.state=ae,this.type=jt.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class oi{constructor(z){this.route=z,this.type=jt.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class As{constructor(z){this.route=z,this.type=jt.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class qi{constructor(z){this.snapshot=z,this.type=jt.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Be{constructor(z){this.snapshot=z,this.type=jt.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Zt{constructor(z){this.snapshot=z,this.type=jt.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class bt{constructor(z){this.snapshot=z,this.type=jt.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Kt{constructor(z,k,W){this.routerEvent=z,this.position=k,this.anchor=W,this.type=jt.Scroll}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class Kn{}class Rn{constructor(z){this.url=z}}class Ie{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new he,this.attachRef=null}}let he=(()=>{class O{constructor(){this.contexts=new Map}onChildOutletCreated(k,W){const ae=this.getOrCreateContext(k);ae.outlet=W,this.contexts.set(k,ae)}onChildOutletDestroyed(k){const W=this.getContext(k);W&&(W.outlet=null,W.attachRef=null)}onOutletDeactivated(){const k=this.contexts;return this.contexts=new Map,k}onOutletReAttached(k){this.contexts=k}getOrCreateContext(k){let W=this.getContext(k);return W||(W=new Ie,this.contexts.set(k,W)),W}getContext(k){return this.contexts.get(k)||null}static{this.\u0275fac=function(W){return new(W||O)}}static{this.\u0275prov=$.jDH({token:O,factory:O.\u0275fac,providedIn:"root"})}}return O})();class We{constructor(z){this._root=z}get root(){return this._root.value}parent(z){const k=this.pathFromRoot(z);return k.length>1?k[k.length-2]:null}children(z){const k=yt(z,this._root);return k?k.children.map(W=>W.value):[]}firstChild(z){const k=yt(z,this._root);return k&&k.children.length>0?k.children[0].value:null}siblings(z){const k=In(z,this._root);return k.length<2?[]:k[k.length-2].children.map(ae=>ae.value).filter(ae=>ae!==z)}pathFromRoot(z){return In(z,this._root).map(k=>k.value)}}function yt(O,z){if(O===z.value)return z;for(const k of z.children){const W=yt(O,k);if(W)return W}return null}function In(O,z){if(O===z.value)return[z];for(const k of z.children){const W=In(O,k);if(W.length)return W.unshift(z),W}return[]}class jn{constructor(z,k){this.value=z,this.children=k}toString(){return`TreeNode(${this.value})`}}function Jr(O){const z={};return O&&O.children.forEach(k=>z[k.value.outlet]=k),z}class Li extends We{constructor(z,k){super(z),this.snapshot=k,da(this,z)}toString(){return this.snapshot.toString()}}function es(O){const z=function ds(O){const Ce=new ua([],{},{},"",{},Ct,O,null,{});return new ys("",new jn(Ce,[]))}(O),k=new Fe.t([new $e("",{})]),W=new Fe.t({}),ae=new Fe.t({}),Ce=new Fe.t({}),rt=new Fe.t(""),on=new is(k,W,Ce,rt,ae,Ct,O,z.root);return on.snapshot=z.root,new Li(new jn(on,[]),z)}class is{constructor(z,k,W,ae,Ce,rt,on,Qt){this.urlSubject=z,this.paramsSubject=k,this.queryParamsSubject=W,this.fragmentSubject=ae,this.dataSubject=Ce,this.outlet=rt,this.component=on,this._futureSnapshot=Qt,this.title=this.dataSubject?.pipe((0,Pt.T)(pr=>pr[ln]))??(0,Ee.of)(void 0),this.url=z,this.params=k,this.queryParams=W,this.fragment=ae,this.data=Ce}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe((0,Pt.T)(z=>hr(z))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe((0,Pt.T)(z=>hr(z))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function xs(O,z,k="emptyOnly"){let W;const{routeConfig:ae}=O;return W=null===z||"always"!==k&&""!==ae?.path&&(z.component||z.routeConfig?.loadComponent)?{params:{...O.params},data:{...O.data},resolve:{...O.data,...O._resolvedData??{}}}:{params:{...z.params,...O.params},data:{...z.data,...O.data},resolve:{...O.data,...z.data,...ae?.data,...O._resolvedData}},ae&&So(ae)&&(W.resolve[ln]=ae.title),W}class ua{get title(){return this.data?.[ln]}constructor(z,k,W,ae,Ce,rt,on,Qt,pr){this.url=z,this.params=k,this.queryParams=W,this.fragment=ae,this.data=Ce,this.outlet=rt,this.component=on,this.routeConfig=Qt,this._resolve=pr}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=hr(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=hr(this.queryParams),this._queryParamMap}toString(){return`Route(url:'${this.url.map(W=>W.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class ys extends We{constructor(z,k){super(k),this.url=z,da(this,k)}toString(){return Zs(this._root)}}function da(O,z){z.value._routerState=O,z.children.forEach(k=>da(O,k))}function Zs(O){const z=O.children.length>0?` { ${O.children.map(Zs).join(", ")} } `:"";return`${O.value}${z}`}function po(O){if(O.snapshot){const z=O.snapshot,k=O._futureSnapshot;O.snapshot=k,fr(z.queryParams,k.queryParams)||O.queryParamsSubject.next(k.queryParams),z.fragment!==k.fragment&&O.fragmentSubject.next(k.fragment),fr(z.params,k.params)||O.paramsSubject.next(k.params),function sr(O,z){if(O.length!==z.length)return!1;for(let k=0;k<O.length;++k)if(!fr(O[k],z[k]))return!1;return!0}(z.url,k.url)||O.urlSubject.next(k.url),fr(z.data,k.data)||O.dataSubject.next(k.data)}else O.snapshot=O._futureSnapshot,O.dataSubject.next(O._futureSnapshot.data)}function Js(O,z){const k=fr(O.params,z.params)&&function _t(O,z){return gn(O,z)&&O.every((k,W)=>fr(k.parameters,z[W].parameters))}(O.url,z.url);return k&&!(!O.parent!=!z.parent)&&(!O.parent||Js(O.parent,z.parent))}function So(O){return"string"==typeof O.title||null===O.title}let Wi=(()=>{class O{constructor(){this.activated=null,this._activatedRoute=null,this.name=Ct,this.activateEvents=new $.bkB,this.deactivateEvents=new $.bkB,this.attachEvents=new $.bkB,this.detachEvents=new $.bkB,this.parentContexts=(0,$.WQX)(he),this.location=(0,$.WQX)($.c1b),this.changeDetector=(0,$.WQX)($.gRc),this.environmentInjector=(0,$.WQX)($.uvJ),this.inputBinder=(0,$.WQX)(Ur,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(k){if(k.name){const{firstChange:W,previousValue:ae}=k.name;if(W)return;this.isTrackedInParentContexts(ae)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(ae)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(k){return this.parentContexts.getContext(k)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const k=this.parentContexts.getContext(this.name);k?.route&&(k.attachRef?this.attach(k.attachRef,k.route):this.activateWith(k.route,k.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new $.wOt(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new $.wOt(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new $.wOt(4012,!1);this.location.detach();const k=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(k.instance),k}attach(k,W){this.activated=k,this._activatedRoute=W,this.location.insert(k.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(k.instance)}deactivate(){if(this.activated){const k=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(k)}}activateWith(k,W){if(this.isActivated)throw new $.wOt(4013,!1);this._activatedRoute=k;const ae=this.location,rt=k.snapshot.component,on=this.parentContexts.getOrCreateContext(this.name).children,Qt=new eo(k,on,ae.injector);this.activated=ae.createComponent(rt,{index:ae.length,injector:Qt,environmentInjector:W??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(W){return new(W||O)}}static{this.\u0275dir=$.FsC({type:O,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[$.OA$]})}}return O})();class eo{__ngOutletInjector(z){return new eo(this.route,this.childContexts,z)}constructor(z,k,W){this.route=z,this.childContexts=k,this.parent=W}get(z,k){return z===is?this.route:z===he?this.childContexts:this.parent.get(z,k)}}const Ur=new $.nKC("");let Go=(()=>{class O{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(k){this.unsubscribeFromRouteData(k),this.subscribeToRouteData(k)}unsubscribeFromRouteData(k){this.outletDataSubscriptions.get(k)?.unsubscribe(),this.outletDataSubscriptions.delete(k)}subscribeToRouteData(k){const{activatedRoute:W}=k,ae=(0,Le.z)([W.queryParams,W.params,W.data]).pipe((0,hn.n)(([Ce,rt,on],Qt)=>(on={...Ce,...rt,...on},0===Qt?(0,Ee.of)(on):Promise.resolve(on)))).subscribe(Ce=>{if(!k.isActivated||!k.activatedComponentRef||k.activatedRoute!==W||null===W.component)return void this.unsubscribeFromRouteData(k);const rt=(0,$.HJs)(W.component);if(rt)for(const{templateName:on}of rt.inputs)k.activatedComponentRef.setInput(on,Ce[on]);else this.unsubscribeFromRouteData(k)});this.outletDataSubscriptions.set(k,ae)}static{this.\u0275fac=function(W){return new(W||O)}}static{this.\u0275prov=$.jDH({token:O,factory:O.\u0275fac})}}return O})();function Fo(O,z,k){if(k&&O.shouldReuseRoute(z.value,k.value.snapshot)){const W=k.value;W._futureSnapshot=z.value;const ae=function rc(O,z,k){return z.children.map(W=>{for(const ae of k.children)if(O.shouldReuseRoute(W.value,ae.value.snapshot))return Fo(O,W,ae);return Fo(O,W)})}(O,z,k);return new jn(W,ae)}{if(O.shouldAttach(z.value)){const Ce=O.retrieve(z.value);if(null!==Ce){const rt=Ce.route;return rt.value._futureSnapshot=z.value,rt.children=z.children.map(on=>Fo(O,on)),rt}}const W=function Vo(O){return new is(new Fe.t(O.url),new Fe.t(O.params),new Fe.t(O.queryParams),new Fe.t(O.fragment),new Fe.t(O.data),O.outlet,O.component,O)}(z.value),ae=z.children.map(Ce=>Fo(O,Ce));return new jn(W,ae)}}const Ii="ngNavigationCancelingError";function Cc(O,z){const{redirectTo:k,navigationBehaviorOptions:W}=Lr(z)?{redirectTo:z,navigationBehaviorOptions:void 0}:z,ae=qo(!1,wr.Redirect);return ae.url=k,ae.navigationBehaviorOptions=W,ae}function qo(O,z){const k=new Error(`NavigationCancelingError: ${O||""}`);return k[Ii]=!0,k.cancellationCode=z,k}function ha(O){return!!O&&O[Ii]}let Fi=(()=>{class O{static{this.\u0275fac=function(W){return new(W||O)}}static{this.\u0275cmp=$.VBU({type:O,selectors:[["ng-component"]],standalone:!0,features:[$.aNF],decls:1,vars:0,template:function(W,ae){1&W&&$.nrm(0,"router-outlet")},dependencies:[Wi],encapsulation:2})}}return O})();function Do(O){const z=O.children&&O.children.map(Do),k=z?{...O,children:z}:{...O};return!k.component&&!k.loadComponent&&(z||k.loadChildren)&&k.outlet&&k.outlet!==Ct&&(k.component=Fi),k}function mo(O){return O.outlet||Ct}function ss(O){if(!O)return null;if(O.routeConfig?._injector)return O.routeConfig._injector;for(let z=O.parent;z;z=z.parent){const k=z.routeConfig;if(k?._loadedInjector)return k._loadedInjector;if(k?._injector)return k._injector}return null}class Sa{constructor(z,k,W,ae,Ce){this.routeReuseStrategy=z,this.futureState=k,this.currState=W,this.forwardEvent=ae,this.inputBindingEnabled=Ce}activate(z){const k=this.futureState._root,W=this.currState?this.currState._root:null;this.deactivateChildRoutes(k,W,z),po(this.futureState.root),this.activateChildRoutes(k,W,z)}deactivateChildRoutes(z,k,W){const ae=Jr(k);z.children.forEach(Ce=>{const rt=Ce.value.outlet;this.deactivateRoutes(Ce,ae[rt],W),delete ae[rt]}),Object.values(ae).forEach(Ce=>{this.deactivateRouteAndItsChildren(Ce,W)})}deactivateRoutes(z,k,W){const ae=z.value,Ce=k?k.value:null;if(ae===Ce)if(ae.component){const rt=W.getContext(ae.outlet);rt&&this.deactivateChildRoutes(z,k,rt.children)}else this.deactivateChildRoutes(z,k,W);else Ce&&this.deactivateRouteAndItsChildren(k,W)}deactivateRouteAndItsChildren(z,k){z.value.component&&this.routeReuseStrategy.shouldDetach(z.value.snapshot)?this.detachAndStoreRouteSubtree(z,k):this.deactivateRouteAndOutlet(z,k)}detachAndStoreRouteSubtree(z,k){const W=k.getContext(z.value.outlet),ae=W&&z.value.component?W.children:k,Ce=Jr(z);for(const rt of Object.values(Ce))this.deactivateRouteAndItsChildren(rt,ae);if(W&&W.outlet){const rt=W.outlet.detach(),on=W.children.onOutletDeactivated();this.routeReuseStrategy.store(z.value.snapshot,{componentRef:rt,route:z,contexts:on})}}deactivateRouteAndOutlet(z,k){const W=k.getContext(z.value.outlet),ae=W&&z.value.component?W.children:k,Ce=Jr(z);for(const rt of Object.values(Ce))this.deactivateRouteAndItsChildren(rt,ae);W&&(W.outlet&&(W.outlet.deactivate(),W.children.onOutletDeactivated()),W.attachRef=null,W.route=null)}activateChildRoutes(z,k,W){const ae=Jr(k);z.children.forEach(Ce=>{this.activateRoutes(Ce,ae[Ce.value.outlet],W),this.forwardEvent(new bt(Ce.value.snapshot))}),z.children.length&&this.forwardEvent(new Be(z.value.snapshot))}activateRoutes(z,k,W){const ae=z.value,Ce=k?k.value:null;if(po(ae),ae===Ce)if(ae.component){const rt=W.getOrCreateContext(ae.outlet);this.activateChildRoutes(z,k,rt.children)}else this.activateChildRoutes(z,k,W);else if(ae.component){const rt=W.getOrCreateContext(ae.outlet);if(this.routeReuseStrategy.shouldAttach(ae.snapshot)){const on=this.routeReuseStrategy.retrieve(ae.snapshot);this.routeReuseStrategy.store(ae.snapshot,null),rt.children.onOutletReAttached(on.contexts),rt.attachRef=on.componentRef,rt.route=on.route.value,rt.outlet&&rt.outlet.attach(on.componentRef,on.route.value),po(on.route.value),this.activateChildRoutes(z,null,rt.children)}else{const on=ss(ae.snapshot);rt.attachRef=null,rt.route=ae,rt.injector=on,rt.outlet&&rt.outlet.activateWith(ae,rt.injector),this.activateChildRoutes(z,null,rt.children)}}else this.activateChildRoutes(z,null,W)}}class qs{constructor(z){this.path=z,this.route=this.path[this.path.length-1]}}class Mi{constructor(z,k){this.component=z,this.route=k}}function pa(O,z,k){const W=O._root;return Da(W,z?z._root:null,k,[W.value])}function go(O,z){const k=Symbol(),W=z.get(O,k);return W===k?"function"!=typeof O||(0,$.LfX)(O)?z.get(O):O:W}function Da(O,z,k,W,ae={canDeactivateChecks:[],canActivateChecks:[]}){const Ce=Jr(z);return O.children.forEach(rt=>{(function Rc(O,z,k,W,ae={canDeactivateChecks:[],canActivateChecks:[]}){const Ce=O.value,rt=z?z.value:null,on=k?k.getContext(O.value.outlet):null;if(rt&&Ce.routeConfig===rt.routeConfig){const Qt=function $a(O,z,k){if("function"==typeof k)return k(O,z);switch(k){case"pathParamsChange":return!gn(O.url,z.url);case"pathParamsOrQueryParamsChange":return!gn(O.url,z.url)||!fr(O.queryParams,z.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Js(O,z)||!fr(O.queryParams,z.queryParams);default:return!Js(O,z)}}(rt,Ce,Ce.routeConfig.runGuardsAndResolvers);Qt?ae.canActivateChecks.push(new qs(W)):(Ce.data=rt.data,Ce._resolvedData=rt._resolvedData),Da(O,z,Ce.component?on?on.children:null:k,W,ae),Qt&&on&&on.outlet&&on.outlet.isActivated&&ae.canDeactivateChecks.push(new Mi(on.outlet.component,rt))}else rt&&to(z,on,ae),ae.canActivateChecks.push(new qs(W)),Da(O,null,Ce.component?on?on.children:null:k,W,ae)})(rt,Ce[rt.value.outlet],k,W.concat([rt.value]),ae),delete Ce[rt.value.outlet]}),Object.entries(Ce).forEach(([rt,on])=>to(on,k.getContext(rt),ae)),ae}function to(O,z,k){const W=Jr(O),ae=O.value;Object.entries(W).forEach(([Ce,rt])=>{to(rt,ae.component?z?z.children.getContext(Ce):null:z,k)}),k.canDeactivateChecks.push(new Mi(ae.component&&z&&z.outlet&&z.outlet.isActivated?z.outlet.component:null,ae))}function Vs(O){return"function"==typeof O}function Uo(O){return O instanceof Ne.G||"EmptyError"===O?.name}const za=Symbol("INITIAL_VALUE");function ao(){return(0,hn.n)(O=>(0,Le.z)(O.map(z=>z.pipe((0,Et.s)(1),(0,kt.Z)(za)))).pipe((0,Pt.T)(z=>{for(const k of z)if(!0!==k){if(k===za)return za;if(!1===k||k instanceof Ut)return k}return!0}),(0,Ke.p)(z=>z!==za),(0,Et.s)(1)))}function Mc(O){return(0,Ae.F)((0,Ge.M)(z=>{if(Lr(z))throw Cc(0,z)}),(0,Pt.T)(z=>!0===z))}class ga{constructor(z){this.segmentGroup=z||null}}class yo extends Error{constructor(z){super(),this.urlTree=z}}function vo(O){return(0,He.$)(new ga(O))}class hs{constructor(z,k){this.urlSerializer=z,this.urlTree=k}lineralizeSegments(z,k){let W=[],ae=k.root;for(;;){if(W=W.concat(ae.segments),0===ae.numberOfChildren)return(0,Ee.of)(W);if(ae.numberOfChildren>1||!ae.children[Ct])return(0,He.$)(new $.wOt(4e3,!1));ae=ae.children[Ct]}}applyRedirectCommands(z,k,W){const ae=this.applyRedirectCreateUrlTree(k,this.urlSerializer.parse(k),z,W);if(k.startsWith("/"))throw new yo(ae);return ae}applyRedirectCreateUrlTree(z,k,W,ae){const Ce=this.createSegmentGroup(z,k.root,W,ae);return new Ut(Ce,this.createQueryParams(k.queryParams,this.urlTree.queryParams),k.fragment)}createQueryParams(z,k){const W={};return Object.entries(z).forEach(([ae,Ce])=>{if("string"==typeof Ce&&Ce.startsWith(":")){const on=Ce.substring(1);W[ae]=k[on]}else W[ae]=Ce}),W}createSegmentGroup(z,k,W,ae){const Ce=this.createSegments(z,k.segments,W,ae);let rt={};return Object.entries(k.children).forEach(([on,Qt])=>{rt[on]=this.createSegmentGroup(z,Qt,W,ae)}),new wt(Ce,rt)}createSegments(z,k,W,ae){return k.map(Ce=>Ce.path.startsWith(":")?this.findPosParam(z,Ce,ae):this.findOrReturn(Ce,W))}findPosParam(z,k,W){const ae=W[k.path.substring(1)];if(!ae)throw new $.wOt(4001,!1);return ae}findOrReturn(z,k){let W=0;for(const ae of k){if(ae.path===z.path)return k.splice(W),ae;W++}return z}}const Ra={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function ri(O,z,k,W,ae){const Ce=Ui(O,z,k);return Ce.matched?(W=function ls(O,z){return O.providers&&!O._injector&&(O._injector=(0,$.Ol2)(O.providers,z,`Route: ${O.path}`)),O._injector??z}(z,W),function ma(O,z,k,W){const ae=z.canMatch;if(!ae||0===ae.length)return(0,Ee.of)(!0);const Ce=ae.map(rt=>{const on=go(rt,O);return $n(function sc(O){return O&&Vs(O.canMatch)}(on)?on.canMatch(z,k):(0,$.N4e)(O,()=>on(z,k)))});return(0,Ee.of)(Ce).pipe(ao(),Mc())}(W,z,k).pipe((0,Pt.T)(rt=>!0===rt?Ce:{...Ra}))):(0,Ee.of)(Ce)}function Ui(O,z,k){if("**"===z.path)return function Ci(O){return{matched:!0,parameters:O.length>0?vr(O).parameters:{},consumedSegments:O,remainingSegments:[],positionalParamSegments:{}}}(k);if(""===z.path)return"full"===z.pathMatch&&(O.hasChildren()||k.length>0)?{...Ra}:{matched:!0,consumedSegments:[],remainingSegments:k,parameters:{},positionalParamSegments:{}};const ae=(z.matcher||Cr)(k,O,z);if(!ae)return{...Ra};const Ce={};Object.entries(ae.posParams??{}).forEach(([on,Qt])=>{Ce[on]=Qt.path});const rt=ae.consumed.length>0?{...Ce,...ae.consumed[ae.consumed.length-1].parameters}:Ce;return{matched:!0,consumedSegments:ae.consumed,remainingSegments:k.slice(ae.consumed.length),parameters:rt,positionalParamSegments:ae.posParams??{}}}function Bo(O,z,k,W){return k.length>0&&function rl(O,z,k){return k.some(W=>zi(O,z,W)&&mo(W)!==Ct)}(O,k,W)?{segmentGroup:new wt(z,Pa(W,new wt(k,O.children))),slicedSegments:[]}:0===k.length&&function ci(O,z,k){return k.some(W=>zi(O,z,W))}(O,k,W)?{segmentGroup:new wt(O.segments,Ss(O,k,W,O.children)),slicedSegments:k}:{segmentGroup:new wt(O.segments,O.children),slicedSegments:k}}function Ss(O,z,k,W){const ae={};for(const Ce of k)if(zi(O,z,Ce)&&!W[mo(Ce)]){const rt=new wt([],{});ae[mo(Ce)]=rt}return{...W,...ae}}function Pa(O,z){const k={};k[Ct]=z;for(const W of O)if(""===W.path&&mo(W)!==Ct){const ae=new wt([],{});k[mo(W)]=ae}return k}function zi(O,z,k){return(!(O.hasChildren()||z.length>0)||"full"!==k.pathMatch)&&""===k.path}class Ha{}class ya{constructor(z,k,W,ae,Ce,rt,on){this.injector=z,this.configLoader=k,this.rootComponentType=W,this.config=ae,this.urlTree=Ce,this.paramsInheritanceStrategy=rt,this.urlSerializer=on,this.applyRedirects=new hs(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(z){return new $.wOt(4002,`'${z.segmentGroup}'`)}recognize(){const z=Bo(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(z).pipe((0,Pt.T)(k=>{const W=new ua([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Ct,this.rootComponentType,null,{}),ae=new jn(W,k),Ce=new ys("",ae),rt=function hi(O,z,k=null,W=null){return rs(er(O),z,k,W)}(W,[],this.urlTree.queryParams,this.urlTree.fragment);return rt.queryParams=this.urlTree.queryParams,Ce.url=this.urlSerializer.serialize(rt),this.inheritParamsAndData(Ce._root,null),{state:Ce,tree:rt}}))}match(z){return this.processSegmentGroup(this.injector,this.config,z,Ct).pipe((0,me.W)(W=>{if(W instanceof yo)return this.urlTree=W.urlTree,this.match(W.urlTree.root);throw W instanceof ga?this.noMatchError(W):W}))}inheritParamsAndData(z,k){const W=z.value,ae=xs(W,k,this.paramsInheritanceStrategy);W.params=Object.freeze(ae.params),W.data=Object.freeze(ae.data),z.children.forEach(Ce=>this.inheritParamsAndData(Ce,W))}processSegmentGroup(z,k,W,ae){return 0===W.segments.length&&W.hasChildren()?this.processChildren(z,k,W):this.processSegment(z,k,W,W.segments,ae,!0).pipe((0,Pt.T)(Ce=>Ce instanceof jn?[Ce]:[]))}processChildren(z,k,W){const ae=[];for(const Ce of Object.keys(W.children))"primary"===Ce?ae.unshift(Ce):ae.push(Ce);return(0,H.H)(ae).pipe((0,Ze.H)(Ce=>{const rt=W.children[Ce],on=function Ns(O,z){const k=O.filter(W=>mo(W)===z);return k.push(...O.filter(W=>mo(W)!==z)),k}(k,Ce);return this.processSegmentGroup(z,on,rt,Ce)}),(0,ve.S)((Ce,rt)=>(Ce.push(...rt),Ce)),(0,At.U)(null),function ye(O,z){const k=arguments.length>=2;return W=>W.pipe(O?(0,Ke.p)((ae,Ce)=>O(ae,Ce,W)):$t.D,Yt(1),k?(0,At.U)(z):(0,an.v)(()=>new Ne.G))}(),(0,Qe.Z)(Ce=>{if(null===Ce)return vo(W);const rt=Oc(Ce);return function Ou(O){O.sort((z,k)=>z.value.outlet===Ct?-1:k.value.outlet===Ct?1:z.value.outlet.localeCompare(k.value.outlet))}(rt),(0,Ee.of)(rt)}))}processSegment(z,k,W,ae,Ce,rt){return(0,H.H)(k).pipe((0,Ze.H)(on=>this.processSegmentAgainstRoute(on._injector??z,k,on,W,ae,Ce,rt).pipe((0,me.W)(Qt=>{if(Qt instanceof ga)return(0,Ee.of)(null);throw Qt}))),(0,ct.$)(on=>!!on),(0,me.W)(on=>{if(Uo(on))return function Po(O,z,k){return 0===z.length&&!O.children[k]}(W,ae,Ce)?(0,Ee.of)(new Ha):vo(W);throw on}))}processSegmentAgainstRoute(z,k,W,ae,Ce,rt,on){return function Ro(O,z,k,W){return!!(mo(O)===W||W!==Ct&&zi(z,k,O))&&Ui(z,O,k).matched}(W,ae,Ce,rt)?void 0===W.redirectTo?this.matchSegmentAgainstRoute(z,ae,W,Ce,rt):this.allowRedirects&&on?this.expandSegmentAgainstRouteUsingRedirect(z,ae,k,W,Ce,rt):vo(ae):vo(ae)}expandSegmentAgainstRouteUsingRedirect(z,k,W,ae,Ce,rt){const{matched:on,consumedSegments:Qt,positionalParamSegments:pr,remainingSegments:li}=Ui(k,ae,Ce);if(!on)return vo(k);ae.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>31&&(this.allowRedirects=!1));const pi=this.applyRedirects.applyRedirectCommands(Qt,ae.redirectTo,pr);return this.applyRedirects.lineralizeSegments(ae,pi).pipe((0,Qe.Z)(Yi=>this.processSegment(z,W,k,Yi.concat(li),rt,!1)))}matchSegmentAgainstRoute(z,k,W,ae,Ce){const rt=ri(k,W,ae,z);return"**"===W.path&&(k.children={}),rt.pipe((0,hn.n)(on=>on.matched?this.getChildConfig(z=W._injector??z,W,ae).pipe((0,hn.n)(({routes:Qt})=>{const pr=W._loadedInjector??z,{consumedSegments:li,remainingSegments:pi,parameters:Yi}=on,Sl=new ua(li,Yi,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,function ac(O){return O.data||{}}(W),mo(W),W.component??W._loadedComponent??null,W,function va(O){return O.resolve||{}}(W)),{segmentGroup:Gl,slicedSegments:ql}=Bo(k,li,pi,Qt);if(0===ql.length&&Gl.hasChildren())return this.processChildren(pr,Qt,Gl).pipe((0,Pt.T)(qa=>null===qa?null:new jn(Sl,qa)));if(0===Qt.length&&0===ql.length)return(0,Ee.of)(new jn(Sl,[]));const lu=mo(W)===Ce;return this.processSegment(pr,Qt,Gl,ql,lu?Ct:Ce,!0).pipe((0,Pt.T)(qa=>new jn(Sl,qa instanceof jn?[qa]:[])))})):vo(k)))}getChildConfig(z,k,W){return k.children?(0,Ee.of)({routes:k.children,injector:z}):k.loadChildren?void 0!==k._loadedRoutes?(0,Ee.of)({routes:k._loadedRoutes,injector:k._loadedInjector}):function co(O,z,k,W){const ae=z.canLoad;if(void 0===ae||0===ae.length)return(0,Ee.of)(!0);const Ce=ae.map(rt=>{const on=go(rt,O);return $n(function ic(O){return O&&Vs(O.canLoad)}(on)?on.canLoad(z,k):(0,$.N4e)(O,()=>on(z,k)))});return(0,Ee.of)(Ce).pipe(ao(),Mc())}(z,k,W).pipe((0,Qe.Z)(ae=>ae?this.configLoader.loadChildren(z,k).pipe((0,Ge.M)(Ce=>{k._loadedRoutes=Ce.routes,k._loadedInjector=Ce.injector})):function Mu(O){return(0,He.$)(qo(!1,wr.GuardRejected))}())):(0,Ee.of)({routes:[],injector:z})}}function jo(O){const z=O.value.routeConfig;return z&&""===z.path}function Oc(O){const z=[],k=new Set;for(const W of O){if(!jo(W)){z.push(W);continue}const ae=z.find(Ce=>W.value.routeConfig===Ce.value.routeConfig);void 0!==ae?(ae.children.push(...W.children),k.add(ae)):z.push(W)}for(const W of k){const ae=Oc(W.children);z.push(new jn(W.value,ae))}return z.filter(W=>!k.has(W))}function sl(O){const z=O.children.map(k=>sl(k)).flat();return[O,...z]}function uc(O){return(0,hn.n)(z=>{const k=O(z);return k?(0,H.H)(k).pipe((0,Pt.T)(()=>z)):(0,Ee.of)(z)})}let Oi=(()=>{class O{buildTitle(k){let W,ae=k.root;for(;void 0!==ae;)W=this.getResolvedTitleForRoute(ae)??W,ae=ae.children.find(Ce=>Ce.outlet===Ct);return W}getResolvedTitleForRoute(k){return k.data[ln]}static{this.\u0275fac=function(W){return new(W||O)}}static{this.\u0275prov=$.jDH({token:O,factory:()=>(0,$.WQX)($o),providedIn:"root"})}}return O})(),$o=(()=>{class O extends Oi{constructor(k){super(),this.title=k}updateTitle(k){const W=this.buildTitle(k);void 0!==W&&this.title.setTitle(W)}static{this.\u0275fac=function(W){return new(W||O)($.KVO(ft.hE))}}static{this.\u0275prov=$.jDH({token:O,factory:O.\u0275fac,providedIn:"root"})}}return O})();const Jo=new $.nKC("",{providedIn:"root",factory:()=>({})}),dc=new $.nKC("");let su=(()=>{class O{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,$.WQX)($.Ql9)}loadComponent(k){if(this.componentLoaders.get(k))return this.componentLoaders.get(k);if(k._loadedComponent)return(0,Ee.of)(k._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(k);const W=$n(k.loadComponent()).pipe((0,Pt.T)(vd),(0,Ge.M)(Ce=>{this.onLoadEndListener&&this.onLoadEndListener(k),k._loadedComponent=Ce}),(0,Ht.j)(()=>{this.componentLoaders.delete(k)})),ae=new tt.G(W,()=>new Rt.B).pipe((0,et.B)());return this.componentLoaders.set(k,ae),ae}loadChildren(k,W){if(this.childrenLoaders.get(W))return this.childrenLoaders.get(W);if(W._loadedRoutes)return(0,Ee.of)({routes:W._loadedRoutes,injector:W._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(W);const Ce=function xc(O,z,k,W){return $n(O.loadChildren()).pipe((0,Pt.T)(vd),(0,Qe.Z)(ae=>ae instanceof $.Co$||Array.isArray(ae)?(0,Ee.of)(ae):(0,H.H)(z.compileModuleAsync(ae))),(0,Pt.T)(ae=>{W&&W(O);let Ce,rt,on=!1;return Array.isArray(ae)?(rt=ae,!0):(Ce=ae.create(k).injector,rt=Ce.get(dc,[],{optional:!0,self:!0}).flat()),{routes:rt.map(Do),injector:Ce}}))}(W,this.compiler,k,this.onLoadEndListener).pipe((0,Ht.j)(()=>{this.childrenLoaders.delete(W)})),rt=new tt.G(Ce,()=>new Rt.B).pipe((0,et.B)());return this.childrenLoaders.set(W,rt),rt}static{this.\u0275fac=function(W){return new(W||O)}}static{this.\u0275prov=$.jDH({token:O,factory:O.\u0275fac,providedIn:"root"})}}return O})();function vd(O){return function Al(O){return O&&"object"==typeof O&&"default"in O}(O)?O.default:O}let Ea=(()=>{class O{static{this.\u0275fac=function(W){return new(W||O)}}static{this.\u0275prov=$.jDH({token:O,factory:()=>(0,$.WQX)(Eo),providedIn:"root"})}}return O})(),Eo=(()=>{class O{shouldProcessUrl(k){return!0}extract(k){return k}merge(k,W){return k}static{this.\u0275fac=function(W){return new(W||O)}}static{this.\u0275prov=$.jDH({token:O,factory:O.\u0275fac,providedIn:"root"})}}return O})();const ea=new $.nKC(""),ta=new $.nKC("");function Nc(O,z,k){const W=O.get(ta),ae=O.get(Gt.qQ);return O.get($.SKi).runOutsideAngular(()=>{if(!ae.startViewTransition||W.skipNextTransition)return W.skipNextTransition=!1,new Promise(pr=>setTimeout(pr));let Ce;const rt=new Promise(pr=>{Ce=pr}),on=ae.startViewTransition(()=>(Ce(),function L(O){return new Promise(z=>{(0,$.mal)(z,{injector:O})})}(O))),{onViewTransitionCreated:Qt}=W;return Qt&&(0,$.N4e)(O,()=>Qt({transition:on,from:z,to:k})),rt})}let _e=(()=>{class O{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Rt.B,this.transitionAbortSubject=new Rt.B,this.configLoader=(0,$.WQX)(su),this.environmentInjector=(0,$.WQX)($.uvJ),this.urlSerializer=(0,$.WQX)(ir),this.rootContexts=(0,$.WQX)(he),this.location=(0,$.WQX)(Gt.aZ),this.inputBindingEnabled=null!==(0,$.WQX)(Ur,{optional:!0}),this.titleStrategy=(0,$.WQX)(Oi),this.options=(0,$.WQX)(Jo,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=(0,$.WQX)(Ea),this.createViewTransition=(0,$.WQX)(ea,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>(0,Ee.of)(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=ae=>this.events.next(new As(ae)),this.configLoader.onLoadStartListener=ae=>this.events.next(new oi(ae))}complete(){this.transitions?.complete()}handleNavigationRequest(k){const W=++this.navigationId;this.transitions?.next({...this.transitions.value,...k,id:W})}setupNavigations(k,W,ae){return this.transitions=new Fe.t({id:0,currentUrlTree:W,currentRawUrl:W,extractedUrl:this.urlHandlingStrategy.extract(W),urlAfterRedirects:this.urlHandlingStrategy.extract(W),rawUrl:W,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Sn,restoredState:null,currentSnapshot:ae.snapshot,targetSnapshot:null,currentRouterState:ae,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe((0,Ke.p)(Ce=>0!==Ce.id),(0,Pt.T)(Ce=>({...Ce,extractedUrl:this.urlHandlingStrategy.extract(Ce.rawUrl)})),(0,hn.n)(Ce=>{let rt=!1,on=!1;return(0,Ee.of)(Ce).pipe((0,hn.n)(Qt=>{if(this.navigationId>Ce.id)return this.cancelNavigationTransition(Ce,"",wr.SupersededByNewNavigation),ot.w;this.currentTransition=Ce,this.currentNavigation={id:Qt.id,initialUrl:Qt.rawUrl,extractedUrl:Qt.extractedUrl,trigger:Qt.source,extras:Qt.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null};const pr=!k.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl();if(!pr&&"reload"!==(Qt.extras.onSameUrlNavigation??k.onSameUrlNavigation)){const pi="";return this.events.next(new or(Qt.id,this.urlSerializer.serialize(Qt.rawUrl),pi,yn.IgnoredSameUrlNavigation)),Qt.resolve(null),ot.w}if(this.urlHandlingStrategy.shouldProcessUrl(Qt.rawUrl))return(0,Ee.of)(Qt).pipe((0,hn.n)(pi=>{const Yi=this.transitions?.getValue();return this.events.next(new Bn(pi.id,this.urlSerializer.serialize(pi.extractedUrl),pi.source,pi.restoredState)),Yi!==this.transitions?.getValue()?ot.w:Promise.resolve(pi)}),function Ma(O,z,k,W,ae,Ce){return(0,Qe.Z)(rt=>function il(O,z,k,W,ae,Ce,rt="emptyOnly"){return new ya(O,z,k,W,ae,rt,Ce).recognize()}(O,z,k,W,rt.extractedUrl,ae,Ce).pipe((0,Pt.T)(({state:on,tree:Qt})=>({...rt,targetSnapshot:on,urlAfterRedirects:Qt}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,k.config,this.urlSerializer,this.paramsInheritanceStrategy),(0,Ge.M)(pi=>{Ce.targetSnapshot=pi.targetSnapshot,Ce.urlAfterRedirects=pi.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:pi.urlAfterRedirects};const Yi=new _r(pi.id,this.urlSerializer.serialize(pi.extractedUrl),this.urlSerializer.serialize(pi.urlAfterRedirects),pi.targetSnapshot);this.events.next(Yi)}));if(pr&&this.urlHandlingStrategy.shouldProcessUrl(Qt.currentRawUrl)){const{id:pi,extractedUrl:Yi,source:Sl,restoredState:Gl,extras:ql}=Qt,lu=new Bn(pi,this.urlSerializer.serialize(Yi),Sl,Gl);this.events.next(lu);const qa=es(this.rootComponentType).snapshot;return this.currentTransition=Ce={...Qt,targetSnapshot:qa,urlAfterRedirects:Yi,extras:{...ql,skipLocationChange:!1,replaceUrl:!1}},this.currentNavigation.finalUrl=Yi,(0,Ee.of)(Ce)}{const pi="";return this.events.next(new or(Qt.id,this.urlSerializer.serialize(Qt.extractedUrl),pi,yn.IgnoredByUrlHandlingStrategy)),Qt.resolve(null),ot.w}}),(0,Ge.M)(Qt=>{const pr=new xn(Qt.id,this.urlSerializer.serialize(Qt.extractedUrl),this.urlSerializer.serialize(Qt.urlAfterRedirects),Qt.targetSnapshot);this.events.next(pr)}),(0,Pt.T)(Qt=>(this.currentTransition=Ce={...Qt,guards:pa(Qt.targetSnapshot,Qt.currentSnapshot,this.rootContexts)},Ce)),function Pc(O,z){return(0,Qe.Z)(k=>{const{targetSnapshot:W,currentSnapshot:ae,guards:{canActivateChecks:Ce,canDeactivateChecks:rt}}=k;return 0===rt.length&&0===Ce.length?(0,Ee.of)({...k,guardsResult:!0}):function no(O,z,k,W){return(0,H.H)(O).pipe((0,Qe.Z)(ae=>function Xo(O,z,k,W,ae){const Ce=z&&z.routeConfig?z.routeConfig.canDeactivate:null;if(!Ce||0===Ce.length)return(0,Ee.of)(!0);const rt=Ce.map(on=>{const Qt=ss(z)??ae,pr=go(on,Qt);return $n(function Wa(O){return O&&Vs(O.canDeactivate)}(pr)?pr.canDeactivate(O,z,k,W):(0,$.N4e)(Qt,()=>pr(O,z,k,W))).pipe((0,ct.$)())});return(0,Ee.of)(rt).pipe(ao())}(ae.component,ae.route,k,z,W)),(0,ct.$)(ae=>!0!==ae,!0))}(rt,W,ae,O).pipe((0,Qe.Z)(on=>on&&function vs(O){return"boolean"==typeof O}(on)?function Yo(O,z,k,W){return(0,H.H)(z).pipe((0,Ze.H)(ae=>(0,Pe.x)(function Tl(O,z){return null!==O&&z&&z(new qi(O)),(0,Ee.of)(!0)}(ae.route.parent,W),function Cs(O,z){return null!==O&&z&&z(new Zt(O)),(0,Ee.of)(!0)}(ae.route,W),function Qi(O,z,k){const W=z[z.length-1],Ce=z.slice(0,z.length-1).reverse().map(rt=>function oo(O){const z=O.routeConfig?O.routeConfig.canActivateChild:null;return z&&0!==z.length?{node:O,guards:z}:null}(rt)).filter(rt=>null!==rt).map(rt=>(0,K.v)(()=>{const on=rt.guards.map(Qt=>{const pr=ss(rt.node)??k,li=go(Qt,pr);return $n(function _o(O){return O&&Vs(O.canActivateChild)}(li)?li.canActivateChild(W,O):(0,$.N4e)(pr,()=>li(W,O))).pipe((0,ct.$)())});return(0,Ee.of)(on).pipe(ao())}));return(0,Ee.of)(Ce).pipe(ao())}(O,ae.path,k),function Vi(O,z,k){const W=z.routeConfig?z.routeConfig.canActivate:null;if(!W||0===W.length)return(0,Ee.of)(!0);const ae=W.map(Ce=>(0,K.v)(()=>{const rt=ss(z)??k,on=go(Ce,rt);return $n(function nl(O){return O&&Vs(O.canActivate)}(on)?on.canActivate(z,O):(0,$.N4e)(rt,()=>on(z,O))).pipe((0,ct.$)())}));return(0,Ee.of)(ae).pipe(ao())}(O,ae.route,k))),(0,ct.$)(ae=>!0!==ae,!0))}(W,Ce,O,z):(0,Ee.of)(on)),(0,Pt.T)(on=>({...k,guardsResult:on})))})}(this.environmentInjector,Qt=>this.events.next(Qt)),(0,Ge.M)(Qt=>{if(Ce.guardsResult=Qt.guardsResult,Lr(Qt.guardsResult))throw Cc(0,Qt.guardsResult);const pr=new Zr(Qt.id,this.urlSerializer.serialize(Qt.extractedUrl),this.urlSerializer.serialize(Qt.urlAfterRedirects),Qt.targetSnapshot,!!Qt.guardsResult);this.events.next(pr)}),(0,Ke.p)(Qt=>!!Qt.guardsResult||(this.cancelNavigationTransition(Qt,"",wr.GuardRejected),!1)),uc(Qt=>{if(Qt.guards.canActivateChecks.length)return(0,Ee.of)(Qt).pipe((0,Ge.M)(pr=>{const li=new Ri(pr.id,this.urlSerializer.serialize(pr.extractedUrl),this.urlSerializer.serialize(pr.urlAfterRedirects),pr.targetSnapshot);this.events.next(li)}),(0,hn.n)(pr=>{let li=!1;return(0,Ee.of)(pr).pipe(function cc(O,z){return(0,Qe.Z)(k=>{const{targetSnapshot:W,guards:{canActivateChecks:ae}}=k;if(!ae.length)return(0,Ee.of)(k);const Ce=new Set(ae.map(Qt=>Qt.route)),rt=new Set;for(const Qt of Ce)if(!rt.has(Qt))for(const pr of sl(Qt))rt.add(pr);let on=0;return(0,H.H)(rt).pipe((0,Ze.H)(Qt=>Ce.has(Qt)?function ol(O,z,k,W){const ae=O.routeConfig,Ce=O._resolve;return void 0!==ae?.title&&!So(ae)&&(Ce[ln]=ae.title),function lc(O,z,k,W){const ae=Jn(O);if(0===ae.length)return(0,Ee.of)({});const Ce={};return(0,H.H)(ae).pipe((0,Qe.Z)(rt=>function Wl(O,z,k,W){const ae=ss(z)??W,Ce=go(O,ae);return $n(Ce.resolve?Ce.resolve(z,k):(0,$.N4e)(ae,()=>Ce(z,k)))}(O[rt],z,k,W).pipe((0,ct.$)(),(0,Ge.M)(on=>{Ce[rt]=on}))),Yt(1),(0,Ye.u)(Ce),(0,me.W)(rt=>Uo(rt)?ot.w:(0,He.$)(rt)))}(Ce,O,z,W).pipe((0,Pt.T)(rt=>(O._resolvedData=rt,O.data=xs(O,O.parent,k).resolve,null)))}(Qt,W,O,z):(Qt.data=xs(Qt,Qt.parent,O).resolve,(0,Ee.of)(void 0))),(0,Ge.M)(()=>on++),Yt(1),(0,Qe.Z)(Qt=>on===rt.size?(0,Ee.of)(k):ot.w))})}(this.paramsInheritanceStrategy,this.environmentInjector),(0,Ge.M)({next:()=>li=!0,complete:()=>{li||this.cancelNavigationTransition(pr,"",wr.NoDataFromResolver)}}))}),(0,Ge.M)(pr=>{const li=new kr(pr.id,this.urlSerializer.serialize(pr.extractedUrl),this.urlSerializer.serialize(pr.urlAfterRedirects),pr.targetSnapshot);this.events.next(li)}))}),uc(Qt=>{const pr=li=>{const pi=[];li.routeConfig?.loadComponent&&!li.routeConfig._loadedComponent&&pi.push(this.configLoader.loadComponent(li.routeConfig).pipe((0,Ge.M)(Yi=>{li.component=Yi}),(0,Pt.T)(()=>{})));for(const Yi of li.children)pi.push(...pr(Yi));return pi};return(0,Le.z)(pr(Qt.targetSnapshot.root)).pipe((0,At.U)(null),(0,Et.s)(1))}),uc(()=>this.afterPreactivation()),(0,hn.n)(()=>{const{currentSnapshot:Qt,targetSnapshot:pr}=Ce,li=this.createViewTransition?.(this.environmentInjector,Qt.root,pr.root);return li?(0,H.H)(li).pipe((0,Pt.T)(()=>Ce)):(0,Ee.of)(Ce)}),(0,Pt.T)(Qt=>{const pr=function Ca(O,z,k){const W=Fo(O,z._root,k?k._root:void 0);return new Li(W,z)}(k.routeReuseStrategy,Qt.targetSnapshot,Qt.currentRouterState);return this.currentTransition=Ce={...Qt,targetRouterState:pr},this.currentNavigation.targetRouterState=pr,Ce}),(0,Ge.M)(()=>{this.events.next(new Kn)}),((O,z,k,W)=>(0,Pt.T)(ae=>(new Sa(z,ae.targetRouterState,ae.currentRouterState,k,W).activate(O),ae)))(this.rootContexts,k.routeReuseStrategy,Qt=>this.events.next(Qt),this.inputBindingEnabled),(0,Et.s)(1),(0,Ge.M)({next:Qt=>{rt=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new ti(Qt.id,this.urlSerializer.serialize(Qt.extractedUrl),this.urlSerializer.serialize(Qt.urlAfterRedirects))),this.titleStrategy?.updateTitle(Qt.targetRouterState.snapshot),Qt.resolve(!0)},complete:()=>{rt=!0}}),(0,gt.Q)(this.transitionAbortSubject.pipe((0,Ge.M)(Qt=>{throw Qt}))),(0,Ht.j)(()=>{!rt&&!on&&this.cancelNavigationTransition(Ce,"",wr.SupersededByNewNavigation),this.currentTransition?.id===Ce.id&&(this.currentNavigation=null,this.currentTransition=null)}),(0,me.W)(Qt=>{if(on=!0,ha(Qt))this.events.next(new Dn(Ce.id,this.urlSerializer.serialize(Ce.extractedUrl),Qt.message,Qt.cancellationCode)),function ts(O){return ha(O)&&Lr(O.url)}(Qt)?this.events.next(new Rn(Qt.url)):Ce.resolve(!1);else{this.events.next(new gr(Ce.id,this.urlSerializer.serialize(Ce.extractedUrl),Qt,Ce.targetSnapshot??void 0));try{Ce.resolve(k.errorHandler(Qt))}catch(pr){this.options.resolveNavigationPromiseOnError?Ce.resolve(!1):Ce.reject(pr)}}return ot.w}))}))}cancelNavigationTransition(k,W,ae){const Ce=new Dn(k.id,this.urlSerializer.serialize(k.extractedUrl),W,ae);this.events.next(Ce),k.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}static{this.\u0275fac=function(W){return new(W||O)}}static{this.\u0275prov=$.jDH({token:O,factory:O.\u0275fac,providedIn:"root"})}}return O})();function X(O){return O!==Sn}let ue=(()=>{class O{static{this.\u0275fac=function(W){return new(W||O)}}static{this.\u0275prov=$.jDH({token:O,factory:()=>(0,$.WQX)(cn),providedIn:"root"})}}return O})();class qe{shouldDetach(z){return!1}store(z,k){}shouldAttach(z){return!1}retrieve(z){return null}shouldReuseRoute(z,k){return z.routeConfig===k.routeConfig}}let cn=(()=>{class O extends qe{static{this.\u0275fac=(()=>{let k;return function(ae){return(k||(k=$.xGo(O)))(ae||O)}})()}static{this.\u0275prov=$.jDH({token:O,factory:O.\u0275fac,providedIn:"root"})}}return O})(),Nn=(()=>{class O{static{this.\u0275fac=function(W){return new(W||O)}}static{this.\u0275prov=$.jDH({token:O,factory:()=>(0,$.WQX)(cr),providedIn:"root"})}}return O})(),cr=(()=>{class O extends Nn{constructor(){super(...arguments),this.location=(0,$.WQX)(Gt.aZ),this.urlSerializer=(0,$.WQX)(ir),this.options=(0,$.WQX)(Jo,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=(0,$.WQX)(Ea),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Ut,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=es(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(k){return this.location.subscribe(W=>{"popstate"===W.type&&k(W.url,W.state)})}handleRouterEvent(k,W){if(k instanceof Bn)this.stateMemento=this.createStateMemento();else if(k instanceof or)this.rawUrlTree=W.initialUrl;else if(k instanceof _r){if("eager"===this.urlUpdateStrategy&&!W.extras.skipLocationChange){const ae=this.urlHandlingStrategy.merge(W.finalUrl,W.initialUrl);this.setBrowserUrl(ae,W)}}else k instanceof Kn?(this.currentUrlTree=W.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(W.finalUrl,W.initialUrl),this.routerState=W.targetRouterState,"deferred"===this.urlUpdateStrategy&&(W.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,W))):k instanceof Dn&&(k.code===wr.GuardRejected||k.code===wr.NoDataFromResolver)?this.restoreHistory(W):k instanceof gr?this.restoreHistory(W,!0):k instanceof ti&&(this.lastSuccessfulId=k.id,this.currentPageId=this.browserPageId)}setBrowserUrl(k,W){const ae=this.urlSerializer.serialize(k);if(this.location.isCurrentPathEqualTo(ae)||W.extras.replaceUrl){const rt={...W.extras.state,...this.generateNgRouterState(W.id,this.browserPageId)};this.location.replaceState(ae,"",rt)}else{const Ce={...W.extras.state,...this.generateNgRouterState(W.id,this.browserPageId+1)};this.location.go(ae,"",Ce)}}restoreHistory(k,W=!1){if("computed"===this.canceledNavigationResolution){const Ce=this.currentPageId-this.browserPageId;0!==Ce?this.location.historyGo(Ce):this.currentUrlTree===k.finalUrl&&0===Ce&&(this.resetState(k),this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(W&&this.resetState(k),this.resetUrlToCurrentUrlTree())}resetState(k){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,k.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(k,W){return"computed"===this.canceledNavigationResolution?{navigationId:k,\u0275routerPageId:W}:{navigationId:k}}static{this.\u0275fac=(()=>{let k;return function(ae){return(k||(k=$.xGo(O)))(ae||O)}})()}static{this.\u0275prov=$.jDH({token:O,factory:O.\u0275fac,providedIn:"root"})}}return O})();var Fr=function(O){return O[O.COMPLETE=0]="COMPLETE",O[O.FAILED=1]="FAILED",O[O.REDIRECTING=2]="REDIRECTING",O}(Fr||{});function Bi(O,z){O.events.pipe((0,Ke.p)(k=>k instanceof ti||k instanceof Dn||k instanceof gr||k instanceof or),(0,Pt.T)(k=>k instanceof ti||k instanceof or?Fr.COMPLETE:k instanceof Dn&&(k.code===wr.Redirect||k.code===wr.SupersededByNewNavigation)?Fr.REDIRECTING:Fr.FAILED),(0,Ke.p)(k=>k!==Fr.REDIRECTING),(0,Et.s)(1)).subscribe(()=>{z()})}function os(O){throw O}const _i={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},ws={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Si=(()=>{class O{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=(0,$.WQX)($.H3F),this.stateManager=(0,$.WQX)(Nn),this.options=(0,$.WQX)(Jo,{optional:!0})||{},this.pendingTasks=(0,$.WQX)($.TgB),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=(0,$.WQX)(_e),this.urlSerializer=(0,$.WQX)(ir),this.location=(0,$.WQX)(Gt.aZ),this.urlHandlingStrategy=(0,$.WQX)(Ea),this._events=new Rt.B,this.errorHandler=this.options.errorHandler||os,this.navigated=!1,this.routeReuseStrategy=(0,$.WQX)(ue),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=(0,$.WQX)(dc,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!(0,$.WQX)(Ur,{optional:!0}),this.eventsSubscription=new Ft.yU,this.isNgZoneEnabled=(0,$.WQX)($.SKi)instanceof $.SKi&&$.SKi.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:k=>{this.console.warn(k)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const k=this.navigationTransitions.events.subscribe(W=>{try{const ae=this.navigationTransitions.currentTransition,Ce=this.navigationTransitions.currentNavigation;if(null!==ae&&null!==Ce)if(this.stateManager.handleRouterEvent(W,Ce),W instanceof Dn&&W.code!==wr.Redirect&&W.code!==wr.SupersededByNewNavigation)this.navigated=!0;else if(W instanceof ti)this.navigated=!0;else if(W instanceof Rn){const rt=this.urlHandlingStrategy.merge(W.url,ae.currentRawUrl),on={info:ae.extras.info,skipLocationChange:ae.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||X(ae.source)};this.scheduleNavigation(rt,Sn,null,on,{resolve:ae.resolve,reject:ae.reject,promise:ae.promise})}(function Ka(O){return!(O instanceof Kn||O instanceof Rn)})(W)&&this._events.next(W)}catch(ae){this.navigationTransitions.transitionAbortSubject.next(ae)}});this.eventsSubscription.add(k)}resetRootComponentType(k){this.routerState.root.component=k,this.navigationTransitions.rootComponentType=k}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Sn,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((k,W)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(k,"popstate",W)},0)})}navigateToSyncWithBrowser(k,W,ae){const Ce={replaceUrl:!0},rt=ae?.navigationId?ae:null;if(ae){const Qt={...ae};delete Qt.navigationId,delete Qt.\u0275routerPageId,0!==Object.keys(Qt).length&&(Ce.state=Qt)}const on=this.parseUrl(k);this.scheduleNavigation(on,W,rt,Ce)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(k){this.config=k.map(Do),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(k,W={}){const{relativeTo:ae,queryParams:Ce,fragment:rt,queryParamsHandling:on,preserveFragment:Qt}=W,pr=Qt?this.currentUrlTree.fragment:rt;let pi,li=null;switch(on){case"merge":li={...this.currentUrlTree.queryParams,...Ce};break;case"preserve":li=this.currentUrlTree.queryParams;break;default:li=Ce||null}null!==li&&(li=this.removeEmptyProps(li));try{pi=er(ae?ae.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof k[0]||!k[0].startsWith("/"))&&(k=[]),pi=this.currentUrlTree.root}return rs(pi,k,li,pr??null)}navigateByUrl(k,W={skipLocationChange:!1}){const ae=Lr(k)?k:this.parseUrl(k),Ce=this.urlHandlingStrategy.merge(ae,this.rawUrlTree);return this.scheduleNavigation(Ce,Sn,null,W)}navigate(k,W={skipLocationChange:!1}){return function Ws(O){for(let z=0;z<O.length;z++)if(null==O[z])throw new $.wOt(4008,!1)}(k),this.navigateByUrl(this.createUrlTree(k,W),W)}serializeUrl(k){return this.urlSerializer.serialize(k)}parseUrl(k){try{return this.urlSerializer.parse(k)}catch{return this.urlSerializer.parse("/")}}isActive(k,W){let ae;if(ae=!0===W?{..._i}:!1===W?{...ws}:W,Lr(k))return st(this.currentUrlTree,k,ae);const Ce=this.parseUrl(k);return st(this.currentUrlTree,Ce,ae)}removeEmptyProps(k){return Object.entries(k).reduce((W,[ae,Ce])=>(null!=Ce&&(W[ae]=Ce),W),{})}scheduleNavigation(k,W,ae,Ce,rt){if(this.disposed)return Promise.resolve(!1);let on,Qt,pr;rt?(on=rt.resolve,Qt=rt.reject,pr=rt.promise):pr=new Promise((pi,Yi)=>{on=pi,Qt=Yi});const li=this.pendingTasks.add();return Bi(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(li))}),this.navigationTransitions.handleNavigationRequest({source:W,restoredState:ae,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:k,extras:Ce,resolve:on,reject:Qt,promise:pr,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),pr.catch(pi=>Promise.reject(pi))}static{this.\u0275fac=function(W){return new(W||O)}}static{this.\u0275prov=$.jDH({token:O,factory:O.\u0275fac,providedIn:"root"})}}return O})(),xi=(()=>{class O{constructor(k,W,ae,Ce,rt,on){this.router=k,this.route=W,this.tabIndexAttribute=ae,this.renderer=Ce,this.el=rt,this.locationStrategy=on,this.href=null,this.commands=null,this.onChanges=new Rt.B,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;const Qt=rt.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===Qt||"area"===Qt,this.isAnchorElement?this.subscription=k.events.subscribe(pr=>{pr instanceof ti&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(k){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",k)}ngOnChanges(k){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(k){null!=k?(this.commands=Array.isArray(k)?k:[k],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(k,W,ae,Ce,rt){const on=this.urlTree;return!!(null===on||this.isAnchorElement&&(0!==k||W||ae||Ce||rt||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(on,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){const k=this.urlTree;this.href=null!==k&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(k)):null;const W=null===this.href?null:(0,$.n$t)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",W)}applyAttributeValue(k,W){const ae=this.renderer,Ce=this.el.nativeElement;null!==W?ae.setAttribute(Ce,k,W):ae.removeAttribute(Ce,k)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static{this.\u0275fac=function(W){return new(W||O)($.rXU(Si),$.rXU(is),$.kS0("tabindex"),$.rXU($.sFG),$.rXU($.aKT),$.rXU(Gt.hb))}}static{this.\u0275dir=$.FsC({type:O,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(W,ae){1&W&&$.bIt("click",function(rt){return ae.onClick(rt.button,rt.ctrlKey,rt.shiftKey,rt.altKey,rt.metaKey)}),2&W&&$.BMQ("target",ae.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[$.Mj6.HasDecoratorInputTransform,"preserveFragment","preserveFragment",$.L39],skipLocationChange:[$.Mj6.HasDecoratorInputTransform,"skipLocationChange","skipLocationChange",$.L39],replaceUrl:[$.Mj6.HasDecoratorInputTransform,"replaceUrl","replaceUrl",$.L39],routerLink:"routerLink"},standalone:!0,features:[$.GFd,$.OA$]})}}return O})(),Gn=(()=>{class O{get isActive(){return this._isActive}constructor(k,W,ae,Ce,rt){this.router=k,this.element=W,this.renderer=ae,this.cdr=Ce,this.link=rt,this.classes=[],this._isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new $.bkB,this.routerEventsSubscription=k.events.subscribe(on=>{on instanceof ti&&this.update()})}ngAfterContentInit(){(0,Ee.of)(this.links.changes,(0,Ee.of)(null)).pipe((0,Mt.U)()).subscribe(k=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();const k=[...this.links.toArray(),this.link].filter(W=>!!W).map(W=>W.onChanges);this.linkInputChangesSubscription=(0,H.H)(k).pipe((0,Mt.U)()).subscribe(W=>{this._isActive!==this.isLinkActive(this.router)(W)&&this.update()})}set routerLinkActive(k){const W=Array.isArray(k)?k:k.split(" ");this.classes=W.filter(ae=>!!ae)}ngOnChanges(k){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{const k=this.hasActiveLinks();this.classes.forEach(W=>{k?this.renderer.addClass(this.element.nativeElement,W):this.renderer.removeClass(this.element.nativeElement,W)}),k&&void 0!==this.ariaCurrentWhenActive?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this._isActive!==k&&(this._isActive=k,this.cdr.markForCheck(),this.isActiveChange.emit(k))})}isLinkActive(k){const W=function Er(O){return!!O.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return ae=>{const Ce=ae.urlTree;return!!Ce&&k.isActive(Ce,W)}}hasActiveLinks(){const k=this.isLinkActive(this.router);return this.link&&k(this.link)||this.links.some(k)}static{this.\u0275fac=function(W){return new(W||O)($.rXU(Si),$.rXU($.aKT),$.rXU($.sFG),$.rXU($.gRc),$.rXU(xi,8))}}static{this.\u0275dir=$.FsC({type:O,selectors:[["","routerLinkActive",""]],contentQueries:function(W,ae,Ce){if(1&W&&$.wni(Ce,xi,5),2&W){let rt;$.mGM(rt=$.lsd())&&(ae.links=rt)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[$.OA$]})}}return O})();class Ti{}let bo=(()=>{class O{constructor(k,W,ae,Ce,rt){this.router=k,this.injector=ae,this.preloadingStrategy=Ce,this.loader=rt}setUpPreloading(){this.subscription=this.router.events.pipe((0,Ke.p)(k=>k instanceof ti),(0,Ze.H)(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(k,W){const ae=[];for(const Ce of W){Ce.providers&&!Ce._injector&&(Ce._injector=(0,$.Ol2)(Ce.providers,k,`Route: ${Ce.path}`));const rt=Ce._injector??k,on=Ce._loadedInjector??rt;(Ce.loadChildren&&!Ce._loadedRoutes&&void 0===Ce.canLoad||Ce.loadComponent&&!Ce._loadedComponent)&&ae.push(this.preloadConfig(rt,Ce)),(Ce.children||Ce._loadedRoutes)&&ae.push(this.processRoutes(on,Ce.children??Ce._loadedRoutes))}return(0,H.H)(ae).pipe((0,Mt.U)())}preloadConfig(k,W){return this.preloadingStrategy.preload(W,()=>{let ae;ae=W.loadChildren&&void 0===W.canLoad?this.loader.loadChildren(k,W):(0,Ee.of)(null);const Ce=ae.pipe((0,Qe.Z)(rt=>null===rt?(0,Ee.of)(void 0):(W._loadedRoutes=rt.routes,W._loadedInjector=rt.injector,this.processRoutes(rt.injector??k,rt.routes))));if(W.loadComponent&&!W._loadedComponent){const rt=this.loader.loadComponent(W);return(0,H.H)([Ce,rt]).pipe((0,Mt.U)())}return Ce})}static{this.\u0275fac=function(W){return new(W||O)($.KVO(Si),$.KVO($.Ql9),$.KVO($.uvJ),$.KVO(Ti),$.KVO(su))}}static{this.\u0275prov=$.jDH({token:O,factory:O.\u0275fac,providedIn:"root"})}}return O})();const wl=new $.nKC("");let Es=(()=>{class O{constructor(k,W,ae,Ce,rt={}){this.urlSerializer=k,this.transitions=W,this.viewportScroller=ae,this.zone=Ce,this.options=rt,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},this.environmentInjector=(0,$.WQX)($.uvJ),rt.scrollPositionRestoration||="disabled",rt.anchorScrolling||="disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(k=>{k instanceof Bn?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=k.navigationTrigger,this.restoredId=k.restoredState?k.restoredState.navigationId:0):k instanceof ti?(this.lastId=k.id,this.scheduleScrollEvent(k,this.urlSerializer.parse(k.urlAfterRedirects).fragment)):k instanceof or&&k.code===yn.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(k,this.urlSerializer.parse(k.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(k=>{k instanceof Kt&&(k.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(k.position):k.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(k.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(k,W){var ae=this;this.zone.runOutsideAngular((0,b.A)(function*(){yield new Promise(Ce=>{setTimeout(()=>{Ce()}),(0,$.mal)(()=>{Ce()},{injector:ae.environmentInjector})}),ae.zone.run(()=>{ae.transitions.events.next(new Kt(k,"popstate"===ae.lastSource?ae.store[ae.restoredId]:null,W))})}))}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static{this.\u0275fac=function(W){$.QTQ()}}static{this.\u0275prov=$.jDH({token:O,factory:O.\u0275fac})}}return O})();function zs(O,...z){return(0,$.EmA)([{provide:dc,multi:!0,useValue:O},[],{provide:is,useFactory:na,deps:[Si]},{provide:$.iLQ,multi:!0,useFactory:Ga},z.map(k=>k.\u0275providers)])}function na(O){return O.routerState.root}function jr(O,z){return{\u0275kind:O,\u0275providers:z}}function Ga(){const O=(0,$.WQX)($.zZn);return z=>{const k=O.get($.o8S);if(z!==k.components[0])return;const W=O.get(Si),ae=O.get(Hl);1===O.get(Lc)&&W.initialNavigation(),O.get(au,null,$.$GK.Optional)?.setUpPreloading(),O.get(wl,null,$.$GK.Optional)?.init(),W.resetRootComponentType(k.componentTypes[0]),ae.closed||(ae.next(),ae.complete(),ae.unsubscribe())}}const Hl=new $.nKC("",{factory:()=>new Rt.B}),Lc=new $.nKC("",{providedIn:"root",factory:()=>1}),au=new $.nKC("");function Oa(O){return jr(0,[{provide:au,useExisting:bo},{provide:Ti,useExisting:O}])}function ba(O){return jr(9,[{provide:ea,useValue:Nc},{provide:ta,useValue:{skipNextTransition:!!O?.skipInitialTransition,...O}}])}const ps=new $.nKC("ROUTER_FORROOT_GUARD"),Ed=[Gt.aZ,{provide:ir,useClass:yr},Si,he,{provide:is,useFactory:na,deps:[Si]},su,[]];let xo=(()=>{class O{constructor(k){}static forRoot(k,W){return{ngModule:O,providers:[Ed,[],{provide:dc,multi:!0,useValue:k},{provide:ps,useFactory:Fc,deps:[[Si,new $.Xx1,new $.kdw]]},{provide:Jo,useValue:W||{}},W?.useHash?{provide:Gt.hb,useClass:Gt.fw}:{provide:Gt.hb,useClass:Gt.Sm},{provide:wl,useFactory:()=>{const O=(0,$.WQX)(Gt.Xr),z=(0,$.WQX)($.SKi),k=(0,$.WQX)(Jo),W=(0,$.WQX)(_e),ae=(0,$.WQX)(ir);return k.scrollOffset&&O.setOffset(k.scrollOffset),new Es(ae,W,O,z,k)}},W?.preloadingStrategy?Oa(W.preloadingStrategy).\u0275providers:[],W?.initialNavigation?ms(W):[],W?.bindToComponentInputs?jr(8,[Go,{provide:Ur,useExisting:Go}]).\u0275providers:[],W?.enableViewTransitions?ba().\u0275providers:[],[{provide:Na,useFactory:Ga},{provide:$.iLQ,multi:!0,useExisting:Na}]]}}static forChild(k){return{ngModule:O,providers:[{provide:dc,multi:!0,useValue:k}]}}static{this.\u0275fac=function(W){return new(W||O)($.KVO(ps,8))}}static{this.\u0275mod=$.$C({type:O})}static{this.\u0275inj=$.G2t({})}}return O})();function Fc(O){return"guarded"}function ms(O){return["disabled"===O.initialNavigation?jr(3,[{provide:$.hnV,multi:!0,useFactory:()=>{const z=(0,$.WQX)(Si);return()=>{z.setUpLocationChangeListener()}}},{provide:Lc,useValue:2}]).\u0275providers:[],"enabledBlocking"===O.initialNavigation?jr(2,[{provide:Lc,useValue:0},{provide:$.hnV,multi:!0,deps:[$.zZn],useFactory:z=>{const k=z.get(Gt.hj,Promise.resolve());return()=>k.then(()=>new Promise(W=>{const ae=z.get(Si),Ce=z.get(Hl);Bi(ae,()=>{W(!0)}),z.get(_e).afterPreactivation=()=>(W(!0),Ce.closed?(0,Ee.of)(void 0):Ce),ae.initialNavigation()}))}}]).\u0275providers:[]]}const Na=new $.nKC("")},3345:(Cn,nt,x)=>{x.d(nt,{A:()=>Rt});var b=x(1076),$=x(1362),q=x(8742),H=x(8041);class Ee{constructor(Gt,Pt){this._delegate=Gt,this.firebase=Pt,(0,q._addComponent)(Gt,new $.uA("app-compat",()=>this,"PUBLIC")),this.container=Gt.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Gt){this._delegate.automaticDataCollectionEnabled=Gt}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Gt=>{this._delegate.checkDestroyed(),Gt()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,q.deleteApp)(this._delegate)))}_getService(Gt,Pt=q._DEFAULT_ENTRY_NAME){var hn;this._delegate.checkDestroyed();const Et=this._delegate.container.getProvider(Gt);return!Et.isInitialized()&&"EXPLICIT"===(null===(hn=Et.getComponent())||void 0===hn?void 0:hn.instantiationMode)&&Et.initialize(),Et.getImmediate({identifier:Pt})}_removeServiceInstance(Gt,Pt=q._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Gt).clearInstance(Pt)}_addComponent(Gt){(0,q._addComponent)(this._delegate,Gt)}_addOrOverwriteComponent(Gt){(0,q._addOrOverwriteComponent)(this._delegate,Gt)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Le=new b.FA("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),K=function Pe(){const Ft=function Ne(Ft){const Gt={},Pt={__esModule:!0,initializeApp:function kt(Ze,Ge={}){const me=q.initializeApp(Ze,Ge);if((0,b.gR)(Gt,me.name))return Gt[me.name];const ve=new Ft(me,Pt);return Gt[me.name]=ve,ve},app:Et,registerVersion:q.registerVersion,setLogLevel:q.setLogLevel,onLog:q.onLog,apps:null,SDK_VERSION:q.SDK_VERSION,INTERNAL:{registerComponent:function Qe(Ze){const Ge=Ze.name,me=Ge.replace("-compat","");if(q._registerComponent(Ze)&&"PUBLIC"===Ze.type){const ve=(At=Et())=>{if("function"!=typeof At[me])throw Le.create("invalid-app-argument",{appName:Ge});return At[me]()};void 0!==Ze.serviceProps&&(0,b.zw)(ve,Ze.serviceProps),Pt[me]=ve,Ft.prototype[me]=function(...At){return this._getService.bind(this,Ge).apply(this,Ze.multipleInstances?At:[])}}return"PUBLIC"===Ze.type?Pt[me]:null},removeApp:function hn(Ze){delete Gt[Ze]},useAsService:function ct(Ze,Ge){return"serverAuth"===Ge?null:Ge},modularAPIs:q}};function Et(Ze){if(!(0,b.gR)(Gt,Ze=Ze||q._DEFAULT_ENTRY_NAME))throw Le.create("no-app",{appName:Ze});return Gt[Ze]}return Pt.default=Pt,Object.defineProperty(Pt,"apps",{get:function Ke(){return Object.keys(Gt).map(Ze=>Gt[Ze])}}),Et.App=Ft,Pt}(Ee);return Ft.INTERNAL=Object.assign(Object.assign({},Ft.INTERNAL),{createFirebaseNamespace:Pe,extendNamespace:function Gt(Pt){(0,b.zw)(Ft,Pt)},createSubscribe:b.tD,ErrorFactory:b.FA,deepExtend:b.zw}),Ft}(),Ae=new H.Vy("@firebase/app-compat");try{const Ft=(0,b.mS)();if(void 0!==Ft.firebase){Ae.warn("\n      Warning: Firebase is already defined in the global scope. Please make sure\n      Firebase library is only loaded once.\n    ");const Gt=Ft.firebase.SDK_VERSION;Gt&&Gt.indexOf("LITE")>=0&&Ae.warn("\n        Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n        ")}}catch{}const Rt=K;!function tt(Ft){(0,q.registerVersion)("@firebase/app-compat","0.2.43",Ft)}()},8742:(Cn,nt,x)=>{x.r(nt),x.d(nt,{FirebaseError:()=>H.g,SDK_VERSION:()=>st,_DEFAULT_ENTRY_NAME:()=>et,_addComponent:()=>ln,_addOrOverwriteComponent:()=>nr,_apps:()=>Mt,_clearComponents:()=>Rr,_components:()=>Ct,_getProvider:()=>Cr,_isFirebaseApp:()=>fr,_isFirebaseServerApp:()=>Jn,_registerComponent:()=>hr,_removeServiceInstance:()=>sr,_serverApps:()=>ft,deleteApp:()=>fn,getApp:()=>je,getApps:()=>rn,initializeApp:()=>De,initializeServerApp:()=>Xe,onLog:()=>wt,registerVersion:()=>Ut,setLogLevel:()=>$e});var b=x(4523),$=x(1362),q=x(8041),H=x(1076),Ee=x(6749);class Fe{constructor(oe){this.container=oe}getPlatformInfoString(){return this.container.getProviders().map(ee=>{if(function Le(Q){const oe=Q.getComponent();return"VERSION"===oe?.type}(ee)){const pe=ee.getImmediate();return`${pe.library}/${pe.version}`}return null}).filter(ee=>ee).join(" ")}}const Ne="@firebase/app",Pe="0.10.13",K=new q.Vy("@firebase/app"),et="[DEFAULT]",gt={[Ne]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/data-connect":"fire-data-connect","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","@firebase/vertexai-preview":"fire-vertex","fire-js":"fire-js",firebase:"fire-js-all"},Mt=new Map,ft=new Map,Ct=new Map;function ln(Q,oe){try{Q.container.addComponent(oe)}catch(ee){K.debug(`Component ${oe.name} failed to register with FirebaseApp ${Q.name}`,ee)}}function nr(Q,oe){Q.container.addOrOverwriteComponent(oe)}function hr(Q){const oe=Q.name;if(Ct.has(oe))return K.debug(`There were multiple attempts to register component ${oe}.`),!1;Ct.set(oe,Q);for(const ee of Mt.values())ln(ee,Q);for(const ee of ft.values())ln(ee,Q);return!0}function Cr(Q,oe){const ee=Q.container.getProvider("heartbeat").getImmediate({optional:!0});return ee&&ee.triggerHeartbeat(),Q.container.getProvider(oe)}function sr(Q,oe,ee=et){Cr(Q,oe).clearInstance(ee)}function fr(Q){return void 0!==Q.options}function Jn(Q){return void 0!==Q.settings}function Rr(){Ct.clear()}const $n=new H.FA("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class qn{constructor(oe,ee,pe){this._isDeleted=!1,this._options=Object.assign({},oe),this._config=Object.assign({},ee),this._name=ee.name,this._automaticDataCollectionEnabled=ee.automaticDataCollectionEnabled,this._container=pe,this.container.addComponent(new $.uA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(oe){this.checkDestroyed(),this._automaticDataCollectionEnabled=oe}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(oe){this._isDeleted=oe}checkDestroyed(){if(this.isDeleted)throw $n.create("app-deleted",{appName:this._name})}}class gi extends qn{constructor(oe,ee,pe,Oe){const Tt=void 0!==ee.automaticDataCollectionEnabled&&ee.automaticDataCollectionEnabled,lt={name:pe,automaticDataCollectionEnabled:Tt};super(void 0!==oe.apiKey?oe:oe.options,lt,Oe),this._serverConfig=Object.assign({automaticDataCollectionEnabled:Tt},ee),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,ee.releaseOnDeref=void 0,Ut(Ne,Pe,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(oe){this.isDeleted||(this._refCount++,void 0!==oe&&null!==this._finalizationRegistry&&this._finalizationRegistry.register(oe,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){fn(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw $n.create("server-app-deleted")}}const st="10.14.1";function De(Q,oe={}){let ee=Q;"object"!=typeof oe&&(oe={name:oe});const pe=Object.assign({name:et,automaticDataCollectionEnabled:!1},oe),Oe=pe.name;if("string"!=typeof Oe||!Oe)throw $n.create("bad-app-name",{appName:String(Oe)});if(ee||(ee=(0,H.T9)()),!ee)throw $n.create("no-options");const Tt=Mt.get(Oe);if(Tt){if((0,H.bD)(ee,Tt.options)&&(0,H.bD)(pe,Tt.config))return Tt;throw $n.create("duplicate-app",{appName:Oe})}const lt=new $.h1(Oe);for(const Yn of Ct.values())lt.addComponent(Yn);const On=new qn(ee,pe,lt);return Mt.set(Oe,On),On}function Xe(Q,oe){if((0,H.Bd)()&&!(0,H.p7)())throw $n.create("invalid-server-app-environment");let ee;void 0===oe.automaticDataCollectionEnabled&&(oe.automaticDataCollectionEnabled=!1),ee=fr(Q)?Q.options:Q;const pe=Object.assign(Object.assign({},oe),ee);if(void 0!==pe.releaseOnDeref&&delete pe.releaseOnDeref,void 0!==oe.releaseOnDeref&&typeof FinalizationRegistry>"u")throw $n.create("finalization-registry-not-supported",{});const Tt=""+(wi=JSON.stringify(pe),[...wi].reduce((bi,Lr)=>Math.imul(31,bi)+Lr.charCodeAt(0)|0,0)),lt=ft.get(Tt);var wi;if(lt)return lt.incRefCount(oe.releaseOnDeref),lt;const On=new $.h1(Tt);for(const wi of Ct.values())On.addComponent(wi);const Yn=new gi(ee,oe,Tt,On);return ft.set(Tt,Yn),Yn}function je(Q=et){const oe=Mt.get(Q);if(!oe&&Q===et&&(0,H.T9)())return De();if(!oe)throw $n.create("no-app",{appName:Q});return oe}function rn(){return Array.from(Mt.values())}function fn(Q){return mn.apply(this,arguments)}function mn(){return(mn=(0,b.A)(function*(Q){let oe=!1;const ee=Q.name;Mt.has(ee)?(oe=!0,Mt.delete(ee)):ft.has(ee)&&Q.decRefCount()<=0&&(ft.delete(ee),oe=!0),oe&&(yield Promise.all(Q.container.getProviders().map(pe=>pe.delete())),Q.isDeleted=!0)})).apply(this,arguments)}function Ut(Q,oe,ee){var pe;let Oe=null!==(pe=gt[Q])&&void 0!==pe?pe:Q;ee&&(Oe+=`-${ee}`);const Tt=Oe.match(/\s|\//),lt=oe.match(/\s|\//);if(Tt||lt){const On=[`Unable to register library "${Oe}" with version "${oe}":`];return Tt&&On.push(`library name "${Oe}" contains illegal characters (whitespace or "/")`),Tt&&lt&&On.push("and"),lt&&On.push(`version name "${oe}" contains illegal characters (whitespace or "/")`),void K.warn(On.join(" "))}hr(new $.uA(`${Oe}-version`,()=>({library:Oe,version:oe}),"VERSION"))}function wt(Q,oe){if(null!==Q&&"function"!=typeof Q)throw $n.create("invalid-log-argument");(0,q.Ey)(Q,oe)}function $e(Q){(0,q.He)(Q)}const _t="firebase-heartbeat-database",gn=1,An="firebase-heartbeat-store";let ir=null;function yr(){return ir||(ir=(0,Ee.P2)(_t,gn,{upgrade:(Q,oe)=>{if(0===oe)try{Q.createObjectStore(An)}catch(ee){console.warn(ee)}}}).catch(Q=>{throw $n.create("idb-open",{originalErrorMessage:Q.message})})),ir}function mr(){return(mr=(0,b.A)(function*(Q){try{const ee=(yield yr()).transaction(An),pe=yield ee.objectStore(An).get(xt(Q));return yield ee.done,pe}catch(oe){if(oe instanceof H.g)K.warn(oe.message);else{const ee=$n.create("idb-get",{originalErrorMessage:oe?.message});K.warn(ee.message)}}})).apply(this,arguments)}function Yr(Q,oe){return Nr.apply(this,arguments)}function Nr(){return(Nr=(0,b.A)(function*(Q,oe){try{const pe=(yield yr()).transaction(An,"readwrite");yield pe.objectStore(An).put(oe,xt(Q)),yield pe.done}catch(ee){if(ee instanceof H.g)K.warn(ee.message);else{const pe=$n.create("idb-set",{originalErrorMessage:ee?.message});K.warn(pe.message)}}})).apply(this,arguments)}function xt(Q){return`${Q.name}!${Q.options.appId}`}class yi{constructor(oe){this.container=oe,this._heartbeatsCache=null;const ee=this.container.getProvider("app").getImmediate();this._storage=new Te(ee),this._heartbeatsCachePromise=this._storage.read().then(pe=>(this._heartbeatsCache=pe,pe))}triggerHeartbeat(){var oe=this;return(0,b.A)(function*(){var ee,pe;try{const Tt=oe.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),lt=Xr();return null==(null===(ee=oe._heartbeatsCache)||void 0===ee?void 0:ee.heartbeats)&&(oe._heartbeatsCache=yield oe._heartbeatsCachePromise,null==(null===(pe=oe._heartbeatsCache)||void 0===pe?void 0:pe.heartbeats))||oe._heartbeatsCache.lastSentHeartbeatDate===lt||oe._heartbeatsCache.heartbeats.some(On=>On.date===lt)?void 0:(oe._heartbeatsCache.heartbeats.push({date:lt,agent:Tt}),oe._heartbeatsCache.heartbeats=oe._heartbeatsCache.heartbeats.filter(On=>{const Yn=new Date(On.date).valueOf();return Date.now()-Yn<=2592e6}),oe._storage.overwrite(oe._heartbeatsCache))}catch(Oe){K.warn(Oe)}})()}getHeartbeatsHeader(){var oe=this;return(0,b.A)(function*(){var ee;try{if(null===oe._heartbeatsCache&&(yield oe._heartbeatsCachePromise),null==(null===(ee=oe._heartbeatsCache)||void 0===ee?void 0:ee.heartbeats)||0===oe._heartbeatsCache.heartbeats.length)return"";const pe=Xr(),{heartbeatsToSend:Oe,unsentEntries:Tt}=function pn(Q,oe=1024){const ee=[];let pe=Q.slice();for(const Oe of Q){const Tt=ee.find(lt=>lt.agent===Oe.agent);if(Tt){if(Tt.dates.push(Oe.date),ne(ee)>oe){Tt.dates.pop();break}}else if(ee.push({agent:Oe.agent,dates:[Oe.date]}),ne(ee)>oe){ee.pop();break}pe=pe.slice(1)}return{heartbeatsToSend:ee,unsentEntries:pe}}(oe._heartbeatsCache.heartbeats),lt=(0,H.Uj)(JSON.stringify({version:2,heartbeats:Oe}));return oe._heartbeatsCache.lastSentHeartbeatDate=pe,Tt.length>0?(oe._heartbeatsCache.heartbeats=Tt,yield oe._storage.overwrite(oe._heartbeatsCache)):(oe._heartbeatsCache.heartbeats=[],oe._storage.overwrite(oe._heartbeatsCache)),lt}catch(pe){return K.warn(pe),""}})()}}function Xr(){return(new Date).toISOString().substring(0,10)}class Te{constructor(oe){this.app=oe,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,b.A)(function*(){return!!(0,H.zW)()&&(0,H.eX)().then(()=>!0).catch(()=>!1)})()}read(){var oe=this;return(0,b.A)(function*(){if(yield oe._canUseIndexedDBPromise){const pe=yield function ar(Q){return mr.apply(this,arguments)}(oe.app);return pe?.heartbeats?pe:{heartbeats:[]}}return{heartbeats:[]}})()}overwrite(oe){var ee=this;return(0,b.A)(function*(){var pe;if(yield ee._canUseIndexedDBPromise){const Tt=yield ee.read();return Yr(ee.app,{lastSentHeartbeatDate:null!==(pe=oe.lastSentHeartbeatDate)&&void 0!==pe?pe:Tt.lastSentHeartbeatDate,heartbeats:oe.heartbeats})}})()}add(oe){var ee=this;return(0,b.A)(function*(){var pe;if(yield ee._canUseIndexedDBPromise){const Tt=yield ee.read();return Yr(ee.app,{lastSentHeartbeatDate:null!==(pe=oe.lastSentHeartbeatDate)&&void 0!==pe?pe:Tt.lastSentHeartbeatDate,heartbeats:[...Tt.heartbeats,...oe.heartbeats]})}})()}}function ne(Q){return(0,H.Uj)(JSON.stringify({version:2,heartbeats:Q})).length}!function J(Q){hr(new $.uA("platform-logger",oe=>new Fe(oe),"PRIVATE")),hr(new $.uA("heartbeat",oe=>new yi(oe),"PRIVATE")),Ut(Ne,Pe,Q),Ut(Ne,Pe,"esm2017"),Ut("fire-js","")}("")},1362:(Cn,nt,x)=>{x.d(nt,{Kq:()=>Ee,h1:()=>Ne,uA:()=>q});var b=x(4523),$=x(1076);class q{constructor(K,Ae,He){this.name=K,this.instanceFactory=Ae,this.type=He,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(K){return this.instantiationMode=K,this}setMultipleInstances(K){return this.multipleInstances=K,this}setServiceProps(K){return this.serviceProps=K,this}setInstanceCreatedCallback(K){return this.onInstanceCreated=K,this}}const H="[DEFAULT]";class Ee{constructor(K,Ae){this.name=K,this.container=Ae,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(K){const Ae=this.normalizeInstanceIdentifier(K);if(!this.instancesDeferred.has(Ae)){const He=new $.cY;if(this.instancesDeferred.set(Ae,He),this.isInitialized(Ae)||this.shouldAutoInitialize())try{const ot=this.getOrInitializeService({instanceIdentifier:Ae});ot&&He.resolve(ot)}catch{}}return this.instancesDeferred.get(Ae).promise}getImmediate(K){var Ae;const He=this.normalizeInstanceIdentifier(K?.identifier),ot=null!==(Ae=K?.optional)&&void 0!==Ae&&Ae;if(!this.isInitialized(He)&&!this.shouldAutoInitialize()){if(ot)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:He})}catch(tt){if(ot)return null;throw tt}}getComponent(){return this.component}setComponent(K){if(K.name!==this.name)throw Error(`Mismatching Component ${K.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=K,this.shouldAutoInitialize()){if(function Le(Pe){return"EAGER"===Pe.instantiationMode}(K))try{this.getOrInitializeService({instanceIdentifier:H})}catch{}for(const[Ae,He]of this.instancesDeferred.entries()){const ot=this.normalizeInstanceIdentifier(Ae);try{const tt=this.getOrInitializeService({instanceIdentifier:ot});He.resolve(tt)}catch{}}}}clearInstance(K=H){this.instancesDeferred.delete(K),this.instancesOptions.delete(K),this.instances.delete(K)}delete(){var K=this;return(0,b.A)(function*(){const Ae=Array.from(K.instances.values());yield Promise.all([...Ae.filter(He=>"INTERNAL"in He).map(He=>He.INTERNAL.delete()),...Ae.filter(He=>"_delete"in He).map(He=>He._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(K=H){return this.instances.has(K)}getOptions(K=H){return this.instancesOptions.get(K)||{}}initialize(K={}){const{options:Ae={}}=K,He=this.normalizeInstanceIdentifier(K.instanceIdentifier);if(this.isInitialized(He))throw Error(`${this.name}(${He}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const ot=this.getOrInitializeService({instanceIdentifier:He,options:Ae});for(const[tt,Rt]of this.instancesDeferred.entries())He===this.normalizeInstanceIdentifier(tt)&&Rt.resolve(ot);return ot}onInit(K,Ae){var He;const ot=this.normalizeInstanceIdentifier(Ae),tt=null!==(He=this.onInitCallbacks.get(ot))&&void 0!==He?He:new Set;tt.add(K),this.onInitCallbacks.set(ot,tt);const Rt=this.instances.get(ot);return Rt&&K(Rt,ot),()=>{tt.delete(K)}}invokeOnInitCallbacks(K,Ae){const He=this.onInitCallbacks.get(Ae);if(He)for(const ot of He)try{ot(K,Ae)}catch{}}getOrInitializeService({instanceIdentifier:K,options:Ae={}}){let He=this.instances.get(K);if(!He&&this.component&&(He=this.component.instanceFactory(this.container,{instanceIdentifier:(Pe=K,Pe===H?void 0:Pe),options:Ae}),this.instances.set(K,He),this.instancesOptions.set(K,Ae),this.invokeOnInitCallbacks(He,K),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,K,He)}catch{}var Pe;return He||null}normalizeInstanceIdentifier(K=H){return this.component?this.component.multipleInstances?K:H:K}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Ne{constructor(K){this.name=K,this.providers=new Map}addComponent(K){const Ae=this.getProvider(K.name);if(Ae.isComponentSet())throw new Error(`Component ${K.name} has already been registered with ${this.name}`);Ae.setComponent(K)}addOrOverwriteComponent(K){this.getProvider(K.name).isComponentSet()&&this.providers.delete(K.name),this.addComponent(K)}getProvider(K){if(this.providers.has(K))return this.providers.get(K);const Ae=new Ee(K,this);return this.providers.set(K,Ae),Ae}getProviders(){return Array.from(this.providers.values())}}},8041:(Cn,nt,x)=>{x.d(nt,{$b:()=>$,Ey:()=>Pe,He:()=>Ne,Vy:()=>Le});const b=[];var $=function(K){return K[K.DEBUG=0]="DEBUG",K[K.VERBOSE=1]="VERBOSE",K[K.INFO=2]="INFO",K[K.WARN=3]="WARN",K[K.ERROR=4]="ERROR",K[K.SILENT=5]="SILENT",K}($||{});const q={debug:$.DEBUG,verbose:$.VERBOSE,info:$.INFO,warn:$.WARN,error:$.ERROR,silent:$.SILENT},H=$.INFO,Ee={[$.DEBUG]:"log",[$.VERBOSE]:"log",[$.INFO]:"info",[$.WARN]:"warn",[$.ERROR]:"error"},Fe=(K,Ae,...He)=>{if(Ae<K.logLevel)return;const ot=(new Date).toISOString(),tt=Ee[Ae];if(!tt)throw new Error(`Attempted to log a message with an invalid logType (value: ${Ae})`);console[tt](`[${ot}]  ${K.name}:`,...He)};class Le{constructor(Ae){this.name=Ae,this._logLevel=H,this._logHandler=Fe,this._userLogHandler=null,b.push(this)}get logLevel(){return this._logLevel}set logLevel(Ae){if(!(Ae in $))throw new TypeError(`Invalid value "${Ae}" assigned to \`logLevel\``);this._logLevel=Ae}setLogLevel(Ae){this._logLevel="string"==typeof Ae?q[Ae]:Ae}get logHandler(){return this._logHandler}set logHandler(Ae){if("function"!=typeof Ae)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=Ae}get userLogHandler(){return this._userLogHandler}set userLogHandler(Ae){this._userLogHandler=Ae}debug(...Ae){this._userLogHandler&&this._userLogHandler(this,$.DEBUG,...Ae),this._logHandler(this,$.DEBUG,...Ae)}log(...Ae){this._userLogHandler&&this._userLogHandler(this,$.VERBOSE,...Ae),this._logHandler(this,$.VERBOSE,...Ae)}info(...Ae){this._userLogHandler&&this._userLogHandler(this,$.INFO,...Ae),this._logHandler(this,$.INFO,...Ae)}warn(...Ae){this._userLogHandler&&this._userLogHandler(this,$.WARN,...Ae),this._logHandler(this,$.WARN,...Ae)}error(...Ae){this._userLogHandler&&this._userLogHandler(this,$.ERROR,...Ae),this._logHandler(this,$.ERROR,...Ae)}}function Ne(K){b.forEach(Ae=>{Ae.setLogLevel(K)})}function Pe(K,Ae){for(const He of b){let ot=null;Ae&&Ae.level&&(ot=q[Ae.level]),He.userLogHandler=null===K?null:(tt,Rt,...Ft)=>{const Gt=Ft.map(Pt=>{if(null==Pt)return null;if("string"==typeof Pt)return Pt;if("number"==typeof Pt||"boolean"==typeof Pt)return Pt.toString();if(Pt instanceof Error)return Pt.message;try{return JSON.stringify(Pt)}catch{return null}}).filter(Pt=>Pt).join(" ");Rt>=(ot??tt.logLevel)&&K({level:$[Rt].toLowerCase(),message:Gt,args:Ft,type:tt.name})}}}},9640:(Cn,nt,x)=>{x.d(nt,{A5:()=>sr,SS:()=>Ge,Zz:()=>Ze,N_:()=>Jt,CP:()=>rn,Bh:()=>Xe,QU:()=>De,sA:()=>mn,h1:()=>wt,il:()=>An,ae:()=>kr,md:()=>oi,wc:()=>Ri,q6:()=>je,HY:()=>vr,qX:()=>qn,VP:()=>Rt,UX:()=>bi,vy:()=>qi,Mz:()=>On,Lg:()=>ee,on:()=>As,xk:()=>Ft,NT:()=>gr,Lt:()=>yr});var b=x(4438),$=x(4412),q=x(1985),H=x(1413),Ee=x(7242),Fe=x(941),Le=x(3993),Ne=x(2816),Pe=x(6354),Ae=x(3294),He=x(9079);const ot={};function Rt(Be,Zt){if(ot[Be]=(ot[Be]||0)+1,"function"==typeof Zt)return Pt(Be,(...Kt)=>({...Zt(...Kt),type:Be}));switch(Zt?Zt._as:"empty"){case"empty":return Pt(Be,()=>({type:Be}));case"props":return Pt(Be,Kt=>({...Kt,type:Be}));default:throw new Error("Unexpected config.")}}function Ft(){return{_as:"props",_p:void 0}}function Pt(Be,Zt){return Object.defineProperty(Zt,"type",{value:Be,writable:!1})}const Ze="@ngrx/store/init";let Ge=(()=>{class Be extends $.t{constructor(){super({type:Ze})}next(bt){if("function"==typeof bt)throw new TypeError("\n        Dispatch expected an object, instead it received a function.\n        If you're using the createAction function, make sure to invoke the function\n        before dispatching the action. For example, someAction should be someAction().");if(typeof bt>"u")throw new TypeError("Actions must be objects");if(typeof bt.type>"u")throw new TypeError("Actions must have a type property");super.next(bt)}complete(){}ngOnDestroy(){super.complete()}static{this.\u0275fac=function(Kt){return new(Kt||Be)}}static{this.\u0275prov=b.jDH({token:Be,factory:Be.\u0275fac})}}return Be})();const me=[Ge],ve=new b.nKC("@ngrx/store Internal Root Guard"),At=new b.nKC("@ngrx/store Internal Initial State"),Jt=new b.nKC("@ngrx/store Initial State"),Nt=new b.nKC("@ngrx/store Reducer Factory"),Yt=new b.nKC("@ngrx/store Internal Reducer Factory Provider"),an=new b.nKC("@ngrx/store Initial Reducers"),$t=new b.nKC("@ngrx/store Internal Initial Reducers"),ye=new b.nKC("@ngrx/store Store Features"),Ye=new b.nKC("@ngrx/store Internal Store Reducers"),Ht=new b.nKC("@ngrx/store Internal Feature Reducers"),et=new b.nKC("@ngrx/store Internal Feature Configs"),gt=new b.nKC("@ngrx/store Internal Store Features"),Mt=new b.nKC("@ngrx/store Internal Feature Reducers Token"),ft=new b.nKC("@ngrx/store Feature Reducers"),Ct=new b.nKC("@ngrx/store User Provided Meta Reducers"),ln=new b.nKC("@ngrx/store Meta Reducers"),nr=new b.nKC("@ngrx/store Internal Resolved Meta Reducers"),hr=new b.nKC("@ngrx/store User Runtime Checks Config"),Cr=new b.nKC("@ngrx/store Internal User Runtime Checks Config"),sr=new b.nKC("@ngrx/store Internal Runtime Checks"),fr=new b.nKC("@ngrx/store Check if Action types are unique"),Jn=new b.nKC("@ngrx/store Root Store Provider");function vr(Be,Zt={}){const bt=Object.keys(Be),Kt={};for(let Rn=0;Rn<bt.length;Rn++){const mt=bt[Rn];"function"==typeof Be[mt]&&(Kt[mt]=Be[mt])}const Kn=Object.keys(Kt);return function(mt,Ie){mt=void 0===mt?Zt:mt;let he=!1;const We={};for(let yt=0;yt<Kn.length;yt++){const In=Kn[yt],Jr=mt[In],Li=(0,Kt[In])(Jr,Ie);We[In]=Li,he=he||Li!==Jr}return he?We:mt}}function qn(...Be){return function(Zt){if(0===Be.length)return Zt;const bt=Be[Be.length-1];return Be.slice(0,-1).reduceRight((Kn,Rn)=>Rn(Kn),bt(Zt))}}function gi(Be,Zt){return Array.isArray(Zt)&&Zt.length>0&&(Be=qn.apply(null,[...Zt,Be])),(bt,Kt)=>{const Kn=Be(bt);return(Rn,mt)=>Kn(Rn=void 0===Rn?Kt:Rn,mt)}}new b.nKC("@ngrx/store Feature State Provider");class De extends q.c{}class Xe extends Ge{}const je="@ngrx/store/update-reducers";let rn=(()=>{class Be extends $.t{get currentReducers(){return this.reducers}constructor(bt,Kt,Kn,Rn){super(Rn(Kn,Kt)),this.dispatcher=bt,this.initialState=Kt,this.reducers=Kn,this.reducerFactory=Rn}addFeature(bt){this.addFeatures([bt])}addFeatures(bt){const Kt=bt.reduce((Kn,{reducers:Rn,reducerFactory:mt,metaReducers:Ie,initialState:he,key:We})=>{const yt="function"==typeof Rn?function st(Be){const Zt=Array.isArray(Be)&&Be.length>0?qn(...Be):bt=>bt;return(bt,Kt)=>(bt=Zt(bt),(Kn,Rn)=>bt(Kn=void 0===Kn?Kt:Kn,Rn))}(Ie)(Rn,he):gi(mt,Ie)(Rn,he);return Kn[We]=yt,Kn},{});this.addReducers(Kt)}removeFeature(bt){this.removeFeatures([bt])}removeFeatures(bt){this.removeReducers(bt.map(Kt=>Kt.key))}addReducer(bt,Kt){this.addReducers({[bt]:Kt})}addReducers(bt){this.reducers={...this.reducers,...bt},this.updateReducers(Object.keys(bt))}removeReducer(bt){this.removeReducers([bt])}removeReducers(bt){bt.forEach(Kt=>{this.reducers=function $n(Be,Zt){return Object.keys(Be).filter(bt=>bt!==Zt).reduce((bt,Kt)=>Object.assign(bt,{[Kt]:Be[Kt]}),{})}(this.reducers,Kt)}),this.updateReducers(bt)}updateReducers(bt){this.next(this.reducerFactory(this.reducers,this.initialState)),this.dispatcher.next({type:je,features:bt})}ngOnDestroy(){this.complete()}static{this.\u0275fac=function(Kt){return new(Kt||Be)(b.KVO(Xe),b.KVO(Jt),b.KVO(an),b.KVO(Nt))}}static{this.\u0275prov=b.jDH({token:Be,factory:Be.\u0275fac})}}return Be})();const fn=[rn,{provide:De,useExisting:rn},{provide:Xe,useExisting:Ge}];let mn=(()=>{class Be extends H.B{ngOnDestroy(){this.complete()}static{this.\u0275fac=(()=>{let bt;return function(Kn){return(bt||(bt=b.xGo(Be)))(Kn||Be)}})()}static{this.\u0275prov=b.jDH({token:Be,factory:Be.\u0275fac})}}return Be})();const Ut=[mn];class wt extends q.c{}let $e=(()=>{class Be extends $.t{static{this.INIT=Ze}constructor(bt,Kt,Kn,Rn){super(Rn);const We=bt.pipe((0,Fe.Q)(Ee.T)).pipe((0,Le.E)(Kt)).pipe((0,Ne.S)(_t,{state:Rn}));this.stateSubscription=We.subscribe(({state:yt,action:In})=>{this.next(yt),Kn.next(In)}),this.state=(0,He.ot)(this,{manualCleanup:!0,requireSync:!0})}ngOnDestroy(){this.stateSubscription.unsubscribe(),this.complete()}static{this.\u0275fac=function(Kt){return new(Kt||Be)(b.KVO(Ge),b.KVO(De),b.KVO(mn),b.KVO(Jt))}}static{this.\u0275prov=b.jDH({token:Be,factory:Be.\u0275fac})}}return Be})();function _t(Be={state:void 0},[Zt,bt]){const{state:Kt}=Be;return{state:bt(Kt,Zt),action:Zt}}const gn=[$e,{provide:wt,useExisting:$e}];let An=(()=>{class Be extends q.c{constructor(bt,Kt,Kn){super(),this.actionsObserver=Kt,this.reducerManager=Kn,this.source=bt,this.state=bt.state}select(bt,...Kt){return yr.call(null,bt,...Kt)(this)}selectSignal(bt,Kt){return(0,b.EWP)(()=>bt(this.state()),Kt)}lift(bt){const Kt=new Be(this,this.actionsObserver,this.reducerManager);return Kt.operator=bt,Kt}dispatch(bt){this.actionsObserver.next(bt)}next(bt){this.actionsObserver.next(bt)}error(bt){this.actionsObserver.error(bt)}complete(){this.actionsObserver.complete()}addReducer(bt,Kt){this.reducerManager.addReducer(bt,Kt)}removeReducer(bt){this.reducerManager.removeReducer(bt)}static{this.\u0275fac=function(Kt){return new(Kt||Be)(b.KVO(wt),b.KVO(Ge),b.KVO(rn))}}static{this.\u0275prov=b.jDH({token:Be,factory:Be.\u0275fac})}}return Be})();const ir=[An];function yr(Be,Zt,...bt){return function(Kn){let Rn;if("string"==typeof Be){const mt=[Zt,...bt].filter(Boolean);Rn=Kn.pipe(function K(...Be){const Zt=Be.length;if(0===Zt)throw new Error("list of properties cannot be empty.");return(0,Pe.T)(bt=>{let Kt=bt;for(let Kn=0;Kn<Zt;Kn++){const Rn=Kt?.[Be[Kn]];if(!(typeof Rn<"u"))return;Kt=Rn}return Kt})}(Be,...mt))}else{if("function"!=typeof Be)throw new TypeError(`Unexpected type '${typeof Be}' in select operator, expected 'string' or 'function'`);Rn=Kn.pipe((0,Pe.T)(mt=>Be(mt,Zt)))}return Rn.pipe((0,Ae.F)())}}const ar="https://ngrx.io/guide/store/configuration/runtime-checks";function mr(Be){return void 0===Be}function Yr(Be){return null===Be}function Nr(Be){return Array.isArray(Be)}function yi(Be){return"object"==typeof Be&&null!==Be}function Te(Be){return"function"==typeof Be}let Q=!1;function ee(){return Q}function pe(Be,Zt){return Be===Zt}function lt(Be,Zt=pe,bt=pe){let Rn,Kt=null,Kn=null;return{memoized:function We(){if(void 0!==Rn)return Rn.result;if(!Kt)return Kn=Be.apply(null,arguments),Kt=arguments,Kn;if(!function Oe(Be,Zt,bt){for(let Kt=0;Kt<Be.length;Kt++)if(!bt(Be[Kt],Zt[Kt]))return!0;return!1}(arguments,Kt,Zt))return Kn;const yt=Be.apply(null,arguments);return Kt=arguments,bt(Kn,yt)?Kn:(Kn=yt,yt)},reset:function mt(){Kt=null,Kn=null},setResult:function Ie(yt=void 0){Rn={result:yt}},clearResult:function he(){Rn=void 0}}}function On(...Be){return function wi(Be,Zt={stateFn:Yn}){return function(...bt){let Kt=bt;if(Array.isArray(Kt[0])){const[yt,...In]=Kt;Kt=[...yt,...In]}else 1===Kt.length&&function Lr(Be){return!!Be&&"object"==typeof Be&&Object.values(Be).every(Zt=>"function"==typeof Zt)}(Kt[0])&&(Kt=function hi(Be){const Zt=Object.values(Be),bt=Object.keys(Be);return[...Zt,(...Kn)=>bt.reduce((Rn,mt,Ie)=>({...Rn,[mt]:Kn[Ie]}),{})]}(Kt[0]));const Kn=Kt.slice(0,Kt.length-1),Rn=Kt[Kt.length-1],mt=Kn.filter(yt=>yt.release&&"function"==typeof yt.release),Ie=Be(function(...yt){return Rn.apply(null,yt)}),he=lt(function(yt,In){return Zt.stateFn.apply(null,[yt,Kn,In,Ie])});return Object.assign(he.memoized,{release:function We(){he.reset(),Ie.reset(),mt.forEach(yt=>yt.release())},projector:Ie.memoized,setResult:he.setResult,clearResult:he.clearResult})}}(lt)(...Be)}function Yn(Be,Zt,bt,Kt){if(void 0===bt){const Rn=Zt.map(mt=>mt(Be));return Kt.memoized.apply(null,Rn)}const Kn=Zt.map(Rn=>Rn(Be,bt));return Kt.memoized.apply(null,[...Kn,bt])}function bi(Be){return On(Zt=>{const bt=Zt[Be];return!ee()&&(0,b.naY)()&&!(Be in Zt)&&console.warn(`@ngrx/store: The feature name "${Be}" does not exist in the state, therefore createFeatureSelector cannot access it.  Be sure it is imported in a loaded module using StoreModule.forRoot('${Be}', ...) or StoreModule.forFeature('${Be}', ...).  If the default state is intended to be undefined, as is the case with router state, this development-only warning message can be ignored.`),bt},Zt=>Zt)}function Ks(Be){return Be instanceof b.nKC?(0,b.WQX)(Be):Be}function Co(Be,Zt){return Zt.map((bt,Kt)=>{if(Be[Kt]instanceof b.nKC){const Kn=(0,b.WQX)(Be[Kt]);return{key:bt.key,reducerFactory:Kn.reducerFactory?Kn.reducerFactory:vr,metaReducers:Kn.metaReducers?Kn.metaReducers:[],initialState:Kn.initialState}}return bt})}function Os(Be){return Be.map(Zt=>Zt instanceof b.nKC?(0,b.WQX)(Zt):Zt)}function vi(Be){return"function"==typeof Be?Be():Be}function la(Be,Zt){return Be.concat(Zt)}function $s(){if((0,b.WQX)(An,{optional:!0,skipSelf:!0}))throw new TypeError("The root Store has been provided more than once. Feature modules should provide feature states instead.");return"guarded"}function fo(Be){Object.freeze(Be);const Zt=Te(Be);return Object.getOwnPropertyNames(Be).forEach(bt=>{if(!bt.startsWith("\u0275")&&function J(Be,Zt){return Object.prototype.hasOwnProperty.call(Be,Zt)}(Be,bt)&&(!Zt||"caller"!==bt&&"callee"!==bt&&"arguments"!==bt)){const Kt=Be[bt];(yi(Kt)||Te(Kt))&&!Object.isFrozen(Kt)&&fo(Kt)}}),Be}function _s(Be,Zt=[]){return(mr(Be)||Yr(Be))&&0===Zt.length?{path:["root"],value:Be}:Object.keys(Be).reduce((Kt,Kn)=>{if(Kt)return Kt;const Rn=Be[Kn];return function ne(Be){return Te(Be)&&Be.hasOwnProperty("\u0275cmp")}(Rn)?Kt:!(mr(Rn)||Yr(Rn)||function ai(Be){return"number"==typeof Be}(Rn)||function qr(Be){return"boolean"==typeof Be}(Rn)||function xt(Be){return"string"==typeof Be}(Rn)||Nr(Rn))&&(function pn(Be){if(!function Xr(Be){return yi(Be)&&!Nr(Be)}(Be))return!1;const Zt=Object.getPrototypeOf(Be);return Zt===Object.prototype||null===Zt}(Rn)?_s(Rn,[...Zt,Kn]):{path:[...Zt,Kn],value:Rn})},!1)}function Ts(Be,Zt){if(!1===Be)return;const bt=Be.path.join("."),Kt=new Error(`Detected unserializable ${Zt} at "${bt}". ${ar}#strict${Zt}serializability`);throw Kt.value=Be.value,Kt.unserializablePath=bt,Kt}function it(Be){return(0,b.naY)()?{strictStateSerializability:!1,strictActionSerializability:!1,strictStateImmutability:!0,strictActionImmutability:!0,strictActionWithinNgZone:!1,strictActionTypeUniqueness:!1,...Be}:{strictStateSerializability:!1,strictActionSerializability:!1,strictStateImmutability:!1,strictActionImmutability:!1,strictActionWithinNgZone:!1,strictActionTypeUniqueness:!1}}function ut({strictActionSerializability:Be,strictStateSerializability:Zt}){return bt=>Be||Zt?function Gs(Be,Zt){return function(bt,Kt){Zt.action(Kt)&&Ts(_s(Kt),"action");const Kn=Be(bt,Kt);return Zt.state()&&Ts(_s(Kn),"state"),Kn}}(bt,{action:Kt=>Be&&!sn(Kt),state:()=>Zt}):bt}function un({strictActionImmutability:Be,strictStateImmutability:Zt}){return bt=>Be||Zt?function so(Be,Zt){return function(bt,Kt){const Kn=Zt.action(Kt)?fo(Kt):Kt,Rn=Be(bt,Kn);return Zt.state()?fo(Rn):Rn}}(bt,{action:Kt=>Be&&!sn(Kt),state:()=>Zt}):bt}function sn(Be){return Be.type.startsWith("@ngrx")}function Sn({strictActionWithinNgZone:Be}){return Zt=>Be?function Ue(Be,Zt){return function(bt,Kt){if(Zt.action(Kt)&&!b.SKi.isInAngularZone())throw new Error(`Action '${Kt.type}' running outside NgZone. ${ar}#strictactionwithinngzone`);return Be(bt,Kt)}}(Zt,{action:bt=>Be&&!sn(bt)}):Zt}function jt(Be){return[{provide:Cr,useValue:Be},{provide:hr,useFactory:Bn,deps:[Cr]},{provide:sr,deps:[hr],useFactory:it},{provide:ln,multi:!0,deps:[sr],useFactory:un},{provide:ln,multi:!0,deps:[sr],useFactory:ut},{provide:ln,multi:!0,deps:[sr],useFactory:Sn}]}function Xn(){return[{provide:fr,multi:!0,deps:[sr],useFactory:ti}]}function Bn(Be){return Be}function ti(Be){if(!Be.strictActionTypeUniqueness)return;const Zt=Object.entries(ot).filter(([,bt])=>bt>1).map(([bt])=>bt);if(Zt.length)throw new Error(`Action types are registered more than once, ${Zt.map(bt=>`"${bt}"`).join(", ")}. ${ar}#strictactiontypeuniqueness`)}function yn(Be={},Zt={}){return[{provide:ve,useFactory:$s},{provide:At,useValue:Zt.initialState},{provide:Jt,useFactory:vi,deps:[At]},{provide:$t,useValue:Be},{provide:Ye,useExisting:Be instanceof b.nKC?Be:$t},{provide:an,deps:[$t,[new b.y_5(Ye)]],useFactory:Ks},{provide:Ct,useValue:Zt.metaReducers?Zt.metaReducers:[]},{provide:nr,deps:[ln,Ct],useFactory:la},{provide:Yt,useValue:Zt.reducerFactory?Zt.reducerFactory:vr},{provide:Nt,deps:[Yt,nr],useFactory:gi},me,fn,Ut,gn,ir,jt(Zt.runtimeChecks),Xn()]}const or=[{provide:Jn,useFactory:function Dn(){(0,b.WQX)(Ge),(0,b.WQX)(De),(0,b.WQX)(mn),(0,b.WQX)(An),(0,b.WQX)(ve,{optional:!0}),(0,b.WQX)(fr,{optional:!0})}},{provide:b.Z63,multi:!0,useFactory:()=>()=>(0,b.WQX)(Jn)}];function gr(Be,Zt){return(0,b.EmA)([...yn(Be,Zt),or])}function Zr(Be,Zt,bt={}){return[{provide:et,multi:!0,useValue:Be instanceof Object?{}:bt},{provide:ye,multi:!0,useValue:{key:Be instanceof Object?Be.name:Be,reducerFactory:bt instanceof b.nKC||!bt.reducerFactory?vr:bt.reducerFactory,metaReducers:bt instanceof b.nKC||!bt.metaReducers?[]:bt.metaReducers,initialState:bt instanceof b.nKC||!bt.initialState?void 0:bt.initialState}},{provide:gt,deps:[et,ye],useFactory:Co},{provide:Ht,multi:!0,useValue:Be instanceof Object?Be.reducer:Zt},{provide:Mt,multi:!0,useExisting:Zt instanceof b.nKC?Zt:Ht},{provide:ft,multi:!0,deps:[Ht,[new b.y_5(Mt)]],useFactory:Os},Xn()]}let Ri=(()=>{class Be{constructor(bt,Kt,Kn,Rn,mt,Ie){}static{this.\u0275fac=function(Kt){return new(Kt||Be)(b.KVO(Ge),b.KVO(De),b.KVO(mn),b.KVO(An),b.KVO(ve,8),b.KVO(fr,8))}}static{this.\u0275mod=b.$C({type:Be})}static{this.\u0275inj=b.G2t({})}}return Be})(),kr=(()=>{class Be{constructor(bt,Kt,Kn,Rn,mt){this.features=bt,this.featureReducers=Kt,this.reducerManager=Kn;const Ie=bt.map((he,We)=>{const In=Kt.shift()[We];return{...he,reducers:In,initialState:vi(he.initialState)}});Kn.addFeatures(Ie)}ngOnDestroy(){this.reducerManager.removeFeatures(this.features)}static{this.\u0275fac=function(Kt){return new(Kt||Be)(b.KVO(gt),b.KVO(ft),b.KVO(rn),b.KVO(Ri),b.KVO(fr,8))}}static{this.\u0275mod=b.$C({type:Be})}static{this.\u0275inj=b.G2t({})}}return Be})(),oi=(()=>{class Be{static forRoot(bt,Kt){return{ngModule:Ri,providers:[...yn(bt,Kt)]}}static forFeature(bt,Kt,Kn={}){return{ngModule:kr,providers:[...Zr(bt,Kt,Kn)]}}static{this.\u0275fac=function(Kt){return new(Kt||Be)}}static{this.\u0275mod=b.$C({type:Be})}static{this.\u0275inj=b.G2t({})}}return Be})();function As(...Be){return{reducer:Be.pop(),types:Be.map(Kt=>Kt.type)}}function qi(Be,...Zt){const bt=new Map;for(const Kt of Zt)for(const Kn of Kt.types){const Rn=bt.get(Kn);bt.set(Kn,Rn?(Ie,he)=>Kt.reducer(Rn(Ie,he),he):Kt.reducer)}return function(Kt=Be,Kn){const Rn=bt.get(Kn.type);return Rn?Rn(Kt,Kn):Kt}}},3955:(Cn,nt,x)=>{x.d(nt,{D9:()=>Nt,Wr:()=>He,c$:()=>At,h:()=>Yt});var b=x(4438),$=x(7673),q=x(4402),H=x(7468),Ee=x(8793),Fe=x(9030),Le=x(6697),Ne=x(4668),Pe=x(6354),K=x(274),Ae=x(5558);class He{}let ot=(()=>{class an extends He{getTranslation(ye){return(0,$.of)({})}static \u0275fac=(()=>{let ye;return function(Ht){return(ye||(ye=b.xGo(an)))(Ht||an)}})();static \u0275prov=b.jDH({token:an,factory:an.\u0275fac})}return an})();class tt{}let Rt=(()=>{class an{handle(ye){return ye.key}static \u0275fac=function(Ye){return new(Ye||an)};static \u0275prov=b.jDH({token:an,factory:an.\u0275fac})}return an})();function Ft(an,$t){if(an===$t)return!0;if(null===an||null===$t)return!1;if(an!=an&&$t!=$t)return!0;let Ht,et,gt,ye=typeof an;if(ye==typeof $t&&"object"==ye){if(!Array.isArray(an)){if(Array.isArray($t))return!1;for(et in gt=Object.create(null),an){if(!Ft(an[et],$t[et]))return!1;gt[et]=!0}for(et in $t)if(!(et in gt)&&typeof $t[et]<"u")return!1;return!0}if(!Array.isArray($t))return!1;if((Ht=an.length)==$t.length){for(et=0;et<Ht;et++)if(!Ft(an[et],$t[et]))return!1;return!0}}return!1}function Gt(an){return typeof an<"u"&&null!==an}function Pt(an){return an&&"object"==typeof an&&!Array.isArray(an)}function hn(an,$t){let ye=Object.assign({},an);return Pt(an)&&Pt($t)&&Object.keys($t).forEach(Ye=>{Pt($t[Ye])?Ye in an?ye[Ye]=hn(an[Ye],$t[Ye]):Object.assign(ye,{[Ye]:$t[Ye]}):Object.assign(ye,{[Ye]:$t[Ye]})}),ye}class Et{}let kt=(()=>{class an extends Et{templateMatcher=/{{\s?([^{}\s]*)\s?}}/g;interpolate(ye,Ye){let Ht;return Ht="string"==typeof ye?this.interpolateString(ye,Ye):"function"==typeof ye?this.interpolateFunction(ye,Ye):ye,Ht}getValue(ye,Ye){let Ht="string"==typeof Ye?Ye.split("."):[Ye];Ye="";do{Ye+=Ht.shift(),!Gt(ye)||!Gt(ye[Ye])||"object"!=typeof ye[Ye]&&Ht.length?Ht.length?Ye+=".":ye=void 0:(ye=ye[Ye],Ye="")}while(Ht.length);return ye}interpolateFunction(ye,Ye){return ye(Ye)}interpolateString(ye,Ye){return Ye?ye.replace(this.templateMatcher,(Ht,et)=>{let gt=this.getValue(Ye,et);return Gt(gt)?gt:Ht}):ye}static \u0275fac=(()=>{let ye;return function(Ht){return(ye||(ye=b.xGo(an)))(Ht||an)}})();static \u0275prov=b.jDH({token:an,factory:an.\u0275fac})}return an})();class Ke{}let Qe=(()=>{class an extends Ke{compile(ye,Ye){return ye}compileTranslations(ye,Ye){return ye}static \u0275fac=(()=>{let ye;return function(Ht){return(ye||(ye=b.xGo(an)))(Ht||an)}})();static \u0275prov=b.jDH({token:an,factory:an.\u0275fac})}return an})();class ct{defaultLang;currentLang=this.defaultLang;translations={};langs=[];onTranslationChange=new b.bkB;onLangChange=new b.bkB;onDefaultLangChange=new b.bkB}const Ze=new b.nKC("USE_STORE"),Ge=new b.nKC("USE_DEFAULT_LANG"),me=new b.nKC("DEFAULT_LANGUAGE"),ve=new b.nKC("USE_EXTEND");let At=(()=>{class an{store;currentLoader;compiler;parser;missingTranslationHandler;useDefaultLang;isolate;extend;loadingTranslations;pending=!1;_onTranslationChange=new b.bkB;_onLangChange=new b.bkB;_onDefaultLangChange=new b.bkB;_defaultLang;_currentLang;_langs=[];_translations={};_translationRequests={};get onTranslationChange(){return this.isolate?this._onTranslationChange:this.store.onTranslationChange}get onLangChange(){return this.isolate?this._onLangChange:this.store.onLangChange}get onDefaultLangChange(){return this.isolate?this._onDefaultLangChange:this.store.onDefaultLangChange}get defaultLang(){return this.isolate?this._defaultLang:this.store.defaultLang}set defaultLang(ye){this.isolate?this._defaultLang=ye:this.store.defaultLang=ye}get currentLang(){return this.isolate?this._currentLang:this.store.currentLang}set currentLang(ye){this.isolate?this._currentLang=ye:this.store.currentLang=ye}get langs(){return this.isolate?this._langs:this.store.langs}set langs(ye){this.isolate?this._langs=ye:this.store.langs=ye}get translations(){return this.isolate?this._translations:this.store.translations}set translations(ye){this.isolate?this._translations=ye:this.store.translations=ye}constructor(ye,Ye,Ht,et,gt,Mt=!0,ft=!1,Ct=!1,ln){this.store=ye,this.currentLoader=Ye,this.compiler=Ht,this.parser=et,this.missingTranslationHandler=gt,this.useDefaultLang=Mt,this.isolate=ft,this.extend=Ct,ln&&this.setDefaultLang(ln)}setDefaultLang(ye){if(ye===this.defaultLang)return;let Ye=this.retrieveTranslations(ye);typeof Ye<"u"?(null==this.defaultLang&&(this.defaultLang=ye),Ye.pipe((0,Le.s)(1)).subscribe(Ht=>{this.changeDefaultLang(ye)})):this.changeDefaultLang(ye)}getDefaultLang(){return this.defaultLang}use(ye){if(ye===this.currentLang)return(0,$.of)(this.translations[ye]);let Ye=this.retrieveTranslations(ye);return typeof Ye<"u"?(this.currentLang||(this.currentLang=ye),Ye.pipe((0,Le.s)(1)).subscribe(Ht=>{this.changeLang(ye)}),Ye):(this.changeLang(ye),(0,$.of)(this.translations[ye]))}retrieveTranslations(ye){let Ye;return(typeof this.translations[ye]>"u"||this.extend)&&(this._translationRequests[ye]=this._translationRequests[ye]||this.getTranslation(ye),Ye=this._translationRequests[ye]),Ye}getTranslation(ye){this.pending=!0;const Ye=this.currentLoader.getTranslation(ye).pipe((0,Ne.t)(1),(0,Le.s)(1));return this.loadingTranslations=Ye.pipe((0,Pe.T)(Ht=>this.compiler.compileTranslations(Ht,ye)),(0,Ne.t)(1),(0,Le.s)(1)),this.loadingTranslations.subscribe({next:Ht=>{this.translations[ye]=this.extend&&this.translations[ye]?{...Ht,...this.translations[ye]}:Ht,this.updateLangs(),this.pending=!1},error:Ht=>{this.pending=!1}}),Ye}setTranslation(ye,Ye,Ht=!1){Ye=this.compiler.compileTranslations(Ye,ye),this.translations[ye]=(Ht||this.extend)&&this.translations[ye]?hn(this.translations[ye],Ye):Ye,this.updateLangs(),this.onTranslationChange.emit({lang:ye,translations:this.translations[ye]})}getLangs(){return this.langs}addLangs(ye){ye.forEach(Ye=>{-1===this.langs.indexOf(Ye)&&this.langs.push(Ye)})}updateLangs(){this.addLangs(Object.keys(this.translations))}getParsedResult(ye,Ye,Ht){let et;if(Ye instanceof Array){let gt={},Mt=!1;for(let ft of Ye)gt[ft]=this.getParsedResult(ye,ft,Ht),(0,q.A)(gt[ft])&&(Mt=!0);if(Mt){const ft=Ye.map(Ct=>(0,q.A)(gt[Ct])?gt[Ct]:(0,$.of)(gt[Ct]));return(0,H.p)(ft).pipe((0,Pe.T)(Ct=>{let ln={};return Ct.forEach((nr,hr)=>{ln[Ye[hr]]=nr}),ln}))}return gt}if(ye&&(et=this.parser.interpolate(this.parser.getValue(ye,Ye),Ht)),typeof et>"u"&&null!=this.defaultLang&&this.defaultLang!==this.currentLang&&this.useDefaultLang&&(et=this.parser.interpolate(this.parser.getValue(this.translations[this.defaultLang],Ye),Ht)),typeof et>"u"){let gt={key:Ye,translateService:this};typeof Ht<"u"&&(gt.interpolateParams=Ht),et=this.missingTranslationHandler.handle(gt)}return typeof et<"u"?et:Ye}get(ye,Ye){if(!Gt(ye)||!ye.length)throw new Error('Parameter "key" required');if(this.pending)return this.loadingTranslations.pipe((0,K.H)(Ht=>(Ht=this.getParsedResult(Ht,ye,Ye),(0,q.A)(Ht)?Ht:(0,$.of)(Ht))));{let Ht=this.getParsedResult(this.translations[this.currentLang],ye,Ye);return(0,q.A)(Ht)?Ht:(0,$.of)(Ht)}}getStreamOnTranslationChange(ye,Ye){if(!Gt(ye)||!ye.length)throw new Error('Parameter "key" required');return(0,Ee.x)((0,Fe.v)(()=>this.get(ye,Ye)),this.onTranslationChange.pipe((0,Ae.n)(Ht=>{const et=this.getParsedResult(Ht.translations,ye,Ye);return"function"==typeof et.subscribe?et:(0,$.of)(et)})))}stream(ye,Ye){if(!Gt(ye)||!ye.length)throw new Error('Parameter "key" required');return(0,Ee.x)((0,Fe.v)(()=>this.get(ye,Ye)),this.onLangChange.pipe((0,Ae.n)(Ht=>{const et=this.getParsedResult(Ht.translations,ye,Ye);return(0,q.A)(et)?et:(0,$.of)(et)})))}instant(ye,Ye){if(!Gt(ye)||!ye.length)throw new Error('Parameter "key" required');let Ht=this.getParsedResult(this.translations[this.currentLang],ye,Ye);if((0,q.A)(Ht)){if(ye instanceof Array){let et={};return ye.forEach((gt,Mt)=>{et[ye[Mt]]=ye[Mt]}),et}return ye}return Ht}set(ye,Ye,Ht=this.currentLang){this.translations[Ht][ye]=this.compiler.compile(Ye,Ht),this.updateLangs(),this.onTranslationChange.emit({lang:Ht,translations:this.translations[Ht]})}changeLang(ye){this.currentLang=ye,this.onLangChange.emit({lang:ye,translations:this.translations[ye]}),null==this.defaultLang&&this.changeDefaultLang(ye)}changeDefaultLang(ye){this.defaultLang=ye,this.onDefaultLangChange.emit({lang:ye,translations:this.translations[ye]})}reloadLang(ye){return this.resetLang(ye),this.getTranslation(ye)}resetLang(ye){this._translationRequests[ye]=void 0,this.translations[ye]=void 0}getBrowserLang(){if(typeof window>"u"||typeof window.navigator>"u")return;let ye=window.navigator.languages?window.navigator.languages[0]:null;return ye=ye||window.navigator.language||window.navigator.browserLanguage||window.navigator.userLanguage,typeof ye>"u"?void 0:(-1!==ye.indexOf("-")&&(ye=ye.split("-")[0]),-1!==ye.indexOf("_")&&(ye=ye.split("_")[0]),ye)}getBrowserCultureLang(){if(typeof window>"u"||typeof window.navigator>"u")return;let ye=window.navigator.languages?window.navigator.languages[0]:null;return ye=ye||window.navigator.language||window.navigator.browserLanguage||window.navigator.userLanguage,ye}static \u0275fac=function(Ye){return new(Ye||an)(b.KVO(ct),b.KVO(He),b.KVO(Ke),b.KVO(Et),b.KVO(tt),b.KVO(Ge),b.KVO(Ze),b.KVO(ve),b.KVO(me))};static \u0275prov=b.jDH({token:an,factory:an.\u0275fac})}return an})(),Nt=(()=>{class an{translate;_ref;value="";lastKey=null;lastParams=[];onTranslationChange;onLangChange;onDefaultLangChange;constructor(ye,Ye){this.translate=ye,this._ref=Ye}updateValue(ye,Ye,Ht){let et=gt=>{this.value=void 0!==gt?gt:ye,this.lastKey=ye,this._ref.markForCheck()};if(Ht){let gt=this.translate.getParsedResult(Ht,ye,Ye);(0,q.A)(gt.subscribe)?gt.subscribe(et):et(gt)}this.translate.get(ye,Ye).subscribe(et)}transform(ye,...Ye){if(!ye||!ye.length)return ye;if(Ft(ye,this.lastKey)&&Ft(Ye,this.lastParams))return this.value;let Ht;if(Gt(Ye[0])&&Ye.length)if("string"==typeof Ye[0]&&Ye[0].length){let et=Ye[0].replace(/(\')?([a-zA-Z0-9_]+)(\')?(\s)?:/g,'"$2":').replace(/:(\s)?(\')(.*?)(\')/g,':"$3"');try{Ht=JSON.parse(et)}catch{throw new SyntaxError(`Wrong parameter in TranslatePipe. Expected a valid Object, received: ${Ye[0]}`)}}else"object"==typeof Ye[0]&&!Array.isArray(Ye[0])&&(Ht=Ye[0]);return this.lastKey=ye,this.lastParams=Ye,this.updateValue(ye,Ht),this._dispose(),this.onTranslationChange||(this.onTranslationChange=this.translate.onTranslationChange.subscribe(et=>{this.lastKey&&et.lang===this.translate.currentLang&&(this.lastKey=null,this.updateValue(ye,Ht,et.translations))})),this.onLangChange||(this.onLangChange=this.translate.onLangChange.subscribe(et=>{this.lastKey&&(this.lastKey=null,this.updateValue(ye,Ht,et.translations))})),this.onDefaultLangChange||(this.onDefaultLangChange=this.translate.onDefaultLangChange.subscribe(()=>{this.lastKey&&(this.lastKey=null,this.updateValue(ye,Ht))})),this.value}_dispose(){typeof this.onTranslationChange<"u"&&(this.onTranslationChange.unsubscribe(),this.onTranslationChange=void 0),typeof this.onLangChange<"u"&&(this.onLangChange.unsubscribe(),this.onLangChange=void 0),typeof this.onDefaultLangChange<"u"&&(this.onDefaultLangChange.unsubscribe(),this.onDefaultLangChange=void 0)}ngOnDestroy(){this._dispose()}static \u0275fac=function(Ye){return new(Ye||an)(b.rXU(At,16),b.rXU(b.gRc,16))};static \u0275pipe=b.EJ8({name:"translate",type:an,pure:!1});static \u0275prov=b.jDH({token:an,factory:an.\u0275fac})}return an})(),Yt=(()=>{class an{static forRoot(ye={}){return{ngModule:an,providers:[ye.loader||{provide:He,useClass:ot},ye.compiler||{provide:Ke,useClass:Qe},ye.parser||{provide:Et,useClass:kt},ye.missingTranslationHandler||{provide:tt,useClass:Rt},ct,{provide:Ze,useValue:ye.isolate},{provide:Ge,useValue:ye.useDefaultLang},{provide:ve,useValue:ye.extend},{provide:me,useValue:ye.defaultLanguage},At]}}static forChild(ye={}){return{ngModule:an,providers:[ye.loader||{provide:He,useClass:ot},ye.compiler||{provide:Ke,useClass:Qe},ye.parser||{provide:Et,useClass:kt},ye.missingTranslationHandler||{provide:tt,useClass:Rt},{provide:Ze,useValue:ye.isolate},{provide:Ge,useValue:ye.useDefaultLang},{provide:ve,useValue:ye.extend},{provide:me,useValue:ye.defaultLanguage},At]}}static \u0275fac=function(Ye){return new(Ye||an)};static \u0275mod=b.$C({type:an});static \u0275inj=b.G2t({})}return an})()},2214:(Cn,nt,x)=>{x.d(nt,{Dk:()=>b.getApps,KO:()=>b.registerVersion,Sx:()=>b.getApp,Wp:()=>b.initializeApp});var b=x(8742);(0,b.registerVersion)("firebase","10.14.1","app")},9055:(Cn,nt,x)=>{x.d(nt,{xI:()=>kl,hg:()=>_i,iZ:()=>Bi});var b=x(4523),$=x(8742),q=x(1076),H=x(8041),Ee=x(1635),Fe=x(1362);const Rt=function ot(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Ft=new q.FA("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Pt=new H.Vy("@firebase/auth");function Et(N,...E){Pt.logLevel<=H.$b.ERROR&&Pt.error(`Auth (${$.SDK_VERSION}): ${N}`,...E)}function kt(N,...E){throw Ge(N,...E)}function Ke(N,...E){return Ge(N,...E)}function Qe(N,E,C){const B=Object.assign(Object.assign({},Rt()),{[E]:C});return new q.FA("auth","Firebase",B).create(E,{appName:N.name})}function ct(N){return Qe(N,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Ge(N,...E){if("string"!=typeof N){const C=E[0],B=[...E.slice(1)];return B[0]&&(B[0].appName=N.name),N._errorFactory.create(C,...B)}return Ft.create(N,...E)}function me(N,E,...C){if(!N)throw Ge(E,...C)}function ve(N){const E="INTERNAL ASSERTION FAILED: "+N;throw Et(E),new Error(E)}function At(N,E){N||ve(E)}function Jt(){var N;return typeof self<"u"&&(null===(N=self.location)||void 0===N?void 0:N.href)||""}function Yt(){var N;return typeof self<"u"&&(null===(N=self.location)||void 0===N?void 0:N.protocol)||null}class ye{constructor(E,C){this.shortDelay=E,this.longDelay=C,At(C>E,"Short delay should be less than long delay!"),this.isMobile=(0,q.jZ)()||(0,q.lV)()}get(){return function an(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(function Nt(){return"http:"===Yt()||"https:"===Yt()}()||(0,q.sr)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Ye(N,E){At(N.emulator,"Emulator should always be set here");const{url:C}=N.emulator;return E?`${C}${E.startsWith("/")?E.slice(1):E}`:C}class Ht{static initialize(E,C,B){this.fetchImpl=E,C&&(this.headersImpl=C),B&&(this.responseImpl=B)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:typeof globalThis<"u"&&globalThis.fetch?globalThis.fetch:typeof fetch<"u"?fetch:void ve("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:typeof globalThis<"u"&&globalThis.Headers?globalThis.Headers:typeof Headers<"u"?Headers:void ve("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:typeof globalThis<"u"&&globalThis.Response?globalThis.Response:typeof Response<"u"?Response:void ve("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const et={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},gt=new ye(3e4,6e4);function Mt(N,E){return N.tenantId&&!E.tenantId?Object.assign(Object.assign({},E),{tenantId:N.tenantId}):E}function ft(N,E,C,B){return Ct.apply(this,arguments)}function Ct(){return(Ct=(0,b.A)(function*(N,E,C,B,de={}){return ln(N,de,(0,b.A)(function*(){let Se={},It={};B&&("GET"===E?It=B:Se={body:JSON.stringify(B)});const qt=(0,q.Am)(Object.assign({key:N.config.apiKey},It)).slice(1),Fn=yield N._getAdditionalHeaders();Fn["Content-Type"]="application/json",N.languageCode&&(Fn["X-Firebase-Locale"]=N.languageCode);const Dr=Object.assign({method:E,headers:Fn},Se);return(0,q.c1)()||(Dr.referrerPolicy="no-referrer"),Ht.fetch()(sr(N,N.config.apiHost,C,qt),Dr)}))})).apply(this,arguments)}function ln(N,E,C){return nr.apply(this,arguments)}function nr(){return(nr=(0,b.A)(function*(N,E,C){N._canInitEmulator=!1;const B=Object.assign(Object.assign({},et),E);try{const de=new Jn(N),Se=yield Promise.race([C(),de.promise]);de.clearNetworkTimeout();const It=yield Se.json();if("needConfirmation"in It)throw Rr(N,"account-exists-with-different-credential",It);if(Se.ok&&!("errorMessage"in It))return It;{const qt=Se.ok?It.errorMessage:It.error.message,[Fn,Dr]=qt.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Fn)throw Rr(N,"credential-already-in-use",It);if("EMAIL_EXISTS"===Fn)throw Rr(N,"email-already-in-use",It);if("USER_DISABLED"===Fn)throw Rr(N,"user-disabled",It);const Vr=B[Fn]||Fn.toLowerCase().replace(/[_\s]+/g,"-");if(Dr)throw Qe(N,Vr,Dr);kt(N,Vr)}}catch(de){if(de instanceof q.g)throw de;kt(N,"network-request-failed",{message:String(de)})}})).apply(this,arguments)}function Cr(){return(Cr=(0,b.A)(function*(N,E,C,B,de={}){const Se=yield ft(N,E,C,B,de);return"mfaPendingCredential"in Se&&kt(N,"multi-factor-auth-required",{_serverResponse:Se}),Se})).apply(this,arguments)}function sr(N,E,C,B){const de=`${E}${C}?${B}`;return N.config.emulator?Ye(N.config,de):`${N.config.apiScheme}://${de}`}class Jn{constructor(E){this.auth=E,this.timer=null,this.promise=new Promise((C,B)=>{this.timer=setTimeout(()=>B(Ke(this.auth,"network-request-failed")),gt.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Rr(N,E,C){const B={appName:N.name};C.email&&(B.email=C.email),C.phoneNumber&&(B.phoneNumber=C.phoneNumber);const de=Ke(N,E,B);return de.customData._tokenResponse=C,de}function rn(){return(rn=(0,b.A)(function*(N,E){return ft(N,"POST","/v1/accounts:delete",E)})).apply(this,arguments)}function Ut(N,E){return wt.apply(this,arguments)}function wt(){return(wt=(0,b.A)(function*(N,E){return ft(N,"POST","/v1/accounts:lookup",E)})).apply(this,arguments)}function $e(N){if(N)try{const E=new Date(Number(N));if(!isNaN(E.getTime()))return E.toUTCString()}catch{}}function An(){return(An=(0,b.A)(function*(N,E=!1){const C=(0,q.Ku)(N),B=yield C.getIdToken(E),de=yr(B);me(de&&de.exp&&de.auth_time&&de.iat,C.auth,"internal-error");const Se="object"==typeof de.firebase?de.firebase:void 0,It=Se?.sign_in_provider;return{claims:de,token:B,authTime:$e(ir(de.auth_time)),issuedAtTime:$e(ir(de.iat)),expirationTime:$e(ir(de.exp)),signInProvider:It||null,signInSecondFactor:Se?.sign_in_second_factor||null}})).apply(this,arguments)}function ir(N){return 1e3*Number(N)}function yr(N){const[E,C,B]=N.split(".");if(void 0===E||void 0===C||void 0===B)return Et("JWT malformed, contained fewer than 3 sections"),null;try{const de=(0,q.u)(C);return de?JSON.parse(de):(Et("Failed to decode base64 JWT payload"),null)}catch(de){return Et("Caught error parsing JWT payload as JSON",de?.toString()),null}}function ar(N){const E=yr(N);return me(E,"internal-error"),me(typeof E.exp<"u","internal-error"),me(typeof E.iat<"u","internal-error"),Number(E.exp)-Number(E.iat)}function mr(N,E){return Yr.apply(this,arguments)}function Yr(){return(Yr=(0,b.A)(function*(N,E,C=!1){if(C)return E;try{return yield E}catch(B){throw B instanceof q.g&&function Nr({code:N}){return"auth/user-disabled"===N||"auth/user-token-expired"===N}(B)&&N.auth.currentUser===N&&(yield N.auth.signOut()),B}})).apply(this,arguments)}class xt{constructor(E){this.user=E,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(E){var C;if(E){const B=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),B}{this.errorBackoff=3e4;const de=(null!==(C=this.user.stsTokenManager.expirationTime)&&void 0!==C?C:0)-Date.now()-3e5;return Math.max(0,de)}}schedule(E=!1){var C=this;if(!this.isRunning)return;const B=this.getInterval(E);this.timerId=setTimeout((0,b.A)(function*(){yield C.iteration()}),B)}iteration(){var E=this;return(0,b.A)(function*(){try{yield E.user.getIdToken(!0)}catch(C){return void("auth/network-request-failed"===C?.code&&E.schedule(!0))}E.schedule()})()}}class qr{constructor(E,C){this.createdAt=E,this.lastLoginAt=C,this._initializeTime()}_initializeTime(){this.lastSignInTime=$e(this.lastLoginAt),this.creationTime=$e(this.createdAt)}_copy(E){this.createdAt=E.createdAt,this.lastLoginAt=E.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function ai(N){return yi.apply(this,arguments)}function yi(){return(yi=(0,b.A)(function*(N){var E;const C=N.auth,B=yield N.getIdToken(),de=yield mr(N,Ut(C,{idToken:B}));me(de?.users.length,C,"internal-error");const Se=de.users[0];N._notifyReloadListener(Se);const It=null!==(E=Se.providerUserInfo)&&void 0!==E&&E.length?ne(Se.providerUserInfo):[],qt=function Te(N,E){return[...N.filter(B=>!E.some(de=>de.providerId===B.providerId)),...E]}(N.providerData,It),Vr=!!N.isAnonymous&&!(N.email&&Se.passwordHash||qt?.length),ui={uid:Se.localId,displayName:Se.displayName||null,photoURL:Se.photoUrl||null,email:Se.email||null,emailVerified:Se.emailVerified||!1,phoneNumber:Se.phoneNumber||null,tenantId:Se.tenantId||null,providerData:qt,metadata:new qr(Se.createdAt,Se.lastLoginAt),isAnonymous:Vr};Object.assign(N,ui)})).apply(this,arguments)}function pn(){return(pn=(0,b.A)(function*(N){const E=(0,q.Ku)(N);yield ai(E),yield E.auth._persistUserIfCurrent(E),E.auth._notifyListenersIfCurrent(E)})).apply(this,arguments)}function ne(N){return N.map(E=>{var{providerId:C}=E,B=(0,Ee.Tt)(E,["providerId"]);return{providerId:C,uid:B.rawId||"",displayName:B.displayName||null,email:B.email||null,phoneNumber:B.phoneNumber||null,photoURL:B.photoUrl||null}})}function Q(){return(Q=(0,b.A)(function*(N,E){const C=yield ln(N,{},(0,b.A)(function*(){const B=(0,q.Am)({grant_type:"refresh_token",refresh_token:E}).slice(1),{tokenApiHost:de,apiKey:Se}=N.config,It=sr(N,de,"/v1/token",`key=${Se}`),qt=yield N._getAdditionalHeaders();return qt["Content-Type"]="application/x-www-form-urlencoded",Ht.fetch()(It,{method:"POST",headers:qt,body:B})}));return{accessToken:C.access_token,expiresIn:C.expires_in,refreshToken:C.refresh_token}})).apply(this,arguments)}function ee(){return(ee=(0,b.A)(function*(N,E){return ft(N,"POST","/v2/accounts:revokeToken",Mt(N,E))})).apply(this,arguments)}class pe{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(E){me(E.idToken,"internal-error"),me(typeof E.idToken<"u","internal-error"),me(typeof E.refreshToken<"u","internal-error");const C="expiresIn"in E&&typeof E.expiresIn<"u"?Number(E.expiresIn):ar(E.idToken);this.updateTokensAndExpiration(E.idToken,E.refreshToken,C)}updateFromIdToken(E){me(0!==E.length,"internal-error");const C=ar(E);this.updateTokensAndExpiration(E,null,C)}getToken(E){var C=this;return(0,b.A)(function*(B,de=!1){return de||!C.accessToken||C.isExpired?(me(C.refreshToken,B,"user-token-expired"),C.refreshToken?(yield C.refresh(B,C.refreshToken),C.accessToken):null):C.accessToken}).apply(this,arguments)}clearRefreshToken(){this.refreshToken=null}refresh(E,C){var B=this;return(0,b.A)(function*(){const{accessToken:de,refreshToken:Se,expiresIn:It}=yield function J(N,E){return Q.apply(this,arguments)}(E,C);B.updateTokensAndExpiration(de,Se,Number(It))})()}updateTokensAndExpiration(E,C,B){this.refreshToken=C||null,this.accessToken=E||null,this.expirationTime=Date.now()+1e3*B}static fromJSON(E,C){const{refreshToken:B,accessToken:de,expirationTime:Se}=C,It=new pe;return B&&(me("string"==typeof B,"internal-error",{appName:E}),It.refreshToken=B),de&&(me("string"==typeof de,"internal-error",{appName:E}),It.accessToken=de),Se&&(me("number"==typeof Se,"internal-error",{appName:E}),It.expirationTime=Se),It}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(E){this.accessToken=E.accessToken,this.refreshToken=E.refreshToken,this.expirationTime=E.expirationTime}_clone(){return Object.assign(new pe,this.toJSON())}_performRefresh(){return ve("not implemented")}}function Oe(N,E){me("string"==typeof N||typeof N>"u","internal-error",{appName:E})}class Tt{constructor(E){var{uid:C,auth:B,stsTokenManager:de}=E,Se=(0,Ee.Tt)(E,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new xt(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=C,this.auth=B,this.stsTokenManager=de,this.accessToken=de.accessToken,this.displayName=Se.displayName||null,this.email=Se.email||null,this.emailVerified=Se.emailVerified||!1,this.phoneNumber=Se.phoneNumber||null,this.photoURL=Se.photoURL||null,this.isAnonymous=Se.isAnonymous||!1,this.tenantId=Se.tenantId||null,this.providerData=Se.providerData?[...Se.providerData]:[],this.metadata=new qr(Se.createdAt||void 0,Se.lastLoginAt||void 0)}getIdToken(E){var C=this;return(0,b.A)(function*(){const B=yield mr(C,C.stsTokenManager.getToken(C.auth,E));return me(B,C.auth,"internal-error"),C.accessToken!==B&&(C.accessToken=B,yield C.auth._persistUserIfCurrent(C),C.auth._notifyListenersIfCurrent(C)),B})()}getIdTokenResult(E){return function gn(N){return An.apply(this,arguments)}(this,E)}reload(){return function Xr(N){return pn.apply(this,arguments)}(this)}_assign(E){this!==E&&(me(this.uid===E.uid,this.auth,"internal-error"),this.displayName=E.displayName,this.photoURL=E.photoURL,this.email=E.email,this.emailVerified=E.emailVerified,this.phoneNumber=E.phoneNumber,this.isAnonymous=E.isAnonymous,this.tenantId=E.tenantId,this.providerData=E.providerData.map(C=>Object.assign({},C)),this.metadata._copy(E.metadata),this.stsTokenManager._assign(E.stsTokenManager))}_clone(E){const C=new Tt(Object.assign(Object.assign({},this),{auth:E,stsTokenManager:this.stsTokenManager._clone()}));return C.metadata._copy(this.metadata),C}_onReload(E){me(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=E,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(E){this.reloadListener?this.reloadListener(E):this.reloadUserInfo=E}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(E){var C=this;return(0,b.A)(function*(B,de=!1){let Se=!1;B.idToken&&B.idToken!==C.stsTokenManager.accessToken&&(C.stsTokenManager.updateFromServerResponse(B),Se=!0),de&&(yield ai(C)),yield C.auth._persistUserIfCurrent(C),Se&&C.auth._notifyListenersIfCurrent(C)}).apply(this,arguments)}delete(){var E=this;return(0,b.A)(function*(){if((0,$._isFirebaseServerApp)(E.auth.app))return Promise.reject(ct(E.auth));const C=yield E.getIdToken();return yield mr(E,function je(N,E){return rn.apply(this,arguments)}(E.auth,{idToken:C})),E.stsTokenManager.clearRefreshToken(),E.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(E=>Object.assign({},E)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(E,C){var B,de,Se,It,qt,Fn,Dr,Vr;const ui=null!==(B=C.displayName)&&void 0!==B?B:void 0,Xi=null!==(de=C.email)&&void 0!==de?de:void 0,Ls=null!==(Se=C.phoneNumber)&&void 0!==Se?Se:void 0,vc=null!==(It=C.photoURL)&&void 0!==It?It:void 0,ec=null!==(qt=C.tenantId)&&void 0!==qt?qt:void 0,Cu=null!==(Fn=C._redirectEventId)&&void 0!==Fn?Fn:void 0,Gd=null!==(Dr=C.createdAt)&&void 0!==Dr?Dr:void 0,wd=null!==(Vr=C.lastLoginAt)&&void 0!==Vr?Vr:void 0,{uid:Su,emailVerified:hd,isAnonymous:tu,providerData:Ec,stsTokenManager:Du}=C;me(Su&&Du,E,"internal-error");const _l=pe.fromJSON(this.name,Du);me("string"==typeof Su,E,"internal-error"),Oe(ui,E.name),Oe(Xi,E.name),me("boolean"==typeof hd,E,"internal-error"),me("boolean"==typeof tu,E,"internal-error"),Oe(Ls,E.name),Oe(vc,E.name),Oe(ec,E.name),Oe(Cu,E.name),Oe(Gd,E.name),Oe(wd,E.name);const bc=new Tt({uid:Su,auth:E,email:Xi,emailVerified:hd,displayName:ui,isAnonymous:tu,photoURL:vc,phoneNumber:Ls,tenantId:ec,stsTokenManager:_l,createdAt:Gd,lastLoginAt:wd});return Ec&&Array.isArray(Ec)&&(bc.providerData=Ec.map(tc=>Object.assign({},tc))),Cu&&(bc._redirectEventId=Cu),bc}static _fromIdTokenResponse(E,C){return(0,b.A)(function*(B,de,Se=!1){const It=new pe;It.updateFromServerResponse(de);const qt=new Tt({uid:de.localId,auth:B,stsTokenManager:It,isAnonymous:Se});return yield ai(qt),qt}).apply(this,arguments)}static _fromGetAccountInfoResponse(E,C,B){return(0,b.A)(function*(){const de=C.users[0];me(void 0!==de.localId,"internal-error");const Se=void 0!==de.providerUserInfo?ne(de.providerUserInfo):[],It=!(de.email&&de.passwordHash||Se?.length),qt=new pe;qt.updateFromIdToken(B);const Fn=new Tt({uid:de.localId,auth:E,stsTokenManager:qt,isAnonymous:It}),Dr={uid:de.localId,displayName:de.displayName||null,photoURL:de.photoUrl||null,email:de.email||null,emailVerified:de.emailVerified||!1,phoneNumber:de.phoneNumber||null,tenantId:de.tenantId||null,providerData:Se,metadata:new qr(de.createdAt,de.lastLoginAt),isAnonymous:!(de.email&&de.passwordHash||Se?.length)};return Object.assign(Fn,Dr),Fn})()}}const lt=new Map;function On(N){At(N instanceof Function,"Expected a class definition");let E=lt.get(N);return E?(At(E instanceof N,"Instance stored in cache mismatched with class"),E):(E=new N,lt.set(N,E),E)}const wi=(()=>{class N{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,b.A)(function*(){return!0})()}_set(C,B){var de=this;return(0,b.A)(function*(){de.storage[C]=B})()}_get(C){var B=this;return(0,b.A)(function*(){const de=B.storage[C];return void 0===de?null:de})()}_remove(C){var B=this;return(0,b.A)(function*(){delete B.storage[C]})()}_addListener(C,B){}_removeListener(C,B){}}return N.type="NONE",N})();function bi(N,E,C){return`firebase:${N}:${E}:${C}`}class Lr{constructor(E,C,B){this.persistence=E,this.auth=C,this.userKey=B;const{config:de,name:Se}=this.auth;this.fullUserKey=bi(this.userKey,de.apiKey,Se),this.fullPersistenceKey=bi("persistence",de.apiKey,Se),this.boundEventHandler=C._onStorageEvent.bind(C),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(E){return this.persistence._set(this.fullUserKey,E.toJSON())}getCurrentUser(){var E=this;return(0,b.A)(function*(){const C=yield E.persistence._get(E.fullUserKey);return C?Tt._fromJSON(E.auth,C):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(E){var C=this;return(0,b.A)(function*(){if(C.persistence===E)return;const B=yield C.getCurrentUser();return yield C.removeCurrentUser(),C.persistence=E,B?C.setCurrentUser(B):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(E,C){return(0,b.A)(function*(B,de,Se="authUser"){if(!de.length)return new Lr(On(wi),B,Se);const It=(yield Promise.all(de.map(function(){var ui=(0,b.A)(function*(Xi){if(yield Xi._isAvailable())return Xi});return function(Xi){return ui.apply(this,arguments)}}()))).filter(ui=>ui);let qt=It[0]||On(wi);const Fn=bi(Se,B.config.apiKey,B.name);let Dr=null;for(const ui of de)try{const Xi=yield ui._get(Fn);if(Xi){const Ls=Tt._fromJSON(B,Xi);ui!==qt&&(Dr=Ls),qt=ui;break}}catch{}const Vr=It.filter(ui=>ui._shouldAllowMigration);return qt._shouldAllowMigration&&Vr.length?(qt=Vr[0],Dr&&(yield qt._set(Fn,Dr.toJSON())),yield Promise.all(de.map(function(){var ui=(0,b.A)(function*(Xi){if(Xi!==qt)try{yield Xi._remove(Fn)}catch{}});return function(Xi){return ui.apply(this,arguments)}}())),new Lr(qt,B,Se)):new Lr(qt,B,Se)}).apply(this,arguments)}}function hi(N){const E=N.toLowerCase();if(E.includes("opera/")||E.includes("opr/")||E.includes("opios/"))return"Opera";if(Ks(E))return"IEMobile";if(E.includes("msie")||E.includes("trident/"))return"IE";if(E.includes("edge/"))return"Edge";if(er(E))return"Firefox";if(E.includes("silk/"))return"Silk";if(Os(E))return"Blackberry";if(vi(E))return"Webos";if(rs(E))return"Safari";if((E.includes("chrome/")||Ms(E))&&!E.includes("edge/"))return"Chrome";if(Co(E))return"Android";{const B=N.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===B?.length)return B[1]}return"Other"}function er(N=(0,q.ZQ)()){return/firefox\//i.test(N)}function rs(N=(0,q.ZQ)()){const E=N.toLowerCase();return E.includes("safari/")&&!E.includes("chrome/")&&!E.includes("crios/")&&!E.includes("android")}function Ms(N=(0,q.ZQ)()){return/crios\//i.test(N)}function Ks(N=(0,q.ZQ)()){return/iemobile/i.test(N)}function Co(N=(0,q.ZQ)()){return/android/i.test(N)}function Os(N=(0,q.ZQ)()){return/blackberry/i.test(N)}function vi(N=(0,q.ZQ)()){return/webos/i.test(N)}function la(N=(0,q.ZQ)()){return/iphone|ipad|ipod/i.test(N)||/macintosh/i.test(N)&&/mobile/i.test(N)}function Gs(N=(0,q.ZQ)()){return la(N)||Co(N)||vi(N)||Os(N)||/windows phone/i.test(N)||Ks(N)}function _s(N,E=[]){let C;switch(N){case"Browser":C=hi((0,q.ZQ)());break;case"Worker":C=`${hi((0,q.ZQ)())}-${N}`;break;default:C=N}const B=E.length?E.join(","):"FirebaseCore-web";return`${C}/JsCore/${$.SDK_VERSION}/${B}`}class Ts{constructor(E){this.auth=E,this.queue=[]}pushCallback(E,C){const B=Se=>new Promise((It,qt)=>{try{It(E(Se))}catch(Fn){qt(Fn)}});B.onAbort=C,this.queue.push(B);const de=this.queue.length-1;return()=>{this.queue[de]=()=>Promise.resolve()}}runMiddleware(E){var C=this;return(0,b.A)(function*(){if(C.auth.currentUser===E)return;const B=[];try{for(const de of C.queue)yield de(E),de.onAbort&&B.push(de.onAbort)}catch(de){B.reverse();for(const Se of B)try{Se()}catch{}throw C.auth._errorFactory.create("login-blocked",{originalMessage:de?.message})}})()}}function it(){return(it=(0,b.A)(function*(N,E={}){return ft(N,"GET","/v2/passwordPolicy",Mt(N,E))})).apply(this,arguments)}class un{constructor(E){var C,B,de,Se;const It=E.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(C=It.minPasswordLength)&&void 0!==C?C:6,It.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=It.maxPasswordLength),void 0!==It.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=It.containsLowercaseCharacter),void 0!==It.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=It.containsUppercaseCharacter),void 0!==It.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=It.containsNumericCharacter),void 0!==It.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=It.containsNonAlphanumericCharacter),this.enforcementState=E.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(de=null===(B=E.allowedNonAlphanumericCharacters)||void 0===B?void 0:B.join(""))&&void 0!==de?de:"",this.forceUpgradeOnSignin=null!==(Se=E.forceUpgradeOnSignin)&&void 0!==Se&&Se,this.schemaVersion=E.schemaVersion}validatePassword(E){var C,B,de,Se,It,qt;const Fn={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(E,Fn),this.validatePasswordCharacterOptions(E,Fn),Fn.isValid&&(Fn.isValid=null===(C=Fn.meetsMinPasswordLength)||void 0===C||C),Fn.isValid&&(Fn.isValid=null===(B=Fn.meetsMaxPasswordLength)||void 0===B||B),Fn.isValid&&(Fn.isValid=null===(de=Fn.containsLowercaseLetter)||void 0===de||de),Fn.isValid&&(Fn.isValid=null===(Se=Fn.containsUppercaseLetter)||void 0===Se||Se),Fn.isValid&&(Fn.isValid=null===(It=Fn.containsNumericCharacter)||void 0===It||It),Fn.isValid&&(Fn.isValid=null===(qt=Fn.containsNonAlphanumericCharacter)||void 0===qt||qt),Fn}validatePasswordLengthOptions(E,C){const B=this.customStrengthOptions.minPasswordLength,de=this.customStrengthOptions.maxPasswordLength;B&&(C.meetsMinPasswordLength=E.length>=B),de&&(C.meetsMaxPasswordLength=E.length<=de)}validatePasswordCharacterOptions(E,C){let B;this.updatePasswordCharacterOptionsStatuses(C,!1,!1,!1,!1);for(let de=0;de<E.length;de++)B=E.charAt(de),this.updatePasswordCharacterOptionsStatuses(C,B>="a"&&B<="z",B>="A"&&B<="Z",B>="0"&&B<="9",this.allowedNonAlphanumericCharacters.includes(B))}updatePasswordCharacterOptionsStatuses(E,C,B,de,Se){this.customStrengthOptions.containsLowercaseLetter&&(E.containsLowercaseLetter||(E.containsLowercaseLetter=C)),this.customStrengthOptions.containsUppercaseLetter&&(E.containsUppercaseLetter||(E.containsUppercaseLetter=B)),this.customStrengthOptions.containsNumericCharacter&&(E.containsNumericCharacter||(E.containsNumericCharacter=de)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(E.containsNonAlphanumericCharacter||(E.containsNonAlphanumericCharacter=Se))}}class sn{constructor(E,C,B,de){this.app=E,this.heartbeatServiceProvider=C,this.appCheckServiceProvider=B,this.config=de,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new jt(this),this.idTokenSubscription=new jt(this),this.beforeStateQueue=new Ts(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ft,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=E.name,this.clientVersion=de.sdkClientVersion}_initializeWithPersistence(E,C){var B=this;return C&&(this._popupRedirectResolver=On(C)),this._initializationPromise=this.queue((0,b.A)(function*(){var de,Se;if(!B._deleted&&(B.persistenceManager=yield Lr.create(B,E),!B._deleted)){if(null!==(de=B._popupRedirectResolver)&&void 0!==de&&de._shouldInitProactively)try{yield B._popupRedirectResolver._initialize(B)}catch{}yield B.initializeCurrentUser(C),B.lastNotifiedUid=(null===(Se=B.currentUser)||void 0===Se?void 0:Se.uid)||null,!B._deleted&&(B._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var E=this;return(0,b.A)(function*(){if(E._deleted)return;const C=yield E.assertedPersistence.getCurrentUser();if(E.currentUser||C){if(E.currentUser&&C&&E.currentUser.uid===C.uid)return E._currentUser._assign(C),void(yield E.currentUser.getIdToken());yield E._updateCurrentUser(C,!0)}})()}initializeCurrentUserFromIdToken(E){var C=this;return(0,b.A)(function*(){try{const B=yield Ut(C,{idToken:E}),de=yield Tt._fromGetAccountInfoResponse(C,B,E);yield C.directlySetCurrentUser(de)}catch(B){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",B),yield C.directlySetCurrentUser(null)}})()}initializeCurrentUser(E){var C=this;return(0,b.A)(function*(){var B;if((0,$._isFirebaseServerApp)(C.app)){const qt=C.app.settings.authIdToken;return qt?new Promise(Fn=>{setTimeout(()=>C.initializeCurrentUserFromIdToken(qt).then(Fn,Fn))}):C.directlySetCurrentUser(null)}const de=yield C.assertedPersistence.getCurrentUser();let Se=de,It=!1;if(E&&C.config.authDomain){yield C.getOrInitRedirectPersistenceManager();const qt=null===(B=C.redirectUser)||void 0===B?void 0:B._redirectEventId,Fn=Se?._redirectEventId,Dr=yield C.tryRedirectSignIn(E);(!qt||qt===Fn)&&Dr?.user&&(Se=Dr.user,It=!0)}if(!Se)return C.directlySetCurrentUser(null);if(!Se._redirectEventId){if(It)try{yield C.beforeStateQueue.runMiddleware(Se)}catch(qt){Se=de,C._popupRedirectResolver._overrideRedirectResult(C,()=>Promise.reject(qt))}return Se?C.reloadAndSetCurrentUserOrClear(Se):C.directlySetCurrentUser(null)}return me(C._popupRedirectResolver,C,"argument-error"),yield C.getOrInitRedirectPersistenceManager(),C.redirectUser&&C.redirectUser._redirectEventId===Se._redirectEventId?C.directlySetCurrentUser(Se):C.reloadAndSetCurrentUserOrClear(Se)})()}tryRedirectSignIn(E){var C=this;return(0,b.A)(function*(){let B=null;try{B=yield C._popupRedirectResolver._completeRedirectFn(C,E,!0)}catch{yield C._setRedirectUser(null)}return B})()}reloadAndSetCurrentUserOrClear(E){var C=this;return(0,b.A)(function*(){try{yield ai(E)}catch(B){if("auth/network-request-failed"!==B?.code)return C.directlySetCurrentUser(null)}return C.directlySetCurrentUser(E)})()}useDeviceLanguage(){this.languageCode=function $t(){if(typeof navigator>"u")return null;const N=navigator;return N.languages&&N.languages[0]||N.language||null}()}_delete(){var E=this;return(0,b.A)(function*(){E._deleted=!0})()}updateCurrentUser(E){var C=this;return(0,b.A)(function*(){if((0,$._isFirebaseServerApp)(C.app))return Promise.reject(ct(C));const B=E?(0,q.Ku)(E):null;return B&&me(B.auth.config.apiKey===C.config.apiKey,C,"invalid-user-token"),C._updateCurrentUser(B&&B._clone(C))})()}_updateCurrentUser(E){var C=this;return(0,b.A)(function*(B,de=!1){if(!C._deleted)return B&&me(C.tenantId===B.tenantId,C,"tenant-id-mismatch"),de||(yield C.beforeStateQueue.runMiddleware(B)),C.queue((0,b.A)(function*(){yield C.directlySetCurrentUser(B),C.notifyAuthListeners()}))}).apply(this,arguments)}signOut(){var E=this;return(0,b.A)(function*(){return(0,$._isFirebaseServerApp)(E.app)?Promise.reject(ct(E)):(yield E.beforeStateQueue.runMiddleware(null),(E.redirectPersistenceManager||E._popupRedirectResolver)&&(yield E._setRedirectUser(null)),E._updateCurrentUser(null,!0))})()}setPersistence(E){var C=this;return(0,$._isFirebaseServerApp)(this.app)?Promise.reject(ct(this)):this.queue((0,b.A)(function*(){yield C.assertedPersistence.setPersistence(On(E))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(E){var C=this;return(0,b.A)(function*(){C._getPasswordPolicyInternal()||(yield C._updatePasswordPolicy());const B=C._getPasswordPolicyInternal();return B.schemaVersion!==C.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(C._errorFactory.create("unsupported-password-policy-schema-version",{})):B.validatePassword(E)})()}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){var E=this;return(0,b.A)(function*(){const C=yield function Ue(N){return it.apply(this,arguments)}(E),B=new un(C);null===E.tenantId?E._projectPasswordPolicy=B:E._tenantPasswordPolicies[E.tenantId]=B})()}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(E){this._errorFactory=new q.FA("auth","Firebase",E())}onAuthStateChanged(E,C,B){return this.registerStateListener(this.authStateSubscription,E,C,B)}beforeAuthStateChanged(E,C){return this.beforeStateQueue.pushCallback(E,C)}onIdTokenChanged(E,C,B){return this.registerStateListener(this.idTokenSubscription,E,C,B)}authStateReady(){return new Promise((E,C)=>{if(this.currentUser)E();else{const B=this.onAuthStateChanged(()=>{B(),E()},C)}})}revokeAccessToken(E){var C=this;return(0,b.A)(function*(){if(C.currentUser){const B=yield C.currentUser.getIdToken(),de={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:E,idToken:B};null!=C.tenantId&&(de.tenantId=C.tenantId),yield function oe(N,E){return ee.apply(this,arguments)}(C,de)}})()}toJSON(){var E;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(E=this._currentUser)||void 0===E?void 0:E.toJSON()}}_setRedirectUser(E,C){var B=this;return(0,b.A)(function*(){const de=yield B.getOrInitRedirectPersistenceManager(C);return null===E?de.removeCurrentUser():de.setCurrentUser(E)})()}getOrInitRedirectPersistenceManager(E){var C=this;return(0,b.A)(function*(){if(!C.redirectPersistenceManager){const B=E&&On(E)||C._popupRedirectResolver;me(B,C,"argument-error"),C.redirectPersistenceManager=yield Lr.create(C,[On(B._redirectPersistence)],"redirectUser"),C.redirectUser=yield C.redirectPersistenceManager.getCurrentUser()}return C.redirectPersistenceManager})()}_redirectUserForId(E){var C=this;return(0,b.A)(function*(){var B,de;return C._isInitialized&&(yield C.queue((0,b.A)(function*(){}))),(null===(B=C._currentUser)||void 0===B?void 0:B._redirectEventId)===E?C._currentUser:(null===(de=C.redirectUser)||void 0===de?void 0:de._redirectEventId)===E?C.redirectUser:null})()}_persistUserIfCurrent(E){var C=this;return(0,b.A)(function*(){if(E===C.currentUser)return C.queue((0,b.A)(function*(){return C.directlySetCurrentUser(E)}))})()}_notifyListenersIfCurrent(E){E===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var E,C;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const B=null!==(C=null===(E=this.currentUser)||void 0===E?void 0:E.uid)&&void 0!==C?C:null;this.lastNotifiedUid!==B&&(this.lastNotifiedUid=B,this.authStateSubscription.next(this.currentUser))}registerStateListener(E,C,B,de){if(this._deleted)return()=>{};const Se="function"==typeof C?C:C.next.bind(C);let It=!1;const qt=this._isInitialized?Promise.resolve():this._initializationPromise;if(me(qt,this,"internal-error"),qt.then(()=>{It||Se(this.currentUser)}),"function"==typeof C){const Fn=E.addObserver(C,B,de);return()=>{It=!0,Fn()}}{const Fn=E.addObserver(C);return()=>{It=!0,Fn()}}}directlySetCurrentUser(E){var C=this;return(0,b.A)(function*(){C.currentUser&&C.currentUser!==E&&C._currentUser._stopProactiveRefresh(),E&&C.isProactiveRefreshEnabled&&E._startProactiveRefresh(),C.currentUser=E,E?yield C.assertedPersistence.setCurrentUser(E):yield C.assertedPersistence.removeCurrentUser()})()}queue(E){return this.operations=this.operations.then(E,E),this.operations}get assertedPersistence(){return me(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(E){!E||this.frameworks.includes(E)||(this.frameworks.push(E),this.frameworks.sort(),this.clientVersion=_s(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var E=this;return(0,b.A)(function*(){var C;const B={"X-Client-Version":E.clientVersion};E.app.options.appId&&(B["X-Firebase-gmpid"]=E.app.options.appId);const de=yield null===(C=E.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===C?void 0:C.getHeartbeatsHeader();de&&(B["X-Firebase-Client"]=de);const Se=yield E._getAppCheckToken();return Se&&(B["X-Firebase-AppCheck"]=Se),B})()}_getAppCheckToken(){var E=this;return(0,b.A)(function*(){var C;const B=yield null===(C=E.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===C?void 0:C.getToken();return B?.error&&function hn(N,...E){Pt.logLevel<=H.$b.WARN&&Pt.warn(`Auth (${$.SDK_VERSION}): ${N}`,...E)}(`Error while retrieving App Check token: ${B.error}`),B?.token})()}}function Sn(N){return(0,q.Ku)(N)}class jt{constructor(E){this.auth=E,this.observer=null,this.addObserver=(0,q.tD)(C=>this.observer=C)}get next(){return me(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Xn={loadJS:()=>(0,b.A)(function*(){throw new Error("Unable to load external scripts")})(),recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function or(N){return`__${N}${Math.floor(1e6*Math.random())}`}function Kt(N){const E=N.indexOf(":");return E<0?"":N.substr(0,E+1)}function Rn(N){if(!N)return null;const E=Number(N);return isNaN(E)?null:E}class Ie{constructor(E,C){this.providerId=E,this.signInMethod=C}toJSON(){return ve("not implemented")}_getIdTokenResponse(E){return ve("not implemented")}_linkToIdToken(E,C){return ve("not implemented")}_getReauthenticationResolver(E){return ve("not implemented")}}function Vo(N,E){return Ii.apply(this,arguments)}function Ii(){return(Ii=(0,b.A)(function*(N,E){return function hr(N,E,C,B){return Cr.apply(this,arguments)}(N,"POST","/v1/accounts:signInWithIdp",Mt(N,E))})).apply(this,arguments)}class ss{constructor(E){this.providerId=E,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(E){this.defaultLanguageCode=E}setCustomParameters(E){return this.customParameters=E,this}getCustomParameters(){return this.customParameters}}class ns extends ss{constructor(){super(...arguments),this.scopes=[]}addScope(E){return this.scopes.includes(E)||this.scopes.push(E),this}getScopes(){return[...this.scopes]}}class Vs{constructor(E){this.user=E.user,this.providerId=E.providerId,this._tokenResponse=E._tokenResponse,this.operationType=E.operationType}static _fromIdTokenResponse(E,C,B){return(0,b.A)(function*(de,Se,It,qt=!1){const Fn=yield Tt._fromIdTokenResponse(de,It,qt),Dr=vs(It);return new Vs({user:Fn,providerId:Dr,_tokenResponse:It,operationType:Se})}).apply(this,arguments)}static _forOperation(E,C,B){return(0,b.A)(function*(){yield E._updateTokensIfNecessary(B,!0);const de=vs(B);return new Vs({user:E,providerId:de,_tokenResponse:B,operationType:C})})()}}function vs(N){return N.providerId?N.providerId:"phoneNumber"in N?"phone":null}class _o extends q.g{constructor(E,C,B,de){var Se;super(C.code,C.message),this.operationType=B,this.user=de,Object.setPrototypeOf(this,_o.prototype),this.customData={appName:E.name,tenantId:null!==(Se=E.tenantId)&&void 0!==Se?Se:void 0,_serverResponse:C.customData._serverResponse,operationType:B}}static _fromErrorAndOperation(E,C,B,de){return new _o(E,C,B,de)}}function Wa(N,E,C,B){return("reauthenticate"===E?C._getReauthenticationResolver(N):C._getIdTokenResponse(N)).catch(Se=>{throw"auth/multi-factor-auth-required"===Se.code?_o._fromErrorAndOperation(N,Se,E,B):Se})}function Pc(){return(Pc=(0,b.A)(function*(N,E,C=!1){const B=yield mr(N,E._linkToIdToken(N.auth,yield N.getIdToken()),C);return Vs._forOperation(N,"link",B)})).apply(this,arguments)}function Tl(){return(Tl=(0,b.A)(function*(N,E,C=!1){const{auth:B}=N;if((0,$._isFirebaseServerApp)(B.app))return Promise.reject(ct(B));const de="reauthenticate";try{const Se=yield mr(N,Wa(B,de,E,N),C);me(Se.idToken,B,"internal-error");const It=yr(Se.idToken);me(It,B,"internal-error");const{sub:qt}=It;return me(N.uid===qt,B,"user-mismatch"),Vs._forOperation(N,de,Se)}catch(Se){throw"auth/user-not-found"===Se?.code&&kt(B,"user-mismatch"),Se}})).apply(this,arguments)}function Qi(){return(Qi=(0,b.A)(function*(N,E,C=!1){if((0,$._isFirebaseServerApp)(N.app))return Promise.reject(ct(N));const B="signIn",de=yield Wa(N,B,E),Se=yield Vs._fromIdTokenResponse(N,B,de);return C||(yield N._updateCurrentUser(Se.user)),Se})).apply(this,arguments)}function Bi(N,E,C,B){return(0,q.Ku)(N).onIdTokenChanged(E,C,B)}function _i(N,E,C,B){return(0,q.Ku)(N).onAuthStateChanged(E,C,B)}const td="__sak";class kc{constructor(E,C){this.storageRetriever=E,this.type=C}_isAvailable(){try{return this.storage?(this.storage.setItem(td,"1"),this.storage.removeItem(td),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(E,C){return this.storage.setItem(E,JSON.stringify(C)),Promise.resolve()}_get(E){const C=this.storage.getItem(E);return Promise.resolve(C?JSON.parse(C):null)}_remove(E){return this.storage.removeItem(E),Promise.resolve()}get storage(){return this.storageRetriever()}}const Lc=(()=>{class N extends kc{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(C,B)=>this.onStorageEvent(C,B),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Gs(),this._shouldAllowMigration=!0}forAllChangedKeys(C){for(const B of Object.keys(this.listeners)){const de=this.storage.getItem(B),Se=this.localCache[B];de!==Se&&C(B,Se,de)}}onStorageEvent(C,B=!1){if(!C.key)return void this.forAllChangedKeys((qt,Fn,Dr)=>{this.notifyListeners(qt,Dr)});const de=C.key;B?this.detachListener():this.stopPolling();const Se=()=>{const qt=this.storage.getItem(de);!B&&this.localCache[de]===qt||this.notifyListeners(de,qt)},It=this.storage.getItem(de);!function fo(){return(0,q.lT)()&&10===document.documentMode}()||It===C.newValue||C.newValue===C.oldValue?Se():setTimeout(Se,10)}notifyListeners(C,B){this.localCache[C]=B;const de=this.listeners[C];if(de)for(const Se of Array.from(de))Se(B&&JSON.parse(B))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((C,B,de)=>{this.onStorageEvent(new StorageEvent("storage",{key:C,oldValue:B,newValue:de}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(C,B){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[C]||(this.listeners[C]=new Set,this.localCache[C]=this.storage.getItem(C)),this.listeners[C].add(B)}_removeListener(C,B){this.listeners[C]&&(this.listeners[C].delete(B),0===this.listeners[C].size&&delete this.listeners[C]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(C,B){var de=()=>super._set,Se=this;return(0,b.A)(function*(){yield de().call(Se,C,B),Se.localCache[C]=JSON.stringify(B)})()}_get(C){var B=()=>super._get,de=this;return(0,b.A)(function*(){const Se=yield B().call(de,C);return de.localCache[C]=JSON.stringify(Se),Se})()}_remove(C){var B=()=>super._remove,de=this;return(0,b.A)(function*(){yield B().call(de,C),delete de.localCache[C]})()}}return N.type="LOCAL",N})(),ou=(()=>{class N extends kc{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(C,B){}_removeListener(C,B){}}return N.type="SESSION",N})();let au=(()=>{class N{constructor(C){this.eventTarget=C,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(C){const B=this.receivers.find(Se=>Se.isListeningto(C));if(B)return B;const de=new N(C);return this.receivers.push(de),de}isListeningto(C){return this.eventTarget===C}handleEvent(C){var B=this;return(0,b.A)(function*(){const de=C,{eventId:Se,eventType:It,data:qt}=de.data,Fn=B.handlersMap[It];if(!Fn?.size)return;de.ports[0].postMessage({status:"ack",eventId:Se,eventType:It});const Dr=Array.from(Fn).map(function(){var ui=(0,b.A)(function*(Xi){return Xi(de.origin,qt)});return function(Xi){return ui.apply(this,arguments)}}()),Vr=yield function Oo(N){return Promise.all(N.map(function(){var E=(0,b.A)(function*(C){try{return{fulfilled:!0,value:yield C}}catch(B){return{fulfilled:!1,reason:B}}});return function(C){return E.apply(this,arguments)}}()))}(Dr);de.ports[0].postMessage({status:"done",eventId:Se,eventType:It,response:Vr})})()}_subscribe(C,B){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[C]||(this.handlersMap[C]=new Set),this.handlersMap[C].add(B)}_unsubscribe(C,B){this.handlersMap[C]&&B&&this.handlersMap[C].delete(B),(!B||0===this.handlersMap[C].size)&&delete this.handlersMap[C],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return N.receivers=[],N})();function Oa(N="",E=10){let C="";for(let B=0;B<E;B++)C+=Math.floor(10*Math.random());return N+C}class zr{constructor(E){this.target=E,this.handlers=new Set}removeMessageHandler(E){E.messageChannel&&(E.messageChannel.port1.removeEventListener("message",E.onMessage),E.messageChannel.port1.close()),this.handlers.delete(E)}_send(E,C){var B=this;return(0,b.A)(function*(de,Se,It=50){const qt=typeof MessageChannel<"u"?new MessageChannel:null;if(!qt)throw new Error("connection_unavailable");let Fn,Dr;return new Promise((Vr,ui)=>{const Xi=Oa("",20);qt.port1.start();const Ls=setTimeout(()=>{ui(new Error("unsupported_event"))},It);Dr={messageChannel:qt,onMessage(vc){const ec=vc;if(ec.data.eventId===Xi)switch(ec.data.status){case"ack":clearTimeout(Ls),Fn=setTimeout(()=>{ui(new Error("timeout"))},3e3);break;case"done":clearTimeout(Fn),Vr(ec.data.response);break;default:clearTimeout(Ls),clearTimeout(Fn),ui(new Error("invalid_response"))}}},B.handlers.add(Dr),qt.port1.addEventListener("message",Dr.onMessage),B.target.postMessage({eventType:de,eventId:Xi,data:Se},[qt.port2])}).finally(()=>{Dr&&B.removeMessageHandler(Dr)})}).apply(this,arguments)}}function us(){return window}function ra(){return typeof us().WorkerGlobalScope<"u"&&"function"==typeof us().importScripts}function hc(){return(hc=(0,b.A)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const xo="firebaseLocalStorageDb",al="firebaseLocalStorage",xa="fbase_key";class Fc{constructor(E){this.request=E}toPromise(){return new Promise((E,C)=>{this.request.addEventListener("success",()=>{E(this.request.result)}),this.request.addEventListener("error",()=>{C(this.request.error)})})}}function ms(N,E){return N.transaction([al],E?"readwrite":"readonly").objectStore(al)}function $r(){const N=indexedDB.open(xo,1);return new Promise((E,C)=>{N.addEventListener("error",()=>{C(N.error)}),N.addEventListener("upgradeneeded",()=>{const B=N.result;try{B.createObjectStore(al,{keyPath:xa})}catch(de){C(de)}}),N.addEventListener("success",(0,b.A)(function*(){const B=N.result;B.objectStoreNames.contains(al)?E(B):(B.close(),yield function Na(){const N=indexedDB.deleteDatabase(xo);return new Fc(N).toPromise()}(),E(yield $r()))}))})}function bd(N,E,C){return Cl.apply(this,arguments)}function Cl(){return(Cl=(0,b.A)(function*(N,E,C){const B=ms(N,!0).put({[xa]:E,value:C});return new Fc(B).toPromise()})).apply(this,arguments)}function nd(){return(nd=(0,b.A)(function*(N,E){const C=ms(N,!1).get(E),B=yield new Fc(C).toPromise();return void 0===B?null:B.value})).apply(this,arguments)}function cu(N,E){const C=ms(N,!0).delete(E);return new Fc(C).toPromise()}const k=(()=>{class N{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var C=this;return(0,b.A)(function*(){return C.db||(C.db=yield $r()),C.db})()}_withRetries(C){var B=this;return(0,b.A)(function*(){let de=0;for(;;)try{const Se=yield B._openDb();return yield C(Se)}catch(Se){if(de++>3)throw Se;B.db&&(B.db.close(),B.db=void 0)}})()}initializeServiceWorkerMessaging(){var C=this;return(0,b.A)(function*(){return ra()?C.initializeReceiver():C.initializeSender()})()}initializeReceiver(){var C=this;return(0,b.A)(function*(){C.receiver=au._getInstance(function Ed(){return ra()?self:null}()),C.receiver._subscribe("keyChanged",function(){var B=(0,b.A)(function*(de,Se){return{keyProcessed:(yield C._poll()).includes(Se.key)}});return function(de,Se){return B.apply(this,arguments)}}()),C.receiver._subscribe("ping",function(){var B=(0,b.A)(function*(de,Se){return["keyChanged"]});return function(de,Se){return B.apply(this,arguments)}}())})()}initializeSender(){var C=this;return(0,b.A)(function*(){var B,de;if(C.activeServiceWorker=yield function ba(){return hc.apply(this,arguments)}(),!C.activeServiceWorker)return;C.sender=new zr(C.activeServiceWorker);const Se=yield C.sender._send("ping",{},800);Se&&null!==(B=Se[0])&&void 0!==B&&B.fulfilled&&null!==(de=Se[0])&&void 0!==de&&de.value.includes("keyChanged")&&(C.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(C){var B=this;return(0,b.A)(function*(){if(B.sender&&B.activeServiceWorker&&function ps(){var N;return(null===(N=navigator?.serviceWorker)||void 0===N?void 0:N.controller)||null}()===B.activeServiceWorker)try{yield B.sender._send("keyChanged",{key:C},B.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,b.A)(function*(){try{if(!indexedDB)return!1;const C=yield $r();return yield bd(C,td,"1"),yield cu(C,td),!0}catch{}return!1})()}_withPendingWrite(C){var B=this;return(0,b.A)(function*(){B.pendingWrites++;try{yield C()}finally{B.pendingWrites--}})()}_set(C,B){var de=this;return(0,b.A)(function*(){return de._withPendingWrite((0,b.A)(function*(){return yield de._withRetries(Se=>bd(Se,C,B)),de.localCache[C]=B,de.notifyServiceWorker(C)}))})()}_get(C){var B=this;return(0,b.A)(function*(){const de=yield B._withRetries(Se=>function Kl(N,E){return nd.apply(this,arguments)}(Se,C));return B.localCache[C]=de,de})()}_remove(C){var B=this;return(0,b.A)(function*(){return B._withPendingWrite((0,b.A)(function*(){return yield B._withRetries(de=>cu(de,C)),delete B.localCache[C],B.notifyServiceWorker(C)}))})()}_poll(){var C=this;return(0,b.A)(function*(){const B=yield C._withRetries(It=>{const qt=ms(It,!1).getAll();return new Fc(qt).toPromise()});if(!B)return[];if(0!==C.pendingWrites)return[];const de=[],Se=new Set;if(0!==B.length)for(const{fbase_key:It,value:qt}of B)Se.add(It),JSON.stringify(C.localCache[It])!==JSON.stringify(qt)&&(C.notifyListeners(It,qt),de.push(It));for(const It of Object.keys(C.localCache))C.localCache[It]&&!Se.has(It)&&(C.notifyListeners(It,null),de.push(It));return de})()}notifyListeners(C,B){this.localCache[C]=B;const de=this.listeners[C];if(de)for(const Se of Array.from(de))Se(B)}startPolling(){var C=this;this.stopPolling(),this.pollTimer=setInterval((0,b.A)(function*(){return C._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(C,B){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[C]||(this.listeners[C]=new Set,this._get(C)),this.listeners[C].add(B)}_removeListener(C,B){this.listeners[C]&&(this.listeners[C].delete(B),0===this.listeners[C].size&&delete this.listeners[C]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return N.type="LOCAL",N})();or("rcb"),new ye(3e4,6e4);class Ai extends Ie{constructor(E){super("custom","custom"),this.params=E}_getIdTokenResponse(E){return Vo(E,this._buildIdpRequest())}_linkToIdToken(E,C){return Vo(E,this._buildIdpRequest(C))}_getReauthenticationResolver(E){return Vo(E,this._buildIdpRequest())}_buildIdpRequest(E){const C={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return E&&(C.idToken=E),C}}function cl(N){return function Vi(N,E){return Qi.apply(this,arguments)}(N.auth,new Ai(N),N.bypassAuthState)}function fu(N){const{auth:E,user:C}=N;return me(C,E,"internal-error"),function Cs(N,E){return Tl.apply(this,arguments)}(C,new Ai(N),N.bypassAuthState)}function gs(N){return ku.apply(this,arguments)}function ku(){return(ku=(0,b.A)(function*(N){const{auth:E,user:C}=N;return me(C,E,"internal-error"),function ao(N,E){return Pc.apply(this,arguments)}(C,new Ai(N),N.bypassAuthState)})).apply(this,arguments)}class ll{constructor(E,C,B,de,Se=!1){this.auth=E,this.resolver=B,this.user=de,this.bypassAuthState=Se,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(C)?C:[C]}execute(){var E=this;return new Promise(function(){var C=(0,b.A)(function*(B,de){E.pendingPromise={resolve:B,reject:de};try{E.eventManager=yield E.resolver._initialize(E.auth),yield E.onExecution(),E.eventManager.registerConsumer(E)}catch(Se){E.reject(Se)}});return function(B,de){return C.apply(this,arguments)}}())}onAuthEvent(E){var C=this;return(0,b.A)(function*(){const{urlResponse:B,sessionId:de,postBody:Se,tenantId:It,error:qt,type:Fn}=E;if(qt)return void C.reject(qt);const Dr={auth:C.auth,requestUri:B,sessionId:de,tenantId:It||void 0,postBody:Se||void 0,user:C.user,bypassAuthState:C.bypassAuthState};try{C.resolve(yield C.getIdpTask(Fn)(Dr))}catch(Vr){C.reject(Vr)}})()}onError(E){this.reject(E)}getIdpTask(E){switch(E){case"signInViaPopup":case"signInViaRedirect":return cl;case"linkViaPopup":case"linkViaRedirect":return gs;case"reauthViaPopup":case"reauthViaRedirect":return fu;default:kt(this.auth,"internal-error")}}resolve(E){At(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(E),this.unregisterAndCleanUp()}reject(E){At(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(E),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}new ye(2e3,1e4);const Yl="pendingRedirect",Ta=new Map;class oa extends ll{constructor(E,C,B=!1){super(E,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],C,void 0,B),this.eventId=null}execute(){var E=()=>super.execute,C=this;return(0,b.A)(function*(){let B=Ta.get(C.auth._key());if(!B){try{const Se=(yield function gc(N,E){return Io.apply(this,arguments)}(C.resolver,C.auth))?yield E().call(C):null;B=()=>Promise.resolve(Se)}catch(de){B=()=>Promise.reject(de)}Ta.set(C.auth._key(),B)}return C.bypassAuthState||Ta.set(C.auth._key(),()=>Promise.resolve(null)),B()})()}onAuthEvent(E){var C=()=>super.onAuthEvent,B=this;return(0,b.A)(function*(){if("signInViaRedirect"===E.type)return C().call(B,E);if("unknown"!==E.type){if(E.eventId){const de=yield B.auth._redirectUserForId(E.eventId);if(de)return B.user=de,C().call(B,E);B.resolve(null)}}else B.resolve(null)})()}onExecution(){return(0,b.A)(function*(){})()}cleanUp(){}}function Io(){return(Io=(0,b.A)(function*(N,E){const C=function Xl(N){return bi(Yl,N.config.apiKey,N.name)}(E),B=function lo(N){return On(N._redirectPersistence)}(N);if(!(yield B._isAvailable()))return!1;const de="true"===(yield B._get(C));return yield B._remove(C),de})).apply(this,arguments)}function Lu(N,E){Ta.set(N._key(),E)}function ka(N,E){return _c.apply(this,arguments)}function _c(){return(_c=(0,b.A)(function*(N,E,C=!1){if((0,$._isFirebaseServerApp)(N.app))return Promise.reject(ct(N));const B=Sn(N),de=function fc(N,E){return E?On(E):(me(N._popupRedirectResolver,N,"argument-error"),N._popupRedirectResolver)}(B,E),It=yield new oa(B,de,C).execute();return It&&!C&&(delete It.user._redirectEventId,yield B._persistUserIfCurrent(It.user),yield B._setRedirectUser(null,E)),It})).apply(this,arguments)}class La{constructor(E){this.auth=E,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(E){this.consumers.add(E),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,E)&&(this.sendToConsumer(this.queuedRedirectEvent,E),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(E){this.consumers.delete(E)}onEvent(E){if(this.hasEventBeenHandled(E))return!1;let C=!1;return this.consumers.forEach(B=>{this.isEventForConsumer(E,B)&&(C=!0,this.sendToConsumer(E,B),this.saveEventToCache(E))}),this.hasHandledPotentialRedirect||!function lh(N){switch(N.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return _u(N);default:return!1}}(E)||(this.hasHandledPotentialRedirect=!0,C||(this.queuedRedirectEvent=E,C=!0)),C}sendToConsumer(E,C){var B;if(E.error&&!_u(E)){const de=(null===(B=E.error.code)||void 0===B?void 0:B.split("auth/")[1])||"internal-error";C.onError(Ke(this.auth,de))}else C.onAuthEvent(E)}isEventForConsumer(E,C){const B=null===C.eventId||!!E.eventId&&E.eventId===C.eventId;return C.filter.includes(E.type)&&B}hasEventBeenHandled(E){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(gu(E))}saveEventToCache(E){this.cachedEventUids.add(gu(E)),this.lastProcessedEventTime=Date.now()}}function gu(N){return[N.type,N.eventId,N.sessionId,N.tenantId].filter(E=>E).join("-")}function _u({type:N,error:E}){return"unknown"===N&&"auth/no-auth-event"===E?.code}function $c(){return($c=(0,b.A)(function*(N,E={}){return ft(N,"GET","/v1/projects",E)})).apply(this,arguments)}const as=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,yc=/^https?/;function Ys(){return Ys=(0,b.A)(function*(N){if(N.config.emulator)return;const{authorizedDomains:E}=yield function Vu(N){return $c.apply(this,arguments)}(N);for(const C of E)try{if(pl(C))return}catch{}kt(N,"unauthorized-domain")}),Ys.apply(this,arguments)}function pl(N){const E=Jt(),{protocol:C,hostname:B}=new URL(E);if(N.startsWith("chrome-extension://")){const It=new URL(N);return""===It.hostname&&""===B?"chrome-extension:"===C&&N.replace("chrome-extension://","")===E.replace("chrome-extension://",""):"chrome-extension:"===C&&It.hostname===B}if(!yc.test(C))return!1;if(as.test(N))return B===N;const de=N.replace(/\./g,"\\.");return new RegExp("^(.+\\."+de+"|"+de+")$","i").test(B)}const uh=new ye(3e4,6e4);function sd(){const N=us().___jsl;if(N?.H)for(const E of Object.keys(N.H))if(N.H[E].r=N.H[E].r||[],N.H[E].L=N.H[E].L||[],N.H[E].r=[...N.H[E].L],N.CP)for(let C=0;C<N.CP.length;C++)N.CP[C]=null}function Hd(N){return new Promise((E,C)=>{var B,de,Se;function It(){sd(),gapi.load("gapi.iframes",{callback:()=>{E(gapi.iframes.getContext())},ontimeout:()=>{sd(),C(Ke(N,"network-request-failed"))},timeout:uh.get()})}if(null!==(de=null===(B=us().gapi)||void 0===B?void 0:B.iframes)&&void 0!==de&&de.Iframe)E(gapi.iframes.getContext());else{if(null===(Se=us().gapi)||void 0===Se||!Se.load){const qt=or("iframefcb");return us()[qt]=()=>{gapi.load?It():C(Ke(N,"network-request-failed"))},function ti(N){return Xn.loadJS(N)}(`${function Dn(){return Xn.gapiScript}()}?onload=${qt}`).catch(Fn=>C(Fn))}It()}}).catch(E=>{throw ks=null,E})}let ks=null;const vu=new ye(5e3,15e3),Td="__/auth/iframe",ad="emulator/auth/iframe",Uu={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Eu=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Wc(N){const E=N.config;me(E.authDomain,N,"auth-domain-config-required");const C=E.emulator?Ye(E,ad):`https://${N.config.authDomain}/${Td}`,B={apiKey:E.apiKey,appName:N.name,v:$.SDK_VERSION},de=Eu.get(N.config.apiHost);de&&(B.eid=de);const Se=N._getFrameworks();return Se.length&&(B.fw=Se.join(",")),`${C}?${(0,q.Am)(B).slice(1)}`}function cd(){return cd=(0,b.A)(function*(N){const E=yield function od(N){return ks=ks||Hd(N),ks}(N),C=us().gapi;return me(C,N,"internal-error"),E.open({where:document.body,url:Wc(N),messageHandlersFilter:C.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Uu,dontclear:!0},B=>new Promise(function(){var de=(0,b.A)(function*(Se,It){yield B.restyle({setHideOnLeave:!1});const qt=Ke(N,"network-request-failed"),Fn=us().setTimeout(()=>{It(qt)},vu.get());function Dr(){us().clearTimeout(Fn),Se(B)}B.ping(Dr).then(Dr,()=>{It(qt)})});return function(Se,It){return de.apply(this,arguments)}}()))}),cd.apply(this,arguments)}const bu={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class zc{constructor(E){this.window=E,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const wa="__/auth/handler",ml="emulator/auth/handler",Hc=encodeURIComponent("fac");function xl(N,E,C,B,de,Se){return Xs.apply(this,arguments)}function Xs(){return(Xs=(0,b.A)(function*(N,E,C,B,de,Se){me(N.config.authDomain,N,"auth-domain-config-required"),me(N.config.apiKey,N,"invalid-api-key");const It={apiKey:N.config.apiKey,appName:N.name,authType:C,redirectUrl:B,v:$.SDK_VERSION,eventId:de};if(E instanceof ss){E.setDefaultLanguage(N.languageCode),It.providerId=E.providerId||"",(0,q.Im)(E.getCustomParameters())||(It.customParameters=JSON.stringify(E.getCustomParameters()));for(const[Vr,ui]of Object.entries(Se||{}))It[Vr]=ui}if(E instanceof ns){const Vr=E.getScopes().filter(ui=>""!==ui);Vr.length>0&&(It.scopes=Vr.join(","))}N.tenantId&&(It.tid=N.tenantId);const qt=It;for(const Vr of Object.keys(qt))void 0===qt[Vr]&&delete qt[Vr];const Fn=yield N._getAppCheckToken(),Dr=Fn?`#${Hc}=${encodeURIComponent(Fn)}`:"";return`${function Xa({config:N}){return N.emulator?Ye(N,ml):`https://${N.authDomain}/${wa}`}(N)}?${(0,q.Am)(qt).slice(1)}${Dr}`})).apply(this,arguments)}const Fa="webStorageSupport",Kc=class Kd{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ou,this._completeRedirectFn=ka,this._overrideRedirectResult=Lu}_openPopup(E,C,B,de){var Se=this;return(0,b.A)(function*(){var It;At(null===(It=Se.eventManagers[E._key()])||void 0===It?void 0:It.manager,"_initialize() not called before _openPopup()");const qt=yield xl(E,C,B,Jt(),de);return function cs(N,E,C,B=500,de=600){const Se=Math.max((window.screen.availHeight-de)/2,0).toString(),It=Math.max((window.screen.availWidth-B)/2,0).toString();let qt="";const Fn=Object.assign(Object.assign({},bu),{width:B.toString(),height:de.toString(),top:Se,left:It}),Dr=(0,q.ZQ)().toLowerCase();C&&(qt=Ms(Dr)?"_blank":C),er(Dr)&&(E=E||"http://localhost",Fn.scrollbars="yes");const Vr=Object.entries(Fn).reduce((Xi,[Ls,vc])=>`${Xi}${Ls}=${vc},`,"");if(function so(N=(0,q.ZQ)()){var E;return la(N)&&!(null===(E=window.navigator)||void 0===E||!E.standalone)}(Dr)&&"_self"!==qt)return function dh(N,E){const C=document.createElement("a");C.href=N,C.target=E;const B=document.createEvent("MouseEvent");B.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),C.dispatchEvent(B)}(E||"",qt),new zc(null);const ui=window.open(E||"",qt,Vr);me(ui,N,"popup-blocked");try{ui.focus()}catch{}return new zc(ui)}(E,qt,Oa())})()}_openRedirect(E,C,B,de){var Se=this;return(0,b.A)(function*(){return yield Se._originValidation(E),function Ds(N){us().location.href=N}(yield xl(E,C,B,Jt(),de)),new Promise(()=>{})})()}_initialize(E){const C=E._key();if(this.eventManagers[C]){const{manager:de,promise:Se}=this.eventManagers[C];return de?Promise.resolve(de):(At(Se,"If manager is not set, promise should be"),Se)}const B=this.initAndGetManager(E);return this.eventManagers[C]={promise:B},B.catch(()=>{delete this.eventManagers[C]}),B}initAndGetManager(E){var C=this;return(0,b.A)(function*(){const B=yield function Bu(N){return cd.apply(this,arguments)}(E),de=new La(E);return B.register("authEvent",Se=>(me(Se?.authEvent,E,"invalid-auth-event"),{status:de.onEvent(Se.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),C.eventManagers[E._key()]={manager:de},C.iframes[E._key()]=B,de})()}_isIframeWebStorageSupported(E,C){this.iframes[E._key()].send(Fa,{type:Fa},de=>{var Se;const It=null===(Se=de?.[0])||void 0===Se?void 0:Se[Fa];void 0!==It&&C(!!It),kt(E,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(E){const C=E._key();return this.originValidationPromises[C]||(this.originValidationPromises[C]=function yu(N){return Ys.apply(this,arguments)}(E)),this.originValidationPromises[C]}get _shouldInitProactively(){return Gs()||rs()||la()}};var qc="@firebase/auth";class gl{constructor(E){this.auth=E,this.internalListeners=new Map}getUid(){var E;return this.assertAuthConfigured(),(null===(E=this.auth.currentUser)||void 0===E?void 0:E.uid)||null}getToken(E){var C=this;return(0,b.A)(function*(){return C.assertAuthConfigured(),yield C.auth._initializationPromise,C.auth.currentUser?{accessToken:yield C.auth.currentUser.getIdToken(E)}:null})()}addAuthTokenListener(E){if(this.assertAuthConfigured(),this.internalListeners.has(E))return;const C=this.auth.onIdTokenChanged(B=>{E(B?.stsTokenManager.accessToken||null)});this.internalListeners.set(E,C),this.updateProactiveRefresh()}removeAuthTokenListener(E){this.assertAuthConfigured();const C=this.internalListeners.get(E);C&&(this.internalListeners.delete(E),C(),this.updateProactiveRefresh())}assertAuthConfigured(){me(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const Nh=(0,q.XA)("authIdTokenMaxAge")||300;let Ad=null;const wu=N=>function(){var E=(0,b.A)(function*(C){const B=C&&(yield C.getIdTokenResult()),de=B&&((new Date).getTime()-Date.parse(B.issuedAtTime))/1e3;if(de&&de>Nh)return;const Se=B?.token;Ad!==Se&&(Ad=Se,yield fetch(N,{method:Se?"POST":"DELETE",headers:Se?{Authorization:`Bearer ${Se}`}:{}}))});return function(C){return E.apply(this,arguments)}}();function kl(N=(0,$.getApp)()){const E=(0,$._getProvider)(N,"auth");if(E.isInitialized())return E.getImmediate();const C=function Be(N,E){const C=(0,$._getProvider)(N,"auth");if(C.isInitialized()){const de=C.getImmediate(),Se=C.getOptions();if((0,q.bD)(Se,E??{}))return de;kt(de,"already-initialized")}return C.initialize({options:E})}(N,{popupRedirectResolver:Kc,persistence:[k,Lc,ou]}),B=(0,q.XA)("authTokenSyncURL");if(B&&"boolean"==typeof isSecureContext&&isSecureContext){const Se=new URL(B,location.origin);if(location.origin===Se.origin){const It=wu(Se.toString());(function os(N,E,C){(0,q.Ku)(N).beforeAuthStateChanged(E,C)})(C,It,()=>It(C.currentUser)),Bi(C,qt=>It(qt))}}const de=(0,q.Tj)("auth");return de&&function bt(N,E,C){const B=Sn(N);me(B._canInitEmulator,B,"emulator-config-failed"),me(/^https?:\/\//.test(E),B,"invalid-emulator-scheme");const de=!!C?.disableWarnings,Se=Kt(E),{host:It,port:qt}=function Kn(N){const E=Kt(N),C=/(\/\/)?([^?#/]+)/.exec(N.substr(E.length));if(!C)return{host:"",port:null};const B=C[2].split("@").pop()||"",de=/^(\[[^\]]+\])(:|$)/.exec(B);if(de){const Se=de[1];return{host:Se,port:Rn(B.substr(Se.length+1))}}{const[Se,It]=B.split(":");return{host:Se,port:Rn(It)}}}(E);B.config.emulator={url:`${Se}//${It}${null===qt?"":`:${qt}`}/`},B.settings.appVerificationDisabledForTesting=!0,B.emulatorConfig=Object.freeze({host:It,port:qt,protocol:Se.replace(":",""),options:Object.freeze({disableWarnings:de})}),de||function mt(){function N(){const E=document.createElement("p"),C=E.style;E.innerText="Running in emulator mode. Do not use with production credentials.",C.position="fixed",C.width="100%",C.backgroundColor="#ffffff",C.border=".1em solid #000000",C.color="#b50000",C.bottom="0px",C.left="0px",C.margin="0px",C.zIndex="10000",C.textAlign="center",E.classList.add("firebase-emulator-warning"),document.body.appendChild(E)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",N):N())}()}(C,`http://${de}`),C}(function Bn(N){Xn=N})({loadJS:N=>new Promise((E,C)=>{const B=document.createElement("script");B.setAttribute("src",N),B.onload=E,B.onerror=de=>{const Se=Ke("internal-error");Se.customData=de,C(Se)},B.type="text/javascript",B.charset="UTF-8",function Ja(){var N,E;return null!==(E=null===(N=document.getElementsByTagName("head"))||void 0===N?void 0:N[0])&&void 0!==E?E:document}().appendChild(B)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),function dd(N){(0,$._registerComponent)(new Fe.uA("auth",(E,{options:C})=>{const B=E.getProvider("app").getImmediate(),de=E.getProvider("heartbeat"),Se=E.getProvider("app-check-internal"),{apiKey:It,authDomain:qt}=B.options;me(It&&!It.includes(":"),"invalid-api-key",{appName:B.name});const Fn={apiKey:It,authDomain:qt,clientPlatform:N,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:_s(N)},Dr=new sn(B,de,Se,Fn);return function Zt(N,E){const C=E?.persistence||[],B=(Array.isArray(C)?C:[C]).map(On);E?.errorMap&&N._updateErrorMap(E.errorMap),N._initializeWithPersistence(B,E?.popupRedirectResolver)}(Dr,C),Dr},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((E,C,B)=>{E.getProvider("auth-internal").initialize()})),(0,$._registerComponent)(new Fe.uA("auth-internal",E=>{const C=Sn(E.getProvider("auth").getImmediate());return new gl(C)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,$.registerVersion)(qc,"1.7.9",function Au(N){switch(N){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(N)),(0,$.registerVersion)(qc,"1.7.9","esm2017")}("Browser")},7935:(Cn,nt,x)=>{x.d(nt,{A:()=>b.A});var b=x(3345);b.A.registerVersion("firebase","10.14.1","app-compat")},7586:(Cn,nt,x)=>{var b=x(4523),$=x(3345),q=x(8742),H=x(1076),Ee=x(8041),Fe=x(1635),Le=x(1362);const Pe={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"};const Rt=function ot(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registered for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}},Ft=function tt(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Gt=new H.FA("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),hn=new Ee.Vy("@firebase/auth");function kt(D,...g){hn.logLevel<=Ee.$b.ERROR&&hn.error(`Auth (${q.SDK_VERSION}): ${D}`,...g)}function Ke(D,...g){throw me(D,...g)}function Qe(D,...g){return me(D,...g)}function ct(D,g,v){const M=Object.assign(Object.assign({},Ft()),{[g]:v});return new H.FA("auth","Firebase",M).create(g,{appName:D.name})}function Ze(D){return ct(D,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Ge(D,g,v){if(!(g instanceof v))throw v.name!==g.constructor.name&&Ke(D,"argument-error"),ct(D,"argument-error",`Type of ${g.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function me(D,...g){if("string"!=typeof D){const v=g[0],M=[...g.slice(1)];return M[0]&&(M[0].appName=D.name),D._errorFactory.create(v,...M)}return Gt.create(D,...g)}function ve(D,g,...v){if(!D)throw me(g,...v)}function At(D){const g="INTERNAL ASSERTION FAILED: "+D;throw kt(g),new Error(g)}function Jt(D,g){D||At(g)}function Nt(){var D;return typeof self<"u"&&(null===(D=self.location)||void 0===D?void 0:D.href)||""}function Yt(){return"http:"===an()||"https:"===an()}function an(){var D;return typeof self<"u"&&(null===(D=self.location)||void 0===D?void 0:D.protocol)||null}class Ye{constructor(g,v){this.shortDelay=g,this.longDelay=v,Jt(v>g,"Short delay should be less than long delay!"),this.isMobile=(0,H.jZ)()||(0,H.lV)()}get(){return function $t(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Yt()||(0,H.sr)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Ht(D,g){Jt(D.emulator,"Emulator should always be set here");const{url:v}=D.emulator;return g?`${v}${g.startsWith("/")?g.slice(1):g}`:v}class et{static initialize(g,v,M){this.fetchImpl=g,v&&(this.headersImpl=v),M&&(this.responseImpl=M)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:typeof globalThis<"u"&&globalThis.fetch?globalThis.fetch:typeof fetch<"u"?fetch:void At("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:typeof globalThis<"u"&&globalThis.Headers?globalThis.Headers:typeof Headers<"u"?Headers:void At("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:typeof globalThis<"u"&&globalThis.Response?globalThis.Response:typeof Response<"u"?Response:void At("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const gt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Mt=new Ye(3e4,6e4);function ft(D,g){return D.tenantId&&!g.tenantId?Object.assign(Object.assign({},g),{tenantId:D.tenantId}):g}function Ct(D,g,v,M){return ln.apply(this,arguments)}function ln(){return(ln=(0,b.A)(function*(D,g,v,M,te={}){return nr(D,te,(0,b.A)(function*(){let be={},at={};M&&("GET"===g?at=M:be={body:JSON.stringify(M)});const Bt=(0,H.Am)(Object.assign({key:D.config.apiKey},at)).slice(1),vn=yield D._getAdditionalHeaders();vn["Content-Type"]="application/json",D.languageCode&&(vn["X-Firebase-Locale"]=D.languageCode);const Tr=Object.assign({method:g,headers:vn},be);return(0,H.c1)()||(Tr.referrerPolicy="no-referrer"),et.fetch()(fr(D,D.config.apiHost,v,Bt),Tr)}))})).apply(this,arguments)}function nr(D,g,v){return hr.apply(this,arguments)}function hr(){return(hr=(0,b.A)(function*(D,g,v){D._canInitEmulator=!1;const M=Object.assign(Object.assign({},gt),g);try{const te=new Rr(D),be=yield Promise.race([v(),te.promise]);te.clearNetworkTimeout();const at=yield be.json();if("needConfirmation"in at)throw vr(D,"account-exists-with-different-credential",at);if(be.ok&&!("errorMessage"in at))return at;{const Bt=be.ok?at.errorMessage:at.error.message,[vn,Tr]=Bt.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===vn)throw vr(D,"credential-already-in-use",at);if("EMAIL_EXISTS"===vn)throw vr(D,"email-already-in-use",at);if("USER_DISABLED"===vn)throw vr(D,"user-disabled",at);const Mr=M[vn]||vn.toLowerCase().replace(/[_\s]+/g,"-");if(Tr)throw ct(D,Mr,Tr);Ke(D,Mr)}}catch(te){if(te instanceof H.g)throw te;Ke(D,"network-request-failed",{message:String(te)})}})).apply(this,arguments)}function Cr(D,g,v,M){return sr.apply(this,arguments)}function sr(){return(sr=(0,b.A)(function*(D,g,v,M,te={}){const be=yield Ct(D,g,v,M,te);return"mfaPendingCredential"in be&&Ke(D,"multi-factor-auth-required",{_serverResponse:be}),be})).apply(this,arguments)}function fr(D,g,v,M){const te=`${g}${v}?${M}`;return D.config.emulator?Ht(D.config,te):`${D.config.apiScheme}://${te}`}function Jn(D){switch(D){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Rr{constructor(g){this.auth=g,this.timer=null,this.promise=new Promise((v,M)=>{this.timer=setTimeout(()=>M(Qe(this.auth,"network-request-failed")),Mt.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function vr(D,g,v){const M={appName:D.name};v.email&&(M.email=v.email),v.phoneNumber&&(M.phoneNumber=v.phoneNumber);const te=Qe(D,g,M);return te.customData._tokenResponse=v,te}function $n(D){return void 0!==D&&void 0!==D.getResponse}function qn(D){return void 0!==D&&void 0!==D.enterprise}class gi{constructor(g){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===g.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=g.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=g.recaptchaEnforcementState}getProviderEnforcementState(g){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const v of this.recaptchaEnforcementState)if(v.provider&&v.provider===g)return Jn(v.enforcementState);return null}isProviderEnabled(g){return"ENFORCE"===this.getProviderEnforcementState(g)||"AUDIT"===this.getProviderEnforcementState(g)}}function De(){return(De=(0,b.A)(function*(D){return(yield Ct(D,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Xe(D,g){return je.apply(this,arguments)}function je(){return(je=(0,b.A)(function*(D,g){return Ct(D,"GET","/v2/recaptchaConfig",ft(D,g))})).apply(this,arguments)}function fn(){return(fn=(0,b.A)(function*(D,g){return Ct(D,"POST","/v1/accounts:delete",g)})).apply(this,arguments)}function Ut(){return(Ut=(0,b.A)(function*(D,g){return Ct(D,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function wt(D,g){return $e.apply(this,arguments)}function $e(){return($e=(0,b.A)(function*(D,g){return Ct(D,"POST","/v1/accounts:lookup",g)})).apply(this,arguments)}function _t(D){if(D)try{const g=new Date(Number(D));if(!isNaN(g.getTime()))return g.toUTCString()}catch{}}function ir(){return(ir=(0,b.A)(function*(D,g=!1){const v=(0,H.Ku)(D),M=yield v.getIdToken(g),te=ar(M);ve(te&&te.exp&&te.auth_time&&te.iat,v.auth,"internal-error");const be="object"==typeof te.firebase?te.firebase:void 0,at=be?.sign_in_provider;return{claims:te,token:M,authTime:_t(yr(te.auth_time)),issuedAtTime:_t(yr(te.iat)),expirationTime:_t(yr(te.exp)),signInProvider:at||null,signInSecondFactor:be?.sign_in_second_factor||null}})).apply(this,arguments)}function yr(D){return 1e3*Number(D)}function ar(D){const[g,v,M]=D.split(".");if(void 0===g||void 0===v||void 0===M)return kt("JWT malformed, contained fewer than 3 sections"),null;try{const te=(0,H.u)(v);return te?JSON.parse(te):(kt("Failed to decode base64 JWT payload"),null)}catch(te){return kt("Caught error parsing JWT payload as JSON",te?.toString()),null}}function mr(D){const g=ar(D);return ve(g,"internal-error"),ve(typeof g.exp<"u","internal-error"),ve(typeof g.iat<"u","internal-error"),Number(g.exp)-Number(g.iat)}function Yr(D,g){return Nr.apply(this,arguments)}function Nr(){return(Nr=(0,b.A)(function*(D,g,v=!1){if(v)return g;try{return yield g}catch(M){throw M instanceof H.g&&function xt({code:D}){return"auth/user-disabled"===D||"auth/user-token-expired"===D}(M)&&D.auth.currentUser===D&&(yield D.auth.signOut()),M}})).apply(this,arguments)}class qr{constructor(g){this.user=g,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(g){var v;if(g){const M=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),M}{this.errorBackoff=3e4;const te=(null!==(v=this.user.stsTokenManager.expirationTime)&&void 0!==v?v:0)-Date.now()-3e5;return Math.max(0,te)}}schedule(g=!1){var v=this;if(!this.isRunning)return;const M=this.getInterval(g);this.timerId=setTimeout((0,b.A)(function*(){yield v.iteration()}),M)}iteration(){var g=this;return(0,b.A)(function*(){try{yield g.user.getIdToken(!0)}catch(v){return void("auth/network-request-failed"===v?.code&&g.schedule(!0))}g.schedule()})()}}class ai{constructor(g,v){this.createdAt=g,this.lastLoginAt=v,this._initializeTime()}_initializeTime(){this.lastSignInTime=_t(this.lastLoginAt),this.creationTime=_t(this.createdAt)}_copy(g){this.createdAt=g.createdAt,this.lastLoginAt=g.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function yi(D){return Xr.apply(this,arguments)}function Xr(){return(Xr=(0,b.A)(function*(D){var g;const v=D.auth,M=yield D.getIdToken(),te=yield Yr(D,wt(v,{idToken:M}));ve(te?.users.length,v,"internal-error");const be=te.users[0];D._notifyReloadListener(be);const at=null!==(g=be.providerUserInfo)&&void 0!==g&&g.length?J(be.providerUserInfo):[],Bt=function ne(D,g){return[...D.filter(M=>!g.some(te=>te.providerId===M.providerId)),...g]}(D.providerData,at),Mr=!!D.isAnonymous&&!(D.email&&be.passwordHash||Bt?.length),br={uid:be.localId,displayName:be.displayName||null,photoURL:be.photoUrl||null,email:be.email||null,emailVerified:be.emailVerified||!1,phoneNumber:be.phoneNumber||null,tenantId:be.tenantId||null,providerData:Bt,metadata:new ai(be.createdAt,be.lastLoginAt),isAnonymous:Mr};Object.assign(D,br)})).apply(this,arguments)}function Te(){return(Te=(0,b.A)(function*(D){const g=(0,H.Ku)(D);yield yi(g),yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)})).apply(this,arguments)}function J(D){return D.map(g=>{var{providerId:v}=g,M=(0,Fe.Tt)(g,["providerId"]);return{providerId:v,uid:M.rawId||"",displayName:M.displayName||null,email:M.email||null,phoneNumber:M.phoneNumber||null,photoURL:M.photoUrl||null}})}function oe(){return(oe=(0,b.A)(function*(D,g){const v=yield nr(D,{},(0,b.A)(function*(){const M=(0,H.Am)({grant_type:"refresh_token",refresh_token:g}).slice(1),{tokenApiHost:te,apiKey:be}=D.config,at=fr(D,te,"/v1/token",`key=${be}`),Bt=yield D._getAdditionalHeaders();return Bt["Content-Type"]="application/x-www-form-urlencoded",et.fetch()(at,{method:"POST",headers:Bt,body:M})}));return{accessToken:v.access_token,expiresIn:v.expires_in,refreshToken:v.refresh_token}})).apply(this,arguments)}function pe(){return(pe=(0,b.A)(function*(D,g){return Ct(D,"POST","/v2/accounts:revokeToken",ft(D,g))})).apply(this,arguments)}class Oe{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(g){ve(g.idToken,"internal-error"),ve(typeof g.idToken<"u","internal-error"),ve(typeof g.refreshToken<"u","internal-error");const v="expiresIn"in g&&typeof g.expiresIn<"u"?Number(g.expiresIn):mr(g.idToken);this.updateTokensAndExpiration(g.idToken,g.refreshToken,v)}updateFromIdToken(g){ve(0!==g.length,"internal-error");const v=mr(g);this.updateTokensAndExpiration(g,null,v)}getToken(g){var v=this;return(0,b.A)(function*(M,te=!1){return te||!v.accessToken||v.isExpired?(ve(v.refreshToken,M,"user-token-expired"),v.refreshToken?(yield v.refresh(M,v.refreshToken),v.accessToken):null):v.accessToken}).apply(this,arguments)}clearRefreshToken(){this.refreshToken=null}refresh(g,v){var M=this;return(0,b.A)(function*(){const{accessToken:te,refreshToken:be,expiresIn:at}=yield function Q(D,g){return oe.apply(this,arguments)}(g,v);M.updateTokensAndExpiration(te,be,Number(at))})()}updateTokensAndExpiration(g,v,M){this.refreshToken=v||null,this.accessToken=g||null,this.expirationTime=Date.now()+1e3*M}static fromJSON(g,v){const{refreshToken:M,accessToken:te,expirationTime:be}=v,at=new Oe;return M&&(ve("string"==typeof M,"internal-error",{appName:g}),at.refreshToken=M),te&&(ve("string"==typeof te,"internal-error",{appName:g}),at.accessToken=te),be&&(ve("number"==typeof be,"internal-error",{appName:g}),at.expirationTime=be),at}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(g){this.accessToken=g.accessToken,this.refreshToken=g.refreshToken,this.expirationTime=g.expirationTime}_clone(){return Object.assign(new Oe,this.toJSON())}_performRefresh(){return At("not implemented")}}function Tt(D,g){ve("string"==typeof D||typeof D>"u","internal-error",{appName:g})}class lt{constructor(g){var{uid:v,auth:M,stsTokenManager:te}=g,be=(0,Fe.Tt)(g,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new qr(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=v,this.auth=M,this.stsTokenManager=te,this.accessToken=te.accessToken,this.displayName=be.displayName||null,this.email=be.email||null,this.emailVerified=be.emailVerified||!1,this.phoneNumber=be.phoneNumber||null,this.photoURL=be.photoURL||null,this.isAnonymous=be.isAnonymous||!1,this.tenantId=be.tenantId||null,this.providerData=be.providerData?[...be.providerData]:[],this.metadata=new ai(be.createdAt||void 0,be.lastLoginAt||void 0)}getIdToken(g){var v=this;return(0,b.A)(function*(){const M=yield Yr(v,v.stsTokenManager.getToken(v.auth,g));return ve(M,v.auth,"internal-error"),v.accessToken!==M&&(v.accessToken=M,yield v.auth._persistUserIfCurrent(v),v.auth._notifyListenersIfCurrent(v)),M})()}getIdTokenResult(g){return function An(D){return ir.apply(this,arguments)}(this,g)}reload(){return function pn(D){return Te.apply(this,arguments)}(this)}_assign(g){this!==g&&(ve(this.uid===g.uid,this.auth,"internal-error"),this.displayName=g.displayName,this.photoURL=g.photoURL,this.email=g.email,this.emailVerified=g.emailVerified,this.phoneNumber=g.phoneNumber,this.isAnonymous=g.isAnonymous,this.tenantId=g.tenantId,this.providerData=g.providerData.map(v=>Object.assign({},v)),this.metadata._copy(g.metadata),this.stsTokenManager._assign(g.stsTokenManager))}_clone(g){const v=new lt(Object.assign(Object.assign({},this),{auth:g,stsTokenManager:this.stsTokenManager._clone()}));return v.metadata._copy(this.metadata),v}_onReload(g){ve(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=g,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(g){this.reloadListener?this.reloadListener(g):this.reloadUserInfo=g}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(g){var v=this;return(0,b.A)(function*(M,te=!1){let be=!1;M.idToken&&M.idToken!==v.stsTokenManager.accessToken&&(v.stsTokenManager.updateFromServerResponse(M),be=!0),te&&(yield yi(v)),yield v.auth._persistUserIfCurrent(v),be&&v.auth._notifyListenersIfCurrent(v)}).apply(this,arguments)}delete(){var g=this;return(0,b.A)(function*(){if((0,q._isFirebaseServerApp)(g.auth.app))return Promise.reject(Ze(g.auth));const v=yield g.getIdToken();return yield Yr(g,function rn(D,g){return fn.apply(this,arguments)}(g.auth,{idToken:v})),g.stsTokenManager.clearRefreshToken(),g.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(g=>Object.assign({},g)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(g,v){var M,te,be,at,Bt,vn,Tr,Mr;const br=null!==(M=v.displayName)&&void 0!==M?M:void 0,Zi=null!==(te=v.email)&&void 0!==te?te:void 0,Ic=null!==(be=v.phoneNumber)&&void 0!==be?be:void 0,No=null!==(at=v.photoURL)&&void 0!==at?at:void 0,Gu=null!==(Bt=v.tenantId)&&void 0!==Bt?Bt:void 0,Rd=null!==(vn=v._redirectEventId)&&void 0!==vn?vn:void 0,$f=null!==(Tr=v.createdAt)&&void 0!==Tr?Tr:void 0,pf=null!==(Mr=v.lastLoginAt)&&void 0!==Mr?Mr:void 0,{uid:Xd,emailVerified:fd,isAnonymous:nc,providerData:vl,stsTokenManager:Lh}=v;ve(Xd&&Lh,g,"internal-error");const Wf=Oe.fromJSON(this.name,Lh);ve("string"==typeof Xd,g,"internal-error"),Tt(br,g.name),Tt(Zi,g.name),ve("boolean"==typeof fd,g,"internal-error"),ve("boolean"==typeof nc,g,"internal-error"),Tt(Ic,g.name),Tt(No,g.name),Tt(Gu,g.name),Tt(Rd,g.name),Tt($f,g.name),Tt(pf,g.name);const zf=new lt({uid:Xd,auth:g,email:Zi,emailVerified:fd,displayName:br,isAnonymous:nc,photoURL:No,phoneNumber:Ic,tenantId:Gu,stsTokenManager:Wf,createdAt:$f,lastLoginAt:pf});return vl&&Array.isArray(vl)&&(zf.providerData=vl.map(mf=>Object.assign({},mf))),Rd&&(zf._redirectEventId=Rd),zf}static _fromIdTokenResponse(g,v){return(0,b.A)(function*(M,te,be=!1){const at=new Oe;at.updateFromServerResponse(te);const Bt=new lt({uid:te.localId,auth:M,stsTokenManager:at,isAnonymous:be});return yield yi(Bt),Bt}).apply(this,arguments)}static _fromGetAccountInfoResponse(g,v,M){return(0,b.A)(function*(){const te=v.users[0];ve(void 0!==te.localId,"internal-error");const be=void 0!==te.providerUserInfo?J(te.providerUserInfo):[],at=!(te.email&&te.passwordHash||be?.length),Bt=new Oe;Bt.updateFromIdToken(M);const vn=new lt({uid:te.localId,auth:g,stsTokenManager:Bt,isAnonymous:at}),Tr={uid:te.localId,displayName:te.displayName||null,photoURL:te.photoUrl||null,email:te.email||null,emailVerified:te.emailVerified||!1,phoneNumber:te.phoneNumber||null,tenantId:te.tenantId||null,providerData:be,metadata:new ai(te.createdAt,te.lastLoginAt),isAnonymous:!(te.email&&te.passwordHash||be?.length)};return Object.assign(vn,Tr),vn})()}}const On=new Map;function Yn(D){Jt(D instanceof Function,"Expected a class definition");let g=On.get(D);return g?(Jt(g instanceof D,"Instance stored in cache mismatched with class"),g):(g=new D,On.set(D,g),g)}const bi=(()=>{class D{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,b.A)(function*(){return!0})()}_set(v,M){var te=this;return(0,b.A)(function*(){te.storage[v]=M})()}_get(v){var M=this;return(0,b.A)(function*(){const te=M.storage[v];return void 0===te?null:te})()}_remove(v){var M=this;return(0,b.A)(function*(){delete M.storage[v]})()}_addListener(v,M){}_removeListener(v,M){}}return D.type="NONE",D})();function Lr(D,g,v){return`firebase:${D}:${g}:${v}`}class hi{constructor(g,v,M){this.persistence=g,this.auth=v,this.userKey=M;const{config:te,name:be}=this.auth;this.fullUserKey=Lr(this.userKey,te.apiKey,be),this.fullPersistenceKey=Lr("persistence",te.apiKey,be),this.boundEventHandler=v._onStorageEvent.bind(v),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(g){return this.persistence._set(this.fullUserKey,g.toJSON())}getCurrentUser(){var g=this;return(0,b.A)(function*(){const v=yield g.persistence._get(g.fullUserKey);return v?lt._fromJSON(g.auth,v):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(g){var v=this;return(0,b.A)(function*(){if(v.persistence===g)return;const M=yield v.getCurrentUser();return yield v.removeCurrentUser(),v.persistence=g,M?v.setCurrentUser(M):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(g,v){return(0,b.A)(function*(M,te,be="authUser"){if(!te.length)return new hi(Yn(bi),M,be);const at=(yield Promise.all(te.map(function(){var br=(0,b.A)(function*(Zi){if(yield Zi._isAvailable())return Zi});return function(Zi){return br.apply(this,arguments)}}()))).filter(br=>br);let Bt=at[0]||Yn(bi);const vn=Lr(be,M.config.apiKey,M.name);let Tr=null;for(const br of te)try{const Zi=yield br._get(vn);if(Zi){const Ic=lt._fromJSON(M,Zi);br!==Bt&&(Tr=Ic),Bt=br;break}}catch{}const Mr=at.filter(br=>br._shouldAllowMigration);return Bt._shouldAllowMigration&&Mr.length?(Bt=Mr[0],Tr&&(yield Bt._set(vn,Tr.toJSON())),yield Promise.all(te.map(function(){var br=(0,b.A)(function*(Zi){if(Zi!==Bt)try{yield Zi._remove(vn)}catch{}});return function(Zi){return br.apply(this,arguments)}}())),new hi(Bt,M,be)):new hi(Bt,M,be)}).apply(this,arguments)}}function er(D){const g=D.toLowerCase();if(g.includes("opera/")||g.includes("opr/")||g.includes("opios/"))return"Opera";if(Co(g))return"IEMobile";if(g.includes("msie")||g.includes("trident/"))return"IE";if(g.includes("edge/"))return"Edge";if(rs(g))return"Firefox";if(g.includes("silk/"))return"Silk";if(vi(g))return"Blackberry";if(la(g))return"Webos";if(Ms(g))return"Safari";if((g.includes("chrome/")||Ks(g))&&!g.includes("edge/"))return"Chrome";if(Os(g))return"Android";{const M=D.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===M?.length)return M[1]}return"Other"}function rs(D=(0,H.ZQ)()){return/firefox\//i.test(D)}function Ms(D=(0,H.ZQ)()){const g=D.toLowerCase();return g.includes("safari/")&&!g.includes("chrome/")&&!g.includes("crios/")&&!g.includes("android")}function Ks(D=(0,H.ZQ)()){return/crios\//i.test(D)}function Co(D=(0,H.ZQ)()){return/iemobile/i.test(D)}function Os(D=(0,H.ZQ)()){return/android/i.test(D)}function vi(D=(0,H.ZQ)()){return/blackberry/i.test(D)}function la(D=(0,H.ZQ)()){return/webos/i.test(D)}function $s(D=(0,H.ZQ)()){return/iphone|ipad|ipod/i.test(D)||/macintosh/i.test(D)&&/mobile/i.test(D)}function _s(D=(0,H.ZQ)()){return $s(D)||Os(D)||la(D)||vi(D)||/windows phone/i.test(D)||Co(D)}function Ts(D,g=[]){let v;switch(D){case"Browser":v=er((0,H.ZQ)());break;case"Worker":v=`${er((0,H.ZQ)())}-${D}`;break;default:v=D}const M=g.length?g.join(","):"FirebaseCore-web";return`${v}/JsCore/${q.SDK_VERSION}/${M}`}class Ue{constructor(g){this.auth=g,this.queue=[]}pushCallback(g,v){const M=be=>new Promise((at,Bt)=>{try{at(g(be))}catch(vn){Bt(vn)}});M.onAbort=v,this.queue.push(M);const te=this.queue.length-1;return()=>{this.queue[te]=()=>Promise.resolve()}}runMiddleware(g){var v=this;return(0,b.A)(function*(){if(v.auth.currentUser===g)return;const M=[];try{for(const te of v.queue)yield te(g),te.onAbort&&M.push(te.onAbort)}catch(te){M.reverse();for(const be of M)try{be()}catch{}throw v.auth._errorFactory.create("login-blocked",{originalMessage:te?.message})}})()}}function ut(){return(ut=(0,b.A)(function*(D,g={}){return Ct(D,"GET","/v2/passwordPolicy",ft(D,g))})).apply(this,arguments)}class sn{constructor(g){var v,M,te,be;const at=g.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(v=at.minPasswordLength)&&void 0!==v?v:6,at.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=at.maxPasswordLength),void 0!==at.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=at.containsLowercaseCharacter),void 0!==at.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=at.containsUppercaseCharacter),void 0!==at.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=at.containsNumericCharacter),void 0!==at.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=at.containsNonAlphanumericCharacter),this.enforcementState=g.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(te=null===(M=g.allowedNonAlphanumericCharacters)||void 0===M?void 0:M.join(""))&&void 0!==te?te:"",this.forceUpgradeOnSignin=null!==(be=g.forceUpgradeOnSignin)&&void 0!==be&&be,this.schemaVersion=g.schemaVersion}validatePassword(g){var v,M,te,be,at,Bt;const vn={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(g,vn),this.validatePasswordCharacterOptions(g,vn),vn.isValid&&(vn.isValid=null===(v=vn.meetsMinPasswordLength)||void 0===v||v),vn.isValid&&(vn.isValid=null===(M=vn.meetsMaxPasswordLength)||void 0===M||M),vn.isValid&&(vn.isValid=null===(te=vn.containsLowercaseLetter)||void 0===te||te),vn.isValid&&(vn.isValid=null===(be=vn.containsUppercaseLetter)||void 0===be||be),vn.isValid&&(vn.isValid=null===(at=vn.containsNumericCharacter)||void 0===at||at),vn.isValid&&(vn.isValid=null===(Bt=vn.containsNonAlphanumericCharacter)||void 0===Bt||Bt),vn}validatePasswordLengthOptions(g,v){const M=this.customStrengthOptions.minPasswordLength,te=this.customStrengthOptions.maxPasswordLength;M&&(v.meetsMinPasswordLength=g.length>=M),te&&(v.meetsMaxPasswordLength=g.length<=te)}validatePasswordCharacterOptions(g,v){let M;this.updatePasswordCharacterOptionsStatuses(v,!1,!1,!1,!1);for(let te=0;te<g.length;te++)M=g.charAt(te),this.updatePasswordCharacterOptionsStatuses(v,M>="a"&&M<="z",M>="A"&&M<="Z",M>="0"&&M<="9",this.allowedNonAlphanumericCharacters.includes(M))}updatePasswordCharacterOptionsStatuses(g,v,M,te,be){this.customStrengthOptions.containsLowercaseLetter&&(g.containsLowercaseLetter||(g.containsLowercaseLetter=v)),this.customStrengthOptions.containsUppercaseLetter&&(g.containsUppercaseLetter||(g.containsUppercaseLetter=M)),this.customStrengthOptions.containsNumericCharacter&&(g.containsNumericCharacter||(g.containsNumericCharacter=te)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(g.containsNonAlphanumericCharacter||(g.containsNonAlphanumericCharacter=be))}}class Sn{constructor(g,v,M,te){this.app=g,this.heartbeatServiceProvider=v,this.appCheckServiceProvider=M,this.config=te,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Xn(this),this.idTokenSubscription=new Xn(this),this.beforeStateQueue=new Ue(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Gt,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=g.name,this.clientVersion=te.sdkClientVersion}_initializeWithPersistence(g,v){var M=this;return v&&(this._popupRedirectResolver=Yn(v)),this._initializationPromise=this.queue((0,b.A)(function*(){var te,be;if(!M._deleted&&(M.persistenceManager=yield hi.create(M,g),!M._deleted)){if(null!==(te=M._popupRedirectResolver)&&void 0!==te&&te._shouldInitProactively)try{yield M._popupRedirectResolver._initialize(M)}catch{}yield M.initializeCurrentUser(v),M.lastNotifiedUid=(null===(be=M.currentUser)||void 0===be?void 0:be.uid)||null,!M._deleted&&(M._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var g=this;return(0,b.A)(function*(){if(g._deleted)return;const v=yield g.assertedPersistence.getCurrentUser();if(g.currentUser||v){if(g.currentUser&&v&&g.currentUser.uid===v.uid)return g._currentUser._assign(v),void(yield g.currentUser.getIdToken());yield g._updateCurrentUser(v,!0)}})()}initializeCurrentUserFromIdToken(g){var v=this;return(0,b.A)(function*(){try{const M=yield wt(v,{idToken:g}),te=yield lt._fromGetAccountInfoResponse(v,M,g);yield v.directlySetCurrentUser(te)}catch(M){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",M),yield v.directlySetCurrentUser(null)}})()}initializeCurrentUser(g){var v=this;return(0,b.A)(function*(){var M;if((0,q._isFirebaseServerApp)(v.app)){const Bt=v.app.settings.authIdToken;return Bt?new Promise(vn=>{setTimeout(()=>v.initializeCurrentUserFromIdToken(Bt).then(vn,vn))}):v.directlySetCurrentUser(null)}const te=yield v.assertedPersistence.getCurrentUser();let be=te,at=!1;if(g&&v.config.authDomain){yield v.getOrInitRedirectPersistenceManager();const Bt=null===(M=v.redirectUser)||void 0===M?void 0:M._redirectEventId,vn=be?._redirectEventId,Tr=yield v.tryRedirectSignIn(g);(!Bt||Bt===vn)&&Tr?.user&&(be=Tr.user,at=!0)}if(!be)return v.directlySetCurrentUser(null);if(!be._redirectEventId){if(at)try{yield v.beforeStateQueue.runMiddleware(be)}catch(Bt){be=te,v._popupRedirectResolver._overrideRedirectResult(v,()=>Promise.reject(Bt))}return be?v.reloadAndSetCurrentUserOrClear(be):v.directlySetCurrentUser(null)}return ve(v._popupRedirectResolver,v,"argument-error"),yield v.getOrInitRedirectPersistenceManager(),v.redirectUser&&v.redirectUser._redirectEventId===be._redirectEventId?v.directlySetCurrentUser(be):v.reloadAndSetCurrentUserOrClear(be)})()}tryRedirectSignIn(g){var v=this;return(0,b.A)(function*(){let M=null;try{M=yield v._popupRedirectResolver._completeRedirectFn(v,g,!0)}catch{yield v._setRedirectUser(null)}return M})()}reloadAndSetCurrentUserOrClear(g){var v=this;return(0,b.A)(function*(){try{yield yi(g)}catch(M){if("auth/network-request-failed"!==M?.code)return v.directlySetCurrentUser(null)}return v.directlySetCurrentUser(g)})()}useDeviceLanguage(){this.languageCode=function ye(){if(typeof navigator>"u")return null;const D=navigator;return D.languages&&D.languages[0]||D.language||null}()}_delete(){var g=this;return(0,b.A)(function*(){g._deleted=!0})()}updateCurrentUser(g){var v=this;return(0,b.A)(function*(){if((0,q._isFirebaseServerApp)(v.app))return Promise.reject(Ze(v));const M=g?(0,H.Ku)(g):null;return M&&ve(M.auth.config.apiKey===v.config.apiKey,v,"invalid-user-token"),v._updateCurrentUser(M&&M._clone(v))})()}_updateCurrentUser(g){var v=this;return(0,b.A)(function*(M,te=!1){if(!v._deleted)return M&&ve(v.tenantId===M.tenantId,v,"tenant-id-mismatch"),te||(yield v.beforeStateQueue.runMiddleware(M)),v.queue((0,b.A)(function*(){yield v.directlySetCurrentUser(M),v.notifyAuthListeners()}))}).apply(this,arguments)}signOut(){var g=this;return(0,b.A)(function*(){return(0,q._isFirebaseServerApp)(g.app)?Promise.reject(Ze(g)):(yield g.beforeStateQueue.runMiddleware(null),(g.redirectPersistenceManager||g._popupRedirectResolver)&&(yield g._setRedirectUser(null)),g._updateCurrentUser(null,!0))})()}setPersistence(g){var v=this;return(0,q._isFirebaseServerApp)(this.app)?Promise.reject(Ze(this)):this.queue((0,b.A)(function*(){yield v.assertedPersistence.setPersistence(Yn(g))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(g){var v=this;return(0,b.A)(function*(){v._getPasswordPolicyInternal()||(yield v._updatePasswordPolicy());const M=v._getPasswordPolicyInternal();return M.schemaVersion!==v.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(v._errorFactory.create("unsupported-password-policy-schema-version",{})):M.validatePassword(g)})()}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){var g=this;return(0,b.A)(function*(){const v=yield function it(D){return ut.apply(this,arguments)}(g),M=new sn(v);null===g.tenantId?g._projectPasswordPolicy=M:g._tenantPasswordPolicies[g.tenantId]=M})()}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(g){this._errorFactory=new H.FA("auth","Firebase",g())}onAuthStateChanged(g,v,M){return this.registerStateListener(this.authStateSubscription,g,v,M)}beforeAuthStateChanged(g,v){return this.beforeStateQueue.pushCallback(g,v)}onIdTokenChanged(g,v,M){return this.registerStateListener(this.idTokenSubscription,g,v,M)}authStateReady(){return new Promise((g,v)=>{if(this.currentUser)g();else{const M=this.onAuthStateChanged(()=>{M(),g()},v)}})}revokeAccessToken(g){var v=this;return(0,b.A)(function*(){if(v.currentUser){const M=yield v.currentUser.getIdToken(),te={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:g,idToken:M};null!=v.tenantId&&(te.tenantId=v.tenantId),yield function ee(D,g){return pe.apply(this,arguments)}(v,te)}})()}toJSON(){var g;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(g=this._currentUser)||void 0===g?void 0:g.toJSON()}}_setRedirectUser(g,v){var M=this;return(0,b.A)(function*(){const te=yield M.getOrInitRedirectPersistenceManager(v);return null===g?te.removeCurrentUser():te.setCurrentUser(g)})()}getOrInitRedirectPersistenceManager(g){var v=this;return(0,b.A)(function*(){if(!v.redirectPersistenceManager){const M=g&&Yn(g)||v._popupRedirectResolver;ve(M,v,"argument-error"),v.redirectPersistenceManager=yield hi.create(v,[Yn(M._redirectPersistence)],"redirectUser"),v.redirectUser=yield v.redirectPersistenceManager.getCurrentUser()}return v.redirectPersistenceManager})()}_redirectUserForId(g){var v=this;return(0,b.A)(function*(){var M,te;return v._isInitialized&&(yield v.queue((0,b.A)(function*(){}))),(null===(M=v._currentUser)||void 0===M?void 0:M._redirectEventId)===g?v._currentUser:(null===(te=v.redirectUser)||void 0===te?void 0:te._redirectEventId)===g?v.redirectUser:null})()}_persistUserIfCurrent(g){var v=this;return(0,b.A)(function*(){if(g===v.currentUser)return v.queue((0,b.A)(function*(){return v.directlySetCurrentUser(g)}))})()}_notifyListenersIfCurrent(g){g===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var g,v;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const M=null!==(v=null===(g=this.currentUser)||void 0===g?void 0:g.uid)&&void 0!==v?v:null;this.lastNotifiedUid!==M&&(this.lastNotifiedUid=M,this.authStateSubscription.next(this.currentUser))}registerStateListener(g,v,M,te){if(this._deleted)return()=>{};const be="function"==typeof v?v:v.next.bind(v);let at=!1;const Bt=this._isInitialized?Promise.resolve():this._initializationPromise;if(ve(Bt,this,"internal-error"),Bt.then(()=>{at||be(this.currentUser)}),"function"==typeof v){const vn=g.addObserver(v,M,te);return()=>{at=!0,vn()}}{const vn=g.addObserver(v);return()=>{at=!0,vn()}}}directlySetCurrentUser(g){var v=this;return(0,b.A)(function*(){v.currentUser&&v.currentUser!==g&&v._currentUser._stopProactiveRefresh(),g&&v.isProactiveRefreshEnabled&&g._startProactiveRefresh(),v.currentUser=g,g?yield v.assertedPersistence.setCurrentUser(g):yield v.assertedPersistence.removeCurrentUser()})()}queue(g){return this.operations=this.operations.then(g,g),this.operations}get assertedPersistence(){return ve(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(g){!g||this.frameworks.includes(g)||(this.frameworks.push(g),this.frameworks.sort(),this.clientVersion=Ts(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var g=this;return(0,b.A)(function*(){var v;const M={"X-Client-Version":g.clientVersion};g.app.options.appId&&(M["X-Firebase-gmpid"]=g.app.options.appId);const te=yield null===(v=g.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===v?void 0:v.getHeartbeatsHeader();te&&(M["X-Firebase-Client"]=te);const be=yield g._getAppCheckToken();return be&&(M["X-Firebase-AppCheck"]=be),M})()}_getAppCheckToken(){var g=this;return(0,b.A)(function*(){var v;const M=yield null===(v=g.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===v?void 0:v.getToken();return M?.error&&function Et(D,...g){hn.logLevel<=Ee.$b.WARN&&hn.warn(`Auth (${q.SDK_VERSION}): ${D}`,...g)}(`Error while retrieving App Check token: ${M.error}`),M?.token})()}}function jt(D){return(0,H.Ku)(D)}class Xn{constructor(g){this.auth=g,this.observer=null,this.addObserver=(0,H.tD)(v=>this.observer=v)}get next(){return ve(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Bn={loadJS:()=>(0,b.A)(function*(){throw new Error("Unable to load external scripts")})(),recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function wr(D){return Bn.loadJS(D)}function gr(D){return`__${D}${Math.floor(1e6*Math.random())}`}class Zr{constructor(g){this.type="recaptcha-enterprise",this.auth=jt(g)}verify(){var g=this;return(0,b.A)(function*(v="verify",M=!1){function be(){return be=(0,b.A)(function*(Bt){if(!M){if(null==Bt.tenantId&&null!=Bt._agentRecaptchaConfig)return Bt._agentRecaptchaConfig.siteKey;if(null!=Bt.tenantId&&void 0!==Bt._tenantRecaptchaConfigs[Bt.tenantId])return Bt._tenantRecaptchaConfigs[Bt.tenantId].siteKey}return new Promise(function(){var vn=(0,b.A)(function*(Tr,Mr){Xe(Bt,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(br=>{if(void 0!==br.recaptchaKey){const Zi=new gi(br);return null==Bt.tenantId?Bt._agentRecaptchaConfig=Zi:Bt._tenantRecaptchaConfigs[Bt.tenantId]=Zi,Tr(Zi.siteKey)}Mr(new Error("recaptcha Enterprise site key undefined"))}).catch(br=>{Mr(br)})});return function(Tr,Mr){return vn.apply(this,arguments)}}())}),be.apply(this,arguments)}function at(Bt,vn,Tr){const Mr=window.grecaptcha;qn(Mr)?Mr.enterprise.ready(()=>{Mr.enterprise.execute(Bt,{action:v}).then(br=>{vn(br)}).catch(()=>{vn("NO_RECAPTCHA")})}):Tr(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((Bt,vn)=>{(function te(Bt){return be.apply(this,arguments)})(g.auth).then(Tr=>{if(!M&&qn(window.grecaptcha))at(Tr,Bt,vn);else{if(typeof window>"u")return void vn(new Error("RecaptchaVerifier is only supported in browser"));let Mr=function Dn(){return Bn.recaptchaEnterpriseScript}();0!==Mr.length&&(Mr+=Tr),wr(Mr).then(()=>{at(Tr,Bt,vn)}).catch(br=>{vn(br)})}}).catch(Tr=>{vn(Tr)})})}).apply(this,arguments)}}function Ri(D,g,v){return kr.apply(this,arguments)}function kr(){return(kr=(0,b.A)(function*(D,g,v,M=!1){const te=new Zr(D);let be;try{be=yield te.verify(v)}catch{be=yield te.verify(v,!0)}const at=Object.assign({},g);return Object.assign(at,M?{captchaResp:be}:{captchaResponse:be}),Object.assign(at,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(at,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),at})).apply(this,arguments)}function oi(D,g,v,M){return As.apply(this,arguments)}function As(){return As=(0,b.A)(function*(D,g,v,M){var te;if(null!==(te=D._getRecaptchaConfig())&&void 0!==te&&te.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const be=yield Ri(D,g,v,"getOobCode"===v);return M(D,be)}return M(D,g).catch(function(){var be=(0,b.A)(function*(at){if("auth/missing-recaptcha-token"===at.code){console.log(`${v} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const Bt=yield Ri(D,g,v,"getOobCode"===v);return M(D,Bt)}return Promise.reject(at)});return function(at){return be.apply(this,arguments)}}())}),As.apply(this,arguments)}function Kn(D){const g=D.indexOf(":");return g<0?"":D.substr(0,g+1)}function mt(D){if(!D)return null;const g=Number(D);return isNaN(g)?null:g}class he{constructor(g,v){this.providerId=g,this.signInMethod=v}toJSON(){return At("not implemented")}_getIdTokenResponse(g){return At("not implemented")}_linkToIdToken(g,v){return At("not implemented")}_getReauthenticationResolver(g){return At("not implemented")}}function We(D,g){return yt.apply(this,arguments)}function yt(){return(yt=(0,b.A)(function*(D,g){return Ct(D,"POST","/v1/accounts:resetPassword",ft(D,g))})).apply(this,arguments)}function jn(){return(jn=(0,b.A)(function*(D,g){return Ct(D,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function Jr(D,g){return Li.apply(this,arguments)}function Li(){return(Li=(0,b.A)(function*(D,g){return Ct(D,"POST","/v1/accounts:signUp",g)})).apply(this,arguments)}function ds(){return(ds=(0,b.A)(function*(D,g){return Ct(D,"POST","/v1/accounts:update",ft(D,g))})).apply(this,arguments)}function is(D,g){return xs.apply(this,arguments)}function xs(){return(xs=(0,b.A)(function*(D,g){return Cr(D,"POST","/v1/accounts:signInWithPassword",ft(D,g))})).apply(this,arguments)}function ua(D,g){return ys.apply(this,arguments)}function ys(){return(ys=(0,b.A)(function*(D,g){return Ct(D,"POST","/v1/accounts:sendOobCode",ft(D,g))})).apply(this,arguments)}function Zs(){return(Zs=(0,b.A)(function*(D,g){return ua(D,g)})).apply(this,arguments)}function po(D,g){return Js.apply(this,arguments)}function Js(){return(Js=(0,b.A)(function*(D,g){return ua(D,g)})).apply(this,arguments)}function So(D,g){return Wi.apply(this,arguments)}function Wi(){return(Wi=(0,b.A)(function*(D,g){return ua(D,g)})).apply(this,arguments)}function Ur(){return(Ur=(0,b.A)(function*(D,g){return ua(D,g)})).apply(this,arguments)}function Ca(){return(Ca=(0,b.A)(function*(D,g){return Cr(D,"POST","/v1/accounts:signInWithEmailLink",ft(D,g))})).apply(this,arguments)}function rc(){return(rc=(0,b.A)(function*(D,g){return Cr(D,"POST","/v1/accounts:signInWithEmailLink",ft(D,g))})).apply(this,arguments)}class Vo extends he{constructor(g,v,M,te=null){super("password",M),this._email=g,this._password=v,this._tenantId=te}static _fromEmailAndPassword(g,v){return new Vo(g,v,"password")}static _fromEmailAndCode(g,v,M=null){return new Vo(g,v,"emailLink",M)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(g){const v="string"==typeof g?JSON.parse(g):g;if(v?.email&&v?.password){if("password"===v.signInMethod)return this._fromEmailAndPassword(v.email,v.password);if("emailLink"===v.signInMethod)return this._fromEmailAndCode(v.email,v.password,v.tenantId)}return null}_getIdTokenResponse(g){var v=this;return(0,b.A)(function*(){switch(v.signInMethod){case"password":return oi(g,{returnSecureToken:!0,email:v._email,password:v._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",is);case"emailLink":return function Go(D,g){return Ca.apply(this,arguments)}(g,{email:v._email,oobCode:v._password});default:Ke(g,"internal-error")}})()}_linkToIdToken(g,v){var M=this;return(0,b.A)(function*(){switch(M.signInMethod){case"password":return oi(g,{idToken:v,returnSecureToken:!0,email:M._email,password:M._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Jr);case"emailLink":return function Fo(D,g){return rc.apply(this,arguments)}(g,{idToken:v,email:M._email,oobCode:M._password});default:Ke(g,"internal-error")}})()}_getReauthenticationResolver(g){return this._getIdTokenResponse(g)}}function Ii(D,g){return Cc.apply(this,arguments)}function Cc(){return(Cc=(0,b.A)(function*(D,g){return Cr(D,"POST","/v1/accounts:signInWithIdp",ft(D,g))})).apply(this,arguments)}class ts extends he{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(g){const v=new ts(g.providerId,g.signInMethod);return g.idToken||g.accessToken?(g.idToken&&(v.idToken=g.idToken),g.accessToken&&(v.accessToken=g.accessToken),g.nonce&&!g.pendingToken&&(v.nonce=g.nonce),g.pendingToken&&(v.pendingToken=g.pendingToken)):g.oauthToken&&g.oauthTokenSecret?(v.accessToken=g.oauthToken,v.secret=g.oauthTokenSecret):Ke("argument-error"),v}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(g){const v="string"==typeof g?JSON.parse(g):g,{providerId:M,signInMethod:te}=v,be=(0,Fe.Tt)(v,["providerId","signInMethod"]);if(!M||!te)return null;const at=new ts(M,te);return at.idToken=be.idToken||void 0,at.accessToken=be.accessToken||void 0,at.secret=be.secret,at.nonce=be.nonce,at.pendingToken=be.pendingToken||null,at}_getIdTokenResponse(g){return Ii(g,this.buildRequest())}_linkToIdToken(g,v){const M=this.buildRequest();return M.idToken=v,Ii(g,M)}_getReauthenticationResolver(g){const v=this.buildRequest();return v.autoCreate=!1,Ii(g,v)}buildRequest(){const g={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)g.pendingToken=this.pendingToken;else{const v={};this.idToken&&(v.id_token=this.idToken),this.accessToken&&(v.access_token=this.accessToken),this.secret&&(v.oauth_token_secret=this.secret),v.providerId=this.providerId,this.nonce&&!this.pendingToken&&(v.nonce=this.nonce),g.postBody=(0,H.Am)(v)}return g}}function Fi(){return(Fi=(0,b.A)(function*(D,g){return Ct(D,"POST","/v1/accounts:sendVerificationCode",ft(D,g))})).apply(this,arguments)}function Sc(){return(Sc=(0,b.A)(function*(D,g){return Cr(D,"POST","/v1/accounts:signInWithPhoneNumber",ft(D,g))})).apply(this,arguments)}function fa(){return(fa=(0,b.A)(function*(D,g){const v=yield Cr(D,"POST","/v1/accounts:signInWithPhoneNumber",ft(D,g));if(v.temporaryProof)throw vr(D,"account-exists-with-different-credential",v);return v})).apply(this,arguments)}const Dc={USER_NOT_FOUND:"user-not-found"};function Pr(){return(Pr=(0,b.A)(function*(D,g){return Cr(D,"POST","/v1/accounts:signInWithPhoneNumber",ft(D,Object.assign(Object.assign({},g),{operation:"REAUTH"})),Dc)})).apply(this,arguments)}class fi extends he{constructor(g){super("phone","phone"),this.params=g}static _fromVerification(g,v){return new fi({verificationId:g,verificationCode:v})}static _fromTokenResponse(g,v){return new fi({phoneNumber:g,temporaryProof:v})}_getIdTokenResponse(g){return function ls(D,g){return Sc.apply(this,arguments)}(g,this._makeVerificationRequest())}_linkToIdToken(g,v){return function Br(D,g){return fa.apply(this,arguments)}(g,Object.assign({idToken:v},this._makeVerificationRequest()))}_getReauthenticationResolver(g){return function Qo(D,g){return Pr.apply(this,arguments)}(g,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:g,phoneNumber:v,verificationId:M,verificationCode:te}=this.params;return g&&v?{temporaryProof:g,phoneNumber:v}:{sessionInfo:M,code:te}}toJSON(){const g={providerId:this.providerId};return this.params.phoneNumber&&(g.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(g.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(g.verificationCode=this.params.verificationCode),this.params.verificationId&&(g.verificationId=this.params.verificationId),g}static fromJSON(g){"string"==typeof g&&(g=JSON.parse(g));const{verificationId:v,verificationCode:M,phoneNumber:te,temporaryProof:be}=g;return M||v||te||be?new fi({verificationId:v,verificationCode:M,phoneNumber:te,temporaryProof:be}):null}}class mo{constructor(g){var v,M,te,be,at,Bt;const vn=(0,H.I9)((0,H.hp)(g)),Tr=null!==(v=vn.apiKey)&&void 0!==v?v:null,Mr=null!==(M=vn.oobCode)&&void 0!==M?M:null,br=function $l(D){switch(D){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(te=vn.mode)&&void 0!==te?te:null);ve(Tr&&Mr&&br,"argument-error"),this.apiKey=Tr,this.operation=br,this.code=Mr,this.continueUrl=null!==(be=vn.continueUrl)&&void 0!==be?be:null,this.languageCode=null!==(at=vn.languageCode)&&void 0!==at?at:null,this.tenantId=null!==(Bt=vn.tenantId)&&void 0!==Bt?Bt:null}static parseLink(g){const v=function Do(D){const g=(0,H.I9)((0,H.hp)(D)).link,v=g?(0,H.I9)((0,H.hp)(g)).deep_link_id:null,M=(0,H.I9)((0,H.hp)(D)).deep_link_id;return(M?(0,H.I9)((0,H.hp)(M)).link:null)||M||v||g||D}(g);try{return new mo(v)}catch{return null}}}let ss=(()=>{class D{constructor(){this.providerId=D.PROVIDER_ID}static credential(v,M){return Vo._fromEmailAndPassword(v,M)}static credentialWithLink(v,M){const te=mo.parseLink(M);return ve(te,"argument-error"),Vo._fromEmailAndCode(v,te.code,te.tenantId)}}return D.PROVIDER_ID="password",D.EMAIL_PASSWORD_SIGN_IN_METHOD="password",D.EMAIL_LINK_SIGN_IN_METHOD="emailLink",D})();class ns{constructor(g){this.providerId=g,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(g){this.defaultLanguageCode=g}setCustomParameters(g){return this.customParameters=g,this}getCustomParameters(){return this.customParameters}}class ja extends ns{constructor(){super(...arguments),this.scopes=[]}addScope(g){return this.scopes.includes(g)||this.scopes.push(g),this}getScopes(){return[...this.scopes]}}class Sa extends ja{static credentialFromJSON(g){const v="string"==typeof g?JSON.parse(g):g;return ve("providerId"in v&&"signInMethod"in v,"argument-error"),ts._fromParams(v)}credential(g){return this._credential(Object.assign(Object.assign({},g),{nonce:g.rawNonce}))}_credential(g){return ve(g.idToken||g.accessToken,"argument-error"),ts._fromParams(Object.assign(Object.assign({},g),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(g){return Sa.oauthCredentialFromTaggedObject(g)}static credentialFromError(g){return Sa.oauthCredentialFromTaggedObject(g.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:v,oauthAccessToken:M,oauthTokenSecret:te,pendingToken:be,nonce:at,providerId:Bt}=g;if(!M&&!te&&!v&&!be||!Bt)return null;try{return new Sa(Bt)._credential({idToken:v,accessToken:M,nonce:at,pendingToken:be})}catch{return null}}}let qs=(()=>{class D extends ja{constructor(){super("facebook.com")}static credential(v){return ts._fromParams({providerId:D.PROVIDER_ID,signInMethod:D.FACEBOOK_SIGN_IN_METHOD,accessToken:v})}static credentialFromResult(v){return D.credentialFromTaggedObject(v)}static credentialFromError(v){return D.credentialFromTaggedObject(v.customData||{})}static credentialFromTaggedObject({_tokenResponse:v}){if(!v||!("oauthAccessToken"in v)||!v.oauthAccessToken)return null;try{return D.credential(v.oauthAccessToken)}catch{return null}}}return D.FACEBOOK_SIGN_IN_METHOD="facebook.com",D.PROVIDER_ID="facebook.com",D})(),Mi=(()=>{class D extends ja{constructor(){super("google.com"),this.addScope("profile")}static credential(v,M){return ts._fromParams({providerId:D.PROVIDER_ID,signInMethod:D.GOOGLE_SIGN_IN_METHOD,idToken:v,accessToken:M})}static credentialFromResult(v){return D.credentialFromTaggedObject(v)}static credentialFromError(v){return D.credentialFromTaggedObject(v.customData||{})}static credentialFromTaggedObject({_tokenResponse:v}){if(!v)return null;const{oauthIdToken:M,oauthAccessToken:te}=v;if(!M&&!te)return null;try{return D.credential(M,te)}catch{return null}}}return D.GOOGLE_SIGN_IN_METHOD="google.com",D.PROVIDER_ID="google.com",D})(),pa=(()=>{class D extends ja{constructor(){super("github.com")}static credential(v){return ts._fromParams({providerId:D.PROVIDER_ID,signInMethod:D.GITHUB_SIGN_IN_METHOD,accessToken:v})}static credentialFromResult(v){return D.credentialFromTaggedObject(v)}static credentialFromError(v){return D.credentialFromTaggedObject(v.customData||{})}static credentialFromTaggedObject({_tokenResponse:v}){if(!v||!("oauthAccessToken"in v)||!v.oauthAccessToken)return null;try{return D.credential(v.oauthAccessToken)}catch{return null}}}return D.GITHUB_SIGN_IN_METHOD="github.com",D.PROVIDER_ID="github.com",D})();class go extends he{constructor(g,v){super(g,g),this.pendingToken=v}_getIdTokenResponse(g){return Ii(g,this.buildRequest())}_linkToIdToken(g,v){const M=this.buildRequest();return M.idToken=v,Ii(g,M)}_getReauthenticationResolver(g){const v=this.buildRequest();return v.autoCreate=!1,Ii(g,v)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(g){const v="string"==typeof g?JSON.parse(g):g,{providerId:M,signInMethod:te,pendingToken:be}=v;return M&&te&&be&&M===te?new go(M,be):null}static _create(g,v){return new go(g,v)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Rc extends ns{constructor(g){ve(g.startsWith("saml."),"argument-error"),super(g)}static credentialFromResult(g){return Rc.samlCredentialFromTaggedObject(g)}static credentialFromError(g){return Rc.samlCredentialFromTaggedObject(g.customData||{})}static credentialFromJSON(g){const v=go.fromJSON(g);return ve(v,"argument-error"),v}static samlCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{pendingToken:v,providerId:M}=g;if(!v||!M)return null;try{return go._create(M,v)}catch{return null}}}let $a=(()=>{class D extends ja{constructor(){super("twitter.com")}static credential(v,M){return ts._fromParams({providerId:D.PROVIDER_ID,signInMethod:D.TWITTER_SIGN_IN_METHOD,oauthToken:v,oauthTokenSecret:M})}static credentialFromResult(v){return D.credentialFromTaggedObject(v)}static credentialFromError(v){return D.credentialFromTaggedObject(v.customData||{})}static credentialFromTaggedObject({_tokenResponse:v}){if(!v)return null;const{oauthAccessToken:M,oauthTokenSecret:te}=v;if(!M||!te)return null;try{return D.credential(M,te)}catch{return null}}}return D.TWITTER_SIGN_IN_METHOD="twitter.com",D.PROVIDER_ID="twitter.com",D})();function to(D,g){return Vs.apply(this,arguments)}function Vs(){return(Vs=(0,b.A)(function*(D,g){return Cr(D,"POST","/v1/accounts:signUp",ft(D,g))})).apply(this,arguments)}class vs{constructor(g){this.user=g.user,this.providerId=g.providerId,this._tokenResponse=g._tokenResponse,this.operationType=g.operationType}static _fromIdTokenResponse(g,v,M){return(0,b.A)(function*(te,be,at,Bt=!1){const vn=yield lt._fromIdTokenResponse(te,at,Bt),Tr=ic(at);return new vs({user:vn,providerId:Tr,_tokenResponse:at,operationType:be})}).apply(this,arguments)}static _forOperation(g,v,M){return(0,b.A)(function*(){yield g._updateTokensIfNecessary(M,!0);const te=ic(M);return new vs({user:g,providerId:te,_tokenResponse:M,operationType:v})})()}}function ic(D){return D.providerId?D.providerId:"phoneNumber"in D?"phone":null}function _o(){return(_o=(0,b.A)(function*(D){var g;if((0,q._isFirebaseServerApp)(D.app))return Promise.reject(Ze(D));const v=jt(D);if(yield v._initializationPromise,null!==(g=v.currentUser)&&void 0!==g&&g.isAnonymous)return new vs({user:v.currentUser,providerId:null,operationType:"signIn"});const M=yield to(v,{returnSecureToken:!0}),te=yield vs._fromIdTokenResponse(v,"signIn",M,!0);return yield v._updateCurrentUser(te.user),te})).apply(this,arguments)}class Wa extends H.g{constructor(g,v,M,te){var be;super(v.code,v.message),this.operationType=M,this.user=te,Object.setPrototypeOf(this,Wa.prototype),this.customData={appName:g.name,tenantId:null!==(be=g.tenantId)&&void 0!==be?be:void 0,_serverResponse:v.customData._serverResponse,operationType:M}}static _fromErrorAndOperation(g,v,M,te){return new Wa(g,v,M,te)}}function sc(D,g,v,M){return("reauthenticate"===g?v._getReauthenticationResolver(D):v._getIdTokenResponse(D)).catch(be=>{throw"auth/multi-factor-auth-required"===be.code?Wa._fromErrorAndOperation(D,be,g,M):be})}function Uo(D){return new Set(D.map(({providerId:g})=>g).filter(g=>!!g))}function ao(){return ao=(0,b.A)(function*(D,g){const v=(0,H.Ku)(D);yield Yo(!0,v,g);const{providerUserInfo:M}=yield function mn(D,g){return Ut.apply(this,arguments)}(v.auth,{idToken:yield v.getIdToken(),deleteProvider:[g]}),te=Uo(M||[]);return v.providerData=v.providerData.filter(be=>te.has(be.providerId)),te.has("phone")||(v.phoneNumber=null),yield v.auth._persistUserIfCurrent(v),v}),ao.apply(this,arguments)}function Pc(D,g){return no.apply(this,arguments)}function no(){return(no=(0,b.A)(function*(D,g,v=!1){const M=yield Yr(D,g._linkToIdToken(D.auth,yield D.getIdToken()),v);return vs._forOperation(D,"link",M)})).apply(this,arguments)}function Yo(D,g,v){return Cs.apply(this,arguments)}function Cs(){return(Cs=(0,b.A)(function*(D,g,v){yield yi(g);const te=!1===D?"provider-already-linked":"no-such-provider";ve(Uo(g.providerData).has(v)===D,g.auth,te)})).apply(this,arguments)}function Tl(D,g){return Vi.apply(this,arguments)}function Vi(){return(Vi=(0,b.A)(function*(D,g,v=!1){const{auth:M}=D;if((0,q._isFirebaseServerApp)(M.app))return Promise.reject(Ze(M));const te="reauthenticate";try{const be=yield Yr(D,sc(M,te,g,D),v);ve(be.idToken,M,"internal-error");const at=ar(be.idToken);ve(at,M,"internal-error");const{sub:Bt}=at;return ve(D.uid===Bt,M,"user-mismatch"),vs._forOperation(D,te,be)}catch(be){throw"auth/user-not-found"===be?.code&&Ke(M,"user-mismatch"),be}})).apply(this,arguments)}function Qi(D,g){return Xo.apply(this,arguments)}function Xo(){return(Xo=(0,b.A)(function*(D,g,v=!1){if((0,q._isFirebaseServerApp)(D.app))return Promise.reject(Ze(D));const M="signIn",te=yield sc(D,M,g),be=yield vs._fromIdTokenResponse(D,M,te);return v||(yield D._updateCurrentUser(be.user)),be})).apply(this,arguments)}function co(D,g){return Mc.apply(this,arguments)}function Mc(){return(Mc=(0,b.A)(function*(D,g){return Qi(jt(D),g)})).apply(this,arguments)}function ma(D,g){return ga.apply(this,arguments)}function ga(){return(ga=(0,b.A)(function*(D,g){const v=(0,H.Ku)(D);return yield Yo(!1,v,g.providerId),Pc(v,g)})).apply(this,arguments)}function yo(D,g){return vo.apply(this,arguments)}function vo(){return(vo=(0,b.A)(function*(D,g){return Tl((0,H.Ku)(D),g)})).apply(this,arguments)}function Zo(){return(Zo=(0,b.A)(function*(D,g){return Cr(D,"POST","/v1/accounts:signInWithCustomToken",ft(D,g))})).apply(this,arguments)}function hs(){return hs=(0,b.A)(function*(D,g){if((0,q._isFirebaseServerApp)(D.app))return Promise.reject(Ze(D));const v=jt(D),M=yield function _a(D,g){return Zo.apply(this,arguments)}(v,{token:g,returnSecureToken:!0}),te=yield vs._fromIdTokenResponse(v,"signIn",M);return yield v._updateCurrentUser(te.user),te}),hs.apply(this,arguments)}class Ra{constructor(g,v){this.factorId=g,this.uid=v.mfaEnrollmentId,this.enrollmentTime=new Date(v.enrolledAt).toUTCString(),this.displayName=v.displayName}static _fromServerResponse(g,v){return"phoneInfo"in v?ri._fromServerResponse(g,v):"totpInfo"in v?Ui._fromServerResponse(g,v):Ke(g,"internal-error")}}class ri extends Ra{constructor(g){super("phone",g),this.phoneNumber=g.phoneInfo}static _fromServerResponse(g,v){return new ri(v)}}class Ui extends Ra{constructor(g){super("totp",g)}static _fromServerResponse(g,v){return new Ui(v)}}function Ci(D,g,v){var M;ve((null===(M=v.url)||void 0===M?void 0:M.length)>0,D,"invalid-continue-uri"),ve(typeof v.dynamicLinkDomain>"u"||v.dynamicLinkDomain.length>0,D,"invalid-dynamic-link-domain"),g.continueUrl=v.url,g.dynamicLinkDomain=v.dynamicLinkDomain,g.canHandleCodeInApp=v.handleCodeInApp,v.iOS&&(ve(v.iOS.bundleId.length>0,D,"missing-ios-bundle-id"),g.iOSBundleId=v.iOS.bundleId),v.android&&(ve(v.android.packageName.length>0,D,"missing-android-pkg-name"),g.androidInstallApp=v.android.installApp,g.androidMinimumVersionCode=v.android.minimumVersion,g.androidPackageName=v.android.packageName)}function Bo(D){return Ss.apply(this,arguments)}function Ss(){return(Ss=(0,b.A)(function*(D){const g=jt(D);g._getPasswordPolicyInternal()&&(yield g._updatePasswordPolicy())})).apply(this,arguments)}function rl(){return(rl=(0,b.A)(function*(D,g,v){const M=jt(D),te={requestType:"PASSWORD_RESET",email:g,clientType:"CLIENT_TYPE_WEB"};v&&Ci(M,te,v),yield oi(M,te,"getOobCode",po)})).apply(this,arguments)}function zi(){return zi=(0,b.A)(function*(D,g,v){yield We((0,H.Ku)(D),{oobCode:g,newPassword:v}).catch(function(){var M=(0,b.A)(function*(te){throw"auth/password-does-not-meet-requirements"===te.code&&Bo(D),te});return function(te){return M.apply(this,arguments)}}())}),zi.apply(this,arguments)}function Po(){return Po=(0,b.A)(function*(D,g){yield function es(D,g){return ds.apply(this,arguments)}((0,H.Ku)(D),{oobCode:g})}),Po.apply(this,arguments)}function Ha(D,g){return il.apply(this,arguments)}function il(){return(il=(0,b.A)(function*(D,g){const v=(0,H.Ku)(D),M=yield We(v,{oobCode:g}),te=M.requestType;switch(ve(te,v,"internal-error"),te){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ve(M.newEmail,v,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ve(M.mfaInfo,v,"internal-error");default:ve(M.email,v,"internal-error")}let be=null;return M.mfaInfo&&(be=Ra._fromServerResponse(jt(v),M.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===M.requestType?M.newEmail:M.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===M.requestType?M.email:M.newEmail)||null,multiFactorInfo:be},operation:te}})).apply(this,arguments)}function ya(){return(ya=(0,b.A)(function*(D,g){const{data:v}=yield Ha((0,H.Ku)(D),g);return v.email})).apply(this,arguments)}function jo(){return(jo=(0,b.A)(function*(D,g,v){if((0,q._isFirebaseServerApp)(D.app))return Promise.reject(Ze(D));const M=jt(D),at=yield oi(M,{returnSecureToken:!0,email:g,password:v,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",to).catch(vn=>{throw"auth/password-does-not-meet-requirements"===vn.code&&Bo(D),vn}),Bt=yield vs._fromIdTokenResponse(M,"signIn",at);return yield M._updateCurrentUser(Bt.user),Bt})).apply(this,arguments)}function ac(){return(ac=(0,b.A)(function*(D,g,v){const M=jt(D),te={requestType:"EMAIL_SIGNIN",email:g,clientType:"CLIENT_TYPE_WEB"};(function be(at,Bt){ve(Bt.handleCodeInApp,M,"argument-error"),Bt&&Ci(M,at,Bt)})(te,v),yield oi(M,te,"getOobCode",So)})).apply(this,arguments)}function cc(){return(cc=(0,b.A)(function*(D,g,v){if((0,q._isFirebaseServerApp)(D.app))return Promise.reject(Ze(D));const M=(0,H.Ku)(D),te=ss.credentialWithLink(g,v||Nt());return ve(te._tenantId===(M.tenantId||null),M,"tenant-id-mismatch"),co(M,te)})).apply(this,arguments)}function ol(){return(ol=(0,b.A)(function*(D,g){return Ct(D,"POST","/v1/accounts:createAuthUri",ft(D,g))})).apply(this,arguments)}function Wl(){return Wl=(0,b.A)(function*(D,g){const M={identifier:g,continueUri:Yt()?Nt():"http://localhost"},{signinMethods:te}=yield function sl(D,g){return ol.apply(this,arguments)}((0,H.Ku)(D),M);return te||[]}),Wl.apply(this,arguments)}function Oi(){return Oi=(0,b.A)(function*(D,g){const v=(0,H.Ku)(D),te={requestType:"VERIFY_EMAIL",idToken:yield D.getIdToken()};g&&Ci(v.auth,te,g);const{email:be}=yield function da(D,g){return Zs.apply(this,arguments)}(v.auth,te);be!==D.email&&(yield D.reload())}),Oi.apply(this,arguments)}function Jo(){return Jo=(0,b.A)(function*(D,g,v){const M=(0,H.Ku)(D),be={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield D.getIdToken(),newEmail:g};v&&Ci(M.auth,be,v);const{email:at}=yield function eo(D,g){return Ur.apply(this,arguments)}(M.auth,be);at!==D.email&&(yield D.reload())}),Jo.apply(this,arguments)}function su(){return(su=(0,b.A)(function*(D,g){return Ct(D,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function Al(){return Al=(0,b.A)(function*(D,{displayName:g,photoURL:v}){if(void 0===g&&void 0===v)return;const M=(0,H.Ku)(D),be={idToken:yield M.getIdToken(),displayName:g,photoUrl:v,returnSecureToken:!0},at=yield Yr(M,function dc(D,g){return su.apply(this,arguments)}(M.auth,be));M.displayName=at.displayName||null,M.photoURL=at.photoUrl||null;const Bt=M.providerData.find(({providerId:vn})=>"password"===vn);Bt&&(Bt.displayName=M.displayName,Bt.photoURL=M.photoURL),yield M._updateTokensIfNecessary(at)}),Al.apply(this,arguments)}function Eo(D,g,v){return ea.apply(this,arguments)}function ea(){return ea=(0,b.A)(function*(D,g,v){const{auth:M}=D,be={idToken:yield D.getIdToken(),returnSecureToken:!0};g&&(be.email=g),v&&(be.password=v);const at=yield Yr(D,function In(D,g){return jn.apply(this,arguments)}(M,be));yield D._updateTokensIfNecessary(at,!0)}),ea.apply(this,arguments)}class Nc{constructor(g,v,M={}){this.isNewUser=g,this.providerId=v,this.profile=M}}class L extends Nc{constructor(g,v,M,te){super(g,v,M),this.username=te}}class _e extends Nc{constructor(g,v){super(g,"facebook.com",v)}}class X extends L{constructor(g,v){super(g,"github.com",v,"string"==typeof v?.login?v?.login:null)}}class ue extends Nc{constructor(g,v){super(g,"google.com",v)}}class qe extends L{constructor(g,v,M){super(g,"twitter.com",v,M)}}function cn(D){const{user:g,_tokenResponse:v}=D;return g.isAnonymous&&!v?{providerId:null,isNewUser:!1,profile:null}:function ta(D){var g,v;if(!D)return null;const{providerId:M}=D,te=D.rawUserInfo?JSON.parse(D.rawUserInfo):{},be=D.isNewUser||"identitytoolkit#SignupNewUserResponse"===D.kind;if(!M&&D?.idToken){const at=null===(v=null===(g=ar(D.idToken))||void 0===g?void 0:g.firebase)||void 0===v?void 0:v.sign_in_provider;if(at)return new Nc(be,"anonymous"!==at&&"custom"!==at?at:null)}if(!M)return null;switch(M){case"facebook.com":return new _e(be,te);case"github.com":return new X(be,te);case"google.com":return new ue(be,te);case"twitter.com":return new qe(be,te,D.screenName||null);case"custom":case"anonymous":return new Nc(be,null);default:return new Nc(be,M,te)}}(v)}class Ti{constructor(g,v,M){this.type=g,this.credential=v,this.user=M}static _fromIdtoken(g,v){return new Ti("enroll",g,v)}static _fromMfaPendingCredential(g){return new Ti("signin",g)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(g){var v,M;if(g?.multiFactorSession){if(null!==(v=g.multiFactorSession)&&void 0!==v&&v.pendingCredential)return Ti._fromMfaPendingCredential(g.multiFactorSession.pendingCredential);if(null!==(M=g.multiFactorSession)&&void 0!==M&&M.idToken)return Ti._fromIdtoken(g.multiFactorSession.idToken)}return null}}class Us{constructor(g,v,M){this.session=g,this.hints=v,this.signInResolver=M}static _fromError(g,v){const M=jt(g),te=v.customData._serverResponse,be=(te.mfaInfo||[]).map(Bt=>Ra._fromServerResponse(M,Bt));ve(te.mfaPendingCredential,M,"internal-error");const at=Ti._fromMfaPendingCredential(te.mfaPendingCredential);return new Us(at,be,function(){var Bt=(0,b.A)(function*(vn){const Tr=yield vn._process(M,at);delete te.mfaInfo,delete te.mfaPendingCredential;const Mr=Object.assign(Object.assign({},te),{idToken:Tr.idToken,refreshToken:Tr.refreshToken});switch(v.operationType){case"signIn":const br=yield vs._fromIdTokenResponse(M,v.operationType,Mr);return yield M._updateCurrentUser(br.user),br;case"reauthenticate":return ve(v.user,M,"internal-error"),vs._forOperation(v.user,v.operationType,Mr);default:Ke(M,"internal-error")}});return function(vn){return Bt.apply(this,arguments)}}())}resolveSignIn(g){var v=this;return(0,b.A)(function*(){return v.signInResolver(g)})()}}class jr{constructor(g){this.user=g,this.enrolledFactors=[],g._onReload(v=>{v.mfaInfo&&(this.enrolledFactors=v.mfaInfo.map(M=>Ra._fromServerResponse(g.auth,M)))})}static _fromUser(g){return new jr(g)}getSession(){var g=this;return(0,b.A)(function*(){return Ti._fromIdtoken(yield g.user.getIdToken(),g.user)})()}enroll(g,v){var M=this;return(0,b.A)(function*(){const te=g,be=yield M.getSession(),at=yield Yr(M.user,te._process(M.user.auth,be,v));return yield M.user._updateTokensIfNecessary(at),M.user.reload()})()}unenroll(g){var v=this;return(0,b.A)(function*(){const M="string"==typeof g?g:g.uid,te=yield v.user.getIdToken();try{const be=yield Yr(v.user,function na(D,g){return Ct(D,"POST","/v2/accounts/mfaEnrollment:withdraw",ft(D,g))}(v.user.auth,{idToken:te,mfaEnrollmentId:M}));v.enrolledFactors=v.enrolledFactors.filter(({uid:at})=>at!==M),yield v.user._updateTokensIfNecessary(be),yield v.user.reload()}catch(be){throw be}})()}}const zl=new WeakMap,kc="__sak";class fs{constructor(g,v){this.storageRetriever=g,this.type=v}_isAvailable(){try{return this.storage?(this.storage.setItem(kc,"1"),this.storage.removeItem(kc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(g,v){return this.storage.setItem(g,JSON.stringify(v)),Promise.resolve()}_get(g){const v=this.storage.getItem(g);return Promise.resolve(v?JSON.parse(v):null)}_remove(g){return this.storage.removeItem(g),Promise.resolve()}get storage(){return this.storageRetriever()}}const bs=(()=>{class D extends fs{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(v,M)=>this.onStorageEvent(v,M),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=_s(),this._shouldAllowMigration=!0}forAllChangedKeys(v){for(const M of Object.keys(this.listeners)){const te=this.storage.getItem(M),be=this.localCache[M];te!==be&&v(M,be,te)}}onStorageEvent(v,M=!1){if(!v.key)return void this.forAllChangedKeys((Bt,vn,Tr)=>{this.notifyListeners(Bt,Tr)});const te=v.key;M?this.detachListener():this.stopPolling();const be=()=>{const Bt=this.storage.getItem(te);!M&&this.localCache[te]===Bt||this.notifyListeners(te,Bt)},at=this.storage.getItem(te);!function Gs(){return(0,H.lT)()&&10===document.documentMode}()||at===v.newValue||v.newValue===v.oldValue?be():setTimeout(be,10)}notifyListeners(v,M){this.localCache[v]=M;const te=this.listeners[v];if(te)for(const be of Array.from(te))be(M&&JSON.parse(M))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((v,M,te)=>{this.onStorageEvent(new StorageEvent("storage",{key:v,oldValue:M,newValue:te}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(v,M){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[v]||(this.listeners[v]=new Set,this.localCache[v]=this.storage.getItem(v)),this.listeners[v].add(M)}_removeListener(v,M){this.listeners[v]&&(this.listeners[v].delete(M),0===this.listeners[v].size&&delete this.listeners[v]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(v,M){var te=()=>super._set,be=this;return(0,b.A)(function*(){yield te().call(be,v,M),be.localCache[v]=JSON.stringify(M)})()}_get(v){var M=()=>super._get,te=this;return(0,b.A)(function*(){const be=yield M().call(te,v);return te.localCache[v]=JSON.stringify(be),be})()}_remove(v){var M=()=>super._remove,te=this;return(0,b.A)(function*(){yield M().call(te,v),delete te.localCache[v]})()}}return D.type="LOCAL",D})(),Oo=(()=>{class D extends fs{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(v,M){}_removeListener(v,M){}}return D.type="SESSION",D})();let Oa=(()=>{class D{constructor(v){this.eventTarget=v,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(v){const M=this.receivers.find(be=>be.isListeningto(v));if(M)return M;const te=new D(v);return this.receivers.push(te),te}isListeningto(v){return this.eventTarget===v}handleEvent(v){var M=this;return(0,b.A)(function*(){const te=v,{eventId:be,eventType:at,data:Bt}=te.data,vn=M.handlersMap[at];if(!vn?.size)return;te.ports[0].postMessage({status:"ack",eventId:be,eventType:at});const Tr=Array.from(vn).map(function(){var br=(0,b.A)(function*(Zi){return Zi(te.origin,Bt)});return function(Zi){return br.apply(this,arguments)}}()),Mr=yield function au(D){return Promise.all(D.map(function(){var g=(0,b.A)(function*(v){try{return{fulfilled:!0,value:yield v}}catch(M){return{fulfilled:!1,reason:M}}});return function(v){return g.apply(this,arguments)}}()))}(Tr);te.ports[0].postMessage({status:"done",eventId:be,eventType:at,response:Mr})})()}_subscribe(v,M){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[v]||(this.handlersMap[v]=new Set),this.handlersMap[v].add(M)}_unsubscribe(v,M){this.handlersMap[v]&&M&&this.handlersMap[v].delete(M),(!M||0===this.handlersMap[v].size)&&delete this.handlersMap[v],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return D.receivers=[],D})();function zr(D="",g=10){let v="";for(let M=0;M<g;M++)v+=Math.floor(10*Math.random());return D+v}class us{constructor(g){this.target=g,this.handlers=new Set}removeMessageHandler(g){g.messageChannel&&(g.messageChannel.port1.removeEventListener("message",g.onMessage),g.messageChannel.port1.close()),this.handlers.delete(g)}_send(g,v){var M=this;return(0,b.A)(function*(te,be,at=50){const Bt=typeof MessageChannel<"u"?new MessageChannel:null;if(!Bt)throw new Error("connection_unavailable");let vn,Tr;return new Promise((Mr,br)=>{const Zi=zr("",20);Bt.port1.start();const Ic=setTimeout(()=>{br(new Error("unsupported_event"))},at);Tr={messageChannel:Bt,onMessage(No){const Gu=No;if(Gu.data.eventId===Zi)switch(Gu.data.status){case"ack":clearTimeout(Ic),vn=setTimeout(()=>{br(new Error("timeout"))},3e3);break;case"done":clearTimeout(vn),Mr(Gu.data.response);break;default:clearTimeout(Ic),clearTimeout(vn),br(new Error("invalid_response"))}}},M.handlers.add(Tr),Bt.port1.addEventListener("message",Tr.onMessage),M.target.postMessage({eventType:te,eventId:Zi,data:be},[Bt.port2])}).finally(()=>{Tr&&M.removeMessageHandler(Tr)})}).apply(this,arguments)}}function Ds(){return window}function ba(){return typeof Ds().WorkerGlobalScope<"u"&&"function"==typeof Ds().importScripts}function ps(){return(ps=(0,b.A)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Qs="firebaseLocalStorageDb",xa="firebaseLocalStorage",Fc="fbase_key";class ms{constructor(g){this.request=g}toPromise(){return new Promise((g,v)=>{this.request.addEventListener("success",()=>{g(this.request.result)}),this.request.addEventListener("error",()=>{v(this.request.error)})})}}function Na(D,g){return D.transaction([xa],g?"readwrite":"readonly").objectStore(xa)}function bd(){const D=indexedDB.open(Qs,1);return new Promise((g,v)=>{D.addEventListener("error",()=>{v(D.error)}),D.addEventListener("upgradeneeded",()=>{const M=D.result;try{M.createObjectStore(xa,{keyPath:Fc})}catch(te){v(te)}}),D.addEventListener("success",(0,b.A)(function*(){const M=D.result;M.objectStoreNames.contains(xa)?g(M):(M.close(),yield function $r(){const D=indexedDB.deleteDatabase(Qs);return new ms(D).toPromise()}(),g(yield bd()))}))})}function Cl(D,g,v){return Kl.apply(this,arguments)}function Kl(){return(Kl=(0,b.A)(function*(D,g,v){const M=Na(D,!0).put({[Fc]:g,value:v});return new ms(M).toPromise()})).apply(this,arguments)}function cu(){return(cu=(0,b.A)(function*(D,g){const v=Na(D,!1).get(g),M=yield new ms(v).toPromise();return void 0===M?null:M.value})).apply(this,arguments)}function Vc(D,g){const v=Na(D,!0).delete(g);return new ms(v).toPromise()}const W=(()=>{class D{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var v=this;return(0,b.A)(function*(){return v.db||(v.db=yield bd()),v.db})()}_withRetries(v){var M=this;return(0,b.A)(function*(){let te=0;for(;;)try{const be=yield M._openDb();return yield v(be)}catch(be){if(te++>3)throw be;M.db&&(M.db.close(),M.db=void 0)}})()}initializeServiceWorkerMessaging(){var v=this;return(0,b.A)(function*(){return ba()?v.initializeReceiver():v.initializeSender()})()}initializeReceiver(){var v=this;return(0,b.A)(function*(){v.receiver=Oa._getInstance(function xo(){return ba()?self:null}()),v.receiver._subscribe("keyChanged",function(){var M=(0,b.A)(function*(te,be){return{keyProcessed:(yield v._poll()).includes(be.key)}});return function(te,be){return M.apply(this,arguments)}}()),v.receiver._subscribe("ping",function(){var M=(0,b.A)(function*(te,be){return["keyChanged"]});return function(te,be){return M.apply(this,arguments)}}())})()}initializeSender(){var v=this;return(0,b.A)(function*(){var M,te;if(v.activeServiceWorker=yield function hc(){return ps.apply(this,arguments)}(),!v.activeServiceWorker)return;v.sender=new us(v.activeServiceWorker);const be=yield v.sender._send("ping",{},800);be&&null!==(M=be[0])&&void 0!==M&&M.fulfilled&&null!==(te=be[0])&&void 0!==te&&te.value.includes("keyChanged")&&(v.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(v){var M=this;return(0,b.A)(function*(){if(M.sender&&M.activeServiceWorker&&function Ed(){var D;return(null===(D=navigator?.serviceWorker)||void 0===D?void 0:D.controller)||null}()===M.activeServiceWorker)try{yield M.sender._send("keyChanged",{key:v},M.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,b.A)(function*(){try{if(!indexedDB)return!1;const v=yield bd();return yield Cl(v,kc,"1"),yield Vc(v,kc),!0}catch{}return!1})()}_withPendingWrite(v){var M=this;return(0,b.A)(function*(){M.pendingWrites++;try{yield v()}finally{M.pendingWrites--}})()}_set(v,M){var te=this;return(0,b.A)(function*(){return te._withPendingWrite((0,b.A)(function*(){return yield te._withRetries(be=>Cl(be,v,M)),te.localCache[v]=M,te.notifyServiceWorker(v)}))})()}_get(v){var M=this;return(0,b.A)(function*(){const te=yield M._withRetries(be=>function nd(D,g){return cu.apply(this,arguments)}(be,v));return M.localCache[v]=te,te})()}_remove(v){var M=this;return(0,b.A)(function*(){return M._withPendingWrite((0,b.A)(function*(){return yield M._withRetries(te=>Vc(te,v)),delete M.localCache[v],M.notifyServiceWorker(v)}))})()}_poll(){var v=this;return(0,b.A)(function*(){const M=yield v._withRetries(at=>{const Bt=Na(at,!1).getAll();return new ms(Bt).toPromise()});if(!M)return[];if(0!==v.pendingWrites)return[];const te=[],be=new Set;if(0!==M.length)for(const{fbase_key:at,value:Bt}of M)be.add(at),JSON.stringify(v.localCache[at])!==JSON.stringify(Bt)&&(v.notifyListeners(at,Bt),te.push(at));for(const at of Object.keys(v.localCache))v.localCache[at]&&!be.has(at)&&(v.notifyListeners(at,null),te.push(at));return te})()}notifyListeners(v,M){this.localCache[v]=M;const te=this.listeners[v];if(te)for(const be of Array.from(te))be(M)}startPolling(){var v=this;this.stopPolling(),this.pollTimer=setInterval((0,b.A)(function*(){return v._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(v,M){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[v]||(this.listeners[v]=new Set,this._get(v)),this.listeners[v].add(M)}_removeListener(v,M){this.listeners[v]&&(this.listeners[v].delete(M),0===this.listeners[v].size&&delete this.listeners[v]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return D.type="LOCAL",D})(),pr=1e12;class li{constructor(g){this.auth=g,this.counter=pr,this._widgets=new Map}render(g,v){const M=this.counter;return this._widgets.set(M,new pi(g,this.auth.name,v||{})),this.counter++,M}reset(g){var v;const M=g||pr;null===(v=this._widgets.get(M))||void 0===v||v.delete(),this._widgets.delete(M)}getResponse(g){var v;return(null===(v=this._widgets.get(g||pr))||void 0===v?void 0:v.getResponse())||""}execute(g){var v=this;return(0,b.A)(function*(){var M;return null===(M=v._widgets.get(g||pr))||void 0===M||M.execute(),""})()}}class pi{constructor(g,v,M){this.params=M,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const te="string"==typeof g?document.getElementById(g):g;ve(te,"argument-error",{appName:v}),this.container=te,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Yi(D){const g=[],v="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let M=0;M<D;M++)g.push(v.charAt(Math.floor(62*Math.random())));return g.join("")}(50);const{callback:g,"expired-callback":v}=this.params;if(g)try{g(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,v)try{v()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Sl=gr("rcb"),Gl=new Ye(3e4,6e4);class ql{constructor(){var g;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(g=Ds().grecaptcha)||void 0===g||!g.render)}load(g,v=""){return ve(function lu(D){return D.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(D)}(v),g,"argument-error"),this.shouldResolveImmediately(v)&&$n(Ds().grecaptcha)?Promise.resolve(Ds().grecaptcha):new Promise((M,te)=>{const be=Ds().setTimeout(()=>{te(Qe(g,"network-request-failed"))},Gl.get());Ds()[Sl]=()=>{Ds().clearTimeout(be),delete Ds()[Sl];const Bt=Ds().grecaptcha;if(!Bt||!$n(Bt))return void te(Qe(g,"internal-error"));const vn=Bt.render;Bt.render=(Tr,Mr)=>{const br=vn(Tr,Mr);return this.counter++,br},this.hostLanguage=v,M(Bt)},wr(`${function yn(){return Bn.recaptchaV2Script}()}?${(0,H.Am)({onload:Sl,render:"explicit",hl:v})}`).catch(()=>{clearTimeout(be),te(Qe(g,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(g){var v;return!(null===(v=Ds().grecaptcha)||void 0===v||!v.render)&&(g===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class qa{load(g){return(0,b.A)(function*(){return new li(g)})()}clearedOneInstance(){}}const Wd="recaptcha",Id={theme:"light",type:"image"};class zd{constructor(g,v,M=Object.assign({},Id)){this.parameters=M,this.type=Wd,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=jt(g),this.isInvisible="invisible"===this.parameters.size,ve(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const te="string"==typeof v?document.getElementById(v):v;ve(te,this.auth,"argument-error"),this.container=te,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new qa:new ql,this.validateStartingState()}verify(){var g=this;return(0,b.A)(function*(){g.assertNotDestroyed();const v=yield g.render(),M=g.getAssertedRecaptcha();return M.getResponse(v)||new Promise(be=>{const at=Bt=>{Bt&&(g.tokenChangeListeners.delete(at),be(Bt))};g.tokenChangeListeners.add(at),g.isInvisible&&M.execute(v)})})()}render(){try{this.assertNotDestroyed()}catch(g){return Promise.reject(g)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(g=>{throw this.renderPromise=null,g})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(g=>{this.container.removeChild(g)})}validateStartingState(){ve(!this.parameters.sitekey,this.auth,"argument-error"),ve(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ve(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(g){return v=>{if(this.tokenChangeListeners.forEach(M=>M(v)),"function"==typeof g)g(v);else if("string"==typeof g){const M=Ds()[g];"function"==typeof M&&M(v)}}}assertNotDestroyed(){ve(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var g=this;return(0,b.A)(function*(){if(yield g.init(),!g.widgetId){let v=g.container;if(!g.isInvisible){const M=document.createElement("div");v.appendChild(M),v=M}g.widgetId=g.getAssertedRecaptcha().render(v,g.parameters)}return g.widgetId})()}init(){var g=this;return(0,b.A)(function*(){ve(Yt()&&!ba(),g.auth,"internal-error"),yield function xu(){let D=null;return new Promise(g=>{"complete"!==document.readyState?(D=()=>g(),window.addEventListener("load",D)):g()}).catch(g=>{throw D&&window.removeEventListener("load",D),g})}(),g.recaptcha=yield g._recaptchaLoader.load(g.auth,g.auth.languageCode||void 0);const v=yield function st(D){return De.apply(this,arguments)}(g.auth);ve(v,g.auth,"internal-error"),g.parameters.sitekey=v})()}getAssertedRecaptcha(){return ve(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class uu{constructor(g,v){this.verificationId=g,this.onConfirmation=v}confirm(g){const v=fi._fromVerification(this.verificationId,g);return this.onConfirmation(v)}}function Uc(){return(Uc=(0,b.A)(function*(D,g,v){if((0,q._isFirebaseServerApp)(D.app))return Promise.reject(Ze(D));const M=jt(D),te=yield du(M,g,(0,H.Ku)(v));return new uu(te,be=>co(M,be))})).apply(this,arguments)}function Ql(){return(Ql=(0,b.A)(function*(D,g,v){const M=(0,H.Ku)(D);yield Yo(!1,M,"phone");const te=yield du(M.auth,g,(0,H.Ku)(v));return new uu(te,be=>ma(M,be))})).apply(this,arguments)}function ia(){return(ia=(0,b.A)(function*(D,g,v){const M=(0,H.Ku)(D);if((0,q._isFirebaseServerApp)(M.auth.app))return Promise.reject(Ze(M.auth));const te=yield du(M.auth,g,(0,H.Ku)(v));return new uu(te,be=>yo(M,be))})).apply(this,arguments)}function du(D,g,v){return hu.apply(this,arguments)}function hu(){return hu=(0,b.A)(function*(D,g,v){var M;const te=yield v.verify();try{let be;if(ve("string"==typeof te,D,"argument-error"),ve(v.type===Wd,D,"argument-error"),be="string"==typeof g?{phoneNumber:g}:g,"session"in be){const at=be.session;if("phoneNumber"in be)return ve("enroll"===at.type,D,"internal-error"),(yield function bo(D,g){return Ct(D,"POST","/v2/accounts/mfaEnrollment:start",ft(D,g))}(D,{idToken:at.credential,phoneEnrollmentInfo:{phoneNumber:be.phoneNumber,recaptchaToken:te}})).phoneSessionInfo.sessionInfo;{ve("signin"===at.type,D,"internal-error");const Bt=(null===(M=be.multiFactorHint)||void 0===M?void 0:M.uid)||be.multiFactorUid;return ve(Bt,D,"missing-multi-factor-info"),(yield function ae(D,g){return Ct(D,"POST","/v2/accounts/mfaSignIn:start",ft(D,g))}(D,{mfaPendingCredential:at.credential,mfaEnrollmentId:Bt,phoneSignInInfo:{recaptchaToken:te}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:at}=yield function ha(D,g){return Fi.apply(this,arguments)}(D,{phoneNumber:be.phoneNumber,recaptchaToken:te});return at}}finally{v._reset()}}),hu.apply(this,arguments)}function Wo(){return(Wo=(0,b.A)(function*(D,g){const v=(0,H.Ku)(D);if((0,q._isFirebaseServerApp)(v.auth.app))return Promise.reject(Ze(v.auth));yield Pc(v,g)})).apply(this,arguments)}let fc=(()=>{class D{constructor(v){this.providerId=D.PROVIDER_ID,this.auth=jt(v)}verifyPhoneNumber(v,M){return du(this.auth,v,(0,H.Ku)(M))}static credential(v,M){return fi._fromVerification(v,M)}static credentialFromResult(v){return D.credentialFromTaggedObject(v)}static credentialFromError(v){return D.credentialFromTaggedObject(v.customData||{})}static credentialFromTaggedObject({_tokenResponse:v}){if(!v)return null;const{phoneNumber:M,temporaryProof:te}=v;return M&&te?fi._fromTokenResponse(M,te):null}}return D.PROVIDER_ID="phone",D.PHONE_SIGN_IN_METHOD="phone",D})();function Ai(D,g){return g?Yn(g):(ve(D._popupRedirectResolver,D,"argument-error"),D._popupRedirectResolver)}class cl extends he{constructor(g){super("custom","custom"),this.params=g}_getIdTokenResponse(g){return Ii(g,this._buildIdpRequest())}_linkToIdToken(g,v){return Ii(g,this._buildIdpRequest(v))}_getReauthenticationResolver(g){return Ii(g,this._buildIdpRequest())}_buildIdpRequest(g){const v={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return g&&(v.idToken=g),v}}function fu(D){return Qi(D.auth,new cl(D),D.bypassAuthState)}function gs(D){const{auth:g,user:v}=D;return ve(v,g,"internal-error"),Tl(v,new cl(D),D.bypassAuthState)}function ku(D){return ll.apply(this,arguments)}function ll(){return(ll=(0,b.A)(function*(D){const{auth:g,user:v}=D;return ve(v,g,"internal-error"),Pc(v,new cl(D),D.bypassAuthState)})).apply(this,arguments)}class Ya{constructor(g,v,M,te,be=!1){this.auth=g,this.resolver=M,this.user=te,this.bypassAuthState=be,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(v)?v:[v]}execute(){var g=this;return new Promise(function(){var v=(0,b.A)(function*(M,te){g.pendingPromise={resolve:M,reject:te};try{g.eventManager=yield g.resolver._initialize(g.auth),yield g.onExecution(),g.eventManager.registerConsumer(g)}catch(be){g.reject(be)}});return function(M,te){return v.apply(this,arguments)}}())}onAuthEvent(g){var v=this;return(0,b.A)(function*(){const{urlResponse:M,sessionId:te,postBody:be,tenantId:at,error:Bt,type:vn}=g;if(Bt)return void v.reject(Bt);const Tr={auth:v.auth,requestUri:M,sessionId:te,tenantId:at||void 0,postBody:be||void 0,user:v.user,bypassAuthState:v.bypassAuthState};try{v.resolve(yield v.getIdpTask(vn)(Tr))}catch(Mr){v.reject(Mr)}})()}onError(g){this.reject(g)}getIdpTask(g){switch(g){case"signInViaPopup":case"signInViaRedirect":return fu;case"linkViaPopup":case"linkViaRedirect":return ku;case"reauthViaPopup":case"reauthViaRedirect":return gs;default:Ke(this.auth,"internal-error")}}resolve(g){Jt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(g),this.unregisterAndCleanUp()}reject(g){Jt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(g),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Ia=new Ye(2e3,1e4);function pc(){return(pc=(0,b.A)(function*(D,g,v){if((0,q._isFirebaseServerApp)(D.app))return Promise.reject(Qe(D,"operation-not-supported-in-this-environment"));const M=jt(D);Ge(D,g,ns);const te=Ai(M,v);return new Yl(M,"signInViaPopup",g,te).executeNotNull()})).apply(this,arguments)}function sa(){return(sa=(0,b.A)(function*(D,g,v){const M=(0,H.Ku)(D);if((0,q._isFirebaseServerApp)(M.auth.app))return Promise.reject(Qe(M.auth,"operation-not-supported-in-this-environment"));Ge(M.auth,g,ns);const te=Ai(M.auth,v);return new Yl(M.auth,"reauthViaPopup",g,te,M).executeNotNull()})).apply(this,arguments)}function mu(){return(mu=(0,b.A)(function*(D,g,v){const M=(0,H.Ku)(D);Ge(M.auth,g,ns);const te=Ai(M.auth,v);return new Yl(M.auth,"linkViaPopup",g,te,M).executeNotNull()})).apply(this,arguments)}let Yl=(()=>{class D extends Ya{constructor(v,M,te,be,at){super(v,M,be,at),this.provider=te,this.authWindow=null,this.pollId=null,D.currentPopupAction&&D.currentPopupAction.cancel(),D.currentPopupAction=this}executeNotNull(){var v=this;return(0,b.A)(function*(){const M=yield v.execute();return ve(M,v.auth,"internal-error"),M})()}onExecution(){var v=this;return(0,b.A)(function*(){Jt(1===v.filter.length,"Popup operations only handle one event");const M=zr();v.authWindow=yield v.resolver._openPopup(v.auth,v.provider,v.filter[0],M),v.authWindow.associatedEvent=M,v.resolver._originValidation(v.auth).catch(te=>{v.reject(te)}),v.resolver._isIframeWebStorageSupported(v.auth,te=>{te||v.reject(Qe(v.auth,"web-storage-unsupported"))}),v.pollUserCancellation()})()}get eventId(){var v;return(null===(v=this.authWindow)||void 0===v?void 0:v.associatedEvent)||null}cancel(){this.reject(Qe(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,D.currentPopupAction=null}pollUserCancellation(){const v=()=>{var M,te;this.pollId=null!==(te=null===(M=this.authWindow)||void 0===M?void 0:M.window)&&void 0!==te&&te.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Qe(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(v,Ia.get())};v()}}return D.currentPopupAction=null,D})();const Ta="pendingRedirect",oa=new Map;class gc extends Ya{constructor(g,v,M=!1){super(g,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],v,void 0,M),this.eventId=null}execute(){var g=()=>super.execute,v=this;return(0,b.A)(function*(){let M=oa.get(v.auth._key());if(!M){try{const be=(yield function Io(D,g){return Rl.apply(this,arguments)}(v.resolver,v.auth))?yield g().call(v):null;M=()=>Promise.resolve(be)}catch(te){M=()=>Promise.reject(te)}oa.set(v.auth._key(),M)}return v.bypassAuthState||oa.set(v.auth._key(),()=>Promise.resolve(null)),M()})()}onAuthEvent(g){var v=()=>super.onAuthEvent,M=this;return(0,b.A)(function*(){if("signInViaRedirect"===g.type)return v().call(M,g);if("unknown"!==g.type){if(g.eventId){const te=yield M.auth._redirectUserForId(g.eventId);if(te)return M.user=te,v().call(M,g);M.resolve(null)}}else M.resolve(null)})()}onExecution(){return(0,b.A)(function*(){})()}cleanUp(){}}function Rl(){return(Rl=(0,b.A)(function*(D,g){const v=Bc(g),M=Xl(D);if(!(yield M._isAvailable()))return!1;const te="true"===(yield M._get(v));return yield M._remove(v),te})).apply(this,arguments)}function Rs(D,g){return ei.apply(this,arguments)}function ei(){return(ei=(0,b.A)(function*(D,g){return Xl(D)._set(Bc(g),"true")})).apply(this,arguments)}function lo(D,g){oa.set(D._key(),g)}function Xl(D){return Yn(D._redirectPersistence)}function Bc(D){return Lr(Ta,D.config.apiKey,D.name)}function dl(D,g,v){return function Fu(D,g,v){return Aa.apply(this,arguments)}(D,g,v)}function Aa(){return(Aa=(0,b.A)(function*(D,g,v){if((0,q._isFirebaseServerApp)(D.app))return Promise.reject(Ze(D));const M=jt(D);Ge(D,g,ns),yield M._initializationPromise;const te=Ai(M,v);return yield Rs(te,M),te._openRedirect(M,g,"signInViaRedirect")})).apply(this,arguments)}function Pl(D,g,v){return function jc(D,g,v){return hl.apply(this,arguments)}(D,g,v)}function hl(){return(hl=(0,b.A)(function*(D,g,v){const M=(0,H.Ku)(D);if(Ge(M.auth,g,ns),(0,q._isFirebaseServerApp)(M.auth.app))return Promise.reject(Ze(M.auth));yield M.auth._initializationPromise;const te=Ai(M.auth,v);yield Rs(te,M.auth);const be=yield fl(M);return te._openRedirect(M.auth,g,"reauthViaRedirect",be)})).apply(this,arguments)}function Ml(D,g,v){return function id(D,g,v){return En.apply(this,arguments)}(D,g,v)}function En(){return(En=(0,b.A)(function*(D,g,v){const M=(0,H.Ku)(D);Ge(M.auth,g,ns),yield M.auth._initializationPromise;const te=Ai(M.auth,v);yield Yo(!1,M,g.providerId),yield Rs(te,M.auth);const be=yield fl(M);return te._openRedirect(M.auth,g,"linkViaRedirect",be)})).apply(this,arguments)}function ka(){return(ka=(0,b.A)(function*(D,g){return yield jt(D)._initializationPromise,_c(D,g,!1)})).apply(this,arguments)}function _c(D,g){return Hi.apply(this,arguments)}function Hi(){return(Hi=(0,b.A)(function*(D,g,v=!1){if((0,q._isFirebaseServerApp)(D.app))return Promise.reject(Ze(D));const M=jt(D),te=Ai(M,g),at=yield new gc(M,te,v).execute();return at&&!v&&(delete at.user._redirectEventId,yield M._persistUserIfCurrent(at.user),yield M._setRedirectUser(null,g)),at})).apply(this,arguments)}function fl(D){return Ol.apply(this,arguments)}function Ol(){return(Ol=(0,b.A)(function*(D){const g=zr(`${D.uid}:::`);return D._redirectEventId=g,yield D.auth._setRedirectUser(D),yield D.auth._persistUserIfCurrent(D),g})).apply(this,arguments)}class gu{constructor(g){this.auth=g,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(g){this.consumers.add(g),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,g)&&(this.sendToConsumer(this.queuedRedirectEvent,g),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(g){this.consumers.delete(g)}onEvent(g){if(this.hasEventBeenHandled(g))return!1;let v=!1;return this.consumers.forEach(M=>{this.isEventForConsumer(g,M)&&(v=!0,this.sendToConsumer(g,M),this.saveEventToCache(g))}),this.hasHandledPotentialRedirect||!function Vu(D){switch(D.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return lh(D);default:return!1}}(g)||(this.hasHandledPotentialRedirect=!0,v||(this.queuedRedirectEvent=g,v=!0)),v}sendToConsumer(g,v){var M;if(g.error&&!lh(g)){const te=(null===(M=g.error.code)||void 0===M?void 0:M.split("auth/")[1])||"internal-error";v.onError(Qe(this.auth,te))}else v.onAuthEvent(g)}isEventForConsumer(g,v){const M=null===v.eventId||!!g.eventId&&g.eventId===v.eventId;return v.filter.includes(g.type)&&M}hasEventBeenHandled(g){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(_u(g))}saveEventToCache(g){this.cachedEventUids.add(_u(g)),this.lastProcessedEventTime=Date.now()}}function _u(D){return[D.type,D.eventId,D.sessionId,D.tenantId].filter(g=>g).join("-")}function lh({type:D,error:g}){return"unknown"===D&&"auth/no-auth-event"===g?.code}function $c(D){return as.apply(this,arguments)}function as(){return(as=(0,b.A)(function*(D,g={}){return Ct(D,"GET","/v1/projects",g)})).apply(this,arguments)}const yc=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,yu=/^https?/;function pl(){return(pl=(0,b.A)(function*(D){if(D.config.emulator)return;const{authorizedDomains:g}=yield $c(D);for(const v of g)try{if(uh(v))return}catch{}Ke(D,"unauthorized-domain")})).apply(this,arguments)}function uh(D){const g=Nt(),{protocol:v,hostname:M}=new URL(g);if(D.startsWith("chrome-extension://")){const at=new URL(D);return""===at.hostname&&""===M?"chrome-extension:"===v&&D.replace("chrome-extension://","")===g.replace("chrome-extension://",""):"chrome-extension:"===v&&at.hostname===M}if(!yu.test(v))return!1;if(yc.test(D))return M===D;const te=D.replace(/\./g,"\\.");return new RegExp("^(.+\\."+te+"|"+te+")$","i").test(M)}const sd=new Ye(3e4,6e4);function Hd(){const D=Ds().___jsl;if(D?.H)for(const g of Object.keys(D.H))if(D.H[g].r=D.H[g].r||[],D.H[g].L=D.H[g].L||[],D.H[g].r=[...D.H[g].L],D.CP)for(let v=0;v<D.CP.length;v++)D.CP[v]=null}let od=null;const Td=new Ye(5e3,15e3),ad="__/auth/iframe",Uu="emulator/auth/iframe",Eu={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Wc=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Bu(D){const g=D.config;ve(g.authDomain,D,"auth-domain-config-required");const v=g.emulator?Ht(g,Uu):`https://${D.config.authDomain}/${ad}`,M={apiKey:g.apiKey,appName:D.name,v:q.SDK_VERSION},te=Wc.get(D.config.apiHost);te&&(M.eid=te);const be=D._getFrameworks();return be.length&&(M.fw=be.join(",")),`${v}?${(0,H.Am)(M).slice(1)}`}function bu(){return bu=(0,b.A)(function*(D){const g=yield function vu(D){return od=od||function ks(D){return new Promise((g,v)=>{var M,te,be;function at(){Hd(),gapi.load("gapi.iframes",{callback:()=>{g(gapi.iframes.getContext())},ontimeout:()=>{Hd(),v(Qe(D,"network-request-failed"))},timeout:sd.get()})}if(null!==(te=null===(M=Ds().gapi)||void 0===M?void 0:M.iframes)&&void 0!==te&&te.Iframe)g(gapi.iframes.getContext());else{if(null===(be=Ds().gapi)||void 0===be||!be.load){const Bt=gr("iframefcb");return Ds()[Bt]=()=>{gapi.load?at():v(Qe(D,"network-request-failed"))},wr(`${function or(){return Bn.gapiScript}()}?onload=${Bt}`).catch(vn=>v(vn))}at()}}).catch(g=>{throw od=null,g})}(D),od}(D),v=Ds().gapi;return ve(v,D,"internal-error"),g.open({where:document.body,url:Bu(D),messageHandlersFilter:v.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Eu,dontclear:!0},M=>new Promise(function(){var te=(0,b.A)(function*(be,at){yield M.restyle({setHideOnLeave:!1});const Bt=Qe(D,"network-request-failed"),vn=Ds().setTimeout(()=>{at(Bt)},Td.get());function Tr(){Ds().clearTimeout(vn),be(M)}M.ping(Tr).then(Tr,()=>{at(Bt)})});return function(be,at){return te.apply(this,arguments)}}()))}),bu.apply(this,arguments)}const ju={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class cs{constructor(g){this.window=g,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const ml="__/auth/handler",Hc="emulator/auth/handler",xl=encodeURIComponent("fac");function Xs(D,g,v,M,te,be){return Xa.apply(this,arguments)}function Xa(){return(Xa=(0,b.A)(function*(D,g,v,M,te,be){ve(D.config.authDomain,D,"auth-domain-config-required"),ve(D.config.apiKey,D,"invalid-api-key");const at={apiKey:D.config.apiKey,appName:D.name,authType:v,redirectUrl:M,v:q.SDK_VERSION,eventId:te};if(g instanceof ns){g.setDefaultLanguage(D.languageCode),at.providerId=g.providerId||"",(0,H.Im)(g.getCustomParameters())||(at.customParameters=JSON.stringify(g.getCustomParameters()));for(const[Mr,br]of Object.entries(be||{}))at[Mr]=br}if(g instanceof ja){const Mr=g.getScopes().filter(br=>""!==br);Mr.length>0&&(at.scopes=Mr.join(","))}D.tenantId&&(at.tid=D.tenantId);const Bt=at;for(const Mr of Object.keys(Bt))void 0===Bt[Mr]&&delete Bt[Mr];const vn=yield D._getAppCheckToken(),Tr=vn?`#${xl}=${encodeURIComponent(vn)}`:"";return`${function Fa({config:D}){return D.emulator?Ht(D,Hc):`https://${D.authDomain}/${ml}`}(D)}?${(0,H.Am)(Bt).slice(1)}${Tr}`})).apply(this,arguments)}const Kd="webStorageSupport",ud=class Kc{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Oo,this._completeRedirectFn=_c,this._overrideRedirectResult=lo}_openPopup(g,v,M,te){var be=this;return(0,b.A)(function*(){var at;Jt(null===(at=be.eventManagers[g._key()])||void 0===at?void 0:at.manager,"_initialize() not called before _openPopup()");const Bt=yield Xs(g,v,M,Nt(),te);return function dh(D,g,v,M=500,te=600){const be=Math.max((window.screen.availHeight-te)/2,0).toString(),at=Math.max((window.screen.availWidth-M)/2,0).toString();let Bt="";const vn=Object.assign(Object.assign({},ju),{width:M.toString(),height:te.toString(),top:be,left:at}),Tr=(0,H.ZQ)().toLowerCase();v&&(Bt=Ks(Tr)?"_blank":v),rs(Tr)&&(g=g||"http://localhost",vn.scrollbars="yes");const Mr=Object.entries(vn).reduce((Zi,[Ic,No])=>`${Zi}${Ic}=${No},`,"");if(function fo(D=(0,H.ZQ)()){var g;return $s(D)&&!(null===(g=window.navigator)||void 0===g||!g.standalone)}(Tr)&&"_self"!==Bt)return function wa(D,g){const v=document.createElement("a");v.href=D,v.target=g;const M=document.createEvent("MouseEvent");M.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),v.dispatchEvent(M)}(g||"",Bt),new cs(null);const br=window.open(g||"",Bt,Mr);ve(br,D,"popup-blocked");try{br.focus()}catch{}return new cs(br)}(g,Bt,zr())})()}_openRedirect(g,v,M,te){var be=this;return(0,b.A)(function*(){return yield be._originValidation(g),function ra(D){Ds().location.href=D}(yield Xs(g,v,M,Nt(),te)),new Promise(()=>{})})()}_initialize(g){const v=g._key();if(this.eventManagers[v]){const{manager:te,promise:be}=this.eventManagers[v];return te?Promise.resolve(te):(Jt(be,"If manager is not set, promise should be"),be)}const M=this.initAndGetManager(g);return this.eventManagers[v]={promise:M},M.catch(()=>{delete this.eventManagers[v]}),M}initAndGetManager(g){var v=this;return(0,b.A)(function*(){const M=yield function cd(D){return bu.apply(this,arguments)}(g),te=new gu(g);return M.register("authEvent",be=>(ve(be?.authEvent,g,"invalid-auth-event"),{status:te.onEvent(be.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),v.eventManagers[g._key()]={manager:te},v.iframes[g._key()]=M,te})()}_isIframeWebStorageSupported(g,v){this.iframes[g._key()].send(Kd,{type:Kd},te=>{var be;const at=null===(be=te?.[0])||void 0===be?void 0:be[Kd];void 0!==at&&v(!!at),Ke(g,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(g){const v=g._key();return this.originValidationPromises[v]||(this.originValidationPromises[v]=function Ys(D){return pl.apply(this,arguments)}(g)),this.originValidationPromises[v]}get _shouldInitProactively(){return _s()||Ms()||$s()}};class Za{constructor(g){this.factorId=g}_process(g,v,M){switch(v.type){case"enroll":return this._finalizeEnroll(g,v.credential,M);case"signin":return this._finalizeSignIn(g,v.credential);default:return At("unexpected MultiFactorSessionType")}}}class Nl extends Za{constructor(g){super("phone"),this.credential=g}static _fromCredential(g){return new Nl(g)}_finalizeEnroll(g,v,M){return function wl(D,g){return Ct(D,"POST","/v2/accounts/mfaEnrollment:finalize",ft(D,g))}(g,{idToken:v,displayName:M,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(g,v){return function Ce(D,g){return Ct(D,"POST","/v2/accounts/mfaSignIn:finalize",ft(D,g))}(g,{mfaPendingCredential:v,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Zl=(()=>{class D{constructor(){}static assertion(v){return Nl._fromCredential(v)}}return D.FACTOR_ID="phone",D})();var Tu="@firebase/auth";class Au{constructor(g){this.auth=g,this.internalListeners=new Map}getUid(){var g;return this.assertAuthConfigured(),(null===(g=this.auth.currentUser)||void 0===g?void 0:g.uid)||null}getToken(g){var v=this;return(0,b.A)(function*(){return v.assertAuthConfigured(),yield v.auth._initializationPromise,v.auth.currentUser?{accessToken:yield v.auth.currentUser.getIdToken(g)}:null})()}addAuthTokenListener(g){if(this.assertAuthConfigured(),this.internalListeners.has(g))return;const v=this.auth.onIdTokenChanged(M=>{g(M?.stsTokenManager.accessToken||null)});this.internalListeners.set(g,v),this.updateProactiveRefresh()}removeAuthTokenListener(g){this.assertAuthConfigured();const v=this.internalListeners.get(g);v&&(this.internalListeners.delete(g),v(),this.updateProactiveRefresh())}assertAuthConfigured(){ve(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function E(){return window}(0,H.XA)("authIdTokenMaxAge"),function ti(D){Bn=D}({loadJS:D=>new Promise((g,v)=>{const M=document.createElement("script");M.setAttribute("src",D),M.onload=g,M.onerror=te=>{const be=Qe("internal-error");be.customData=te,v(be)},M.type="text/javascript",M.charset="UTF-8",function N(){var D,g;return null!==(g=null===(D=document.getElementsByTagName("head"))||void 0===D?void 0:D[0])&&void 0!==g?g:document}().appendChild(M)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),function xh(D){(0,q._registerComponent)(new Le.uA("auth",(g,{options:v})=>{const M=g.getProvider("app").getImmediate(),te=g.getProvider("heartbeat"),be=g.getProvider("app-check-internal"),{apiKey:at,authDomain:Bt}=M.options;ve(at&&!at.includes(":"),"invalid-api-key",{appName:M.name});const vn={apiKey:at,authDomain:Bt,clientPlatform:D,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ts(D)},Tr=new Sn(M,te,be,vn);return function bt(D,g){const v=g?.persistence||[],M=(Array.isArray(v)?v:[v]).map(Yn);g?.errorMap&&D._updateErrorMap(g.errorMap),D._initializeWithPersistence(M,g?.popupRedirectResolver)}(Tr,v),Tr},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((g,v,M)=>{g.getProvider("auth-internal").initialize()})),(0,q._registerComponent)(new Le.uA("auth-internal",g=>{const v=jt(g.getProvider("auth").getImmediate());return new Au(v)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,q.registerVersion)(Tu,"1.7.9",function dd(D){switch(D){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(D)),(0,q.registerVersion)(Tu,"1.7.9","esm2017")}("Browser");function de(){return de=(0,b.A)(function*(D,g,v){var M;const{BuildInfo:te}=E();Jt(g.sessionId,"AuthEvent did not contain a session ID");const be=yield function ui(D){return Xi.apply(this,arguments)}(g.sessionId),at={};return $s()?at.ibi=te.packageName:Os()?at.apn=te.packageName:Ke(D,"operation-not-supported-in-this-environment"),te.displayName&&(at.appDisplayName=te.displayName),at.sessionId=be,Xs(D,v,g.type,void 0,null!==(M=g.eventId)&&void 0!==M?M:void 0,at)}),de.apply(this,arguments)}function It(){return(It=(0,b.A)(function*(D){const{BuildInfo:g}=E(),v={};$s()?v.iosBundleId=g.packageName:Os()?v.androidPackageName=g.packageName:Ke(D,"operation-not-supported-in-this-environment"),yield $c(D,v)})).apply(this,arguments)}function Dr(){return(Dr=(0,b.A)(function*(D,g,v){const{cordova:M}=E();let te=()=>{};try{yield new Promise((be,at)=>{let Bt=null;function vn(){var br;be();const Zi=null===(br=M.plugins.browsertab)||void 0===br?void 0:br.close;"function"==typeof Zi&&Zi(),"function"==typeof v?.close&&v.close()}function Tr(){Bt||(Bt=window.setTimeout(()=>{at(Qe(D,"redirect-cancelled-by-user"))},2e3))}function Mr(){"visible"===document?.visibilityState&&Tr()}g.addPassiveListener(vn),document.addEventListener("resume",Tr,!1),Os()&&document.addEventListener("visibilitychange",Mr,!1),te=()=>{g.removePassiveListener(vn),document.removeEventListener("resume",Tr,!1),document.removeEventListener("visibilitychange",Mr,!1),Bt&&window.clearTimeout(Bt)}})}finally{te()}})).apply(this,arguments)}function Xi(){return(Xi=(0,b.A)(function*(D){const g=function Ls(D){if(Jt(/[0-9a-zA-Z]+/.test(D),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(D);const g=new ArrayBuffer(D.length),v=new Uint8Array(g);for(let M=0;M<D.length;M++)v[M]=D.charCodeAt(M);return v}(D),v=yield crypto.subtle.digest("SHA-256",g);return Array.from(new Uint8Array(v)).map(te=>te.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class ec extends gu{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(g=>{this.resolveInitialized=g})}addPassiveListener(g){this.passiveListeners.add(g)}removePassiveListener(g){this.passiveListeners.delete(g)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(g){return this.resolveInitialized(),this.passiveListeners.forEach(v=>v(g)),super.onEvent(g)}initialized(){var g=this;return(0,b.A)(function*(){yield g.initPromise})()}}function wd(D){return Su.apply(this,arguments)}function Su(){return(Su=(0,b.A)(function*(D){const g=yield Ec()._get(Du(D));return g&&(yield Ec()._remove(Du(D))),g})).apply(this,arguments)}function tu(){const D=[];for(let v=0;v<20;v++){const M=Math.floor(62*Math.random());D.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(M))}return D.join("")}function Ec(){return Yn(bs)}function Du(D){return Lr("authEvent",D.config.apiKey,D.name)}function tc(D){if(!D?.includes("?"))return{};const[g,...v]=D.split("?");return(0,H.I9)(v.join("?"))}const kh=class $u{constructor(){this._redirectPersistence=Oo,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=_c,this._overrideRedirectResult=lo}_initialize(g){var v=this;return(0,b.A)(function*(){const M=g._key();let te=v.eventManagers.get(M);return te||(te=new ec(g),v.eventManagers.set(M,te),v.attachCallbackListeners(g,te)),te})()}_openPopup(g){Ke(g,"operation-not-supported-in-this-environment")}_openRedirect(g,v,M,te){var be=this;return(0,b.A)(function*(){!function Vr(D){var g,v,M,te,be,at,Bt,vn,Tr,Mr;const br=E();ve("function"==typeof(null===(g=br?.universalLinks)||void 0===g?void 0:g.subscribe),D,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),ve(typeof(null===(v=br?.BuildInfo)||void 0===v?void 0:v.packageName)<"u",D,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),ve("function"==typeof(null===(be=null===(te=null===(M=br?.cordova)||void 0===M?void 0:M.plugins)||void 0===te?void 0:te.browsertab)||void 0===be?void 0:be.openUrl),D,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ve("function"==typeof(null===(vn=null===(Bt=null===(at=br?.cordova)||void 0===at?void 0:at.plugins)||void 0===Bt?void 0:Bt.browsertab)||void 0===vn?void 0:vn.isAvailable),D,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ve("function"==typeof(null===(Mr=null===(Tr=br?.cordova)||void 0===Tr?void 0:Tr.InAppBrowser)||void 0===Mr?void 0:Mr.open),D,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(g);const at=yield be._initialize(g);yield at.initialized(),at.resetRedirect(),function Lu(){oa.clear()}(),yield be._originValidation(g);const Bt=function Cu(D,g,v=null){return{type:g,eventId:v,urlResponse:null,sessionId:tu(),postBody:null,tenantId:D.tenantId,error:Qe(D,"no-auth-event")}}(g,M,te);yield function Gd(D,g){return Ec()._set(Du(D),g)}(g,Bt);const vn=yield function B(D,g,v){return de.apply(this,arguments)}(g,Bt,v),Tr=yield function qt(D){const{cordova:g}=E();return new Promise(v=>{g.plugins.browsertab.isAvailable(M=>{let te=null;M?g.plugins.browsertab.openUrl(D):te=g.InAppBrowser.open(D,function so(D=(0,H.ZQ)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(D)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(D)}()?"_blank":"_system","location=yes"),v(te)})})}(vn);return function Fn(D,g,v){return Dr.apply(this,arguments)}(g,at,Tr)})()}_isIframeWebStorageSupported(g,v){throw new Error("Method not implemented.")}_originValidation(g){const v=g._key();return this.originValidationPromises[v]||(this.originValidationPromises[v]=function Se(D){return It.apply(this,arguments)}(g)),this.originValidationPromises[v]}attachCallbackListeners(g,v){const{universalLinks:M,handleOpenURL:te,BuildInfo:be}=E(),at=setTimeout((0,b.A)(function*(){yield wd(g),v.onEvent(Cd())}),500),Bt=function(){var Mr=(0,b.A)(function*(br){clearTimeout(at);const Zi=yield wd(g);let Ic=null;Zi&&br?.url&&(Ic=function hd(D,g){var v,M;const te=function bc(D){const g=tc(D),v=g.link?decodeURIComponent(g.link):void 0,M=tc(v).link,te=g.deep_link_id?decodeURIComponent(g.deep_link_id):void 0;return tc(te).link||te||M||v||D}(g);if(te.includes("/__/auth/callback")){const be=tc(te),at=be.firebaseError?function _l(D){try{return JSON.parse(D)}catch{return null}}(decodeURIComponent(be.firebaseError)):null,Bt=null===(M=null===(v=at?.code)||void 0===v?void 0:v.split("auth/"))||void 0===M?void 0:M[1],vn=Bt?Qe(Bt):null;return vn?{type:D.type,eventId:D.eventId,tenantId:D.tenantId,error:vn,urlResponse:null,sessionId:null,postBody:null}:{type:D.type,eventId:D.eventId,tenantId:D.tenantId,sessionId:D.sessionId,urlResponse:te,postBody:null}}return null}(Zi,br.url)),v.onEvent(Ic||Cd())});return function(Zi){return Mr.apply(this,arguments)}}();typeof M<"u"&&"function"==typeof M.subscribe&&M.subscribe(null,Bt);const vn=te,Tr=`${be.packageName.toLowerCase()}://`;E().handleOpenURL=function(){var Mr=(0,b.A)(function*(br){if(br.toLowerCase().startsWith(Tr)&&Bt({url:br}),"function"==typeof vn)try{vn(br)}catch(Zi){console.error(Zi)}});return function(br){return Mr.apply(this,arguments)}}()}};function Cd(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Qe("no-auth-event")}}function Wu(){var D;return(null===(D=self?.location)||void 0===D?void 0:D.protocol)||null}function Ru(D=(0,H.ZQ)()){return!("file:"!==Wu()&&"ionic:"!==Wu()&&"capacitor:"!==Wu()||!D.toLowerCase().match(/iphone|ipad|ipod|android/))}function Qd(){try{const D=self.localStorage,g=zr();if(D)return D.setItem(g,"1"),D.removeItem(g),!function uf(D=(0,H.ZQ)()){return function fh(){return(0,H.lT)()&&11===document?.documentMode}()||function lf(D=(0,H.ZQ)()){return/Edge\/\d+/.test(D)}(D)}()||(0,H.zW)()}catch{return Hu()&&(0,H.zW)()}return!1}function Hu(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Dd(){return(function zu(){return"http:"===Wu()||"https:"===Wu()}()||(0,H.sr)()||Ru())&&!function cf(){return(0,H.lV)()||(0,H.Ll)()}()&&Qd()&&!Hu()}function Ku(){return Ru()&&typeof document<"u"}function Bf(){return(Bf=(0,b.A)(function*(){return!!Ku()&&new Promise(D=>{const g=setTimeout(()=>{D(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(g),D(!0)})})})).apply(this,arguments)}const y={LOCAL:"local",NONE:"none",SESSION:"session"},h=ve,f="persistence";function V(D){return Z.apply(this,arguments)}function Z(){return(Z=(0,b.A)(function*(D){yield D._initializationPromise;const g=Me(),v=Lr(f,D.config.apiKey,D.name);g&&g.setItem(v,D._getPersistence())})).apply(this,arguments)}function Me(){var D;try{return(null===(D=function jf(){return typeof window<"u"?window:null}())||void 0===D?void 0:D.sessionStorage)||null}catch{return null}}const Je=ve;class pt{constructor(){this.browserResolver=Yn(ud),this.cordovaResolver=Yn(kh),this.underlyingResolver=null,this._redirectPersistence=Oo,this._completeRedirectFn=_c,this._overrideRedirectResult=lo}_initialize(g){var v=this;return(0,b.A)(function*(){return yield v.selectUnderlyingResolver(),v.assertedUnderlyingResolver._initialize(g)})()}_openPopup(g,v,M,te){var be=this;return(0,b.A)(function*(){return yield be.selectUnderlyingResolver(),be.assertedUnderlyingResolver._openPopup(g,v,M,te)})()}_openRedirect(g,v,M,te){var be=this;return(0,b.A)(function*(){return yield be.selectUnderlyingResolver(),be.assertedUnderlyingResolver._openRedirect(g,v,M,te)})()}_isIframeWebStorageSupported(g,v){this.assertedUnderlyingResolver._isIframeWebStorageSupported(g,v)}_originValidation(g){return this.assertedUnderlyingResolver._originValidation(g)}get _shouldInitProactively(){return Ku()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Je(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var g=this;return(0,b.A)(function*(){if(g.underlyingResolver)return;const v=yield function df(){return Bf.apply(this,arguments)}();g.underlyingResolver=v?g.cordovaResolver:g.browserResolver})()}}function _n(D){return D.unwrap()}function Ln(D){return Hr(D)}function Hr(D){const{_tokenResponse:g}=D instanceof H.g?D.customData:D;if(!g)return null;if(!(D instanceof H.g)&&"temporaryProof"in g&&"phoneNumber"in g)return fc.credentialFromResult(D);const v=g.providerId;if(!v||v===Pe.PASSWORD)return null;let M;switch(v){case Pe.GOOGLE:M=Mi;break;case Pe.FACEBOOK:M=qs;break;case Pe.GITHUB:M=pa;break;case Pe.TWITTER:M=$a;break;default:const{oauthIdToken:te,oauthAccessToken:be,oauthTokenSecret:at,pendingToken:Bt,nonce:vn}=g;return be||at||te||Bt?Bt?v.startsWith("saml.")?go._create(v,Bt):ts._fromParams({providerId:v,signInMethod:v,pendingToken:Bt,idToken:te,accessToken:be}):new Sa(v).credential({idToken:te,accessToken:be,rawNonce:vn}):null}return D instanceof H.g?M.credentialFromError(D):M.credentialFromResult(D)}function di(D,g){return g.catch(v=>{throw v instanceof H.g&&function Ir(D,g){var v;const M=null===(v=g.customData)||void 0===v?void 0:v._tokenResponse;if("auth/multi-factor-auth-required"===g?.code)g.resolver=new Qc(D,function Bs(D,g){var v;const M=(0,H.Ku)(D),te=g;return ve(g.customData.operationType,M,"argument-error"),ve(null===(v=te.customData._serverResponse)||void 0===v?void 0:v.mfaPendingCredential,M,"argument-error"),Us._fromError(M,te)}(D,g));else if(M){const te=Hr(g),be=g;te&&(be.credential=te,be.tenantId=M.tenantId||void 0,be.email=M.email||void 0,be.phoneNumber=M.phoneNumber||void 0)}}(D,v),v}).then(v=>{const te=v.user;return{operationType:v.operationType,credential:Ln(v),additionalUserInfo:cn(v),user:ho.getOrCreate(te)}})}function To(D,g){return aa.apply(this,arguments)}function aa(){return(aa=(0,b.A)(function*(D,g){const v=yield g;return{verificationId:v.verificationId,confirm:M=>di(D,v.confirm(M))}})).apply(this,arguments)}class Qc{constructor(g,v){this.resolver=v,this.auth=function Tn(D){return D.wrapped()}(g)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(g){return di(_n(this.auth),this.resolver.resolveSignIn(g))}}class ho{constructor(g){this._delegate=g,this.multiFactor=function td(D){const g=(0,H.Ku)(D);return zl.has(g)||zl.set(g,jr._fromUser(g)),zl.get(g)}(g)}static getOrCreate(g){return ho.USER_MAP.has(g)||ho.USER_MAP.set(g,new ho(g)),ho.USER_MAP.get(g)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(g){return this._delegate.getIdTokenResult(g)}getIdToken(g){return this._delegate.getIdToken(g)}linkAndRetrieveDataWithCredential(g){return this.linkWithCredential(g)}linkWithCredential(g){var v=this;return(0,b.A)(function*(){return di(v.auth,ma(v._delegate,g))})()}linkWithPhoneNumber(g,v){var M=this;return(0,b.A)(function*(){return To(M.auth,function rd(D,g,v){return Ql.apply(this,arguments)}(M._delegate,g,v))})()}linkWithPopup(g){var v=this;return(0,b.A)(function*(){return di(v.auth,function pu(D,g,v){return mu.apply(this,arguments)}(v._delegate,g,pt))})()}linkWithRedirect(g){var v=this;return(0,b.A)(function*(){return yield V(jt(v.auth)),Ml(v._delegate,g,pt)})()}reauthenticateAndRetrieveDataWithCredential(g){return this.reauthenticateWithCredential(g)}reauthenticateWithCredential(g){var v=this;return(0,b.A)(function*(){return di(v.auth,yo(v._delegate,g))})()}reauthenticateWithPhoneNumber(g,v){return To(this.auth,function Dl(D,g,v){return ia.apply(this,arguments)}(this._delegate,g,v))}reauthenticateWithPopup(g){return di(this.auth,function mc(D,g,v){return sa.apply(this,arguments)}(this._delegate,g,pt))}reauthenticateWithRedirect(g){var v=this;return(0,b.A)(function*(){return yield V(jt(v.auth)),Pl(v._delegate,g,pt)})()}sendEmailVerification(g){return function uc(D,g){return Oi.apply(this,arguments)}(this._delegate,g)}unlink(g){var v=this;return(0,b.A)(function*(){return yield function za(D,g){return ao.apply(this,arguments)}(v._delegate,g),v})()}updateEmail(g){return function vd(D,g){const v=(0,H.Ku)(D);return(0,q._isFirebaseServerApp)(v.auth.app)?Promise.reject(Ze(v.auth)):Eo(v,g,null)}(this._delegate,g)}updatePassword(g){return function Ea(D,g){return Eo((0,H.Ku)(D),null,g)}(this._delegate,g)}updatePhoneNumber(g){return function Qa(D,g){return Wo.apply(this,arguments)}(this._delegate,g)}updateProfile(g){return function xc(D,g){return Al.apply(this,arguments)}(this._delegate,g)}verifyBeforeUpdateEmail(g,v){return function $o(D,g,v){return Jo.apply(this,arguments)}(this._delegate,g,v)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}ho.USER_MAP=new WeakMap;const Ll=ve;let hf=(()=>{class D{constructor(v,M){if(this.app=v,M.isInitialized())return this._delegate=M.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:te}=v.options;Ll(te,"invalid-api-key",{appName:v.name}),Ll(te,"invalid-api-key",{appName:v.name});const be=typeof window<"u"?pt:void 0;this._delegate=M.initialize({options:{persistence:Pu(te,v.name),popupRedirectResolver:be}}),this._delegate._updateErrorMap(Rt),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?ho.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(v){this._delegate.languageCode=v}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(v){this._delegate.tenantId=v}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(v,M){!function Kt(D,g,v){const M=jt(D);ve(M._canInitEmulator,M,"emulator-config-failed"),ve(/^https?:\/\//.test(g),M,"invalid-emulator-scheme");const te=!!v?.disableWarnings,be=Kn(g),{host:at,port:Bt}=function Rn(D){const g=Kn(D),v=/(\/\/)?([^?#/]+)/.exec(D.substr(g.length));if(!v)return{host:"",port:null};const M=v[2].split("@").pop()||"",te=/^(\[[^\]]+\])(:|$)/.exec(M);if(te){const be=te[1];return{host:be,port:mt(M.substr(be.length+1))}}{const[be,at]=M.split(":");return{host:be,port:mt(at)}}}(g);M.config.emulator={url:`${be}//${at}${null===Bt?"":`:${Bt}`}/`},M.settings.appVerificationDisabledForTesting=!0,M.emulatorConfig=Object.freeze({host:at,port:Bt,protocol:be.replace(":",""),options:Object.freeze({disableWarnings:te})}),te||function Ie(){function D(){const g=document.createElement("p"),v=g.style;g.innerText="Running in emulator mode. Do not use with production credentials.",v.position="fixed",v.width="100%",v.backgroundColor="#ffffff",v.border=".1em solid #000000",v.color="#b50000",v.bottom="0px",v.left="0px",v.margin="0px",v.zIndex="10000",v.textAlign="center",g.classList.add("firebase-emulator-warning"),document.body.appendChild(g)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",D):D())}()}(this._delegate,v,M)}applyActionCode(v){return function Ro(D,g){return Po.apply(this,arguments)}(this._delegate,v)}checkActionCode(v){return Ha(this._delegate,v)}confirmPasswordReset(v,M){return function ci(D,g,v){return zi.apply(this,arguments)}(this._delegate,v,M)}createUserWithEmailAndPassword(v,M){var te=this;return(0,b.A)(function*(){return di(te._delegate,function Ou(D,g,v){return jo.apply(this,arguments)}(te._delegate,v,M))})()}fetchProvidersForEmail(v){return this.fetchSignInMethodsForEmail(v)}fetchSignInMethodsForEmail(v){return function lc(D,g){return Wl.apply(this,arguments)}(this._delegate,v)}isSignInWithEmailLink(v){return function va(D,g){const v=mo.parseLink(g);return"EMAIL_SIGNIN"===v?.operation}(0,v)}getRedirectResult(){var v=this;return(0,b.A)(function*(){Ll(Dd(),v._delegate,"operation-not-supported-in-this-environment");const M=yield function ii(D,g){return ka.apply(this,arguments)}(v._delegate,pt);return M?di(v._delegate,Promise.resolve(M)):{credential:null,user:null}})()}addFrameworkForLogging(v){!function hh(D,g){jt(D)._logFramework(g)}(this._delegate,v)}onAuthStateChanged(v,M,te){const{next:be,error:at,complete:Bt}=ff(v,M,te);return this._delegate.onAuthStateChanged(be,at,Bt)}onIdTokenChanged(v,M,te){const{next:be,error:at,complete:Bt}=ff(v,M,te);return this._delegate.onIdTokenChanged(be,at,Bt)}sendSignInLinkToEmail(v,M){return function Mo(D,g,v){return ac.apply(this,arguments)}(this._delegate,v,M)}sendPasswordResetEmail(v,M){return function Pa(D,g,v){return rl.apply(this,arguments)}(this._delegate,v,M||void 0)}setPersistence(v){var M=this;return(0,b.A)(function*(){let te;switch(function T(D,g){h(Object.values(y).includes(g),D,"invalid-persistence-type"),(0,H.lV)()?h(g!==y.SESSION,D,"unsupported-persistence-type"):(0,H.Ll)()?h(g===y.NONE,D,"unsupported-persistence-type"):Hu()?h(g===y.NONE||g===y.LOCAL&&(0,H.zW)(),D,"unsupported-persistence-type"):h(g===y.NONE||Qd(),D,"unsupported-persistence-type")}(M._delegate,v),v){case y.SESSION:te=Oo;break;case y.LOCAL:te=(yield Yn(W)._isAvailable())?W:bs;break;case y.NONE:te=bi;break;default:return Ke("argument-error",{appName:M._delegate.name})}return M._delegate.setPersistence(te)})()}signInAndRetrieveDataWithCredential(v){return this.signInWithCredential(v)}signInAnonymously(){return di(this._delegate,function nl(D){return _o.apply(this,arguments)}(this._delegate))}signInWithCredential(v){return di(this._delegate,co(this._delegate,v))}signInWithCustomToken(v){return di(this._delegate,function Mu(D,g){return hs.apply(this,arguments)}(this._delegate,v))}signInWithEmailAndPassword(v,M){return di(this._delegate,function Oc(D,g,v){return(0,q._isFirebaseServerApp)(D.app)?Promise.reject(Ze(D)):co((0,H.Ku)(D),ss.credential(g,v)).catch(function(){var M=(0,b.A)(function*(te){throw"auth/password-does-not-meet-requirements"===te.code&&Bo(D),te});return function(te){return M.apply(this,arguments)}}())}(this._delegate,v,M))}signInWithEmailLink(v,M){return di(this._delegate,function Ma(D,g,v){return cc.apply(this,arguments)}(this._delegate,v,M))}signInWithPhoneNumber(v,M){return To(this._delegate,function Nu(D,g,v){return Uc.apply(this,arguments)}(this._delegate,v,M))}signInWithPopup(v){var M=this;return(0,b.A)(function*(){return Ll(Dd(),M._delegate,"operation-not-supported-in-this-environment"),di(M._delegate,function ul(D,g,v){return pc.apply(this,arguments)}(M._delegate,v,pt))})()}signInWithRedirect(v){var M=this;return(0,b.A)(function*(){return Ll(Dd(),M._delegate,"operation-not-supported-in-this-environment"),yield V(M._delegate),dl(M._delegate,v,pt)})()}updateCurrentUser(v){return this._delegate.updateCurrentUser(v)}verifyPasswordResetCode(v){return function oc(D,g){return ya.apply(this,arguments)}(this._delegate,v)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return D.Persistence=y,D})();function ff(D,g,v){let M=D;"function"!=typeof D&&({next:M,error:g,complete:v}=D);const te=M;return{next:at=>te(at&&ho.getOrCreate(at)),error:g,complete:v}}function Pu(D,g){const v=function se(D,g){const v=Me();if(!v)return[];const M=Lr(f,D,g);switch(v.getItem(M)){case y.NONE:return[bi];case y.LOCAL:return[W,Oo];case y.SESSION:return[Oo];default:return[]}}(D,g);if(typeof self<"u"&&!v.includes(W)&&v.push(W),typeof window<"u")for(const M of[bs,Oo])v.includes(M)||v.push(M);return v.includes(bi)||v.push(bi),v}class ph{constructor(){this.providerId="phone",this._delegate=new fc(_n($.A.auth()))}static credential(g,v){return fc.credential(g,v)}verifyPhoneNumber(g,v){return this._delegate.verifyPhoneNumber(g,v)}unwrap(){return this._delegate}}ph.PHONE_SIGN_IN_METHOD=fc.PHONE_SIGN_IN_METHOD,ph.PROVIDER_ID=fc.PROVIDER_ID;const mh=ve;class Yd{constructor(g,v,M=$.A.app()){var te;mh(null===(te=M.options)||void 0===te?void 0:te.apiKey,"invalid-api-key",{appName:M.name}),this._delegate=new zd(M.auth(),g,v),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Tp(D){D.INTERNAL.registerComponent(new Le.uA("auth-compat",g=>{const v=g.getProvider("app-compat").getImmediate(),M=g.getProvider("auth");return new hf(v,M)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:ss,FacebookAuthProvider:qs,GithubAuthProvider:pa,GoogleAuthProvider:Mi,OAuthProvider:Sa,SAMLAuthProvider:Rc,PhoneAuthProvider:ph,PhoneMultiFactorGenerator:Zl,RecaptchaVerifier:Yd,TwitterAuthProvider:$a,Auth:hf,AuthCredential:he,Error:H.g}).setInstantiationMode("LAZY").setMultipleInstances(!1)),D.registerVersion("@firebase/auth-compat","0.5.14")}($.A)},2784:(Cn,nt,x)=>{x.d(nt,{aQ:()=>b.aQ,aU:()=>b.aU,rJ:()=>b.rJ});var b=x(9583)},6749:(Cn,nt,x)=>{x.d(nt,{P2:()=>Et});var b=x(4523);const $=(Ge,me)=>me.some(ve=>Ge instanceof ve);let q,H;const Le=new WeakMap,Ne=new WeakMap,Pe=new WeakMap,K=new WeakMap,Ae=new WeakMap;let tt={get(Ge,me,ve){if(Ge instanceof IDBTransaction){if("done"===me)return Ne.get(Ge);if("objectStoreNames"===me)return Ge.objectStoreNames||Pe.get(Ge);if("store"===me)return ve.objectStoreNames[1]?void 0:ve.objectStore(ve.objectStoreNames[0])}return Pt(Ge[me])},set:(Ge,me,ve)=>(Ge[me]=ve,!0),has:(Ge,me)=>Ge instanceof IDBTransaction&&("done"===me||"store"===me)||me in Ge};function Gt(Ge){return"function"==typeof Ge?function Ft(Ge){return Ge!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Fe(){return H||(H=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(Ge)?function(...me){return Ge.apply(hn(this),me),Pt(Le.get(this))}:function(...me){return Pt(Ge.apply(hn(this),me))}:function(me,...ve){const At=Ge.call(hn(this),me,...ve);return Pe.set(At,me.sort?me.sort():[me]),Pt(At)}}(Ge):(Ge instanceof IDBTransaction&&function ot(Ge){if(Ne.has(Ge))return;const me=new Promise((ve,At)=>{const Jt=()=>{Ge.removeEventListener("complete",Nt),Ge.removeEventListener("error",Yt),Ge.removeEventListener("abort",Yt)},Nt=()=>{ve(),Jt()},Yt=()=>{At(Ge.error||new DOMException("AbortError","AbortError")),Jt()};Ge.addEventListener("complete",Nt),Ge.addEventListener("error",Yt),Ge.addEventListener("abort",Yt)});Ne.set(Ge,me)}(Ge),$(Ge,function Ee(){return q||(q=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(Ge,tt):Ge)}function Pt(Ge){if(Ge instanceof IDBRequest)return function He(Ge){const me=new Promise((ve,At)=>{const Jt=()=>{Ge.removeEventListener("success",Nt),Ge.removeEventListener("error",Yt)},Nt=()=>{ve(Pt(Ge.result)),Jt()},Yt=()=>{At(Ge.error),Jt()};Ge.addEventListener("success",Nt),Ge.addEventListener("error",Yt)});return me.then(ve=>{ve instanceof IDBCursor&&Le.set(ve,Ge)}).catch(()=>{}),Ae.set(me,Ge),me}(Ge);if(K.has(Ge))return K.get(Ge);const me=Gt(Ge);return me!==Ge&&(K.set(Ge,me),Ae.set(me,Ge)),me}const hn=Ge=>Ae.get(Ge);function Et(Ge,me,{blocked:ve,upgrade:At,blocking:Jt,terminated:Nt}={}){const Yt=indexedDB.open(Ge,me),an=Pt(Yt);return At&&Yt.addEventListener("upgradeneeded",$t=>{At(Pt(Yt.result),$t.oldVersion,$t.newVersion,Pt(Yt.transaction),$t)}),ve&&Yt.addEventListener("blocked",$t=>ve($t.oldVersion,$t.newVersion,$t)),an.then($t=>{Nt&&$t.addEventListener("close",()=>Nt()),Jt&&$t.addEventListener("versionchange",ye=>Jt(ye.oldVersion,ye.newVersion,ye))}).catch(()=>{}),an}const Ke=["get","getKey","getAll","getAllKeys","count"],Qe=["put","add","delete","clear"],ct=new Map;function Ze(Ge,me){if(!(Ge instanceof IDBDatabase)||me in Ge||"string"!=typeof me)return;if(ct.get(me))return ct.get(me);const ve=me.replace(/FromIndex$/,""),At=me!==ve,Jt=Qe.includes(ve);if(!(ve in(At?IDBIndex:IDBObjectStore).prototype)||!Jt&&!Ke.includes(ve))return;const Nt=function(){var Yt=(0,b.A)(function*(an,...$t){const ye=this.transaction(an,Jt?"readwrite":"readonly");let Ye=ye.store;return At&&(Ye=Ye.index($t.shift())),(yield Promise.all([Ye[ve](...$t),Jt&&ye.done]))[0]});return function($t){return Yt.apply(this,arguments)}}();return ct.set(me,Nt),Nt}!function Rt(Ge){tt=Ge(tt)}(Ge=>({...Ge,get:(me,ve,At)=>Ze(me,ve)||Ge.get(me,ve,At),has:(me,ve)=>!!Ze(me,ve)||Ge.has(me,ve)}))},1635:(Cn,nt,x)=>{function H(et,gt){var Mt={};for(var ft in et)Object.prototype.hasOwnProperty.call(et,ft)&&gt.indexOf(ft)<0&&(Mt[ft]=et[ft]);if(null!=et&&"function"==typeof Object.getOwnPropertySymbols){var Ct=0;for(ft=Object.getOwnPropertySymbols(et);Ct<ft.length;Ct++)gt.indexOf(ft[Ct])<0&&Object.prototype.propertyIsEnumerable.call(et,ft[Ct])&&(Mt[ft[Ct]]=et[ft[Ct]])}return Mt}function He(et,gt,Mt,ft){return new(Mt||(Mt=Promise))(function(ln,nr){function hr(fr){try{sr(ft.next(fr))}catch(Jn){nr(Jn)}}function Cr(fr){try{sr(ft.throw(fr))}catch(Jn){nr(Jn)}}function sr(fr){fr.done?ln(fr.value):function Ct(ln){return ln instanceof Mt?ln:new Mt(function(nr){nr(ln)})}(fr.value).then(hr,Cr)}sr((ft=ft.apply(et,gt||[])).next())})}function kt(et){return this instanceof kt?(this.v=et,this):new kt(et)}function Ke(et,gt,Mt){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ct,ft=Mt.apply(et,gt||[]),ln=[];return Ct=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),hr("next"),hr("throw"),hr("return",function nr(vr){return function($n){return Promise.resolve($n).then(vr,Jn)}}),Ct[Symbol.asyncIterator]=function(){return this},Ct;function hr(vr,$n){ft[vr]&&(Ct[vr]=function(qn){return new Promise(function(gi,st){ln.push([vr,qn,gi,st])>1||Cr(vr,qn)})},$n&&(Ct[vr]=$n(Ct[vr])))}function Cr(vr,$n){try{!function sr(vr){vr.value instanceof kt?Promise.resolve(vr.value.v).then(fr,Jn):Rr(ln[0][2],vr)}(ft[vr]($n))}catch(qn){Rr(ln[0][3],qn)}}function fr(vr){Cr("next",vr)}function Jn(vr){Cr("throw",vr)}function Rr(vr,$n){vr($n),ln.shift(),ln.length&&Cr(ln[0][0],ln[0][1])}}function ct(et){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Mt,gt=et[Symbol.asyncIterator];return gt?gt.call(et):(et=function Ft(et){var gt="function"==typeof Symbol&&Symbol.iterator,Mt=gt&&et[gt],ft=0;if(Mt)return Mt.call(et);if(et&&"number"==typeof et.length)return{next:function(){return et&&ft>=et.length&&(et=void 0),{value:et&&et[ft++],done:!et}}};throw new TypeError(gt?"Object is not iterable.":"Symbol.iterator is not defined.")}(et),Mt={},ft("next"),ft("throw"),ft("return"),Mt[Symbol.asyncIterator]=function(){return this},Mt);function ft(ln){Mt[ln]=et[ln]&&function(nr){return new Promise(function(hr,Cr){!function Ct(ln,nr,hr,Cr){Promise.resolve(Cr).then(function(sr){ln({value:sr,done:hr})},nr)}(hr,Cr,(nr=et[ln](nr)).done,nr.value)})}}}x.d(nt,{AQ:()=>Ke,N3:()=>kt,Tt:()=>H,sH:()=>He,xN:()=>ct}),"function"==typeof SuppressedError&&SuppressedError}},Cn=>{Cn(Cn.s=7074)}]);